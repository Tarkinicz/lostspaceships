// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(t,e)=>function(){return e||(0,t[__getOwnPropNames(t)[0]])((e={exports:{}}).exports,e),e.exports},__copyProps=(e,s,i,r)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let t of __getOwnPropNames(s))__hasOwnProp.call(e,t)||t===i||__defProp(e,t,{get:()=>s[t],enumerable:!(r=__getOwnPropDesc(s,t))||r.enumerable});return e},__toESM=(t,e,s)=>(s=null!=t?__create(__getProtoOf(t)):{},__copyProps(!e&&t&&t.__esModule?s:__defProp(s,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let setMatrixArrayType2=function(t){ARRAY_TYPE=t},toRadian2=function(t){return t*degree},equals$92=function(t,e){return Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$82=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},clone$82=function(t){var e=new ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},copy$82=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},identity$52=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},fromValues$82=function(t,e,s,i){var r=new ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=s,r[3]=i,r},set$82=function(t,e,s,i,r){return t[0]=e,t[1]=s,t[2]=i,t[3]=r,t},transpose$22=function(t,e){var s;return t===e?(s=e[1],t[1]=e[2],t[2]=s):(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3]),t},invert$52=function(t,e){var s=e[0],i=e[1],r=e[2],n=s*(e=e[3])-r*i;return n?(t[0]=e*(n=1/n),t[1]=-i*n,t[2]=-r*n,t[3]=s*n,t):null},adjoint$22=function(t,e){var s=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=s,t},determinant$32=function(t){return t[0]*t[3]-t[2]*t[1]},multiply$82=function(t,e,s){var i=e[0],r=e[1],n=e[2],e=e[3],h=s[0],o=s[1],a=s[2],s=s[3];return t[0]=i*h+n*o,t[1]=r*h+e*o,t[2]=i*a+n*s,t[3]=r*a+e*s,t},rotate$42=function(t,e,s){var i=e[0],r=e[1],n=e[2],e=e[3],h=Math.sin(s),s=Math.cos(s);return t[0]=i*s+n*h,t[1]=r*s+e*h,t[2]=i*-h+n*s,t[3]=r*-h+e*s,t},scale$82=function(t,e,s){var i=e[0],r=e[1],n=e[2],e=e[3],h=s[0],s=s[1];return t[0]=i*h,t[1]=r*h,t[2]=n*s,t[3]=e*s,t},fromRotation$42=function(t,e){var s=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=s,t[2]=-s,t[3]=e,t},fromScaling$32=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},str$82=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},frob$32=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},LDU2=function(t,e,s,i){return t[2]=i[2]/i[0],s[0]=i[0],s[1]=i[1],s[3]=i[3]-t[2]*s[1],[t,e,s]},add$82=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t},subtract$62=function(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t},exactEquals$82=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},equals$82=function(t,e){var s=t[0],i=t[1],r=t[2],t=t[3],n=e[0],h=e[1],o=e[2],e=e[3];return Math.abs(s-n)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(n))&&Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-o)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},multiplyScalar$32=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t},multiplyScalarAndAdd$32=function(t,e,s,i){return t[0]=e[0]+s[0]*i,t[1]=e[1]+s[1]*i,t[2]=e[2]+s[2]*i,t[3]=e[3]+s[3]*i,t},create$72=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},clone$72=function(t){var e=new ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},copy$72=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},identity$42=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},fromValues$72=function(t,e,s,i,r,n){var h=new ARRAY_TYPE(6);return h[0]=t,h[1]=e,h[2]=s,h[3]=i,h[4]=r,h[5]=n,h},set$72=function(t,e,s,i,r,n,h){return t[0]=e,t[1]=s,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t},invert$42=function(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],h=e[4],e=e[5],o=s*n-i*r;return o?(t[0]=n*(o=1/o),t[1]=-i*o,t[2]=-r*o,t[3]=s*o,t[4]=(r*e-n*h)*o,t[5]=(i*h-s*e)*o,t):null},determinant$22=function(t){return t[0]*t[3]-t[1]*t[2]},multiply$72=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],e=e[5],a=s[0],l=s[1],c=s[2],u=s[3],f=s[4],s=s[5];return t[0]=i*a+n*l,t[1]=r*a+h*l,t[2]=i*c+n*u,t[3]=r*c+h*u,t[4]=i*f+n*s+o,t[5]=r*f+h*s+e,t},rotate$32=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],e=e[5],a=Math.sin(s),s=Math.cos(s);return t[0]=i*s+n*a,t[1]=r*s+h*a,t[2]=i*-a+n*s,t[3]=r*-a+h*s,t[4]=o,t[5]=e,t},scale$72=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],e=e[5],a=s[0],s=s[1];return t[0]=i*a,t[1]=r*a,t[2]=n*s,t[3]=h*s,t[4]=o,t[5]=e,t},translate$32=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],e=e[5],a=s[0],s=s[1];return t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=i*a+n*s+o,t[5]=r*a+h*s+e,t},fromRotation$32=function(t,e){var s=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=s,t[2]=-s,t[3]=e,t[4]=0,t[5]=0,t},fromScaling$22=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},fromTranslation$32=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},str$72=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},frob$22=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},add$72=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t[4]=e[4]+s[4],t[5]=e[5]+s[5],t},subtract$52=function(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t[4]=e[4]-s[4],t[5]=e[5]-s[5],t},multiplyScalar$22=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*s,t[5]=e[5]*s,t},multiplyScalarAndAdd$22=function(t,e,s,i){return t[0]=e[0]+s[0]*i,t[1]=e[1]+s[1]*i,t[2]=e[2]+s[2]*i,t[3]=e[3]+s[3]*i,t[4]=e[4]+s[4]*i,t[5]=e[5]+s[5]*i,t},exactEquals$72=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},equals$72=function(t,e){var s=t[0],i=t[1],r=t[2],n=t[3],h=t[4],t=t[5],o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],e=e[5];return Math.abs(s-o)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(i-a)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(h-u)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$62=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},fromMat4$12=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},clone$62=function(t){var e=new ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},copy$62=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromValues$62=function(t,e,s,i,r,n,h,o,a){var l=new ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=s,l[3]=i,l[4]=r,l[5]=n,l[6]=h,l[7]=o,l[8]=a,l},set$62=function(t,e,s,i,r,n,h,o,a,l){return t[0]=e,t[1]=s,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},identity$32=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose$12=function(t,e){var s,i,r;return t===e?(s=e[1],i=e[2],r=e[5],t[1]=e[3],t[2]=e[6],t[3]=s,t[5]=e[7],t[6]=i,t[7]=r):(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]),t},invert$32=function(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],h=e[4],o=e[5],a=e[6],l=e[7],c=(e=e[8])*h-o*l,u=-e*n+o*a,f=l*n-h*a,d=s*c+i*u+r*f;return d?(t[0]=c*(d=1/d),t[1]=(-e*i+r*l)*d,t[2]=(o*i-r*h)*d,t[3]=u*d,t[4]=(e*s-r*a)*d,t[5]=(-o*s+r*n)*d,t[6]=f*d,t[7]=(-l*s+i*a)*d,t[8]=(h*s-i*n)*d,t):null},adjoint$12=function(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],h=e[4],o=e[5],a=e[6],l=e[7],e=e[8];return t[0]=h*e-o*l,t[1]=r*l-i*e,t[2]=i*o-r*h,t[3]=o*a-n*e,t[4]=s*e-r*a,t[5]=r*n-s*o,t[6]=n*l-h*a,t[7]=i*a-s*l,t[8]=s*h-i*n,t},determinant$12=function(t){var e=t[0],s=t[3],i=t[4],r=t[5],n=t[6],h=t[7],o=t[8];return e*(o*i-r*h)+t[1]*(-o*s+r*n)+t[2]*(h*s-i*n)},multiply$62=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],e=e[8],u=s[0],f=s[1],d=s[2],p=s[3],m=s[4],C=s[5],g=s[6],S=s[7],s=s[8];return t[0]=u*i+f*h+d*l,t[1]=u*r+f*o+d*c,t[2]=u*n+f*a+d*e,t[3]=p*i+m*h+C*l,t[4]=p*r+m*o+C*c,t[5]=p*n+m*a+C*e,t[6]=g*i+S*h+s*l,t[7]=g*r+S*o+s*c,t[8]=g*n+S*a+s*e,t},translate$22=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],e=e[8],u=s[0],s=s[1];return t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=o,t[5]=a,t[6]=u*i+s*h+l,t[7]=u*r+s*o+c,t[8]=u*n+s*a+e,t},rotate$22=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],e=e[8],u=Math.sin(s),s=Math.cos(s);return t[0]=s*i+u*h,t[1]=s*r+u*o,t[2]=s*n+u*a,t[3]=s*h-u*i,t[4]=s*o-u*r,t[5]=s*a-u*n,t[6]=l,t[7]=c,t[8]=e,t},scale$62=function(t,e,s){var i=s[0],s=s[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromTranslation$22=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},fromRotation$22=function(t,e){var s=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=s,t[2]=0,t[3]=-s,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling$12=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d2=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},fromQuat$12=function(t,e){var s=e[0],i=e[2],r=i+i,s=s*(l=s+s),n=(h=e[1])*l,h=h*(c=h+h),o=i*l,a=i*c,l=(e=e[3])*l,c=e*c,e=e*r;return t[0]=1-h-(i=i*r),t[3]=n-e,t[6]=o+c,t[1]=n+e,t[4]=1-s-i,t[7]=a-l,t[2]=o-c,t[5]=a+l,t[8]=1-s-h,t},normalFromMat42=function(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],h=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11],p=e[12],m=e[13],C=e[14],g=s*o-i*h,S=s*a-r*h,y=s*l-n*h,T=i*a-r*o,_=i*l-n*o,E=r*l-n*a,A=c*m-u*p,I=c*C-f*p,w=u*C-f*m;return(d=g*(f=f*(e=e[15])-d*C)-S*(u=u*e-d*m)+y*w+T*(c=c*e-d*p)-_*I+E*A)?(t[0]=(o*f-a*u+l*w)*(d=1/d),t[1]=(a*c-h*f-l*I)*d,t[2]=(h*u-o*c+l*A)*d,t[3]=(r*u-i*f-n*w)*d,t[4]=(s*f-r*c+n*I)*d,t[5]=(i*c-s*u-n*A)*d,t[6]=(m*E-C*_+e*T)*d,t[7]=(C*y-p*E-e*S)*d,t[8]=(p*_-m*y+e*g)*d,t):null},projection2=function(t,e,s){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/s,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str$62=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob$12=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},add$62=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t[4]=e[4]+s[4],t[5]=e[5]+s[5],t[6]=e[6]+s[6],t[7]=e[7]+s[7],t[8]=e[8]+s[8],t},subtract$42=function(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t[4]=e[4]-s[4],t[5]=e[5]-s[5],t[6]=e[6]-s[6],t[7]=e[7]-s[7],t[8]=e[8]-s[8],t},multiplyScalar$12=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*s,t},multiplyScalarAndAdd$12=function(t,e,s,i){return t[0]=e[0]+s[0]*i,t[1]=e[1]+s[1]*i,t[2]=e[2]+s[2]*i,t[3]=e[3]+s[3]*i,t[4]=e[4]+s[4]*i,t[5]=e[5]+s[5]*i,t[6]=e[6]+s[6]*i,t[7]=e[7]+s[7]*i,t[8]=e[8]+s[8]*i,t},exactEquals$62=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},equals$62=function(t,e){var s=t[0],i=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=t[6],l=t[7],t=t[8],c=e[0],u=e[1],f=e[2],d=e[3],p=e[4],m=e[5],C=e[6],g=e[7],e=e[8];return Math.abs(s-c)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(i-u)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(r-f)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(h-p)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-C)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(l-g)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$52=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone$52=function(t){var e=new ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},copy$52=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues$52=function(t,e,s,i,r,n,h,o,a,l,c,u,f,d,p,m){var C=new ARRAY_TYPE(16);return C[0]=t,C[1]=e,C[2]=s,C[3]=i,C[4]=r,C[5]=n,C[6]=h,C[7]=o,C[8]=a,C[9]=l,C[10]=c,C[11]=u,C[12]=f,C[13]=d,C[14]=p,C[15]=m,C},set$52=function(t,e,s,i,r,n,h,o,a,l,c,u,f,d,p,m,C){return t[0]=e,t[1]=s,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=c,t[10]=u,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=C,t},identity$22=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},transpose2=function(t,e){var s,i,r,n,h,o;return t===e?(s=e[1],i=e[2],r=e[3],n=e[6],h=e[7],o=e[11],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=s,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=n,t[11]=e[14],t[12]=r,t[13]=h,t[14]=o):(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]),t},invert$22=function(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],h=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11],p=e[12],m=e[13],C=e[14],g=s*o-i*h,S=s*a-r*h,y=s*l-n*h,T=i*a-r*o,_=i*l-n*o,E=r*l-n*a,A=c*m-u*p,I=c*C-f*p,w=c*(e=e[15])-d*p,R=u*C-f*m,M=u*e-d*m,b=f*e-d*C,v=g*b-S*M+y*R+T*w-_*I+E*A;return v?(t[0]=(o*b-a*M+l*R)*(v=1/v),t[1]=(r*M-i*b-n*R)*v,t[2]=(m*E-C*_+e*T)*v,t[3]=(f*_-u*E-d*T)*v,t[4]=(a*w-h*b-l*I)*v,t[5]=(s*b-r*w+n*I)*v,t[6]=(C*y-p*E-e*S)*v,t[7]=(c*E-f*y+d*S)*v,t[8]=(h*M-o*w+l*A)*v,t[9]=(i*w-s*M-n*A)*v,t[10]=(p*_-m*y+e*g)*v,t[11]=(u*y-c*_-d*g)*v,t[12]=(o*I-h*R-a*A)*v,t[13]=(s*R-i*I+r*A)*v,t[14]=(m*S-p*T-C*g)*v,t[15]=(c*T-u*S+f*g)*v,t):null},adjoint2=function(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],h=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11],p=e[12],m=e[13],C=e[14],g=s*o-i*h,S=s*a-r*h,y=s*l-n*h,T=i*a-r*o,_=i*l-n*o,E=r*l-n*a,A=c*m-u*p,I=c*C-f*p,w=c*(e=e[15])-d*p,R=u*C-f*m,M=u*e-d*m,b=f*e-d*C;return t[0]=o*b-a*M+l*R,t[1]=r*M-i*b-n*R,t[2]=m*E-C*_+e*T,t[3]=f*_-u*E-d*T,t[4]=a*w-h*b-l*I,t[5]=s*b-r*w+n*I,t[6]=C*y-p*E-e*S,t[7]=c*E-f*y+d*S,t[8]=h*M-o*w+l*A,t[9]=i*w-s*M-n*A,t[10]=p*_-m*y+e*g,t[11]=u*y-c*_-d*g,t[12]=o*I-h*R-a*A,t[13]=s*R-i*I+r*A,t[14]=m*S-p*T-C*g,t[15]=c*T-u*S+f*g,t},determinant2=function(t){var e=t[0],s=t[1],i=t[2],r=t[4],n=t[5],h=t[6],o=t[8],a=t[9],l=t[10],c=t[12],u=t[13],f=t[14],d=e*n-s*r,p=e*h-i*r,m=s*h-i*n,C=o*u-a*c,g=o*f-l*c,S=a*f-l*u;return t[7]*(e*S-s*g+i*C)-t[3]*(r*S-n*g+h*C)+t[15]*(o*m-a*p+l*d)-t[11]*(c*m-u*p+f*d)},multiply$52=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],p=e[11],m=e[12],C=e[13],g=e[14],e=e[15],S=s[0],y=s[1],T=s[2],_=s[3];return t[0]=S*i+y*o+T*u+_*m,t[1]=S*r+y*a+T*f+_*C,t[2]=S*n+y*l+T*d+_*g,t[3]=S*h+y*c+T*p+_*e,t[4]=(S=s[4])*i+(y=s[5])*o+(T=s[6])*u+(_=s[7])*m,t[5]=S*r+y*a+T*f+_*C,t[6]=S*n+y*l+T*d+_*g,t[7]=S*h+y*c+T*p+_*e,t[8]=(S=s[8])*i+(y=s[9])*o+(T=s[10])*u+(_=s[11])*m,t[9]=S*r+y*a+T*f+_*C,t[10]=S*n+y*l+T*d+_*g,t[11]=S*h+y*c+T*p+_*e,t[12]=(S=s[12])*i+(y=s[13])*o+(T=s[14])*u+(_=s[15])*m,t[13]=S*r+y*a+T*f+_*C,t[14]=S*n+y*l+T*d+_*g,t[15]=S*h+y*c+T*p+_*e,t},translate$12=function(t,e,s){var i,r,n,h,o,a,l,c,u,f,d,p,m=s[0],C=s[1],s=s[2];return e===t?(t[12]=e[0]*m+e[4]*C+e[8]*s+e[12],t[13]=e[1]*m+e[5]*C+e[9]*s+e[13],t[14]=e[2]*m+e[6]*C+e[10]*s+e[14],t[15]=e[3]*m+e[7]*C+e[11]*s+e[15]):(i=e[0],r=e[1],n=e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],p=e[11],t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=c,t[8]=u,t[9]=f,t[10]=d,t[11]=p,t[12]=i*m+o*C+u*s+e[12],t[13]=r*m+a*C+f*s+e[13],t[14]=n*m+l*C+d*s+e[14],t[15]=h*m+c*C+p*s+e[15]),t},scale$52=function(t,e,s){var i=s[0],r=s[1],s=s[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},rotate$12=function(t,e,s,i){var r,n,h,o,a,l,c,u,f,d,p,m,C,g,S,y,T,_,E,A,I=i[0],w=i[1],i=i[2],R=Math.hypot(I,w,i);return R<EPSILON?null:(I*=R=1/R,w*=R,i*=R,R=Math.sin(s),s=Math.cos(s),n=e[0],h=e[1],o=e[2],a=e[3],c=e[5],u=e[6],f=e[7],p=e[9],m=e[10],C=e[11],S=I*w*(r=1-s)-i*R,y=w*w*r+s,T=i*w*r+I*R,_=I*i*r+w*R,E=w*i*r-I*R,A=i*i*r+s,t[0]=n*(s=I*I*r+s)+(l=e[4])*(g=w*I*r+i*R)+(d=e[8])*(i=i*I*r-w*R),t[1]=h*s+c*g+p*i,t[2]=o*s+u*g+m*i,t[3]=a*s+f*g+C*i,t[4]=n*S+l*y+d*T,t[5]=h*S+c*y+p*T,t[6]=o*S+u*y+m*T,t[7]=a*S+f*y+C*T,t[8]=n*_+l*E+d*A,t[9]=h*_+c*E+p*A,t[10]=o*_+u*E+m*A,t[11]=a*_+f*E+C*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},rotateX$32=function(t,e,s){var i=Math.sin(s),s=Math.cos(s),r=e[4],n=e[5],h=e[6],o=e[7],a=e[8],l=e[9],c=e[10],u=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*s+a*i,t[5]=n*s+l*i,t[6]=h*s+c*i,t[7]=o*s+u*i,t[8]=a*s-r*i,t[9]=l*s-n*i,t[10]=c*s-h*i,t[11]=u*s-o*i,t},rotateY$32=function(t,e,s){var i=Math.sin(s),s=Math.cos(s),r=e[0],n=e[1],h=e[2],o=e[3],a=e[8],l=e[9],c=e[10],u=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*s-a*i,t[1]=n*s-l*i,t[2]=h*s-c*i,t[3]=o*s-u*i,t[8]=r*i+a*s,t[9]=n*i+l*s,t[10]=h*i+c*s,t[11]=o*i+u*s,t},rotateZ$32=function(t,e,s){var i=Math.sin(s),s=Math.cos(s),r=e[0],n=e[1],h=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*s+a*i,t[1]=n*s+l*i,t[2]=h*s+c*i,t[3]=o*s+u*i,t[4]=a*s-r*i,t[5]=l*s-n*i,t[6]=c*s-h*i,t[7]=u*s-o*i,t},fromTranslation$12=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},fromScaling2=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation$12=function(t,e,s){var i,r=s[0],n=s[1],s=s[2],h=Math.hypot(r,n,s);return h<EPSILON?null:(r*=h=1/h,n*=h,s*=h,h=Math.sin(e),e=Math.cos(e),t[0]=r*r*(i=1-e)+e,t[1]=n*r*i+s*h,t[2]=s*r*i-n*h,t[3]=0,t[4]=r*n*i-s*h,t[5]=n*n*i+e,t[6]=s*n*i+r*h,t[7]=0,t[8]=r*s*i+n*h,t[9]=n*s*i-r*h,t[10]=s*s*i+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation2=function(t,e){var s=Math.sin(e),e=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=s,t[7]=0,t[8]=0,t[9]=-s,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation2=function(t,e){var s=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=0,t[2]=-s,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=s,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation2=function(t,e){var s=Math.sin(e),e=Math.cos(e);return t[0]=e,t[1]=s,t[2]=0,t[3]=0,t[4]=-s,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation$12=function(t,e,s){var i=e[0],r=e[2],n=r+r,h=i*(c=i+i),o=i*(u=(l=e[1])+l),i=i*n,a=l*u,l=l*n,c=(e=e[3])*c,u=e*u,e=e*n;return t[0]=1-(a+(r=r*n)),t[1]=o+e,t[2]=i-u,t[3]=0,t[4]=o-e,t[5]=1-(h+r),t[6]=l+c,t[7]=0,t[8]=i+u,t[9]=l-c,t[10]=1-(h+a),t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},fromQuat22=function(t,e){var s=new ARRAY_TYPE(3),i=-e[0],r=-e[1],n=-e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=i*i+r*r+n*n+h*h;return 0<u?(s[0]=2*(o*h+c*i+a*n-l*r)/u,s[1]=2*(a*h+c*r+l*i-o*n)/u,s[2]=2*(l*h+c*n+o*r-a*i)/u):(s[0]=2*(o*h+c*i+a*n-l*r),s[1]=2*(a*h+c*r+l*i-o*n),s[2]=2*(l*h+c*n+o*r-a*i)),fromRotationTranslation$12(t,e,s),t},getTranslation$12=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},getScaling2=function(t,e){var s=e[0],i=e[4],r=e[5],n=e[6],h=e[8],o=e[9],a=e[10];return t[0]=Math.hypot(s,e[1],e[2]),t[1]=Math.hypot(i,r,n),t[2]=Math.hypot(h,o,a),t},getRotation2=function(t,e){var s=new ARRAY_TYPE(3),i=(getScaling2(s,e),1/s[0]),r=1/s[1],s=1/s[2],n=e[0]*i,h=e[1]*r,o=e[2]*s,a=e[4]*i,l=e[5]*r,c=e[6]*s,i=e[8]*i,r=e[9]*r,u=0;return 0<(s=n+l+(e=e[10]*s))?(u=2*Math.sqrt(1+s),t[3]=.25*u,t[0]=(c-r)/u,t[1]=(i-o)/u,t[2]=(h-a)/u):l<n&&e<n?(u=2*Math.sqrt(1+n-l-e),t[3]=(c-r)/u,t[0]=.25*u,t[1]=(h+a)/u,t[2]=(i+o)/u):e<l?(u=2*Math.sqrt(1+l-n-e),t[3]=(i-o)/u,t[0]=(h+a)/u,t[1]=.25*u,t[2]=(c+r)/u):(u=2*Math.sqrt(1+e-n-l),t[3]=(h-a)/u,t[0]=(i+o)/u,t[1]=(c+r)/u,t[2]=.25*u),t},decompose2=function(t,e,s,i){e[0]=i[12],e[1]=i[13],e[2]=i[14];var e=i[0],r=i[1],n=i[2],h=i[4],o=i[5],a=i[6],l=i[8],c=i[9],i=i[10],u=(s[0]=Math.hypot(e,r,n),s[1]=Math.hypot(h,o,a),s[2]=Math.hypot(l,c,i),1/s[0]),f=1/s[1],e=e*u,r=r*f,n=n*(s=1/s[2]),h=h*u,a=a*s,l=l*u,u=c*f,c=i*s,i=0;return 0<(f=e+(o=o*f)+c)?(i=2*Math.sqrt(1+f),t[3]=.25*i,t[0]=(a-u)/i,t[1]=(l-n)/i,t[2]=(r-h)/i):o<e&&c<e?(i=2*Math.sqrt(1+e-o-c),t[3]=(a-u)/i,t[0]=.25*i,t[1]=(r+h)/i,t[2]=(l+n)/i):c<o?(i=2*Math.sqrt(1+o-e-c),t[3]=(l-n)/i,t[0]=(r+h)/i,t[1]=.25*i,t[2]=(a+u)/i):(i=2*Math.sqrt(1+c-e-o),t[3]=(r-h)/i,t[0]=(l+n)/i,t[1]=(a+u)/i,t[2]=.25*i),t},fromRotationTranslationScale2=function(t,e,s,i){var r=(h=e[0])*(c=h+h),n=h*(u=(a=e[1])+a),h=h*(f=(l=e[2])+l),o=a*u,a=a*f,l=l*f,c=(e=e[3])*c,u=e*u,e=e*f,f=i[0],d=i[1],i=i[2];return t[0]=(1-(o+l))*f,t[1]=(n+e)*f,t[2]=(h-u)*f,t[3]=0,t[4]=(n-e)*d,t[5]=(1-(r+l))*d,t[6]=(a+c)*d,t[7]=0,t[8]=(h+u)*i,t[9]=(a-c)*i,t[10]=(1-(r+o))*i,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},fromRotationTranslationScaleOrigin2=function(t,e,s,i,r){var n=(o=e[0])*(u=o+o),h=o*(f=(l=e[1])+l),o=o*(d=(c=e[2])+c),a=l*f,l=l*d,c=c*d,u=(e=e[3])*u,f=e*f,e=e*d,d=i[0],p=i[1],i=i[2],m=r[0],C=r[1],r=r[2],g=(1-(a+c))*d,S=(h+e)*d,d=(o-f)*d,h=(h-e)*p,e=(1-(n+c))*p,c=(l+u)*p,p=(o+f)*i,o=(l-u)*i,f=(1-(n+a))*i;return t[0]=g,t[1]=S,t[2]=d,t[3]=0,t[4]=h,t[5]=e,t[6]=c,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=s[0]+m-(g*m+h*C+p*r),t[13]=s[1]+C-(S*m+e*C+o*r),t[14]=s[2]+r-(d*m+c*C+f*r),t[15]=1,t},fromQuat3=function(t,e){var s=e[0],i=e[2],r=i+i,s=s*(l=s+s),n=(h=e[1])*l,h=h*(c=h+h),o=i*l,a=i*c,l=(e=e[3])*l,c=e*c,e=e*r;return t[0]=1-h-(i=i*r),t[1]=n+e,t[2]=o-c,t[3]=0,t[4]=n-e,t[5]=1-s-i,t[6]=a+l,t[7]=0,t[8]=o+c,t[9]=a-l,t[10]=1-s-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum2=function(t,e,s,i,r,n,h){var o=1/(s-e),a=1/(r-i),l=1/(n-h);return t[0]=2*n*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*a,t[6]=0,t[7]=0,t[8]=(s+e)*o,t[9]=(r+i)*a,t[10]=(h+n)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*n*2*l,t[15]=0,t},perspectiveNO2=function(t,e,s,i,r){return e=1/Math.tan(e/2),t[0]=e/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(s=1/(i-r)),t[14]=2*r*i*s):(t[10]=-1,t[14]=-2*i),t},perspectiveZO2=function(t,e,s,i,r){return e=1/Math.tan(e/2),t[0]=e/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=r*(s=1/(i-r)),t[14]=r*i*s):(t[10]=-1,t[14]=-i),t},perspectiveFromFieldOfView2=function(t,e,s,i){var r=Math.tan(e.upDegrees*Math.PI/180),n=Math.tan(e.downDegrees*Math.PI/180),h=Math.tan(e.leftDegrees*Math.PI/180),o=2/(h+(e=Math.tan(e.rightDegrees*Math.PI/180))),a=2/(r+n);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(h-e)*o*.5,t[9]=(r-n)*a*.5,t[10]=i/(s-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*s/(s-i),t[15]=0,t},orthoNO2=function(t,e,s,i,r,n,h){var o=1/(e-s),a=1/(i-r),l=1/(n-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+s)*o,t[13]=(r+i)*a,t[14]=(h+n)*l,t[15]=1,t},orthoZO2=function(t,e,s,i,r,n,h){var o=1/(e-s),a=1/(i-r),h=1/(n-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=h,t[11]=0,t[12]=(e+s)*o,t[13]=(r+i)*a,t[14]=n*h,t[15]=1,t},lookAt2=function(t,e,s,i){var r,n,h,o,a=e[0],l=e[1],e=e[2],c=i[0],u=i[1],i=i[2],f=s[0],d=s[1],s=s[2];return Math.abs(a-f)<EPSILON&&Math.abs(l-d)<EPSILON&&Math.abs(e-s)<EPSILON?identity$22(t):(f=a-f,d=l-d,s=e-s,r=u*(s*=o=1/Math.hypot(f,d,s))-i*(d*=o),i=i*(f*=o)-c*s,c=c*d-u*f,(o=Math.hypot(r,i,c))?(r*=o=1/o,i*=o,c*=o):c=i=r=0,u=d*c-s*i,n=s*r-f*c,h=f*i-d*r,(o=Math.hypot(u,n,h))?(u*=o=1/o,n*=o,h*=o):h=n=u=0,t[0]=r,t[1]=u,t[2]=f,t[3]=0,t[4]=i,t[5]=n,t[6]=d,t[7]=0,t[8]=c,t[9]=h,t[10]=s,t[11]=0,t[12]=-(r*a+i*l+c*e),t[13]=-(u*a+n*l+h*e),t[14]=-(f*a+d*l+s*e),t[15]=1,t)},targetTo2=function(t,e,s,i){var r=e[0],n=e[1],e=e[2],h=i[0],o=i[1],i=i[2],a=r-s[0],l=n-s[1],c=a*a+l*l+(s=e-s[2])*s,u=(0<c&&(a*=c=1/Math.sqrt(c),l*=c,s*=c),o*s-i*l);return 0<(c=u*u+(i=i*a-h*s)*i+(h=h*l-o*a)*h)&&(u*=c=1/Math.sqrt(c),i*=c,h*=c),t[0]=u,t[1]=i,t[2]=h,t[3]=0,t[4]=l*h-s*i,t[5]=s*u-a*h,t[6]=a*i-l*u,t[7]=0,t[8]=a,t[9]=l,t[10]=s,t[11]=0,t[12]=r,t[13]=n,t[14]=e,t[15]=1,t},str$52=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob2=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add$52=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t[4]=e[4]+s[4],t[5]=e[5]+s[5],t[6]=e[6]+s[6],t[7]=e[7]+s[7],t[8]=e[8]+s[8],t[9]=e[9]+s[9],t[10]=e[10]+s[10],t[11]=e[11]+s[11],t[12]=e[12]+s[12],t[13]=e[13]+s[13],t[14]=e[14]+s[14],t[15]=e[15]+s[15],t},subtract$32=function(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t[4]=e[4]-s[4],t[5]=e[5]-s[5],t[6]=e[6]-s[6],t[7]=e[7]-s[7],t[8]=e[8]-s[8],t[9]=e[9]-s[9],t[10]=e[10]-s[10],t[11]=e[11]-s[11],t[12]=e[12]-s[12],t[13]=e[13]-s[13],t[14]=e[14]-s[14],t[15]=e[15]-s[15],t},multiplyScalar2=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12]*s,t[13]=e[13]*s,t[14]=e[14]*s,t[15]=e[15]*s,t},multiplyScalarAndAdd2=function(t,e,s,i){return t[0]=e[0]+s[0]*i,t[1]=e[1]+s[1]*i,t[2]=e[2]+s[2]*i,t[3]=e[3]+s[3]*i,t[4]=e[4]+s[4]*i,t[5]=e[5]+s[5]*i,t[6]=e[6]+s[6]*i,t[7]=e[7]+s[7]*i,t[8]=e[8]+s[8]*i,t[9]=e[9]+s[9]*i,t[10]=e[10]+s[10]*i,t[11]=e[11]+s[11]*i,t[12]=e[12]+s[12]*i,t[13]=e[13]+s[13]*i,t[14]=e[14]+s[14]*i,t[15]=e[15]+s[15]*i,t},exactEquals$52=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},equals$52=function(t,e){var s=t[0],i=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11],p=t[12],m=t[13],C=t[14],t=t[15],g=e[0],S=e[1],y=e[2],T=e[3],_=e[4],E=e[5],A=e[6],I=e[7],w=e[8],R=e[9],M=e[10],b=e[11],v=e[12],x=e[13],G=e[14],e=e[15];return Math.abs(s-g)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(i-S)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(r-y)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-T)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(h-_)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(o-E)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(a-A)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(l-I)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(c-w)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(u-R)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(f-M)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(d-b)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(b))&&Math.abs(p-v)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(v))&&Math.abs(m-x)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(x))&&Math.abs(C-G)<=EPSILON*Math.max(1,Math.abs(C),Math.abs(G))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$42=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},clone$42=function(t){var e=new ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},length$42=function(t){var e=t[0];return Math.hypot(e,t[1],t[2])},fromValues$42=function(t,e,s){var i=new ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=s,i},copy$42=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},set$42=function(t,e,s,i){return t[0]=e,t[1]=s,t[2]=i,t},add$42=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t},subtract$22=function(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t},multiply$42=function(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t[2]=e[2]*s[2],t},divide$22=function(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t[2]=e[2]/s[2],t},ceil$22=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},floor$22=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},min$22=function(t,e,s){return t[0]=Math.min(e[0],s[0]),t[1]=Math.min(e[1],s[1]),t[2]=Math.min(e[2],s[2]),t},max$22=function(t,e,s){return t[0]=Math.max(e[0],s[0]),t[1]=Math.max(e[1],s[1]),t[2]=Math.max(e[2],s[2]),t},round$22=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale$42=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t},scaleAndAdd$22=function(t,e,s,i){return t[0]=e[0]+s[0]*i,t[1]=e[1]+s[1]*i,t[2]=e[2]+s[2]*i,t},distance$22=function(t,e){var s=e[0]-t[0];return Math.hypot(s,e[1]-t[1],e[2]-t[2])},squaredDistance$22=function(t,e){var s=e[0]-t[0],i=e[1]-t[1];return s*s+i*i+(e=e[2]-t[2])*e},squaredLength$42=function(t){var e=t[0],s=t[1];return e*e+s*s+(t=t[2])*t},negate$22=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},inverse$22=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},normalize$42=function(t,e){var s=e[0],i=e[1],r=e[2];return 0<(s=s*s+i*i+r*r)&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t},dot$42=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},cross$22=function(t,e,s){var i=e[0],r=e[1],e=e[2],n=s[0],h=s[1],s=s[2];return t[0]=r*s-e*h,t[1]=e*n-i*s,t[2]=i*h-r*n,t},lerp$42=function(t,e,s,i){var r=e[0],n=e[1],e=e[2];return t[0]=r+i*(s[0]-r),t[1]=n+i*(s[1]-n),t[2]=e+i*(s[2]-e),t},slerp$12=function(t,e,s,i){var r=Math.acos(Math.min(Math.max(dot$42(e,s),-1),1)),n=Math.sin(r),h=Math.sin((1-i)*r)/n,i=Math.sin(i*r)/n;return t[0]=h*e[0]+i*s[0],t[1]=h*e[1]+i*s[1],t[2]=h*e[2]+i*s[2],t},hermite2=function(t,e,s,i,r,n){var h=n*n,o=h*(2*n-3)+1,a=h*(n-2)+n,l=h*(n-1);return t[0]=e[0]*o+s[0]*a+i[0]*l+r[0]*(h=h*(3-2*n)),t[1]=e[1]*o+s[1]*a+i[1]*l+r[1]*h,t[2]=e[2]*o+s[2]*a+i[2]*l+r[2]*h,t},bezier2=function(t,e,s,i,r,n){var h=1-n,o=h*h,a=n*n,l=o*h;return t[0]=e[0]*l+s[0]*(o=3*n*o)+i[0]*(h=3*a*h)+r[0]*(a=a*n),t[1]=e[1]*l+s[1]*o+i[1]*h+r[1]*a,t[2]=e[2]*l+s[2]*o+i[2]*h+r[2]*a,t},random$32=function(t,e){e=e||1;var s=2*RANDOM()*Math.PI,i=2*RANDOM()-1,r=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(s)*r,t[1]=Math.sin(s)*r,t[2]=i*e,t},transformMat4$22=function(t,e,s){var i=e[0],r=e[1],e=e[2],n=s[3]*i+s[7]*r+s[11]*e+s[15];return t[0]=(s[0]*i+s[4]*r+s[8]*e+s[12])/(n=n||1),t[1]=(s[1]*i+s[5]*r+s[9]*e+s[13])/n,t[2]=(s[2]*i+s[6]*r+s[10]*e+s[14])/n,t},transformMat3$12=function(t,e,s){var i=e[0],r=e[1],e=e[2];return t[0]=i*s[0]+r*s[3]+e*s[6],t[1]=i*s[1]+r*s[4]+e*s[7],t[2]=i*s[2]+r*s[5]+e*s[8],t},transformQuat$12=function(t,e,s){var i=s[0],r=s[1],n=e[0],h=e[1],o=r*(e=e[2])-(u=s[2])*h,a=u*n-i*e,l=i*h-r*n,c=r*l-u*a,u=u*o-i*l,i=i*a-r*o;return a*=r=2*s[3],l*=r,u*=2,i*=2,t[0]=n+(o*=r)+(c*=2),t[1]=h+a+u,t[2]=e+l+i,t},rotateX$22=function(t,e,s,i){var r=[],n=[];return r[0]=e[0]-s[0],r[1]=e[1]-s[1],r[2]=e[2]-s[2],n[0]=r[0],n[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),n[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=n[0]+s[0],t[1]=n[1]+s[1],t[2]=n[2]+s[2],t},rotateY$22=function(t,e,s,i){var r=[],n=[];return r[0]=e[0]-s[0],r[1]=e[1]-s[1],r[2]=e[2]-s[2],n[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),n[1]=r[1],n[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=n[0]+s[0],t[1]=n[1]+s[1],t[2]=n[2]+s[2],t},rotateZ$22=function(t,e,s,i){var r=[],n=[];return r[0]=e[0]-s[0],r[1]=e[1]-s[1],r[2]=e[2]-s[2],n[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),n[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),n[2]=r[2],t[0]=n[0]+s[0],t[1]=n[1]+s[1],t[2]=n[2]+s[2],t},angle$12=function(t,e){var s=t[0],i=t[1],r=t[2],n=e[0],h=e[1],o=e[2],i=(s=Math.sqrt((s*s+i*i+r*r)*(n*n+h*h+o*o)))&&dot$42(t,e)/s;return Math.acos(Math.min(Math.max(i,-1),1))},zero$22=function(t){return t[0]=0,t[1]=0,t[2]=0,t},str$42=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals$42=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},equals$42=function(t,e){var s=t[0],i=t[1],t=t[2],r=e[0],n=e[1],e=e[2];return Math.abs(s-r)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(r))&&Math.abs(i-n)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$32=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},clone$32=function(t){var e=new ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},fromValues$32=function(t,e,s,i){var r=new ARRAY_TYPE(4);return r[0]=t,r[1]=e,r[2]=s,r[3]=i,r},copy$32=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},set$32=function(t,e,s,i,r){return t[0]=e,t[1]=s,t[2]=i,t[3]=r,t},add$32=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t},subtract$12=function(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t[2]=e[2]-s[2],t[3]=e[3]-s[3],t},multiply$32=function(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t[2]=e[2]*s[2],t[3]=e[3]*s[3],t},divide$12=function(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t[2]=e[2]/s[2],t[3]=e[3]/s[3],t},ceil$12=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},floor$12=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},min$12=function(t,e,s){return t[0]=Math.min(e[0],s[0]),t[1]=Math.min(e[1],s[1]),t[2]=Math.min(e[2],s[2]),t[3]=Math.min(e[3],s[3]),t},max$12=function(t,e,s){return t[0]=Math.max(e[0],s[0]),t[1]=Math.max(e[1],s[1]),t[2]=Math.max(e[2],s[2]),t[3]=Math.max(e[3],s[3]),t},round$12=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},scale$32=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t},scaleAndAdd$12=function(t,e,s,i){return t[0]=e[0]+s[0]*i,t[1]=e[1]+s[1]*i,t[2]=e[2]+s[2]*i,t[3]=e[3]+s[3]*i,t},distance$12=function(t,e){var s=e[0]-t[0];return Math.hypot(s,e[1]-t[1],e[2]-t[2],e[3]-t[3])},squaredDistance$12=function(t,e){var s=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return s*s+i*i+r*r+(e=e[3]-t[3])*e},length$32=function(t){var e=t[0];return Math.hypot(e,t[1],t[2],t[3])},squaredLength$32=function(t){var e=t[0],s=t[1],i=t[2];return e*e+s*s+i*i+(t=t[3])*t},negate$12=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},inverse$12=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},normalize$32=function(t,e){var s=e[0],i=e[1],r=e[2],n=s*s+i*i+r*r+(e=e[3])*e;return 0<n&&(n=1/Math.sqrt(n)),t[0]=s*n,t[1]=i*n,t[2]=r*n,t[3]=e*n,t},dot$32=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},cross$12=function(t,e,s,i){var r=s[0]*i[1]-s[1]*i[0],n=s[0]*i[2]-s[2]*i[0],h=s[0]*i[3]-s[3]*i[0],o=s[1]*i[2]-s[2]*i[1],a=s[1]*i[3]-s[3]*i[1],s=s[2]*i[3]-s[3]*i[2],i=e[0],l=e[1],c=e[2],e=e[3];return t[0]=l*s-c*a+e*o,t[1]=-i*s+c*h-e*n,t[2]=i*a-l*h+e*r,t[3]=-i*o+l*n-c*r,t},lerp$32=function(t,e,s,i){var r=e[0],n=e[1],h=e[2],e=e[3];return t[0]=r+i*(s[0]-r),t[1]=n+i*(s[1]-n),t[2]=h+i*(s[2]-h),t[3]=e+i*(s[3]-e),t},random$22=function(t,e){var s,i,r,n,h,o;for(e=e||1;1<=(h=(s=2*RANDOM()-1)*s+(i=2*RANDOM()-1)*i););for(;1<=(o=(r=2*RANDOM()-1)*r+(n=2*RANDOM()-1)*n););var a=Math.sqrt((1-h)/o);return t[0]=e*s,t[1]=e*i,t[2]=e*r*a,t[3]=e*n*a,t},transformMat4$12=function(t,e,s){var i=e[0],r=e[1],n=e[2],e=e[3];return t[0]=s[0]*i+s[4]*r+s[8]*n+s[12]*e,t[1]=s[1]*i+s[5]*r+s[9]*n+s[13]*e,t[2]=s[2]*i+s[6]*r+s[10]*n+s[14]*e,t[3]=s[3]*i+s[7]*r+s[11]*n+s[15]*e,t},transformQuat2=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=s[0],o=s[1],a=s[2],l=(s=s[3])*i+o*n-a*r,c=s*r+a*i-h*n,u=s*n+h*r-o*i;return t[0]=l*s+(i=-h*i-o*r-a*n)*-h+c*-a-u*-o,t[1]=c*s+i*-o+u*-h-l*-a,t[2]=u*s+i*-a+l*-o-c*-h,t[3]=e[3],t},zero$12=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},str$32=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},exactEquals$32=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},equals$32=function(t,e){var s=t[0],i=t[1],r=t[2],t=t[3],n=e[0],h=e[1],o=e[2],e=e[3];return Math.abs(s-n)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(n))&&Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-o)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create$22=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},identity$12=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle2=function(t,e,s){s*=.5;var i=Math.sin(s);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(s),t},getAxisAngle2=function(t,e){var s=2*Math.acos(e[3]),i=Math.sin(s/2);return EPSILON<i?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),s},getAngle2=function(t,e){return t=dot$2(t,e),Math.acos(2*t*t-1)},multiply$22=function(t,e,s){var i=e[0],r=e[1],n=e[2],e=e[3],h=s[0],o=s[1],a=s[2],s=s[3];return t[0]=i*s+e*h+r*a-n*o,t[1]=r*s+e*o+n*h-i*a,t[2]=n*s+e*a+i*o-r*h,t[3]=e*s-i*h-r*o-n*a,t},rotateX$12=function(t,e,s){s*=.5;var i=e[0],r=e[1],n=e[2],e=e[3],h=Math.sin(s),s=Math.cos(s);return t[0]=i*s+e*h,t[1]=r*s+n*h,t[2]=n*s-r*h,t[3]=e*s-i*h,t},rotateY$12=function(t,e,s){s*=.5;var i=e[0],r=e[1],n=e[2],e=e[3],h=Math.sin(s),s=Math.cos(s);return t[0]=i*s-n*h,t[1]=r*s+e*h,t[2]=n*s+i*h,t[3]=e*s-r*h,t},rotateZ$12=function(t,e,s){s*=.5;var i=e[0],r=e[1],n=e[2],e=e[3],h=Math.sin(s),s=Math.cos(s);return t[0]=i*s+r*h,t[1]=r*s-i*h,t[2]=n*s+e*h,t[3]=e*s-n*h,t},calculateW2=function(t,e){var s=e[0],i=e[1],e=e[2];return t[0]=s,t[1]=i,t[2]=e,t[3]=Math.sqrt(Math.abs(1-s*s-i*i-e*e)),t},exp2=function(t,e){var s=e[0],i=e[1],r=e[2],e=e[3],n=Math.sqrt(s*s+i*i+r*r),e=Math.exp(e),h=0<n?e*Math.sin(n)/n:0;return t[0]=s*h,t[1]=i*h,t[2]=r*h,t[3]=e*Math.cos(n),t},ln2=function(t,e){var s=e[0],i=e[1],r=e[2],e=e[3],n=0<(n=Math.sqrt(s*s+i*i+r*r))?Math.atan2(n,e)/n:0;return t[0]=s*n,t[1]=i*n,t[2]=r*n,t[3]=.5*Math.log(s*s+i*i+r*r+e*e),t},pow2=function(t,e,s){return ln2(t,e),scale$2(t,t,s),exp2(t,t),t},slerp2=function(t,e,s,i){var r,n,h=e[0],o=e[1],a=e[2],e=e[3],l=s[0],c=s[1],u=s[2],f=h*l+o*c+a*u+e*(s=s[3]);return f<0&&(f=-f,l=-l,c=-c,u=-u,s=-s),f=EPSILON<1-f?(f=Math.acos(f),r=Math.sin(f),n=Math.sin((1-i)*f)/r,Math.sin(i*f)/r):(n=1-i,i),t[0]=n*h+f*l,t[1]=n*o+f*c,t[2]=n*a+f*u,t[3]=n*e+f*s,t},random$12=function(t){var e=RANDOM(),s=RANDOM(),i=RANDOM(),r=Math.sqrt(1-e),e=Math.sqrt(e);return t[0]=r*Math.sin(2*Math.PI*s),t[1]=r*Math.cos(2*Math.PI*s),t[2]=e*Math.sin(2*Math.PI*i),t[3]=e*Math.cos(2*Math.PI*i),t},invert$12=function(t,e){var s=e[0],i=e[1],r=e[2],n=s*s+i*i+r*r+(e=e[3])*e;return t[0]=-s*(n=n?1/n:0),t[1]=-i*n,t[2]=-r*n,t[3]=e*n,t},conjugate$12=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},fromMat32=function(t,e){var s,i,r,n=e[0]+e[4]+e[8];return 0<n?(r=Math.sqrt(n+1),t[3]=.5*r,t[0]=(e[5]-e[7])*(r=.5/r),t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r):(s=(1+(n=e[3*(n=e[4]>e[0]?1:0)+n]<e[8]?2:n))%3,i=(2+n)%3,r=Math.sqrt(e[3*n+n]-e[3*s+s]-e[3*i+i]+1),t[n]=.5*r,t[3]=(e[3*s+i]-e[3*i+s])*(r=.5/r),t[s]=(e[3*s+n]+e[3*n+s])*r,t[i]=(e[3*i+n]+e[3*n+i])*r),t},fromEuler2=function(t,e,s,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,n=Math.PI/360,h=(i*=n,s*=n,Math.sin(e*=n)),o=Math.cos(e),a=Math.sin(s),l=Math.cos(s),c=Math.sin(i),u=Math.cos(i);switch(r){case"xyz":t[0]=h*l*u+o*a*c,t[1]=o*a*u-h*l*c,t[2]=o*l*c+h*a*u,t[3]=o*l*u-h*a*c;break;case"xzy":t[0]=h*l*u-o*a*c,t[1]=o*a*u-h*l*c,t[2]=o*l*c+h*a*u,t[3]=o*l*u+h*a*c;break;case"yxz":t[0]=h*l*u+o*a*c,t[1]=o*a*u-h*l*c,t[2]=o*l*c-h*a*u,t[3]=o*l*u+h*a*c;break;case"yzx":t[0]=h*l*u+o*a*c,t[1]=o*a*u+h*l*c,t[2]=o*l*c-h*a*u,t[3]=o*l*u-h*a*c;break;case"zxy":t[0]=h*l*u-o*a*c,t[1]=o*a*u+h*l*c,t[2]=o*l*c+h*a*u,t[3]=o*l*u-h*a*c;break;case"zyx":t[0]=h*l*u-o*a*c,t[1]=o*a*u+h*l*c,t[2]=o*l*c-h*a*u,t[3]=o*l*u+h*a*c;break;default:throw new Error("Unknown angle order "+r)}return t},str$22=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},equals$22=function(t,e){return Math.abs(dot$32(t,e))>=1-EPSILON},create$12=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},clone$12=function(t){var e=new ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},fromValues$12=function(t,e,s,i,r,n,h,o){var a=new ARRAY_TYPE(8);return a[0]=t,a[1]=e,a[2]=s,a[3]=i,a[4]=r,a[5]=n,a[6]=h,a[7]=o,a},fromRotationTranslationValues2=function(t,e,s,i,r,n,h){var o=new ARRAY_TYPE(8),r=(o[0]=t,o[1]=e,o[2]=s,o[3]=i,.5*r),n=.5*n,h=.5*h;return o[4]=r*i+n*s-h*e,o[5]=n*i+h*t-r*s,o[6]=h*i+r*e-n*t,o[7]=-r*t-n*e-h*s,o},fromRotationTranslation2=function(t,e,s){var i=.5*s[0],r=.5*s[1],s=.5*s[2],n=e[0],h=e[1],o=e[2],e=e[3];return t[0]=n,t[1]=h,t[2]=o,t[3]=e,t[4]=i*e+r*o-s*h,t[5]=r*e+s*n-i*o,t[6]=s*e+i*h-r*n,t[7]=-i*n-r*h-s*o,t},fromTranslation2=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},fromRotation2=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},fromMat42=function(t,e){var s=create$22(),i=(getRotation2(s,e),new ARRAY_TYPE(3));return getTranslation$12(i,e),fromRotationTranslation2(t,s,i),t},copy$12=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},identity2=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},set$12=function(t,e,s,i,r,n,h,o,a){return t[0]=e,t[1]=s,t[2]=i,t[3]=r,t[4]=n,t[5]=h,t[6]=o,t[7]=a,t},getDual2=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},setDual2=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},getTranslation2=function(t,e){var s=e[4],i=e[5],r=e[6],n=e[7],h=-e[0],o=-e[1],a=-e[2],e=e[3];return t[0]=2*(s*e+n*h+i*a-r*o),t[1]=2*(i*e+n*o+r*h-s*a),t[2]=2*(r*e+n*a+s*o-i*h),t},translate2=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=.5*s[0],a=.5*s[1],s=.5*s[2],l=e[4],c=e[5],u=e[6],e=e[7];return t[0]=i,t[1]=r,t[2]=n,t[3]=h,t[4]=h*o+r*s-n*a+l,t[5]=h*a+n*o-i*s+c,t[6]=h*s+i*a-r*o+u,t[7]=-i*o-r*a-n*s+e,t},rotateX2=function(t,e,s){var i=-e[0],r=-e[1],n=-e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=o*h+(d=e[7])*i+a*n-l*r,u=a*h+d*r+l*i-o*n,f=l*h+d*n+o*r-a*i,d=d*h-o*i-a*r-l*n;return rotateX$12(t,e,s),i=t[0],t[4]=c*(h=t[3])+d*i+u*(n=t[2])-f*(r=t[1]),t[5]=u*h+d*r+f*i-c*n,t[6]=f*h+d*n+c*r-u*i,t[7]=d*h-c*i-u*r-f*n,t},rotateY2=function(t,e,s){var i=-e[0],r=-e[1],n=-e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=o*h+(d=e[7])*i+a*n-l*r,u=a*h+d*r+l*i-o*n,f=l*h+d*n+o*r-a*i,d=d*h-o*i-a*r-l*n;return rotateY$12(t,e,s),i=t[0],t[4]=c*(h=t[3])+d*i+u*(n=t[2])-f*(r=t[1]),t[5]=u*h+d*r+f*i-c*n,t[6]=f*h+d*n+c*r-u*i,t[7]=d*h-c*i-u*r-f*n,t},rotateZ2=function(t,e,s){var i=-e[0],r=-e[1],n=-e[2],h=e[3],o=e[4],a=e[5],l=e[6],c=o*h+(d=e[7])*i+a*n-l*r,u=a*h+d*r+l*i-o*n,f=l*h+d*n+o*r-a*i,d=d*h-o*i-a*r-l*n;return rotateZ$12(t,e,s),i=t[0],t[4]=c*(h=t[3])+d*i+u*(n=t[2])-f*(r=t[1]),t[5]=u*h+d*r+f*i-c*n,t[6]=f*h+d*n+c*r-u*i,t[7]=d*h-c*i-u*r-f*n,t},rotateByQuatAppend2=function(t,e,s){var i=s[0],r=s[1],n=s[2],s=s[3],h=e[0],o=e[1],a=e[2],l=e[3];return t[0]=h*s+l*i+o*n-a*r,t[1]=o*s+l*r+a*i-h*n,t[2]=a*s+l*n+h*r-o*i,t[3]=l*s-h*i-o*r-a*n,t[4]=(h=e[4])*s+(l=e[7])*i+(o=e[5])*n-(a=e[6])*r,t[5]=o*s+l*r+a*i-h*n,t[6]=a*s+l*n+h*r-o*i,t[7]=l*s-h*i-o*r-a*n,t},rotateByQuatPrepend2=function(t,e,s){var i=e[0],r=e[1],n=e[2],e=e[3],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=i*l+e*h+r*a-n*o,t[1]=r*l+e*o+n*h-i*a,t[2]=n*l+e*a+i*o-r*h,t[3]=e*l-i*h-r*o-n*a,t[4]=i*(l=s[7])+e*(h=s[4])+r*(a=s[6])-n*(o=s[5]),t[5]=r*l+e*o+n*h-i*a,t[6]=n*l+e*a+i*o-r*h,t[7]=e*l-i*h-r*o-n*a,t},rotateAroundAxis2=function(t,e,s,i){var r,n,h,o,a,l;return Math.abs(i)<EPSILON?copy$12(t,e):(l=Math.hypot(s[0],s[1],s[2]),i*=.5,r=(h=Math.sin(i))*s[0]/l,n=h*s[1]/l,h=h*s[2]/l,s=Math.cos(i),l=e[0],t[0]=l*s+(i=e[3])*r+(o=e[1])*h-(a=e[2])*n,t[1]=o*s+i*n+a*r-l*h,t[2]=a*s+i*h+l*n-o*r,t[3]=i*s-l*r-o*n-a*h,t[4]=(i=e[4])*s+(l=e[7])*r+(o=e[5])*h-(a=e[6])*n,t[5]=o*s+l*n+a*r-i*h,t[6]=a*s+l*h+i*n-o*r,t[7]=l*s-i*r-o*n-a*h,t)},add$12=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t[3]=e[3]+s[3],t[4]=e[4]+s[4],t[5]=e[5]+s[5],t[6]=e[6]+s[6],t[7]=e[7]+s[7],t},multiply$12=function(t,e,s){var i=e[0],r=e[1],n=e[2],h=e[3],o=s[4],a=s[5],l=s[6],c=s[7],u=e[4],f=e[5],d=e[6],e=e[7],p=s[0],m=s[1],C=s[2],s=s[3];return t[0]=i*s+h*p+r*C-n*m,t[1]=r*s+h*m+n*p-i*C,t[2]=n*s+h*C+i*m-r*p,t[3]=h*s-i*p-r*m-n*C,t[4]=i*c+h*o+r*l-n*a+u*s+e*p+f*C-d*m,t[5]=r*c+h*a+n*o-i*l+f*s+e*m+d*p-u*C,t[6]=n*c+h*l+i*a-r*o+d*s+e*C+u*m-f*p,t[7]=h*c-i*o-r*a-n*l+e*s-u*p-f*m-d*C,t},scale$12=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t},lerp$12=function(t,e,s,i){var r=1-i;return dot$1(e,s)<0&&(i=-i),t[0]=e[0]*r+s[0]*i,t[1]=e[1]*r+s[1]*i,t[2]=e[2]*r+s[2]*i,t[3]=e[3]*r+s[3]*i,t[4]=e[4]*r+s[4]*i,t[5]=e[5]*r+s[5]*i,t[6]=e[6]*r+s[6]*i,t[7]=e[7]*r+s[7]*i,t},invert2=function(t,e){var s=squaredLength$1(e);return t[0]=-e[0]/s,t[1]=-e[1]/s,t[2]=-e[2]/s,t[3]=e[3]/s,t[4]=-e[4]/s,t[5]=-e[5]/s,t[6]=-e[6]/s,t[7]=e[7]/s,t},conjugate2=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},normalize$12=function(t,e){var s,i,r,n,h,o,a,l,c=squaredLength$1(e);return 0<c&&(c=Math.sqrt(c),l=(s=e[0]/c)*(h=e[4])+(i=e[1]/c)*(o=e[5])+(r=e[2]/c)*(a=e[6])+(n=e[3]/c)*(e=e[7]),t[0]=s,t[1]=i,t[2]=r,t[3]=n,t[4]=(h-s*l)/c,t[5]=(o-i*l)/c,t[6]=(a-r*l)/c,t[7]=(e-n*l)/c),t},str$12=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},exactEquals$12=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},equals$12=function(t,e){var s=t[0],i=t[1],r=t[2],n=t[3],h=t[4],o=t[5],a=t[6],t=t[7],l=e[0],c=e[1],u=e[2],f=e[3],d=e[4],p=e[5],m=e[6],e=e[7];return Math.abs(s-l)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-c)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(r-u)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-f)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(h-d)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(d))&&Math.abs(o-p)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},create2=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},clone2=function(t){var e=new ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},fromValues2=function(t,e){var s=new ARRAY_TYPE(2);return s[0]=t,s[1]=e,s},copy2=function(t,e){return t[0]=e[0],t[1]=e[1],t},set2=function(t,e,s){return t[0]=e,t[1]=s,t},add2=function(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t},subtract2=function(t,e,s){return t[0]=e[0]-s[0],t[1]=e[1]-s[1],t},multiply2=function(t,e,s){return t[0]=e[0]*s[0],t[1]=e[1]*s[1],t},divide2=function(t,e,s){return t[0]=e[0]/s[0],t[1]=e[1]/s[1],t},ceil2=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},floor2=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},min2=function(t,e,s){return t[0]=Math.min(e[0],s[0]),t[1]=Math.min(e[1],s[1]),t},max2=function(t,e,s){return t[0]=Math.max(e[0],s[0]),t[1]=Math.max(e[1],s[1]),t},round2=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},scale2=function(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t},scaleAndAdd2=function(t,e,s,i){return t[0]=e[0]+s[0]*i,t[1]=e[1]+s[1]*i,t},distance2=function(t,e){var s=e[0]-t[0];return Math.hypot(s,e[1]-t[1])},squaredDistance2=function(t,e){var s=e[0]-t[0];return s*s+(e=e[1]-t[1])*e},length2=function(t){var e=t[0];return Math.hypot(e,t[1])},squaredLength2=function(t){var e=t[0];return e*e+(t=t[1])*t},negate2=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},inverse2=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},normalize2=function(t,e){var s=e[0],i=e[1];return 0<(s=s*s+i*i)&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t},dot2=function(t,e){return t[0]*e[0]+t[1]*e[1]},cross2=function(t,e,s){return e=e[0]*s[1]-e[1]*s[0],t[0]=t[1]=0,t[2]=e,t},lerp2=function(t,e,s,i){var r=e[0],e=e[1];return t[0]=r+i*(s[0]-r),t[1]=e+i*(s[1]-e),t},random2=function(t,e){e=e||1;var s=2*RANDOM()*Math.PI;return t[0]=Math.cos(s)*e,t[1]=Math.sin(s)*e,t},transformMat22=function(t,e,s){var i=e[0],e=e[1];return t[0]=s[0]*i+s[2]*e,t[1]=s[1]*i+s[3]*e,t},transformMat2d2=function(t,e,s){var i=e[0],e=e[1];return t[0]=s[0]*i+s[2]*e+s[4],t[1]=s[1]*i+s[3]*e+s[5],t},transformMat32=function(t,e,s){var i=e[0],e=e[1];return t[0]=s[0]*i+s[3]*e+s[6],t[1]=s[1]*i+s[4]*e+s[7],t},transformMat42=function(t,e,s){var i=e[0],e=e[1];return t[0]=s[0]*i+s[4]*e+s[12],t[1]=s[1]*i+s[5]*e+s[13],t},rotate2=function(t,e,s,i){var r=e[0]-s[0],e=e[1]-s[1],n=Math.sin(i),i=Math.cos(i);return t[0]=r*i-e*n+s[0],t[1]=r*n+e*i+s[1],t},angle2=function(t,e){var s=t[0],t=t[1],i=e[0],e=e[1],r=Math.sqrt((s*s+t*t)*(i*i+e*e));return Math.acos(Math.min(Math.max(r&&(s*i+t*e)/r,-1),1))},zero2=function(t){return t[0]=0,t[1]=0,t},str2=function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals2=function(t,e){return t[0]===e[0]&&t[1]===e[1]},equals2=function(t,e){var s=t[0],t=t[1],i=e[0],e=e[1];return Math.abs(s-i)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(i))&&Math.abs(t-e)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(e))};setMatrixArrayType=setMatrixArrayType2,toRadian=toRadian2,equals$9=equals$92,create$8=create$82,clone$8=clone$82,copy$8=copy$82,identity$5=identity$52,fromValues$8=fromValues$82,set$8=set$82,transpose$2=transpose$22,invert$5=invert$52,adjoint$2=adjoint$22,determinant$3=determinant$32,multiply$8=multiply$82,rotate$4=rotate$42,scale$8=scale$82,fromRotation$4=fromRotation$42,fromScaling$3=fromScaling$32,str$8=str$82,frob$3=frob$32,LDU=LDU2,add$8=add$82,subtract$6=subtract$62,exactEquals$8=exactEquals$82,equals$8=equals$82,multiplyScalar$3=multiplyScalar$32,multiplyScalarAndAdd$3=multiplyScalarAndAdd$32,create$7=create$72,clone$7=clone$72,copy$7=copy$72,identity$4=identity$42,fromValues$7=fromValues$72,set$7=set$72,invert$4=invert$42,determinant$2=determinant$22,multiply$7=multiply$72,rotate$3=rotate$32,scale$7=scale$72,translate$3=translate$32,fromRotation$3=fromRotation$32,fromScaling$2=fromScaling$22,fromTranslation$3=fromTranslation$32,str$7=str$72,frob$2=frob$22,add$7=add$72,subtract$5=subtract$52,multiplyScalar$2=multiplyScalar$22,multiplyScalarAndAdd$2=multiplyScalarAndAdd$22,exactEquals$7=exactEquals$72,equals$7=equals$72,create$6=create$62,fromMat4$1=fromMat4$12,clone$6=clone$62,copy$6=copy$62,fromValues$6=fromValues$62,set$6=set$62,identity$3=identity$32,transpose$1=transpose$12,invert$3=invert$32,adjoint$1=adjoint$12,determinant$1=determinant$12,multiply$6=multiply$62,translate$2=translate$22,rotate$2=rotate$22,scale$6=scale$62,fromTranslation$2=fromTranslation$22,fromRotation$2=fromRotation$22,fromScaling$1=fromScaling$12,fromMat2d=fromMat2d2,fromQuat$1=fromQuat$12,normalFromMat4=normalFromMat42,projection=projection2,str$6=str$62,frob$1=frob$12,add$6=add$62,subtract$4=subtract$42,multiplyScalar$1=multiplyScalar$12,multiplyScalarAndAdd$1=multiplyScalarAndAdd$12,exactEquals$6=exactEquals$62,equals$6=equals$62,create$5=create$52,clone$5=clone$52,copy$5=copy$52,fromValues$5=fromValues$52,set$5=set$52,identity$2=identity$22,transpose=transpose2,invert$2=invert$22,adjoint=adjoint2,determinant=determinant2,multiply$5=multiply$52,translate$1=translate$12,scale$5=scale$52,rotate$1=rotate$12,rotateX$3=rotateX$32,rotateY$3=rotateY$32,rotateZ$3=rotateZ$32,fromTranslation$1=fromTranslation$12,fromScaling=fromScaling2,fromRotation$1=fromRotation$12,fromXRotation=fromXRotation2,fromYRotation=fromYRotation2,fromZRotation=fromZRotation2,fromRotationTranslation$1=fromRotationTranslation$12,fromQuat2=fromQuat22,getTranslation$1=getTranslation$12,getScaling=getScaling2,getRotation=getRotation2,decompose=decompose2,fromRotationTranslationScale=fromRotationTranslationScale2,fromRotationTranslationScaleOrigin=fromRotationTranslationScaleOrigin2,fromQuat=fromQuat3,frustum=frustum2,perspectiveNO=perspectiveNO2,perspectiveZO=perspectiveZO2,perspectiveFromFieldOfView=perspectiveFromFieldOfView2,orthoNO=orthoNO2,orthoZO=orthoZO2,lookAt=lookAt2,targetTo=targetTo2,str$5=str$52,frob=frob2,add$5=add$52,subtract$3=subtract$32,multiplyScalar=multiplyScalar2,multiplyScalarAndAdd=multiplyScalarAndAdd2,exactEquals$5=exactEquals$52,equals$5=equals$52,create$4=create$42,clone$4=clone$42,length$4=length$42,fromValues$4=fromValues$42,copy$4=copy$42,set$4=set$42,add$4=add$42,subtract$2=subtract$22,multiply$4=multiply$42,divide$2=divide$22,ceil$2=ceil$22,floor$2=floor$22,min$2=min$22,max$2=max$22,round$2=round$22,scale$4=scale$42,scaleAndAdd$2=scaleAndAdd$22,distance$2=distance$22,squaredDistance$2=squaredDistance$22,squaredLength$4=squaredLength$42,negate$2=negate$22,inverse$2=inverse$22,normalize$4=normalize$42,dot$4=dot$42,cross$2=cross$22,lerp$4=lerp$42,slerp$1=slerp$12,hermite=hermite2,bezier=bezier2,random$3=random$32,transformMat4$2=transformMat4$22,transformMat3$1=transformMat3$12,transformQuat$1=transformQuat$12,rotateX$2=rotateX$22,rotateY$2=rotateY$22,rotateZ$2=rotateZ$22,angle$1=angle$12,zero$2=zero$22,str$4=str$42,exactEquals$4=exactEquals$42,equals$4=equals$42,create$3=create$32,clone$3=clone$32,fromValues$3=fromValues$32,copy$3=copy$32,set$3=set$32,add$3=add$32,subtract$1=subtract$12,multiply$3=multiply$32,divide$1=divide$12,ceil$1=ceil$12,floor$1=floor$12,min$1=min$12,max$1=max$12,round$1=round$12,scale$3=scale$32,scaleAndAdd$1=scaleAndAdd$12,distance$1=distance$12,squaredDistance$1=squaredDistance$12,length$3=length$32,squaredLength$3=squaredLength$32,negate$1=negate$12,inverse$1=inverse$12,normalize$3=normalize$32,dot$3=dot$32,cross$1=cross$12,lerp$3=lerp$32,random$2=random$22,transformMat4$1=transformMat4$12,transformQuat=transformQuat2,zero$1=zero$12,str$3=str$32,exactEquals$3=exactEquals$32,equals$3=equals$32,create$2=create$22,identity$1=identity$12,setAxisAngle=setAxisAngle2,getAxisAngle=getAxisAngle2,getAngle=getAngle2,multiply$2=multiply$22,rotateX$1=rotateX$12,rotateY$1=rotateY$12,rotateZ$1=rotateZ$12,calculateW=calculateW2,exp=exp2,ln=ln2,pow=pow2,slerp=slerp2,random$1=random$12,invert$1=invert$12,conjugate$1=conjugate$12,fromMat3=fromMat32,fromEuler=fromEuler2,str$2=str$22,equals$2=equals$22,create$1=create$12,clone$1=clone$12,fromValues$1=fromValues$12,fromRotationTranslationValues=fromRotationTranslationValues2,fromRotationTranslation=fromRotationTranslation2,fromTranslation=fromTranslation2,fromRotation=fromRotation2,fromMat4=fromMat42,copy$1=copy$12,identity=identity2,set$1=set$12,getDual=getDual2,setDual=setDual2,getTranslation=getTranslation2,translate=translate2,rotateX=rotateX2,rotateY=rotateY2,rotateZ=rotateZ2,rotateByQuatAppend=rotateByQuatAppend2,rotateByQuatPrepend=rotateByQuatPrepend2,rotateAroundAxis=rotateAroundAxis2,add$1=add$12,multiply$1=multiply$12,scale$1=scale$12,lerp$1=lerp$12,invert=invert2,conjugate=conjugate2,normalize$1=normalize$12,str$1=str$12,exactEquals$1=exactEquals$12,equals$1=equals$12,create=create2,clone=clone2,fromValues=fromValues2,copy=copy2,set=set2,add=add2,subtract=subtract2,multiply=multiply2,divide=divide2,ceil=ceil2,floor=floor2,min=min2,max=max2,round=round2,scale=scale2,scaleAndAdd=scaleAndAdd2,distance=distance2,squaredDistance=squaredDistance2,length=length2,squaredLength=squaredLength2,negate=negate2,inverse=inverse2,normalize=normalize2,dot=dot2,cross=cross2,lerp=lerp2,random=random2,transformMat2=transformMat22,transformMat2d=transformMat2d2,transformMat3=transformMat32,transformMat4=transformMat42,rotate=rotate2,angle=angle2,zero=zero2,str=str2,exactEquals=exactEquals2,equals=equals2,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get C(){return ARRAY_TYPE},S:RANDOM,T:ANGLE_ORDER,_:setMatrixArrayType2,A:toRadian2,equals:equals$92},mul$8=multiply$82,sub$6=subtract$62,mat2=Object.freeze({__proto__:null,create:create$82,clone:clone$82,I:copy$82,identity:identity$52,R:fromValues$82,set:set$82,M:transpose$22,G:invert$52,P:adjoint$22,O:determinant$32,multiply:multiply$82,rotate:rotate$42,scale:scale$82,D:fromRotation$42,L:fromScaling$32,N:str$82,F:frob$32,B:LDU2,add:add$82,$:subtract$62,W:exactEquals$82,equals:equals$82,U:multiplyScalar$32,V:multiplyScalarAndAdd$32,mul:mul$8,sub:sub$6}),mul$7=multiply$72,sub$5=subtract$52,mat2d=Object.freeze({__proto__:null,create:create$72,clone:clone$72,I:copy$72,identity:identity$42,R:fromValues$72,set:set$72,G:invert$42,O:determinant$22,multiply:multiply$72,rotate:rotate$32,scale:scale$72,translate:translate$32,D:fromRotation$32,L:fromScaling$22,H:fromTranslation$32,N:str$72,F:frob$22,add:add$72,$:subtract$52,U:multiplyScalar$22,V:multiplyScalarAndAdd$22,W:exactEquals$72,equals:equals$72,mul:mul$7,sub:sub$5}),mul$6=multiply$62,sub$4=subtract$42,mat3=Object.freeze({__proto__:null,create:create$62,j:fromMat4$12,clone:clone$62,I:copy$62,R:fromValues$62,set:set$62,identity:identity$32,M:transpose$12,G:invert$32,P:adjoint$12,O:determinant$12,multiply:multiply$62,translate:translate$22,rotate:rotate$22,scale:scale$62,H:fromTranslation$22,D:fromRotation$22,L:fromScaling$12,X:fromMat2d2,Y:fromQuat$12,K:normalFromMat42,J:projection2,N:str$62,F:frob$12,add:add$62,$:subtract$42,U:multiplyScalar$12,V:multiplyScalarAndAdd$12,W:exactEquals$62,equals:equals$62,mul:mul$6,sub:sub$4}),perspective=perspectiveNO2,ortho=orthoNO2,mul$5=multiply$52,sub$3=subtract$32,mat4=Object.freeze({__proto__:null,create:create$52,clone:clone$52,I:copy$52,R:fromValues$52,set:set$52,identity:identity$22,M:transpose2,G:invert$22,P:adjoint2,O:determinant2,multiply:multiply$52,translate:translate$12,scale:scale$52,rotate:rotate$12,Z:rotateX$32,tt:rotateY$32,et:rotateZ$32,H:fromTranslation$12,L:fromScaling2,D:fromRotation$12,it:fromXRotation2,nt:fromYRotation2,ht:fromZRotation2,ot:fromRotationTranslation$12,lt:fromQuat22,ct:getTranslation$12,ut:getScaling2,Ct:getRotation2,gt:decompose2,St:fromRotationTranslationScale2,yt:fromRotationTranslationScaleOrigin2,Y:fromQuat3,Tt:frustum2,_t:perspectiveNO2,perspective:perspective,Et:perspectiveZO2,At:perspectiveFromFieldOfView2,It:orthoNO2,ortho:ortho,Rt:orthoZO2,Mt:lookAt2,bt:targetTo2,N:str$52,F:frob2,add:add$52,$:subtract$32,U:multiplyScalar2,V:multiplyScalarAndAdd2,W:exactEquals$52,equals:equals$52,mul:mul$5,sub:sub$3}),sub$2=subtract$22,mul$4=multiply$42,div$2=divide$22,dist$2=distance$22,sqrDist$2=squaredDistance$22,len$4=length$42,sqrLen$4=squaredLength$42,forEach$2=(()=>{var a=create$42();return function(t,e,s,i,r,n){var h,o;for(e=e||3,s=s||0,o=i?Math.min(i*e+s,t.length):t.length,h=s;h<o;h+=e)a[0]=t[h],a[1]=t[h+1],a[2]=t[h+2],r(a,a,n),t[h]=a[0],t[h+1]=a[1],t[h+2]=a[2];return t}})(),vec3=Object.freeze({__proto__:null,create:create$42,clone:clone$42,length:length$42,R:fromValues$42,I:copy$42,set:set$42,add:add$42,$:subtract$22,multiply:multiply$42,vt:divide$22,ceil:ceil$22,floor:floor$22,min:min$22,max:max$22,round:round$22,scale:scale$42,xt:scaleAndAdd$22,Gt:distance$22,Pt:squaredDistance$22,Ot:squaredLength$42,Dt:negate$22,inverse:inverse$22,normalize:normalize$42,Lt:dot$42,Nt:cross$22,Ft:lerp$42,kt:slerp$12,Bt:hermite2,$t:bezier2,random:random$32,Wt:transformMat4$22,Ut:transformMat3$12,Vt:transformQuat$12,Z:rotateX$22,tt:rotateY$22,et:rotateZ$22,angle:angle$12,Ht:zero$22,N:str$42,W:exactEquals$42,equals:equals$42,sub:sub$2,mul:mul$4,div:div$2,jt:dist$2,Xt:sqrDist$2,Yt:len$4,qt:sqrLen$4,forEach:forEach$2}),sub$1=subtract$12,mul$3=multiply$32,div$1=divide$12,dist$1=distance$12,sqrDist$1=squaredDistance$12,len$3=length$32,sqrLen$3=squaredLength$32,forEach$1=(()=>{var a=create$32();return function(t,e,s,i,r,n){var h,o;for(e=e||4,s=s||0,o=i?Math.min(i*e+s,t.length):t.length,h=s;h<o;h+=e)a[0]=t[h],a[1]=t[h+1],a[2]=t[h+2],a[3]=t[h+3],r(a,a,n),t[h]=a[0],t[h+1]=a[1],t[h+2]=a[2],t[h+3]=a[3];return t}})(),vec4=Object.freeze({__proto__:null,create:create$32,clone:clone$32,R:fromValues$32,I:copy$32,set:set$32,add:add$32,$:subtract$12,multiply:multiply$32,vt:divide$12,ceil:ceil$12,floor:floor$12,min:min$12,max:max$12,round:round$12,scale:scale$32,xt:scaleAndAdd$12,Gt:distance$12,Pt:squaredDistance$12,length:length$32,Ot:squaredLength$32,Dt:negate$12,inverse:inverse$12,normalize:normalize$32,Lt:dot$32,Nt:cross$12,Ft:lerp$32,random:random$22,Wt:transformMat4$12,Vt:transformQuat2,Ht:zero$12,N:str$32,W:exactEquals$32,equals:equals$32,sub:sub$1,mul:mul$3,div:div$1,jt:dist$1,Xt:sqrDist$1,Yt:len$3,qt:sqrLen$3,forEach:forEach$1}),clone$2=clone$32,fromValues$2=fromValues$32,copy$2=copy$32,set$2=set$32,add$2=add$32,mul$2=multiply$22,scale$2=scale$32,dot$2=dot$32,lerp$2=lerp$32,length$2=length$32,len$2=length$2,squaredLength$2=squaredLength$32,sqrLen$2=squaredLength$2,normalize$2=normalize$32,exactEquals$2=exactEquals$32,rotationTo=(()=>{var r=create$42(),n=fromValues$42(1,0,0),h=fromValues$42(0,1,0);return function(t,e,s){var i=dot$42(e,s);return i<-.999999?(cross$22(r,n,e),len$4(r)<1e-6&&cross$22(r,h,e),normalize$42(r,r),setAxisAngle2(t,r,Math.PI),t):.999999<i?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(cross$22(r,e,s),t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=1+i,normalize$2(t,t))}})(),sqlerp=(()=>{var h=create$22(),o=create$22();return function(t,e,s,i,r,n){return slerp2(h,e,r,n),slerp2(o,s,i,n),slerp2(t,h,o,2*n*(1-n)),t}})(),setAxes=(()=>{var r=create$62();return function(t,e,s,i){return r[0]=s[0],r[3]=s[1],r[6]=s[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],normalize$2(t,fromMat32(t,r))}})(),quat=Object.freeze({__proto__:null,create:create$22,identity:identity$12,Kt:setAxisAngle2,zt:getAxisAngle2,Jt:getAngle2,multiply:multiply$22,Z:rotateX$12,tt:rotateY$12,et:rotateZ$12,Zt:calculateW2,exp:exp2,Qt:ln2,pow:pow2,kt:slerp2,random:random$12,G:invert$12,te:conjugate$12,ie:fromMat32,re:fromEuler2,N:str$22,clone:clone$2,R:fromValues$2,I:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,Lt:dot$2,Ft:lerp$2,length:length$2,Yt:len$2,Ot:squaredLength$2,qt:sqrLen$2,normalize:normalize$2,W:exactEquals$2,equals:equals$22,ne:rotationTo,he:sqlerp,oe:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=multiply$12,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:create$12,clone:clone$12,R:fromValues$12,ae:fromRotationTranslationValues2,ot:fromRotationTranslation2,H:fromTranslation2,D:fromRotation2,j:fromMat42,I:copy$12,identity:identity2,set:set$12,le:getReal,ue:getDual2,fe:setReal,de:setDual2,ct:getTranslation2,translate:translate2,Z:rotateX2,tt:rotateY2,et:rotateZ2,pe:rotateByQuatAppend2,me:rotateByQuatPrepend2,Ce:rotateAroundAxis2,add:add$12,multiply:multiply$12,mul:mul$1,scale:scale$12,Lt:dot$1,Ft:lerp$12,G:invert2,te:conjugate2,length:length$1,Yt:len$1,Ot:squaredLength$1,qt:sqrLen$1,normalize:normalize$12,N:str$12,W:exactEquals$12,equals:equals$12}),len=length2,sub=subtract2,mul=multiply2,div=divide2,dist=distance2,sqrDist=squaredDistance2,sqrLen=squaredLength2,forEach=(()=>{var a=create2();return function(t,e,s,i,r,n){var h,o;for(e=e||2,s=s||0,o=i?Math.min(i*e+s,t.length):t.length,h=s;h<o;h+=e)a[0]=t[h],a[1]=t[h+1],r(a,a,n),t[h]=a[0],t[h+1]=a[1];return t}})(),vec2=Object.freeze({__proto__:null,create:create2,clone:clone2,R:fromValues2,I:copy2,set:set2,add:add2,$:subtract2,multiply:multiply2,vt:divide2,ceil:ceil2,floor:floor2,min:min2,max:max2,round:round2,scale:scale2,xt:scaleAndAdd2,Gt:distance2,Pt:squaredDistance2,length:length2,Ot:squaredLength2,Dt:negate2,inverse:inverse2,normalize:normalize2,Lt:dot2,Nt:cross2,Ft:lerp2,random:random2,ge:transformMat22,Se:transformMat2d2,Ut:transformMat32,Wt:transformMat42,rotate:rotate2,angle:angle2,Ht:zero2,N:str2,W:exactEquals2,equals:equals2,Yt:len,sub:sub,mul:mul,div:div,jt:dist,Xt:sqrDist,qt:sqrLen,forEach:forEach}),globalThis.ye=common,globalThis.ye.Te=mat2,globalThis.ye._e=mat2d,globalThis.ye.Ee=mat3,globalThis.ye.Ae=mat4,globalThis.ye.Ie=quat,globalThis.ye.we=quat2,globalThis.ye.Re=vec2,globalThis.ye.Me=vec3,globalThis.ye.ve=vec4}var EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,asyncifyRequest,asyncifyTransaction,openReadOnlyTransaction,openWriteTransaction,lazyOpenDatabase,RequireString,getEntriesFromCursor,NOT_IMPLEMENTED,DISALLOW_CALLBACK,StructuredClone,arrayFlat,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,GetInst_SDKv2,GetWorldInfo_SDKv2,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,PickByUID_Normal,PickByUID_Inverted,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,GetAudioSdkInstance,GetAudioDOMInterface,GetKeyboardSdkInstance,StringFromCharCode,IsExpressionType,GetTouchSdkInstance,ResizeArray,DoForEachTrigger,CompareValues,WrapModeToStr,getOffsetParam,normalizeCssColorString,GetParticleEngine,randomOffset,CloneDrawable,getIndexForEase,ValidateTags,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let lineInt2=function(t,e,s){var i=[0,0],r=t[1][1]-t[0][1],n=t[0][0]-t[1][0],t=r*t[0][0]+n*t[0][1],h=e[1][1]-e[0][1],o=e[0][0]-e[1][0],e=h*e[0][0]+o*e[0][1],a=r*o-h*n;return scalar_eq2(a,0,s=s||0)||(i[0]=(o*t-n*e)/a,i[1]=(r*e-h*t)/a),i},lineSegmentsIntersect2=function(t,e,s,i){var r,n=e[0]-t[0],e=e[1]-t[1],h=i[0]-s[0];return h*e-(i=i[1]-s[1])*n!=0&&(r=(h*(t[1]-s[1])+i*(s[0]-t[0]))/(i*n-h*e),0<=(t=(n*(s[1]-t[1])+e*(t[0]-s[0]))/(h*e-i*n)))&&t<=1&&0<=r&&r<=1},triangleArea2=function(t,e,s){return(e[0]-t[0])*(s[1]-t[1])-(s[0]-t[0])*(e[1]-t[1])},isLeft2=function(t,e,s){return 0<triangleArea2(t,e,s)},isLeftOn2=function(t,e,s){return 0<=triangleArea2(t,e,s)},isRight2=function(t,e,s){return triangleArea2(t,e,s)<0},isRightOn2=function(t,e,s){return triangleArea2(t,e,s)<=0},collinear2=function(t,e,s,i){var r,n,h;return i?(h=tmpPoint2,(n=tmpPoint1)[0]=e[0]-t[0],n[1]=e[1]-t[1],h[0]=s[0]-e[0],h[1]=s[1]-e[1],r=n[0]*h[0]+n[1]*h[1],n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),h=Math.sqrt(h[0]*h[0]+h[1]*h[1]),Math.acos(r/(n*h))<i):0===triangleArea2(t,e,s)},sqdist2=function(t,e){var s=e[0]-t[0];return s*s+(e=e[1]-t[1])*e},polygonAt2=function(t,e){var s=t.length;return t[e<0?e%s+s:e%s]},polygonClear2=function(t){t.length=0},polygonAppend2=function(t,e,s,i){for(var r=s;r<i;r++)t.push(e[r])},polygonMakeCCW2=function(t){for(var e=0,s=t,i=1;i<t.length;++i)(s[i][1]<s[e][1]||s[i][1]===s[e][1]&&s[i][0]>s[e][0])&&(e=i);return!isLeft2(polygonAt2(t,e-1),polygonAt2(t,e),polygonAt2(t,e+1))&&(polygonReverse2(t),!0)},polygonReverse2=function(t){for(var e=[],s=t.length,i=0;i!==s;i++)e.push(t.pop());for(i=0;i!==s;i++)t[i]=e[i]},polygonIsReflex2=function(t,e){return isRight2(polygonAt2(t,e-1),polygonAt2(t,e),polygonAt2(t,e+1))},polygonCanSee3=function(t,e,s){var i,r=tmpLine1,n=tmpLine2;if(isLeftOn2(polygonAt2(t,e+1),polygonAt2(t,e),polygonAt2(t,s))&&isRightOn2(polygonAt2(t,e-1),polygonAt2(t,e),polygonAt2(t,s)))return!1;for(var h=sqdist2(polygonAt2(t,e),polygonAt2(t,s)),o=0;o!==t.length;++o)if((o+1)%t.length!==e&&o!==e&&isLeftOn2(polygonAt2(t,e),polygonAt2(t,s),polygonAt2(t,o+1))&&isRightOn2(polygonAt2(t,e),polygonAt2(t,s),polygonAt2(t,o))&&(r[0]=polygonAt2(t,e),r[1]=polygonAt2(t,s),n[0]=polygonAt2(t,o),n[1]=polygonAt2(t,o+1),i=lineInt2(r,n),sqdist2(polygonAt2(t,e),i)<h))return!1;return!0},polygonCanSee22=function(t,e,s){for(var i=0;i!==t.length;++i)if(i!==e&&i!==s&&(i+1)%t.length!==e&&(i+1)%t.length!==s&&lineSegmentsIntersect2(polygonAt2(t,e),polygonAt2(t,s),polygonAt2(t,i),polygonAt2(t,i+1)))return!1;return!0},polygonCopy2=function(t,e,s,i){var r=i||[];if(polygonClear2(r),e<s)for(var n=e;n<=s;n++)r.push(t[n]);else{for(n=0;n<=s;n++)r.push(t[n]);for(n=e;n<t.length;n++)r.push(t[n])}return r},polygonGetCutEdges2=function(t){for(var e=[],s=[],i=[],r=Number.MAX_VALUE,n=0;n<t.length;++n)if(polygonIsReflex2(t,n))for(var h=0;h<t.length;++h)if(polygonCanSee3(t,n,h)){for(var s=polygonGetCutEdges2(polygonCopy2(t,n,h,i)),o=polygonGetCutEdges2(polygonCopy2(t,h,n,i)),a=0;a<o.length;a++)s.push(o[a]);s.length<r&&(r=(e=s).length,e.push([polygonAt2(t,n),polygonAt2(t,h)]))}return e},polygonDecomp2=function(t){var e=polygonGetCutEdges2(t);return 0<e.length?polygonSlice2(t,e):[t]},polygonSlice2=function(t,e){if(0===e.length)return[t];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2===e[0].length&&e[0][0]instanceof Array){for(var s=[t],i=0;i<e.length;i++)for(var r=e[i],n=0;n<s.length;n++){var h=polygonSlice2(s[n],r);if(h){s.splice(n,1),s.push(h[0],h[1]);break}}return s}return i=t.indexOf((r=e)[0]),n=t.indexOf(r[1]),-1!==i&&-1!==n&&[polygonCopy2(t,i,n),polygonCopy2(t,n,i)]},polygonIsSimple2=function(t){for(var e=t,s=0;s<e.length-1;s++)for(var i=0;i<s-1;i++)if(lineSegmentsIntersect2(e[s],e[s+1],e[i],e[i+1]))return!1;for(s=1;s<e.length-2;s++)if(lineSegmentsIntersect2(e[0],e[e.length-1],e[s],e[s+1]))return!1;return!0},getIntersectionPoint2=function(t,e,s,i,r){var n=e[1]-t[1],e=t[0]-e[0],t=n*t[0]+e*t[1],h=i[1]-s[1],i=s[0]-i[0],s=h*s[0]+i*s[1],o=n*i-h*e;return scalar_eq2(o,0,r=r||0)?[0,0]:[(i*t-e*s)/o,(n*s-h*t)/o]},polygonQuickDecomp2=function(t,e,s,i,r,n,h){n=n||100,h=h||0,r=r||25,e=void 0!==e?e:[],s=s||[],i=i||[];var o=[0,0],a=[0,0],l=[0,0],c=0,u=0,f=0,d=0,p=0,m=0,C=0,g=[],S=[],y=t,T=t;if(!(T.length<3))if(n<++h)console.warn("quickDecomp: max level ("+n+") reached.");else{for(var _=0;_<t.length;++_)if(polygonIsReflex2(y,_)){s.push(y[_]);for(var c=u=Number.MAX_VALUE,E=0;E<t.length;++E)isLeft2(polygonAt2(y,_-1),polygonAt2(y,_),polygonAt2(y,E))&&isRightOn2(polygonAt2(y,_-1),polygonAt2(y,_),polygonAt2(y,E-1))&&(l=getIntersectionPoint2(polygonAt2(y,_-1),polygonAt2(y,_),polygonAt2(y,E),polygonAt2(y,E-1)),isRight2(polygonAt2(y,_+1),polygonAt2(y,_),l))&&(f=sqdist2(y[_],l))<u&&(u=f,a=l,m=E),isLeft2(polygonAt2(y,_+1),polygonAt2(y,_),polygonAt2(y,E+1))&&isRightOn2(polygonAt2(y,_+1),polygonAt2(y,_),polygonAt2(y,E))&&(l=getIntersectionPoint2(polygonAt2(y,_+1),polygonAt2(y,_),polygonAt2(y,E),polygonAt2(y,E+1)),isLeft2(polygonAt2(y,_-1),polygonAt2(y,_),l))&&(f=sqdist2(y[_],l))<c&&(c=f,o=l,p=E);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,i.push(l),_<p?(polygonAppend2(g,y,_,p+1),g.push(l),S.push(l),0!==m&&polygonAppend2(S,y,m,y.length),polygonAppend2(S,y,0,_+1)):(0!==_&&polygonAppend2(g,y,_,y.length),polygonAppend2(g,y,0,p+1),g.push(l),S.push(l),polygonAppend2(S,y,m,_+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return e;for(E=m;E<=p;++E)isLeftOn2(polygonAt2(y,_-1),polygonAt2(y,_),polygonAt2(y,E))&&isRightOn2(polygonAt2(y,_+1),polygonAt2(y,_),polygonAt2(y,E))&&(f=sqdist2(polygonAt2(y,_),polygonAt2(y,E)))<d&&polygonCanSee22(y,_,E)&&(d=f,C=E%t.length);_<C?(polygonAppend2(g,y,_,C+1),0!==C&&polygonAppend2(S,y,C,T.length),polygonAppend2(S,y,0,_+1)):(0!==_&&polygonAppend2(g,y,_,T.length),polygonAppend2(g,y,0,C+1),polygonAppend2(S,y,C,_+1))}return g.length<S.length?(polygonQuickDecomp2(g,e,s,i,r,n,h),polygonQuickDecomp2(S,e,s,i,r,n,h)):(polygonQuickDecomp2(S,e,s,i,r,n,h),polygonQuickDecomp2(g,e,s,i,r,n,h)),e}e.push(t)}return e},polygonRemoveCollinearPoints2=function(t,e){for(var s=0,i=t.length-1;3<t.length&&0<=i;--i)collinear2(polygonAt2(t,i-1),polygonAt2(t,i),polygonAt2(t,i+1),e)&&(t.splice(i%t.length,1),s++);return s},polygonRemoveDuplicatePoints2=function(t,e){for(var s=t.length-1;1<=s;--s)for(var i=t[s],r=s-1;0<=r;--r)points_eq2(i,t[r],e)&&t.splice(s,1)},scalar_eq2=function(t,e,s){return s=s||0,Math.abs(t-e)<=s},points_eq2=function(t,e,s){return scalar_eq2(t[0],e[0],s)&&scalar_eq2(t[1],e[1],s)};lineInt=lineInt2,lineSegmentsIntersect=lineSegmentsIntersect2,triangleArea=triangleArea2,isLeft=isLeft2,isLeftOn=isLeftOn2,isRight=isRight2,isRightOn=isRightOn2,collinear=collinear2,sqdist=sqdist2,polygonAt=polygonAt2,polygonClear=polygonClear2,polygonAppend=polygonAppend2,polygonMakeCCW=polygonMakeCCW2,polygonReverse=polygonReverse2,polygonIsReflex=polygonIsReflex2,polygonCanSee=polygonCanSee3,polygonCanSee2=polygonCanSee22,polygonCopy=polygonCopy2,polygonGetCutEdges=polygonGetCutEdges2,polygonDecomp=polygonDecomp2,polygonSlice=polygonSlice2,polygonIsSimple=polygonIsSimple2,getIntersectionPoint=getIntersectionPoint2,polygonQuickDecomp=polygonQuickDecomp2,polygonRemoveCollinearPoints=polygonRemoveCollinearPoints2,polygonRemoveDuplicatePoints=polygonRemoveDuplicatePoints2,scalar_eq=scalar_eq2,points_eq=points_eq2,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.xe={Ge:polygonDecomp2,Pe:polygonQuickDecomp2,Oe:polygonIsSimple2,De:polygonRemoveCollinearPoints2,Le:polygonRemoveDuplicatePoints2,Ne:polygonMakeCCW2}}{let isReady=!1,hasAppStarted=!1,buildMode="dev",internalApiToken=Symbol("Construct internal API token"),internalApiTokenAccessesRemaining=14,C33=self.Fe=class{constructor(){throw TypeError("static class can't be instantiated")}static ke(){if(internalApiTokenAccessesRemaining<=0)throw new Error("cannot obtain internal API token");return--internalApiTokenAccessesRemaining,internalApiToken}static Be(){isReady=!0}static $e(){return isReady}static We(){hasAppStarted=!0}static Ue(){return hasAppStarted}static Ve(t){buildMode=t}static He(){return buildMode}static je(){return"final"===buildMode}};C33.isDebug=!1,C33.Xe=!1,C33.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ye={}}{const C33=self.Fe;C33.qe=class{constructor(t){this.Ke=t,this.Je=new Map,this.Ze()}Ze(){let t=this.Ke,e=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const s of e)this.Qe(s)}Qe(t){if(t)if(t.includes("=")){const e=t.indexOf("="),s=decodeURIComponent(t.substring(0,e)),i=decodeURIComponent(t.substring(e+1));this.Je.set(s,i)}else this.Je.set(t,null)}ts(){for(const t of this.Je)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}es(t){return this.Je.has(t)}rs(t){const e=this.Je.get(t);return void 0===e?null:e}ns(){history.replaceState("",document.title,location.pathname+location.search)}hs(t){this.Ke=t,this.Je.clear(),this.Ze()}},C33.os=new C33.qe(location.search),C33.ls=new C33.qe(location.hash),C33.os.es("perf")&&(C33.us=!0),"dev"!==C33.os.rs("mode")&&C33.Ve("final")}{let GetWindowsNTVersionName2=function(t){const e=parseFloat(t),s=windowsNTVerMap.get(e);return s||(13<=e?"11":"NT "+t)};GetWindowsNTVersionName=GetWindowsNTVersionName2;const C33=self.Fe,UNKNOWN="(unknown)",windowsNTVerMap=(C33.ds={Cs:UNKNOWN,gs:UNKNOWN,Ss:UNKNOWN,ys:UNKNOWN,Ts:NaN,_s:UNKNOWN,Es:"browser",As:!0,Is:!1,ws:!1,Rs:!1,Ms:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),uaStr=navigator.userAgent,uaData=navigator.userAgentData;if(uaData&&0<uaData.brands.length){let ReadBrandList2=function(t){let s="",i="",r="",n="";for(const h of t){const o=d.get(h.brand),a=(!s&&o&&(s=o,i=h.version),e.get(h.brand));!r&&a&&(r=a,n=h.version)}s||"Chromium"!==r||(C33.ds.Ss="Chromium",C33.ds.ys=n),C33.ds.Ss=s||UNKNOWN,C33.ds.ys=i||UNKNOWN,C33.ds._s=r||UNKNOWN};ReadBrandList=ReadBrandList2,C33.ds.Cs=uaData.platform,C33.ds.Is=uaData.mobile,C33.ds.As=!C33.ds.Is;const d=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),e=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);ReadBrandList2(uaData.brands);let o=!1;C33.ds.Ms=async()=>{if(!o)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);ReadBrandList2(t.fullVersionList),"Windows"===C33.ds.Cs?C33.ds.gs=GetWindowsNTVersionName2(t.platformVersion):C33.ds.gs=t.platformVersion,o=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let RunTest2=function(t,e){const s=Array.isArray(t)?t:[t];for(const i of s){const r=i.exec(uaStr);if(r){e(r);break}}};RunTest=RunTest2,RunTest2(/windows\s+nt\s+([\d\.]+)/i,t=>{C33.ds.Cs="Windows";const e=t[1];C33.ds.gs=GetWindowsNTVersionName2(e)}),RunTest2(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{C33.ds.Cs="macOS",C33.ds.gs=t[1].replace(/_/g,".")}),RunTest2(/CrOS/,()=>{C33.ds.Cs="Chrome OS"}),RunTest2(/linux|openbsd|freebsd|netbsd/i,()=>{C33.ds.Cs="Linux"}),RunTest2(/android/i,()=>{C33.ds.Cs="Android"}),RunTest2(/android\s+([\d\.]+)/i,t=>{C33.ds.Cs="Android",C33.ds.gs=t[1]}),C33.ds.Cs===UNKNOWN&&(RunTest2(/(iphone|ipod|ipad)/i,t=>{C33.ds.Cs="iOS"}),RunTest2([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{C33.ds.Cs="iOS",C33.ds.gs=t[1].replace(/_/g,".")}));const q=/chrome\//i.test(uaStr),r=/chromium\//i.test(uaStr),s=/edg\//i.test(uaStr),t=/OPR\//.test(uaStr),u=/nwjs/i.test(uaStr),v=/safari\//i.test(uaStr),w=/webkit/i.test(uaStr),x=(s||t||RunTest2(/chrome\/([\d\.]+)/i,t=>{C33.ds.Ss="Chrome",C33.ds.ys=t[1],C33.ds._s="Chromium"}),RunTest2(/edg\/([\d\.]+)/i,t=>{C33.ds.Ss="Edge",C33.ds.ys=t[1],C33.ds._s="Chromium"}),RunTest2(/OPR\/([\d\.]+)/,t=>{C33.ds.Ss="Opera",C33.ds.ys=t[1],C33.ds._s="Chromium"}),RunTest2(/chromium\/([\d\.]+)/i,t=>{C33.ds.Ss="Chromium",C33.ds.ys=t[1],C33.ds._s="Chromium"}),RunTest2(/nwjs\/[0-9.]+/i,t=>{C33.ds.Ss="NW.js",C33.ds.ys=t[1],C33.ds._s="Chromium",C33.ds.Es="nwjs"}),RunTest2(/firefox\/([\d\.]+)/i,t=>{C33.ds.Ss="Firefox",C33.ds.ys=t[1],C33.ds._s="Gecko"}),!v||q||r||s||t||u||(C33.ds.Ss="Safari",C33.ds._s="WebKit",RunTest2(/version\/([\d\.]+)/i,t=>{C33.ds.ys=t[1]}),RunTest2(/crios\/([\d\.]+)/i,t=>{C33.ds.Ss="Chrome for iOS",C33.ds.ys=t[1]}),RunTest2(/fxios\/([\d\.]+)/i,t=>{C33.ds.Ss="Firefox for iOS",C33.ds.ys=t[1]}),RunTest2(/edgios\/([\d\.]+)/i,t=>{C33.ds.Ss="Edge for iOS",C33.ds.ys=t[1]})),C33.ds._s===UNKNOWN&&w&&(C33.ds._s="WebKit"),"Android"===C33.ds.Cs&&"Safari"===C33.ds.Ss&&(C33.ds.Ss="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),y=x.has(C33.ds.Cs)||"nwjs"===C33.ds.Es;C33.ds.As=y,C33.ds.Is=!y}"Chrome"===C33.ds.Ss&&"browser"===C33.ds.Es&&/wv\)/.test(uaStr)&&(C33.ds.Es="webview"),"nwjs"!==C33.ds.Es&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(C33.ds.Es="webapp"),C33.ds.Ts=parseFloat(C33.ds.ys);const looksLikeIPadOS="macOS"===C33.ds.Cs&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;looksLikeIPadOS&&(C33.ds.Cs="iOS",C33.ds.gs=C33.ds.ys,C33.ds.As=!1,C33.ds.Is=!0,C33.ds.Rs=!0),C33.ds.ws="macOS"===C33.ds.Cs||"iOS"===C33.ds.Cs}{let asyncifyRequest2=function(s){return new Promise((t,e)=>{s.onsuccess=()=>t(s.result),s.onerror=()=>e(s.error)})},asyncifyTransaction2=function(s){return new Promise((t,e)=>{s.oncomplete=()=>t(),s.onerror=()=>e(s.error),s.onabort=()=>e(s.error)})},openReadOnlyTransaction2=function(t,e){return openTransaction(t,e)},openWriteTransaction2=function(t,e){return openTransaction(t,e,!0)},lazyOpenDatabase2=function(e){RequireString2(e);let t=c.get(e);return t instanceof Promise||(t=openDatabase(e),c.set(e,t),t.catch(t=>c.delete(e))),t},RequireString2=function(t){if("string"!=typeof t)throw new TypeError("expected string")},getEntriesFromCursor2=function(t,r){const e=t.objectStore(b).openCursor();return new Promise(s=>{const i=[];e.onsuccess=t=>{const e=t.target.result;if(e){switch(r){case"entries":i.push([e.key,e.value]);break;case"keys":i.push(e.key);break;case"values":i.push(e.value)}e.continue()}else s(i)}})};asyncifyRequest=asyncifyRequest2,asyncifyTransaction=asyncifyTransaction2,openReadOnlyTransaction=openReadOnlyTransaction2,openWriteTransaction=openWriteTransaction2,lazyOpenDatabase=lazyOpenDatabase2,RequireString=RequireString2,getEntriesFromCursor=getEntriesFromCursor2;const a=2,b="keyvaluepairs",c=new Map,d="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,e="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function openTransaction(e,s,i=!1,r=!0){const t=await lazyOpenDatabase2(e);try{const n=t.transaction([b],i?"readwrite":"readonly");return s(n)}catch(t){if(r&&"InvalidStateError"===t.name)return c.delete(e),openTransaction(e,s,i,!1);throw t}}async function openDatabase(s){RequireString2(s);const t=indexedDB.open(s,a);return t.addEventListener("upgradeneeded",t=>{try{const e=t.target.result;e.createObjectStore(b)}catch(t){console.error("Failed to create objectstore for database "+s,t)}}),asyncifyRequest2(t)}class f{constructor(t){RequireString2(t),this.name=t}async ready(){await lazyOpenDatabase2(this.name)}set(r,n){return RequireString2(r),openWriteTransaction2(this.name,async t=>{const e=t.objectStore(b).put(n,r),s=asyncifyRequest2(e),i=asyncifyTransaction2(t);await Promise.all([i,s])})}get(n){return RequireString2(n),openReadOnlyTransaction2(this.name,async t=>{const e=t.objectStore(b).get(n),s=asyncifyRequest2(e),i=asyncifyTransaction2(t),[,r]=await Promise.all([i,s]);return r})}delete(r){return RequireString2(r),openWriteTransaction2(this.name,async t=>{const e=t.objectStore(b).delete(r),s=asyncifyRequest2(e),i=asyncifyTransaction2(t);await Promise.all([i,s])})}clear(){return openWriteTransaction2(this.name,async t=>{const e=t.objectStore(b).clear(),s=asyncifyRequest2(e),i=asyncifyTransaction2(t);await Promise.all([i,s])})}keys(){return openReadOnlyTransaction2(this.name,async t=>{let s;if(e){const n=t.objectStore(b).getAllKeys();s=asyncifyRequest2(n)}else s=getEntriesFromCursor2(t,"keys");const i=asyncifyTransaction2(t),[,r]=await Promise.all([i,s]);return r})}values(){return openReadOnlyTransaction2(this.name,async t=>{let e;if(d){const r=t.objectStore(b).getAll();e=asyncifyRequest2(r)}else e=getEntriesFromCursor2(t,"values");const s=asyncifyTransaction2(t),[,i]=await Promise.all([s,e]);return i})}entries(){return openReadOnlyTransaction2(this.name,async t=>{const e=getEntriesFromCursor2(t,"entries"),s=asyncifyTransaction2(t),[,i]=await Promise.all([s,e]);return i})}}self.bs=f}{let NOT_IMPLEMENTED2=function(t){throw new Error(`"${t}" is not implemented`)},DISALLOW_CALLBACK2=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},StructuredClone2=function(i){return"object"==typeof i?new Promise(e=>{const{port1:t,port2:s}=new MessageChannel;s.onmessage=t=>e(t.data),t.postMessage(i)}):Promise.resolve(i)};NOT_IMPLEMENTED=NOT_IMPLEMENTED2,DISALLOW_CALLBACK=DISALLOW_CALLBACK2,StructuredClone=StructuredClone2;const a=self.bs,b=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i],c=new WeakMap;class d{constructor(t){this.vs=t,this.xs=!this.vs,this.xs||"undefined"!=typeof indexedDB||(this.xs=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Gs=new Map}Ps(t){if(!this.xs)for(const e of b)if(t&&e.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.xs=!0;break}}async Os(t){const e=this.Gs.get(t),s=await StructuredClone2(e);return void 0===s?null:s}async Ds(t,e){e=await StructuredClone2(e),this.Gs.set(t,e)}Ls(t){this.Gs.delete(t)}Ns(){this.Gs.clear()}Fs(){return Array.from(this.Gs.keys())}ks(){return this.xs}Bs(){return this.Gs}$s(t){this.Gs=t}async getItem(e,t){if(DISALLOW_CALLBACK2(t),this.xs)return this.Os(e);let s;try{s=await this.vs.get(e)}catch(t){return this.Ps(t),this.xs?this.Os(e):(console.error(`Error reading '${e}' from storage, returning null: `,t),null)}return void 0===s?null:s}async setItem(e,s,t){if(DISALLOW_CALLBACK2(t),void 0===s&&(s=null),this.xs)await this.Ds(e,s);else try{await this.vs.set(e,s)}catch(t){if(this.Ps(t),!this.xs)throw t;await this.Ds(e,s)}}async removeItem(e,t){if(DISALLOW_CALLBACK2(t),this.xs)this.Ls(e);else try{await this.vs.delete(e)}catch(t){this.Ps(t),this.xs?this.Ls(e):console.error(`Error removing '${e}' from storage: `,t)}}async clear(t){if(DISALLOW_CALLBACK2(t),this.xs)this.Ns();else try{await this.vs.clear()}catch(t){this.Ps(t),this.xs?this.Ns():console.error("Error clearing storage: ",t)}}async keys(t){if(DISALLOW_CALLBACK2(t),this.xs)return this.Fs();let e=[];try{e=await this.vs.keys()}catch(t){if(this.Ps(t),this.xs)return this.Fs();console.error("Error getting storage keys: ",t)}return e}ready(t){return DISALLOW_CALLBACK2(t),this.xs?Promise.resolve(!0):this.vs.ready()}Ws(t){if(t.Us)return new d(null);{const e=t.name;if("string"!=typeof e)throw new TypeError("invalid store name");const s=new a(e);return new d(s)}}length(t){NOT_IMPLEMENTED2("localforage.length()")}key(t,e){NOT_IMPLEMENTED2("localforage.key()")}iterate(t,e){NOT_IMPLEMENTED2("localforage.iterate()")}Vs(t){NOT_IMPLEMENTED2("localforage.setDriver()")}config(t){NOT_IMPLEMENTED2("localforage.config()")}Hs(t){NOT_IMPLEMENTED2("localforage.defineDriver()")}js(){NOT_IMPLEMENTED2("localforage.driver()")}supports(t){NOT_IMPLEMENTED2("localforage.supports()")}dropInstance(){NOT_IMPLEMENTED2("localforage.dropInstance()")}}self.localforage=new d(new a("localforage"))}{const C33=self.Fe;if(C33.Xs={},C33.Xs.Ys=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const e=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==e.reverse}catch(t){return!1}})(),C33.Xs.qs="undefined"!=typeof HTMLDialogElement,C33.Xs.Ks=!!self.requestIdleCallback,C33.Xs.ImageBitmap=!!self.createImageBitmap,C33.Xs.ImageBitmapOptions=!1,C33.Xs.zs=!1,C33.Xs.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{C33.Xs.ImageBitmapOptions=!0}).catch(()=>{C33.Xs.ImageBitmapOptions=!1})}catch(e){C33.Xs.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{C33.Xs.zs=10===t.width&&10===t.height}).catch(()=>{C33.Xs.zs=!1})}catch(e){C33.Xs.zs=!1}}if(C33.Xs.Js=!(!navigator.clipboard||!navigator.clipboard.readText),C33.Xs.Zs=!(!navigator.permissions||!navigator.permissions.query),C33.Xs.Qs=!1,C33.Xs.Zs){const g={name:"clipboard-read"};navigator.permissions.query(g).then(()=>{C33.Xs.Qs=!0}).catch(()=>{C33.Xs.Qs=!1})}C33.Xs.ti=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),C33.Xs.ei="undefined"!=typeof Proxy,C33.Xs.si=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),C33.Xs.ii="function"==typeof fetch,C33.Xs.ri=!!(self.isSecureContext&&"Opera"!==C33.ds.Ss&&navigator.storage&&navigator.storage.persist),C33.Xs.ni=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),C33.Xs.hi=(()=>{if("undefined"==typeof document)return!1;if("iOS"===C33.ds.Cs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),C33.Xs.ImageDecoder=void 0!==self.ImageDecoder,C33.Xs.oi=!!self.VideoEncoder,C33.Xs.ai=!!self.showOpenFilePicker,C33.Xs.li=!!self.queryLocalFonts,C33.Xs.UserActivation=!!navigator.userActivation,C33.Xs.ci=!1,(async()=>{let e;"undefined"==typeof document?e=new OffscreenCanvas(32,32):((e=document.createElement("canvas")).width=32,e.height=32);const t=e.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let s=null;try{e.convertToBlob?s=await e.convertToBlob({type:"image/webp",quality:1}):e.toBlob&&(s=await new Promise(t=>e.toBlob(t,"image/webp",1))),C33.Xs.ci=s&&"image/webp"===s.type}catch(t){C33.Xs.ci=!1}})()}{let arrayFlat2=function(t,s){return t.reduce((t,e)=>(0<s&&Array.isArray(e)?Array.prototype.push.apply(t,arrayFlat2(e,s-1)):t.push(e),t),[])};arrayFlat=arrayFlat2;const C33=self.Fe;if(!String.prototype.trimStart){const a=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(a,"")}}if(!String.prototype.trimEnd){const c=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(c,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(C33.fi(t),"g"),e)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return arrayFlat2(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const e of this)if(!t.has(e))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((s,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,e)=>s({usage:t,quota:e}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let assertFail2=function(t){let e=C33.di(),s="Assertion failure: "+t+"\n\nStack trace:\n"+e;console.error(s)};assertFail=assertFail2;const C33=self.Fe;self.assert=function(t,e){t||assertFail2(e)}}{const C33=self.Fe,C3X=self.Ye,TypedArray=(C33.mi=function(t){return"number"==typeof t},C33.Ci=function(t){return C33.mi(t)&&isFinite(t)},C33.gi=function(t){if(!C33.mi(t))throw new TypeError("expected number")},C33.Si=function(t){C33.yi(t)},C33.Ti=function(t,e,s){if(!C33.mi(t)||isNaN(t)||t<e||s<t)throw new RangeError("number outside of range")},C33._i=function(...e){for(let t of e);},C33.Ei=function(t){if(!C33.Ci(t))throw new TypeError("expected finite number")},C33.Ai=function(t){C33.yi(t)},C33.Ii=function(...e){for(let t of e);},C33.wi=function(t){return"string"==typeof t},C33.Ri=function(t){if(!C33.wi(t))throw new TypeError("expected string")},C33.Mi=function(t){C33.yi(t)},C33.bi=function(...e){for(let t of e);},C33.vi=function(t){if("object"!=typeof t||null===t)return!1;let e=Object.getPrototypeOf(t);return e?e.constructor===Object:null===e},C33.xi=function(t){if(!C33.vi(t))throw new TypeError("expected simple object")},C33.Gi=function(t){if(!C33.yi(t)&&!C33.vi(t))throw new TypeError("expected simple object")},C33.Pi=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},C33.Oi=function(t){if(!C33.Pi(t))throw new TypeError("expected object")},C33.Di=function(t){C33.yi(t)},C33.Li=function(...e){for(let t of e);},C33.Ni=function(t){return C33.Fi(t,Blob)&&"string"==typeof t.name},C33.ki=function(t){if(!C33.Ni(t))throw new TypeError("expected file")},C33.Bi=function(t){C33.yi(t)},C33.$i=function(t){return Array.isArray(t)},C33.Wi=function(t){if(!C33.$i(t))throw new TypeError("expected array")},C33.Ui=function(t){C33.yi(t)},C33.Vi=function(...e){for(let t of e);},C33.Hi=function(t){return!(!C33.$i(t)||t.length&&!C33.$i(t[0]))},C33.ji=function(e){if(!C33.Hi(e))throw new TypeError("expected 2d array");for(let t of e)if(!C33.$i(t))throw new TypeError("expected 2d array")},C33.Xi=function(t){C33.yi(t)},C33.Yi=function(t){return"function"==typeof t},C33.Ki=function(t,e){if(!C33.Yi(t))throw new TypeError("expected function");if(!C33.yi(e)&&t!==e)throw new TypeError("expected same function reference")},C33.Ji=function(t){C33.yi(t)},C33.Zi=function(...e){for(let t of e);},C33.Qi=function(e,...s){if(!C33.Yi(e))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let t of s)if(!C33.yi(t)&&e===t)return;throw new TypeError("expected same function reference")},C33.er=function(...e){if(!C33.yi(e))for(let t of e);},C33.ir=function(t,e){return t instanceof e},C33.rr=function(e,...s){for(let t of s)if(C33.ir(e,t))return!0;return!1},C33.nr=function(t,e){if(!C33.ir(t,e))throw new TypeError("unexpected type")},C33.hr=function(t,e){C33.yi(t)},C33.lr=function(t,...e){for(let t of e);},C33.cr=function(t,...e){if(!C33.rr(t,...e))throw new TypeError("unexpected type")},C33.ur=function(t,...e){if(!C33.yi(t)&&!C33.rr(t,...e))throw new TypeError("unexpected type")},C33.dr=function(e,s){for(let t of e)if(!C33.ir(t,s))return!1;return!0},C33.pr=function(e){for(let t of e)if(!C33.Ci(t))return!1;return!0},C33.Cr=function(e,t){for(let t of e);},C33.Sr=function(e,t){if(!C33.yi(e))for(let t of e);},C33.Tr=function(e,t){if(!C33.yi(e))for(let t of e);},C33._r=function(e){for(let t of e);},C33.Er=function(e){if(!C33.yi(e))for(let t of e);},C33.Ar=function(t,e){return!(C33.yi(t)||!C33.wi(t.nodeName))&&(!e||C33.Ir(t.nodeName,e))},C33.Rr=function(t,e){if(C33.yi(t)||!C33.wi(t.nodeName))throw new TypeError("expected DOM node");if(e&&!C33.Ir(t.nodeName,e))throw new TypeError(`expected DOM '${e}' node`)},C33.Mr=function(t,e){C33.yi(t)},C33.br=function(t,e){return!(C33.yi(t)||!C33.wi(t.tagName))&&(!e||C33.Ir(t.tagName,e))},C33.vr=function(t,e){if(C33.yi(t)||!C33.wi(t.tagName))throw new TypeError("expected HTML element");if(e&&!C33.Ir(t.tagName,e))throw new TypeError(`expected HTML '${e}' element`)},C33.Gr=function(t,e){C33.yi(t)},C33.Pr=function(t){return C33.br(t,"img")||C33.br(t,"canvas")||C33.br(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},C33.Or=function(t){if(!C33.Pr(t))throw new TypeError("expected drawable")},C33.Dr=function(t){C33.yi(t)},C33.Lr=function(t){return t instanceof ImageData||C33.Pr(t)},C33.Nr=function(t){if(!C33.Lr(t))throw new TypeError("expected drawable or image data")},C33.Fr=function(t){if(!C33.yi(t)&&!C33.Lr(t))throw new TypeError("expected drawable or image data")},C33.kr=function(t){return"string"==typeof t||C33.HtmlString&&t instanceof C33.HtmlString||t instanceof C33.Br},C33.$r=function(t){if(!C33.kr(t))throw new TypeError("expected string-like")},C33.Wr=function(t){C33.yi(t)},C33.Ur=function(...e){for(let t of e);},C33.Vr=function(){throw new Error("must be overridden")},C33.Hr=function(){throw new Error("not yet implemented")},C33.jr=function(t,...e){let s=t;if(void 0===s)return!1;for(let t of e){if(void 0===s[t])return!1;s=s[t]}return!0},C33.yi=function(t){return null==t},C33.Xr=function(e){let s=e[0].constructor;for(let t of e)if(t.constructor!==s)return!1;return s},C33.Yr=function(e,s){for(let t of e)if(!(t instanceof s))return!1;return!0},Object.getPrototypeOf(Uint8Array));C33.qr=function(t){return C33.ir(t,TypedArray)},C33.Kr=function(t){},C33.zr=function(t){C33.Jr(t,TypedArray)},C33.Zr=function(t,...e){if(!C33.Qr(t,...e))throw new TypeError("unexpected type")},C33.Qr=function(t,...e){for(const s of e)if(C33.Fi(t,s))return!0;return!1},C33.Jr=function(t,e){if(!C33.Fi(t,e))throw new TypeError("unexpected type")},C33.Fi=function(t,e){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===e.name)return!0;return!1},C3X.gi=C33.gi,C3X.Si=C33.Si,C3X.Ei=C33.Ei,C3X.Ai=C33.Ai,C3X.Ri=C33.Ri,C3X.Mi=C33.Mi,C3X.Oi=C33.Oi,C3X.Di=C33.Di,C3X.Wi=C33.Wi,C3X.Ui=C33.Ui,C3X.Ki=C33.Ki,C3X.Ji=C33.Ji,C3X.nr=C33.nr,C3X.hr=C33.hr,C3X.yi=C33.yi}{let isValidTypeChange2=function(t,e){let s=C33.getType(t),i=C33.getType(e);return"null"===s||"null"===i||"undefined"!==s&&"undefined"!==i&&s===i},logDefendedObjectWarning2=function(t){console.warn("[Defence] "+t+" @",C33.di())},CheckDefendedObjectsUsedCorrectly2=function(){if(checkRafId=-1,0<ctorObjectToProxy.size||0<ctorProxyToObject.size){let t=new Set([...ctorObjectToProxy.keys()].map(t=>C33.tn(t))),e=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+e),ctorObjectToProxy.clear(),ctorProxyToObject.clear()}},getObjectPropertySet2=function(e){let s=new Set;for(let t in e)s.add(t);return s},VerifyObjectPropertiesConsistent2=function(t,e){let s=getObjectPropertySet2(e),i=typeProperties.get(t);if(i){let e=[];for(let t of i.values())s.has(t)?s.delete(t):e.push(t);C33.sn(e,[...s]),e.length&&console.warn(`[Defence] '${C33.tn(t)}' constructor creates inconsistent properties: `+e.join(", "))}else typeProperties.set(t,s)};isValidTypeChange=isValidTypeChange2,logDefendedObjectWarning=logDefendedObjectWarning2,CheckDefendedObjectsUsedCorrectly=CheckDefendedObjectsUsedCorrectly2,getObjectPropertySet=getObjectPropertySet2,VerifyObjectPropertiesConsistent=VerifyObjectPropertiesConsistent2;const C33=self.Fe,logRafIds=new Map;C33.rn=function(t,e){console.log("%c"+t,"font-weight: bold; color:"+e)},C33.nn=function(t,...e){logRafIds.has(t)||logRafIds.set(t,-1),-1===logRafIds.get(t)&&logRafIds.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...e),logRafIds.set(t,-1)}))};let measures,ctorObjectToProxy=(C33.hn=function(t){performance.mark(t),(measures=measures||new Map).has(t)||measures.set(t,{current:0,total:0,an:0,ln:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.an.toPrecision(3)} :: calls => `+this.ln}})},C33.cn=function(t){performance.measure("measure-"+t,t);const e=performance.getEntriesByName("measure-"+t)[0],s=measures.get(t);s.current=e.duration,s.total+=s.current,s.an=s.total/s.ln,console.log(s.toString()),s.ln++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},C33.di=function(){return(new Error).stack},C33.un=function(){},C33.cast=function(t,e){return t&&t instanceof e?t:null},C33.tn=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":C33.mi(t)?"<number>":C33.wi(t)?"<string>":C33.$i(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":C33.Yi(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},C33.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},C33.range=function*(e,s){if(!isFinite(Math.abs(e-s)))throw new Error("Invalid parameters");if(s<e)for(let t=e-1;t>=s;t--)yield t;else for(let t=e;t<s;t++)yield t},new Map),ctorProxyToObject=new Map,proxyToObject=new WeakMap,releasedObjects=new WeakMap;C33.dn={};const VALID_GET_MISSING_KEYS=new Set(["then","splice"]);C33.dn.get=function(t,e){return e in t||"symbol"==typeof e||VALID_GET_MISSING_KEYS.has(e)||logDefendedObjectWarning2(`Accessed missing property '${e}' from defended object '${C33.tn(t)}', returning undefined`),releasedObjects.has(t)&&"symbol"!=typeof e&&!VALID_GET_MISSING_KEYS.has(e)&&logDefendedObjectWarning2(`Accessed property '${e}' on a released object '${C33.tn(t)}'
Object was originally released at: ${releasedObjects.get(t)})
Call stack at access: `),t[e]},C33.dn.set=function(t,e,s){return e in t||ctorObjectToProxy.has(t)||logDefendedObjectWarning2(`Set non-existent property '${e}' to '${s}' on defended object '${C33.tn(t)}'`),isValidTypeChange2(t[e],s)||ctorObjectToProxy.has(t)||logDefendedObjectWarning2(`Set '${C33.getType(t[e])}' property '${e}' to type '${C33.getType(s)}' on defended object '${C33.tn(t)}'`),releasedObjects.has(t)&&logDefendedObjectWarning2(`Set property '${e}' on a released object '${C33.tn(t)}'
Object was originally released at: ${releasedObjects.get(t)})
Call stack at access: `),t[e]=s,!0},C33.dn.deleteProperty=function(t,e){throw new ReferenceError(`Cannot delete property '${e}' from defended object '${C33.tn(t)}'`)},C33.dn.defineProperty=function(t,e,s){throw new ReferenceError(`Cannot define property '${e}' on defended object '${C33.tn(t)}'`)},C33.dn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${C33.tn(t)}'`)};let checkRafId=-1,typeProperties=(C33.pn=class{constructor(){if(C33.Xe&&C33.Xs.ei){let t=Object.create(new.target.prototype),e=new Proxy(t,C33.dn);return ctorObjectToProxy.set(t,e),ctorProxyToObject.set(e,t),proxyToObject.set(e,t),-1===checkRafId&&(checkRafId=requestAnimationFrame(CheckDefendedObjectsUsedCorrectly2)),e}}},C33.mn=function(e){if(C33.Xe&&C33.Xs.ei&&e instanceof C33.pn){if(ctorProxyToObject.has(e)){let t=ctorProxyToObject.get(e);ctorProxyToObject.delete(e),ctorObjectToProxy.delete(t)}return e}return C33.isDebug?Object.seal(e):e},C33.Cn=function(t,...e){let s;try{s=new t(...e)}catch(t){throw ctorProxyToObject.clear(),ctorObjectToProxy.clear(),t}return C33.Xe&&VerifyObjectPropertiesConsistent2(t,s),C33.mn(s)},C33.gn=function(t){let e=proxyToObject.get(t);e&&releasedObjects.set(e,C33.di())},C33.Sn=function(t){let e=proxyToObject.get(t);return!!e&&!!releasedObjects.get(e)},new Map);C33.yn=class{constructor(t){this.Tn="",t&&this.start(t)}start(t){C33.us&&(this.Tn=t,performance.mark(this.Tn+"-Start"))}end(){C33.us&&(performance.mark(this.Tn+"-End"),performance.measure(this.Tn,this.Tn+"-Start",this.Tn+"-End"))}next(t){C33.us&&(this.end(),this.Tn=t,performance.mark(this.Tn+"-Start"))}}}{let isNegativeZero2=function(t){return 0===t&&1/t<0};isNegativeZero=isNegativeZero2;const C33=self.Fe,TWO_PI=2*Math.PI,D_TO_R=Math.PI/180,R_TO_D=180/Math.PI,ALPHAEX_SHIFT=(C33.wrap=function(t,e,s){t=Math.floor(t),e=Math.floor(e);const i=(s=Math.floor(s))-e;if(0==i)return s;if(t<e){const r=s-(e-t)%i;return r===s?0:r}return e+(t-e)%i},C33._n=function(t,e,s,i,r){const n=s-e;if(0==n&&0===i)return t;const h=r-i;return(t-e)*h/n+i},C33.normalize=function(t,e,s){return e-s==0?1:(t-e)/(s-e)},C33.En=function(t,e,s){return t<e?e:s<t?s:t},C33.An=function(t){return(t%=TWO_PI)<0&&(t+=TWO_PI),t},C33.In=function(t){return t*D_TO_R},C33.wn=function(t){return t*R_TO_D},C33.Rn=function(t,e,s,i){return Math.hypot(s-t,i-e)},C33.Mn=function(t,e,s,i){const r=s-t,n=i-e;return r*r+n*n},C33.bn=function(t,e,s,i){return Math.atan2(i-e,s-t)},C33.vn=function(t,e){if(t===e)return 0;let s=Math.sin(t),i=Math.cos(t),r=Math.sin(e),n=Math.cos(e),h=s*r+i*n;return 1<=h?0:h<=-1?Math.PI:Math.acos(h)},C33.xn=function(t,e,s){let i=Math.sin(t),r=Math.cos(t),n=Math.sin(e),h=Math.cos(e);return Math.acos(i*n+r*h)>s?0<r*n-i*h?C33.An(t+s):C33.An(t-s):C33.An(e)},C33.Gn=function(t,e){let s=Math.sin(t),i=Math.cos(t),r=Math.sin(e),n=Math.cos(e);return i*r-s*n<=0},C33.Pn=function(t,e,s,i=0){let r=C33.vn(t,e),n=TWO_PI*i;return C33.Gn(e,t)?C33.An(t+(r+n)*s):C33.An(t-(r+n)*s)},C33.On=function(t,e,s,i=0){const r=C33.vn(t,e),n=TWO_PI*i;return C33.Gn(e,t)?C33.An(t+(r+n)*s):C33.An(t+(TWO_PI-r+n)*s)},C33.Dn=function(t,e,s,i=0){const r=C33.vn(t,e),n=TWO_PI*i;return C33.Gn(e,t)?C33.An(t-(-TWO_PI+r-n)*s):C33.An(t-(r+n)*s)},C33.Ln=function(t,e){const s=C33.vn(t,e);return C33.Gn(t,e)?C33.An(e-s):C33.An(e+s)},C33.Ft=function(t,e,s){return t+s*(e-t)},C33.Nn=function(t,e,s){return t===e?0:(s-t)/(e-t)},C33.Fn=function(t,e,s,i,r){return C33.Ft(i,r,C33.Nn(t,e,s))},C33.kn=function(t,e,s,i){return C33.Ft(C33.Ft(t,e,i),C33.Ft(e,s,i),i)},C33.Bn=function(t,e,s,i,r){return C33.Ft(C33.kn(t,e,s,r),C33.kn(e,s,i,r),r)},C33.$n=function(t,e,s){return(t+e+(t-e)*Math.cos(s*Math.PI))/2},C33.Wn=function(t){return 0<t&&0==(t-1&t)},C33.Un=function(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1},C33.Vn=function(t,e){return Math.round(t*e)/e},C33.Hn=function(t,e){return Math.floor(t*e)/e},C33.jn=function(t,e){e=Math.max(Math.floor(e),0);const s=Math.pow(10,e);return Math.round(t*s)/s},C33.Xn=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},C33.toFixed=function(t,e){let s=t.toFixed(e),i=s.length-1;for(;0<=i&&"0"===s.charAt(i);--i);return 0<=i&&"."===s.charAt(i)&&--i,i<0?s:s.substr(0,i+1)},C33.Yn=function(t,e,s){return C33.En(t,0,255)|C33.En(e,0,255)<<8|C33.En(s,0,255)<<16},1024),ALPHAEX_MAX=1023,RGBEX_SHIFT=16384,RGBEX_MAX=8191,RGBEX_MIN=-8192,COMMON_ASPECT_RATIOS=(C33.qn=function(t,e,s,i){return t=C33.En(Math.floor(1024*t),RGBEX_MIN,RGBEX_MAX),e=C33.En(Math.floor(1024*e),RGBEX_MIN,RGBEX_MAX),s=C33.En(Math.floor(1024*s),RGBEX_MIN,RGBEX_MAX),i=C33.En(Math.floor(i*ALPHAEX_MAX),0,ALPHAEX_MAX),t<0&&(t+=RGBEX_SHIFT),e<0&&(e+=RGBEX_SHIFT),s<0&&(s+=RGBEX_SHIFT),-(t*RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT+e*RGBEX_SHIFT*ALPHAEX_SHIFT+s*ALPHAEX_SHIFT+i)},C33.Kn=function(t,e,s){return C33.qn(t,e,s,1)},C33.zn=function(e){if(0<=e)return(255&e)/255;{let t=Math.floor(-e/(RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT));return t>RGBEX_MAX&&(t-=RGBEX_SHIFT),t/1024}},C33.Jn=function(e){if(0<=e)return((65280&e)>>8)/255;{let t=Math.floor(-e%(RGBEX_SHIFT*RGBEX_SHIFT*ALPHAEX_SHIFT)/(RGBEX_SHIFT*ALPHAEX_SHIFT));return t>RGBEX_MAX&&(t-=RGBEX_SHIFT),t/1024}},C33.Zn=function(e){if(0<=e)return((16711680&e)>>16)/255;{let t=Math.floor(-e%(RGBEX_SHIFT*ALPHAEX_SHIFT)/ALPHAEX_SHIFT);return t>RGBEX_MAX&&(t-=RGBEX_SHIFT),t/1024}},C33.Qn=function(t){if(isNegativeZero2(t))return 0;if(0<=t)return 1;{const e=Math.floor(-t%ALPHAEX_SHIFT);return e/ALPHAEX_MAX}},C33.th=function(e,s){for(e=Math.floor(e),s=Math.floor(s);0!==s;){let t=s;s=e%s,e=t}return e},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]),NO_HIT=(C33.eh=function(s,i){if((s=Math.floor(s))===(i=Math.floor(i)))return[1,1];for(let e of COMMON_ASPECT_RATIOS){let t=s/e[0]*e[1];if(Math.abs(i-t)<1)return e.slice(0);if(t=s/e[1]*e[0],Math.abs(i-t)<1)return[e[1],e[0]]}let t=C33.th(s,i);return[s/t,i/t]},C33.ih=function(t,e,s,i,r,n,h,o){const a=Math.min(t,s),l=Math.max(t,s),c=Math.min(r,h),u=Math.max(r,h);if(l<c||u<a)return!1;const f=Math.min(e,i),d=Math.max(e,i),p=Math.min(n,o),m=Math.max(n,o);if(d<p||m<f)return!1;const C=r-t+h-s,g=n-e+o-i,S=s-t,y=i-e,T=h-r,_=o-n,E=Math.abs(y*T-_*S),A=T*g-_*C;if(Math.abs(A)>E)return!1;const I=S*g-y*C;return Math.abs(I)<=E},C33.rh=function(t,e,s,i,r,n,h,o,a,l,c,u){const f=Math.min(a,c),d=Math.max(a,c);if(n<f||d<r)return!1;const p=Math.min(l,u),m=Math.max(l,u);if(o<p||m<h)return!1;const C=a-t+c-s,g=l-e+u-i,S=s-t,y=i-e,T=c-a,_=u-l,E=Math.abs(y*T-_*S),A=T*g-_*C;if(Math.abs(A)>E)return!1;const I=S*g-y*C;return Math.abs(I)<=E},C33.nh=function(t,e,s,i,r){const n=Math.min(t,s),h=Math.max(t,s),o=Math.min(e,i),a=Math.max(e,i),l=r.hh(),c=r.oh(),u=r.ah(),f=r.uh(),d=r.fh(),p=r.ph(),m=r.mh(),C=r.Ch();return C33.rh(t,e,s,i,n,h,o,a,l,c,u,f)||C33.rh(t,e,s,i,n,h,o,a,u,f,d,p)||C33.rh(t,e,s,i,n,h,o,a,d,p,m,C)||C33.rh(t,e,s,i,n,h,o,a,m,C,l,c)},C33.gh=function(e,s,i,r,n){let h=Math.min(e,i),o=Math.max(e,i),a=Math.min(s,r),l=Math.max(s,r),c=0;for(let t=n.length-4;c<=t;c+=2)if(C33.rh(e,s,i,r,h,o,a,l,n[c],n[c+1],n[c+2],n[c+3]))return!0;return C33.rh(e,s,i,r,h,o,a,l,n[c],n[c+1],n[0],n[1])},2),PADDING=1e-6;C33.Sh=function(t,e,s,i,r,n,h,o){const a=s-t,l=i-e,c=h-r,u=o-n,f=a*u-l*c;if(0==f)return NO_HIT;const d=((e-i)*(h-t)+a*(o-e))/f;return 0<d&&d<1+PADDING?(u*(h-t)+(r-h)*(o-e))/f:NO_HIT},C33.yh=function(t,e,s,i,r,n,h,o,a){const l=(h-r)*a,c=(o-n)*a;return C33.Sh(t,e,s,i,r-l,n-c,h+l,o+c)},C33.Th=function(t,e,s,i,r,n,h,o){const a=r-s,l=n-i,c=h-s,u=o-i,f=t-s,d=e-i,p=a*a+l*l,m=a*c+l*u,C=a*f+l*d,g=c*c+u*u,S=c*f+u*d,y=1/(p*g-m*m),T=(g*C-m*S)*y,_=(p*S-m*C)*y;return 0<=T&&0<=_&&T+_<=1},C33._h=function(t,e,s,i,r,n,h,o){const a=r-s,l=n-i,c=h-s,u=o-i,f=t-s,d=e-i,p=a*a+l*l,m=a*c+l*u,C=c*c+u*u,g=f*a+d*l,S=f*c+d*u,y=p*C-m*m,T=(C*g-m*S)/y,_=(p*S-m*g)/y,E=1-T-_;return[E,T,_]},C33.Eh=function(t,e,s,i,r,n,h,o,a,l,c,u){return[t*i+e*h+s*l,t*r+e*o+s*c,t*n+e*a+s*u]}}{let C33=self.Fe,mainDocument=null,baseHref="";if("undefined"!=typeof document){const a=(mainDocument=document).querySelector("base");(baseHref=a&&a.hasAttribute("href")?a.getAttribute("href"):"")&&!(baseHref=baseHref.startsWith("/")?baseHref.substr(1):baseHref).endsWith("/")&&(baseHref+="/")}C33.Ah=function(){return baseHref},C33.Ih=function(){if(!mainDocument)return"";const t=mainDocument.location;return C33.wh(t.origin+t.pathname)+baseHref},C33.wh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===e?"":t.substr(0,e+1)},C33.Rh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===e?t:t.substr(e+1)},C33.Mh=function(t){let e=t.lastIndexOf(".");return e<1?"":t.substr(e)},C33.bh=function(t,e){const s=t.lastIndexOf(".");return-1===s?t+"."+e:t.substr(0,s+1)+e},C33.xh=function(t){let e=t.lastIndexOf(".");return e<1?t:t.substr(0,e)},C33.Gh=function(t){return t.replace(/\\/g,"/")},C33.Ph=function(t,e){const s=t?C33.Mh(t).slice(1):"";return e===s},C33.Oh=function(t,e){let s,i;return C33.Ni(t)&&(s=C33.xh(t.name)),C33.wi(t)&&(s=C33.xh(t)),C33.Ni(e)&&(i=C33.xh(e.name)),C33.wi(e)&&(i=C33.xh(e)),s===i},C33.Dh=function(t){t=C33.Gh(t);let e=/^\w\:\//.exec(t),s=(e?(e=e[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):e="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),i="",r=t,n,h="";0<s&&(i=t.slice(0,s),r=t.slice(s));const o=(n=r).lastIndexOf("."),a=(0<o&&(h=r.slice(o),n=r.slice(0,-h.length)),e+i+r);return{dir:i,Lh:r,name:n,root:e,ext:h,Nh:a}},C33.Fh=function(s,i){return new Promise((t,e)=>{self.setTimeout(t,s,i)})},C33.kh=function(t){try{t()}catch(t){C33.isDebug&&console.warn("Swallowed exception: ",t)}},C33.Bh=function(){},C33.Ir=function(t,e){return"string"==typeof t&&"string"==typeof e&&(t===e||t.normalize().toLowerCase()===e.normalize().toLowerCase())},C33.$h=function(t,e){return"string"==typeof t&&"string"==typeof e&&(t===e||t.normalize()===e.normalize())},C33.Wh=function(t,e,s){t[s++]=e[0],t[s++]=e[1],t[s++]=e[2],t[s++]=e[3],t[s++]=e[4],t[s++]=e[5],t[s++]=e[6],t[s++]=e[7],t[s++]=e[8],t[s++]=e[9],t[s++]=e[10],t[s++]=e[11],t[s++]=e[12],t[s++]=e[13],t[s++]=e[14],t[s]=e[15]},C33.Uh=function(t,e){t.length=e},C33.Vh=function(t){t&&0!==t.length&&C33.Uh(t,0)},C33.Hh=function(s){if(s){for(let e=0;e<s.length;e++){let t=s[e];C33.Uh(t,0)}C33.Uh(s,0)}},C33.jh=function(e,s,i){const r=e.length;if(!((s|=0)<=r))for(let t=r;t<s;++t)e.push(i)},C33.Xh=function(t,e,s){const i=t.length;(e|=0)<i?C33.Uh(t,e):i<e&&C33.jh(t,e,s)},C33.Yh=function(t,e){C33.Vh(t),C33.sn(t,e)},C33.sn=function(s,i){if(i.length<1e4)s.push(...i);else for(let t=0,e=i.length;t<e;++t)s.push(i[t])},C33.qh=function(s,i){if(!((i=Math.floor(i))<0||i>=s.length)){let e=s.length-1;for(let t=i;t<e;++t)s[t]=s[t+1];C33.Uh(s,e)}},C33.Kh=function(t,e){let s=t.indexOf(e);0<=s&&t.splice(s,1)},C33.zh=function(e,s){let i=e.length;if(s.length!==i)return!1;for(let t=0;t<i;++t)if(e[t]!==s[t])return!1;return!0},C33.Jh=function(s,i){let r=[],n=0;for(let e=0,t=s.length;e<t;++e){let t=s[e];i(t)?r.push(t):(s[n]=t,++n)}return C33.Uh(s,n),r},C33.Zh=function(s,i){let t=s.length,r=0;for(let e=0,t=s.length;e<t;++e){let t=s[e];i.has(t)||(s[r++]=t)}return C33.Uh(s,r),t-r},C33.Qh=function(t,e){return t===Math.floor(t)&&0<=t&&t<e.length},C33.eo=function(t,e){if(!C33.Qh(t,e))throw new RangeError("array index out of bounds")},C33.ro=function(t){return t.slice()},C33.no=function(t,s){let i=[];for(let e of t)if(C33.Pi(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else C33.$i(e)?i.push(C33.no(e,s)):i.push(e);return i},C33.ho=function(e){let s=[];for(let t of e)s.push(t.slice());return s},C33.ao=function(t,e=" "){return t?t.split(e).map(t=>t.trim()).filter(t=>!!t):[]},C33.lo=function(t,e,s){const i=new Set;for(const r of t.values())e(r)&&(s?i.add(s(r)):i.add(r));return i},C33.co=function(t,e){return t.union?t.union(e):new Set([...t,...e])},C33.uo=function(t,e){for(const s of e)t.add(s);return t},C33.first=function(e){for(let t of e)return t;return null},C33.xor=function(t,e){return!t!=!e},C33.compare=function(t,e,s){switch(e){case 0:return t===s;case 1:return t!==s;case 2:return t<s;case 3:return t<=s;case 4:return s<t;case 5:return s<=t;default:return!1}},C33.fo=function(e){for(let t in e)if(e.hasOwnProperty(t))return!0;return!1},C33.do=function(o,a){return o.length?new Promise((s,i)=>{let r=[],n=0,h=!1;for(let e=0,t=o.length;e<t;++e)r.push(void 0),o[e].then(t=>{h||(r[e]=t,++n===o.length?s(r):a(n,o.length))}).catch(t=>{h=!0,i(t)})}):Promise.resolve([])};let memoryCallbacks=[],nextTaskId=(C33.po=function(t){memoryCallbacks.push(t)},C33.Co=function(){let s=0;for(let e of memoryCallbacks){let t=e();s+=t}return Math.floor(s)},1),activeTaskIds=new Map,taskMessageChannel=new MessageChannel,activeRPAFids=(taskMessageChannel.port2.onmessage=function(t){const e=t.data,s=activeTaskIds.get(e);activeTaskIds.delete(e),s&&s(performance.now())},C33.So=function(t){const e=nextTaskId++;return activeTaskIds.set(e,t),taskMessageChannel.port1.postMessage(e),e},C33.yo=function(t){activeTaskIds.delete(t)},C33.To=C33.So,C33._o=function(){return new Promise(t=>C33.To(t))},new Set);C33.Eo=function(e){const s=self.requestAnimationFrame(async t=>{await C33._o(),activeRPAFids.has(s)&&(activeRPAFids.delete(s),e(t))});return activeRPAFids.add(s),s},C33.Ao=function(t){activeRPAFids.has(t)&&(self.cancelAnimationFrame(t),activeRPAFids.delete(t))}}{const C33=self.Fe;C33.Io=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},C33.wo=function(t){return!C33.Io(t)},C33.Ro=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},C33.Mo=function(t,e){return fetch(t,e).then(t=>(C33.Ro(t),t))},C33.bo=function(t){return C33.Mo(t).then(t=>t.text())},C33.vo=function(t){return C33.Mo(t).then(t=>t.json())},C33.xo=function(t){return C33.Mo(t).then(t=>t.blob())},C33.Go=function(t){return C33.Mo(t).then(t=>t.arrayBuffer())},C33.Po=function(i){return new Promise((t,e)=>{const s=new Image;s.onload=()=>t(s),s.onerror=t=>e(t),s.src=i})},C33.Oo=function(i){return"function"==typeof i.arrayBuffer?i.arrayBuffer():new Promise((t,e)=>{const s=new FileReader;s.onload=()=>t(s.result),s.onerror=()=>e(s.error),s.readAsArrayBuffer(i)})},C33.Do=function(i){return"function"==typeof i.text?i.text():new Promise((t,e)=>{const s=new FileReader;s.onload=()=>t(s.result),s.onerror=()=>e(s.error),s.readAsText(i)})},C33.Lo=function(t){return C33.Do(t).then(t=>JSON.parse(t))},C33.No=async function(t,e){let s=URL.createObjectURL(t);try{const i=await C33.Po(s);return URL.revokeObjectURL(s),s="",e&&"function"==typeof i.decode&&await i.decode(),i}finally{s&&URL.revokeObjectURL(s)}},C33.Fo=function(t,e){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,e);{const s=document.createElement("canvas");return s.width=t,s.height=e,s}},C33.ko=function(e,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=C33.En(i,0,1),e.convertToBlob)return e.convertToBlob({type:s,quality:i});if(e.toBlob)return new Promise(t=>e.toBlob(t,s,i));throw new Error("could not convert canvas to blob")},C33.Bo=function(t,e,s){const i=C33.Fo(t.width,t.height),r=i.getContext("2d");return r.drawImage(t,0,0),C33.ko(i,e,s)},C33.$o=function(t,e,s){if(C33.Xs.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>C33.Bo(t,e,s));if(C33.Xs.ImageBitmap)return createImageBitmap(t).then(t=>C33.Bo(t,e,s));{const i=C33.Fo(t.width,t.height),r=i.getContext("2d");return r.putImageData(t,0,0),C33.ko(i,e,s)}},C33.Wo=function(t,e){t.clear();for(const s of e)t.add(s)},C33.Uo=function(t){const e=Object.create(null);for(const[s,i]of t.entries())e[s]=i;return e},C33.Vo=function(t,e){e.clear();for(const[s,i]of Object.entries(t))e.set(s,i)},C33.Ho=function e(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>e(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],e(t[1])])};{const s=Object.create(null);for(const[i,r]of Object.entries(t))s[i]=e(r);return s}},C33.jo=function e(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>e(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],e(t[1])]));{const s=Object.create(null);for(const[i,r]of Object.entries(t))s[i]=e(r);return s}}return t},C33.Xo=function(t){if(t.startsWith("--"))return t;let e="",s=!1,i=0;for(const r of t)"-"===r?0<i&&(s=!0):s?(e+=r.toUpperCase(),s=!1):e+=r,++i;return e},C33.Yo=function(t){return"object"==typeof t&&"function"==typeof t.next},C33.qo=function(e,s){const i=[];if("function"==typeof s)for(let t=0;t<e;++t)i.push(s());else for(let t=0;t<e;++t)i.push(s);return i}}{let padTwoDigits2=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},hueToRGB2=function(t,e,s){return s<0&&(s+=1),1<s&&--s,s<1/6?t+6*(e-t)*s:s<.5?e:s<2/3?t+(e-t)*(2/3-s)*6:t};padTwoDigits=padTwoDigits2,hueToRGB=hueToRGB2;const C33=self.Fe,HSL_TEST=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,HSLA_TEST=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;C33.Ko=class{constructor(t,e,s,i){this.zo=NaN,this.Jo=NaN,this.Zo=NaN,this.Qo=NaN,this.zo=0,this.Jo=0,this.Zo=0,this.Qo=0,t instanceof C33.Ko?this.set(t):this.ta(t||0,e||0,s||0,i||0)}ea(t,e,s){return this.zo=+t,this.Jo=+e,this.Zo=+s,this.En(),this}ta(t,e,s,i){return this.zo=+t,this.Jo=+e,this.Zo=+s,this.Qo=+i,this.En(),this}set(t){return this.zo=t.zo,this.Jo=t.Jo,this.Zo=t.Zo,this.Qo=t.Qo,this}I(t){return this.set(t)}add(t){this.zo+=t.zo,this.Jo+=t.Jo,this.Zo+=t.Zo,this.Qo+=t.Qo,this.En()}ra(t,e,s,i=0){this.zo+=+t,this.Jo+=+e,this.Zo+=+s,this.Qo+=+i,this.En()}na(t){this.aa(Math.max(this.zo,t.zo)-Math.min(this.zo,t.zo)),this.la(Math.max(this.Jo,t.Jo)-Math.min(this.Jo,t.Jo)),this.ca(Math.max(this.Zo,t.Zo)-Math.min(this.Zo,t.Zo)),this.ua(Math.max(this.Qo,t.Qo)-Math.min(this.Qo,t.Qo)),this.En()}fa(t){this.zo=t.zo,this.Jo=t.Jo,this.Zo=t.Zo}aa(t){this.zo=C33.En(+t,0,1)}ma(){return this.zo}la(t){this.Jo=C33.En(+t,0,1)}Ca(){return this.Jo}ca(t){this.Zo=C33.En(+t,0,1)}ga(){return this.Zo}ua(t){this.Qo=C33.En(+t,0,1)}Sa(){return this.Qo}clone(){return C33.Cn(C33.Ko,this.zo,this.Jo,this.Zo,this.Qo)}toArray(){return[this.zo,this.Jo,this.Zo,this.Qo]}ya(){return new Float64Array(this.toArray())}Ta(t,e){t[e++]=this.zo,t[e++]=this.Jo,t[e++]=this.Zo,t[e]=this.Qo}_a(t,e){t[e++]=this.zo,t[e++]=this.Jo,t[e]=this.Zo}equals(t){return this.zo===t.zo&&this.Jo===t.Jo&&this.Zo===t.Zo&&this.Qo===t.Qo}Ea(t){return this.zo===t.zo&&this.Jo===t.Jo&&this.Zo===t.Zo}Aa(t,e,s){return this.zo===t&&this.Jo===e&&this.Zo===s}Ia(t,e,s,i){return this.zo===t&&this.Jo===e&&this.Zo===s&&this.Qo===i}wa(t,e){return t[e]===Math.fround(this.zo)&&t[e+1]===Math.fround(this.Jo)&&t[e+2]===Math.fround(this.Zo)&&t[e+3]===Math.fround(this.Qo)}Ra(t,e){return t[e]===Math.fround(this.zo)&&t[e+1]===Math.fround(this.Jo)&&t[e+2]===Math.fround(this.Zo)}multiply(t){this.zo*=t.zo,this.Jo*=t.Jo,this.Zo*=t.Zo,this.Qo*=t.Qo}Ma(t){this.zo*=t,this.Jo*=t,this.Zo*=t,this.Qo*=t}ba(){return this.zo*=this.Qo,this.Jo*=this.Qo,this.Zo*=this.Qo,this}xa(){return this.zo/=this.Qo,this.Jo/=this.Qo,this.Zo/=this.Qo,this}En(){return this.zo=C33.En(this.zo,0,1),this.Jo=C33.En(this.Jo,0,1),this.Zo=C33.En(this.Zo,0,1),this.Qo=C33.En(this.Qo,0,1),this}Ga(t){this.zo=C33.zn(t),this.Jo=C33.Jn(t),this.Zo=C33.Zn(t),this.Qo=C33.Qn(t)}Pa(t,e,s){const i=C33.Ci(t)?t:this.ma(),r=C33.Ci(e)?e:this.Ca(),n=C33.Ci(s)?s:this.ga();return`rgb(${100*i}%, ${100*r}%, ${100*n}%)`}Oa(t,e,s,i){const r=C33.Ci(t)?t:this.ma(),n=C33.Ci(e)?e:this.Ca(),h=C33.Ci(s)?s:this.ga(),o=C33.Ci(i)?i:this.Sa();return`rgba(${100*r}%, ${100*n}%, ${100*h}%, ${o})`}Da(){const t=Math.round(255*this.ma()),e=Math.round(255*this.Ca()),s=Math.round(255*this.ga());return"#"+padTwoDigits2(t.toString(16))+padTwoDigits2(e.toString(16))+padTwoDigits2(s.toString(16))}La(t){if("string"!=typeof t)return!1;let e,s,i;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)e=parseInt(t[0],16)/15,s=parseInt(t[1],16)/15,i=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;e=parseInt(t.substr(0,2),16)/255,s=parseInt(t.substr(2,2),16)/255,i=parseInt(t.substr(4,2),16)/255}return isFinite(e)&&this.aa(e),isFinite(s)&&this.la(s),isFinite(i)&&this.ca(i),this.ua(1),!0}Na(){const t=Math.round(255*this.ma()),e=Math.round(255*this.Ca()),s=Math.round(255*this.ga());return t+`, ${e}, `+s}Fa(){const t=Math.round(255*this.ma()),e=Math.round(255*this.Ca()),s=Math.round(255*this.ga());return[t,e,s]}ka(t){if("string"!=typeof t)return!1;const e=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(e.length<3)return!1;const s=parseInt(e[0].trim(),10)/255,i=parseInt(e[1].trim(),10)/255,r=parseInt(e[2].trim(),10)/255;return isFinite(s)&&this.aa(s),isFinite(i)&&this.la(i),isFinite(r)&&this.ca(r),this.ua(1),!0}Ba(t){if("string"!=typeof t)return!1;const e=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(e.length<3)return!1;const s=parseInt(e[0].trim(),10)/100,i=parseInt(e[1].trim(),10)/100,r=parseInt(e[2].trim(),10)/100;return isFinite(s)&&this.aa(s),isFinite(i)&&this.la(i),isFinite(r)&&this.ca(r),this.ua(1),!0}$a(t){if("string"!=typeof t)return!1;const e=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(e.length<4)return!1;const s=parseInt(e[0].trim(),10)/255,i=parseInt(e[1].trim(),10)/255,r=parseInt(e[2].trim(),10)/255,n=parseFloat(e[3].trim());return isFinite(s)&&this.aa(s),isFinite(i)&&this.la(i),isFinite(r)&&this.ca(r),isFinite(n)&&this.ua(n),!0}Wa(t){if("string"!=typeof t)return!1;const e=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(e.length<4)return!1;const s=parseInt(e[0].trim(),10)/100,i=parseInt(e[1].trim(),10)/100,r=parseInt(e[2].trim(),10)/100,n=parseFloat(e[3].trim());return isFinite(s)&&this.aa(s),isFinite(i)&&this.la(i),isFinite(r)&&this.ca(r),isFinite(n)&&this.ua(n),!0}Ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Ba(t):this.ka(t);if(t.startsWith("rgba("))return t.includes("%")?this.Wa(t):this.$a(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Va(t);{const e=t.split(",");return t.includes("%")?3===e.length?this.Ba(t):4===e.length&&this.Wa(t):3===e.length?this.ka(t):4===e.length&&this.$a(t)}}return this.La(t)}toJSON(){return[this.zo,this.Jo,this.Zo,this.Qo]}Ha(t,e,s,i){let r,n,h;if(t%=360,e=C33.En(e,0,100),s=C33.En(s,0,100),i=C33.En(i,0,1),t/=360,s/=100,0==(e/=100))r=n=h=s;else{const o=s<.5?s*(1+e):s+e-s*e,a=2*s-o;r=hueToRGB2(a,o,t+1/3),n=hueToRGB2(a,o,t),h=hueToRGB2(a,o,t-1/3)}return this.aa(r),this.la(n),this.ca(h),this.ua(i),this}Va(t){const e=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),s=HSL_TEST.exec(e),i=HSLA_TEST.exec(e);return s&&4===s.length?(this.Ha(+s[1],+s[2],+s[3],1),!0):!(!i||5!==i.length||(this.Ha(+s[1],+s[2],+s[3],+s[4]),0))}ja(){const t=this.zo,e=this.Jo,s=this.Zo,i=this.Qo,r=C33.Ko.Xa(t,e,s),n=C33.Ko.Ya(t,e,s),h=C33.Ko.qa(t,e,s);return`hsla(${r}, ${n}%, ${h}%, ${i})`}Ka(){const t=this.zo,e=this.Jo,s=this.Zo;return[C33.Ko.Xa(t,e,s),C33.Ko.Ya(t,e,s),C33.Ko.qa(t,e,s),this.Qo]}za(t){!Array.isArray(t)||t.length<3||(this.zo=t[0],this.Jo=t[1],this.Zo=t[2],this.Qo=4<=t.length?t[3]:1)}set r(t){this.aa(t)}get r(){return this.ma()}set g(t){this.la(t)}get g(){return this.Ca()}set b(t){this.ca(t)}get b(){return this.ga()}set a(t){this.ua(t)}get a(){return this.Sa()}Ja(t,e){switch(t){case 0:this.aa(e);break;case 1:this.la(e);break;case 2:this.ca(e);break;case 3:this.ua(e);break;default:throw new RangeError("invalid color index")}}Za(t){switch(t){case 0:return this.ma();case 1:return this.Ca();case 2:return this.ga();case 3:return this.Sa();default:throw new RangeError("invalid color index")}}static Qa(t,e){let s,i;if(Array.isArray(t))(s=new C33.Ko).za(t);else{if(!(t instanceof C33.Ko))throw new Error("unexpected type");s=t}if(Array.isArray(e))(i=new C33.Ko).za(e);else{if(!(e instanceof C33.Ko))throw new Error("unexpected type");i=e}return s.equals(i)}static el(t,e){return C33.En(Math.max(t,e)-Math.min(t,e),0,1)}static sl(t,e){const s=new C33.Ko;return s.aa(Math.max(t.zo,e.zo)-Math.min(t.zo,e.zo)),s.la(Math.max(t.Jo,e.Jo)-Math.min(t.Jo,e.Jo)),s.ca(Math.max(t.Zo,e.Zo)-Math.min(t.Zo,e.Zo)),s.ua(Math.max(t.Qo,e.Qo)-Math.min(t.Qo,e.Qo)),s}static il(t,e){const s=new C33.Ko(0,0,0,1);return s.aa(Math.max(t.zo,e.zo)-Math.min(t.zo,e.zo)),s.la(Math.max(t.Jo,e.Jo)-Math.min(t.Jo,e.Jo)),s.ca(Math.max(t.Zo,e.Zo)-Math.min(t.Zo,e.Zo)),s}static Xa(t,e,s){const i=Math.max(t,e,s),r=Math.min(t,e,s);if(i===r)return 0;let n=0;switch(i){case t:n=(e-s)/(i-r)+(e<s?6:0);break;case e:n=(s-t)/(i-r)+2;break;case s:n=(t-e)/(i-r)+4}return Math.round(n/6*360)}static Ya(t,e,s){const i=Math.max(t,e,s),r=Math.min(t,e,s);if(i===r)return 0;const n=(i+r)/2,h=i-r,o=.5<n?h/(2-i-r):h/(i+r);return Math.round(100*o)}static qa(t,e,s){const i=Math.max(t,e,s),r=Math.min(t,e,s),n=(i+r)/2;return i?Math.round(100*n):0}},C33.Ko.rl=Object.freeze(C33.Cn(C33.Ko,1,1,1,1)),C33.Ko.nl=Object.freeze(C33.Cn(C33.Ko,0,0,0,1)),C33.Ko.hl=Object.freeze(C33.Cn(C33.Ko,0,0,0,0))}{const C33=self.Fe;C33.ol=class{constructor(t,e){this.al=0,this.ll=0,t instanceof C33.ol?this.I(t):this.set(t||0,e||0)}set(t,e){this.al=+t,this.ll=+e}I(t){this.al=t.al,this.ll=t.ll}equals(t){return this.al===t.al&&this.ll===t.ll}cl(t,e){return this.al===t&&this.ll===e}wa(t,e){return t[e]===Math.fround(this.al)&&t[e+1]===Math.fround(this.ll)}ul(t){this.al=+t}fl(){return this.al}dl(t){this.ll=+t}pl(){return this.ll}toArray(){return[this.al,this.ll]}ya(){return new Float64Array(this.toArray())}Ta(t,e){t[e++]=this.al,t[e]=this.ll}offset(t,e){this.al+=+t,this.ll+=+e}scale(t,e){this.al*=t,this.ll*=e}vt(t,e){this.al/=t,this.ll/=e}round(){this.al=Math.round(this.al),this.ll=Math.round(this.ll)}floor(){this.al=Math.floor(this.al),this.ll=Math.floor(this.ll)}ceil(){this.al=Math.ceil(this.al),this.ll=Math.ceil(this.ll)}angle(){return C33.bn(0,0,this.al,this.ll)}ml(){return this.al*this.al+this.ll*this.ll}length(){return Math.hypot(this.al,this.ll)}Cl(t,e){const s=this.al*e-this.ll*t;this.ll=this.ll*e+this.al*t,this.al=s}rotate(t){0!==t&&this.Cl(Math.sin(t),Math.cos(t))}gl(t,e,s){0===t||e===this.al&&s===this.ll||(this.al-=e,this.ll-=s,this.Cl(Math.sin(t),Math.cos(t)),this.al+=+e,this.ll+=+s)}move(t,e){0!==e&&(this.al+=Math.cos(t)*e,this.ll+=Math.sin(t)*e)}normalize(){const t=this.length();0!==t&&1!==t&&(this.al/=t,this.ll/=t)}En(t,e){this.al=C33.En(this.al,t,e),this.ll=C33.En(this.ll,t,e)}Lt(t){return this.al*t.al+this.ll*t.ll}reverse(){this.al=-this.al,this.ll=-this.ll}Sl(){let t=this.al;return this.al=this.ll,this.ll=-t,this}}}{const C33=self.Fe;C33.Rect=class{constructor(t,e,s,i){this.yl=NaN,this.Tl=NaN,this._l=NaN,this.El=NaN,this.yl=0,this.Tl=0,this._l=0,this.El=0,t instanceof C33.Rect?this.I(t):this.set(t||0,e||0,s||0,i||0)}set(t,e,s,i){this.yl=+t,this.Tl=+e,this._l=+s,this.El=+i}Al(t,e,s,i){e=+e,this.yl=t=+t,this.Tl=e,this._l=t+ +s,this.El=e+ +i}I(t){this.yl=+t.yl,this.Tl=+t.Tl,this._l=+t._l,this.El=+t.El}clone(){return new C33.Rect(this.yl,this.Tl,this._l,this.El)}static Il(t,e){const s=new C33.Rect;return s.wl(Math.min(t.yl,e.yl)),s.Rl(Math.min(t.Tl,e.Tl)),s.Ml(Math.max(t._l,e._l)),s.bl(Math.max(t.El,e.El)),s}static vl(t){return new C33.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.yl===t.yl&&this.Tl===t.Tl&&this._l===t._l&&this.El===t.El}xl(t,e,s,i){return this.yl===t&&this.Tl===e&&this.width()===s&&this.height()===i}wa(t,e){return t[e]===Math.fround(this.yl)&&t[e+1]===Math.fround(this.Tl)&&t[e+2]===Math.fround(this._l)&&t[e+3]===Math.fround(this.El)}wl(t){this.yl=+t}Gl(){return this.yl}Rl(t){this.Tl=+t}Pl(){return this.Tl}Ml(t){this._l=+t}Ol(){return this._l}bl(t){this.El=+t}Dl(){return this.El}toArray(){return[this.yl,this.Tl,this._l,this.El]}ya(){return new Float64Array(this.toArray())}Ll(){return new DOMRect(this.yl,this.Tl,this.width(),this.height())}static Nl(t){return C33.Cn(C33.Rect,t.left,t.top,t.right,t.bottom)}Ta(t,e){t[e++]=this.yl,t[e++]=this.Tl,t[e++]=this._l,t[e]=this.El}Fl(t,e){t[e++]=this.yl,t[e++]=this.Tl,t[e++]=this._l,t[e++]=this.Tl,t[e++]=this._l,t[e++]=this.El,t[e++]=this.yl,t[e]=this.El}kl(t,e,s){t[e++]=this.yl,t[e++]=this.Tl,t[e++]=s,t[e++]=this._l,t[e++]=this.Tl,t[e++]=s,t[e++]=this._l,t[e++]=this.El,t[e++]=s,t[e++]=this.yl,t[e++]=this.El,t[e]=s}width(){return this._l-this.yl}height(){return this.El-this.Tl}Bl(){return(this.yl+this._l)/2}$l(){return(this.Tl+this.El)/2}offset(t,e){e=+e,this.yl+=t=+t,this.Tl+=e,this._l+=t,this.El+=e}offsetLeft(t){this.yl+=+t}offsetTop(t){this.Tl+=+t}Wl(t){this._l+=+t}Ul(t){this.El+=+t}Vl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Tl<this.El?this.yl<this._l?this.El=this.Tl+this.width():this.El=this.Tl-this.width():this.yl<this._l?this.El=this.Tl-this.width():this.El=this.Tl+this.width()}Hl(t,e){e=+e,this.yl-=t=+t,this.Tl-=e,this._l+=t,this.El+=e}jl(t,e){e=+e,this.yl+=t=+t,this.Tl+=e,this._l-=t,this.El-=e}multiply(t,e){this.yl*=t,this.Tl*=e,this._l*=t,this.El*=e}vt(t,e){this.yl/=t,this.Tl/=e,this._l/=t,this.El/=e}Xl(t){this.yl=+t-this.yl,this._l=+t-this._l}Yl(t){this.Tl=+t-this.Tl,this.El=+t-this.El}ql(t,e){const s=this.width(),i=this.height(),r=this.Gl()+s*t,n=this.Pl()+i*e;this.Al(r-i*e,n-s*t,i,s)}Kl(){const t=this.yl;this.yl=this._l,this._l=t}zl(){const t=this.Tl;this.Tl=this.El,this.El=t}Jl(t){const e=this.Tl;this.Tl=+t-this.El,this.El=+t-e}round(){this.yl=Math.round(this.yl),this.Tl=Math.round(this.Tl),this._l=Math.round(this._l),this.El=Math.round(this.El)}Zl(){this.yl=Math.ceil(this.yl),this.Tl=Math.ceil(this.Tl),this._l=Math.floor(this._l),this.El=Math.floor(this.El)}Ql(){this.yl=Math.floor(this.yl),this.Tl=Math.floor(this.Tl),this._l=Math.ceil(this._l),this.El=Math.ceil(this.El)}floor(){this.yl=Math.floor(this.yl),this.Tl=Math.floor(this.Tl),this._l=Math.floor(this._l),this.El=Math.floor(this.El)}ceil(){this.yl=Math.ceil(this.yl),this.Tl=Math.ceil(this.Tl),this._l=Math.ceil(this._l),this.El=Math.ceil(this.El)}En(t,e,s,i){this.yl=Math.max(this.yl,+t),this.Tl=Math.max(this.Tl,+e),this._l=Math.min(this._l,+s),this.El=Math.min(this.El,+i)}tc(t,e,s,i){t=+t,e=+e,s=+s,i=+i,this.yl=C33.En(this.yl,t,s),this.Tl=C33.En(this.Tl,e,i),this._l=C33.En(this._l,t,s),this.El=C33.En(this.El,e,i)}normalize(){this.yl>this._l&&this.Kl(),this.Tl>this.El&&this.zl()}ec(t){return!(t._l<this.yl||t.El<this.Tl||t.yl>this._l||t.Tl>this.El)}ic(t,e,s){return!(t._l+e<this.yl||t.El+s<this.Tl||t.yl+e>this._l||t.Tl+s>this.El)}rc(t,e){return t>=this.yl&&t<=this._l&&e>=this.Tl&&e<=this.El}nc(t){return t.yl>=this.yl&&t.Tl>=this.Tl&&t._l<=this._l&&t.El<=this.El}hc(t){t.yl<this.yl&&(this.yl=+t.yl),t.Tl<this.Tl&&(this.Tl=+t.Tl),t._l>this._l&&(this._l=+t._l),t.El>this.El&&(this.El=+t.El)}oc(t){this.yl=C33.Ft(t.yl,t._l,this.yl),this.Tl=C33.Ft(t.Tl,t.El,this.Tl),this._l=C33.Ft(t.yl,t._l,this._l),this.El=C33.Ft(t.Tl,t.El,this.El)}}}{const C33=self.Fe;C33.ac=class{constructor(t,e,s,i,r,n,h,o){this.lc=NaN,this.cc=NaN,this.uc=NaN,this.fc=NaN,this.dc=NaN,this.mc=NaN,this.Cc=NaN,this.Sc=NaN,this.lc=0,this.cc=0,this.uc=0,this.fc=0,this.dc=0,this.mc=0,this.Cc=0,this.Sc=0,t instanceof C33.ac?this.I(t):this.set(t||0,e||0,s||0,i||0,r||0,n||0,h||0,o||0)}set(t,e,s,i,r,n,h,o){this.lc=+t,this.cc=+e,this.uc=+s,this.fc=+i,this.dc=+r,this.mc=+n,this.Cc=+h,this.Sc=+o}yc(t,e,s,i){this.set(t,e,s,e,s,i,t,i)}I(t){this.lc=t.lc,this.cc=t.cc,this.uc=t.uc,this.fc=t.fc,this.dc=t.dc,this.mc=t.mc,this.Cc=t.Cc,this.Sc=t.Sc}equals(t){return this.lc===t.lc&&this.cc===t.cc&&this.uc===t.uc&&this.fc===t.fc&&this.dc===t.dc&&this.mc===t.mc&&this.Cc===t.Cc&&this.Sc===t.Sc}Tc(t){this.lc=+t}hh(){return this.lc}_c(t){this.cc=+t}oh(){return this.cc}Ec(t){this.uc=+t}ah(){return this.uc}Ac(t){this.fc=+t}uh(){return this.fc}Ic(t){this.dc=+t}fh(){return this.dc}wc(t){this.mc=+t}ph(){return this.mc}Rc(t){this.Cc=+t}mh(){return this.Cc}Mc(t){this.Sc=+t}Ch(){return this.Sc}vc(){return new DOMQuad(new DOMPoint(this.lc,this.cc),new DOMPoint(this.uc,this.fc),new DOMPoint(this.dc,this.mc),new DOMPoint(this.Cc,this.Sc))}static xc(t){return C33.Cn(C33.ac,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.lc,this.cc,this.uc,this.fc,this.dc,this.mc,this.Cc,this.Sc]}ya(){return new Float64Array(this.toArray())}Ta(t,e){t[e++]=this.lc,t[e++]=this.cc,t[e++]=this.uc,t[e++]=this.fc,t[e++]=this.dc,t[e++]=this.mc,t[e++]=this.Cc,t[e]=this.Sc}Gc(t,e,s){t[e++]=this.lc,t[e++]=this.cc,t[e++]=s,t[e++]=this.uc,t[e++]=this.fc,t[e++]=s,t[e++]=this.dc,t[e++]=this.mc,t[e++]=s,t[e++]=this.Cc,t[e++]=this.Sc,t[e]=s}offset(t,e){e=+e,this.lc+=t=+t,this.cc+=e,this.uc+=t,this.fc+=e,this.dc+=t,this.mc+=e,this.Cc+=t,this.Sc+=e}round(){this.lc=Math.round(this.lc),this.cc=Math.round(this.cc),this.uc=Math.round(this.uc),this.fc=Math.round(this.fc),this.dc=Math.round(this.dc),this.mc=Math.round(this.mc),this.Cc=Math.round(this.Cc),this.Sc=Math.round(this.Sc)}floor(){this.lc=Math.floor(this.lc),this.cc=Math.floor(this.cc),this.uc=Math.floor(this.uc),this.fc=Math.floor(this.fc),this.dc=Math.floor(this.dc),this.mc=Math.floor(this.mc),this.Cc=Math.floor(this.Cc),this.Sc=Math.floor(this.Sc)}ceil(){this.lc=Math.ceil(this.lc),this.cc=Math.ceil(this.cc),this.uc=Math.ceil(this.uc),this.fc=Math.ceil(this.fc),this.dc=Math.ceil(this.dc),this.mc=Math.ceil(this.mc),this.Cc=Math.ceil(this.Cc),this.Sc=Math.ceil(this.Sc)}Pc(t){this.lc=t.yl,this.cc=t.Tl,this.uc=t._l,this.fc=t.Tl,this.dc=t._l,this.mc=t.El,this.Cc=t.yl,this.Sc=t.El}Oc(t,e){0===e?this.Pc(t):this.Dc(t,Math.sin(e),Math.cos(e))}Dc(t,e,s){const i=t.yl*e,r=t.Tl*e,n=t._l*e,h=t.El*e,o=t.yl*s,a=t.Tl*s,l=t._l*s,c=t.El*s;this.lc=o-r,this.cc=a+i,this.uc=l-r,this.fc=a+n,this.dc=l-h,this.mc=c+n,this.Cc=o-h,this.Sc=c+i}Lc(t){t.set(Math.min(this.lc,this.uc,this.dc,this.Cc),Math.min(this.cc,this.fc,this.mc,this.Sc),Math.max(this.lc,this.uc,this.dc,this.Cc),Math.max(this.cc,this.fc,this.mc,this.Sc))}rc(t,e){let s=this.uc-this.lc,i=this.fc-this.cc,r=this.dc-this.lc,n=this.mc-this.cc,h=t-this.lc,o=e-this.cc,a=s*s+i*i,l=s*r+i*n,c=s*h+i*o,u=r*r+n*n,f=r*h+n*o,d=1/(a*u-l*l),p=(u*c-l*f)*d,m=(a*f-l*c)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(s=this.Cc-this.lc)*s+(i=this.Sc-this.cc)*i)*f-(l=s*r+i*n)*(c=s*h+i*o))*(d=1/(a*u-l*l)),0<=(p=(u*c-l*f)*d)&&0<m&&p+m<1)}Bl(){return(this.lc+this.uc+this.dc+this.Cc)/4}$l(){return(this.cc+this.fc+this.mc+this.Sc)/4}Nc(t,e,s,i){return!(!this.rc(t,e)&&!this.rc(s,i))||C33.nh(t,e,s,i,this)}Fc(t){let e=t.Bl(),s=t.$l();if(this.rc(e,s))return!0;if(e=this.Bl(),s=this.$l(),t.rc(e,s))return!0;const i=this.lc,r=this.cc,n=this.uc,h=this.fc,o=this.dc,a=this.mc,l=this.Cc,c=this.Sc;return C33.nh(i,r,n,h,t)||C33.nh(n,h,o,a,t)||C33.nh(o,a,l,c,t)||C33.nh(l,c,i,r,t)}kc(){const t=this.lc,e=this.cc;this.lc=this.uc,this.cc=this.fc,this.uc=this.dc,this.fc=this.mc,this.dc=this.Cc,this.mc=this.Sc,this.Cc=t,this.Sc=e}Bc(){this.$c(0,2),this.$c(1,3),this.$c(6,4),this.$c(7,5)}Wc(){this.$c(0,6),this.$c(1,7),this.$c(2,4),this.$c(3,5)}Uc(){this.$c(2,6),this.$c(3,7)}$c(t,e){const s=this.Vc(t);this.Hc(t,this.Vc(e)),this.Hc(e,s)}Vc(t){switch(t){case 0:return this.lc;case 1:return this.cc;case 2:return this.uc;case 3:return this.fc;case 4:return this.dc;case 5:return this.mc;case 6:return this.Cc;case 7:return this.Sc;default:throw new RangeError("invalid quad point index")}}Hc(t,e){switch(e=+e,t){case 0:this.lc=e;break;case 1:this.cc=e;break;case 2:this.uc=e;break;case 3:this.fc=e;break;case 4:this.dc=e;break;case 5:this.mc=e;break;case 6:this.Cc=e;break;case 7:this.Sc=e;break;default:throw new RangeError("invalid quad point index")}}}}{const C33=self.Fe,assert=self.assert,DEFAULT_POLY_POINTS=[0,0,1,0,1,1,0,1],tempQuad=C33.Cn(C33.ac);C33.jc=class extends C33.pn{constructor(t,e=!0){super(),t=t||DEFAULT_POLY_POINTS,this.Xc=Float64Array.from(t),this.Yc=new C33.Rect,this.qc=!0,this.Kc=e}gn(){}zc(){return this.Xc}Jc(){return this.Xc.length/2}Zc(t){this.Xc.length===t.length?this.Xc.set(t):this.Xc=Float64Array.from(t),this.qc=!0}Qc(){this.Zc(DEFAULT_POLY_POINTS)}I(t){this.Zc(t.Xc)}tu(){this.qc=!0}eu(){if(this.qc){let s=this.Xc,i=s[0],r=s[1],n=i,h=r;for(let t=0,e=s.length;t<e;t+=2){const o=s[t],a=s[t+1];o<i&&(i=o),o>n&&(n=o),a<r&&(r=a),a>h&&(h=a)}this.Yc.set(i,r,n,h),this.qc=!1}}Pc(t,e,s){let i=this.Xc;8!==i.length&&(i=new Float64Array(8),this.Xc=i),i[0]=t.Gl()-e,i[1]=t.Pl()-s,i[2]=t.Ol()-e,i[3]=t.Pl()-s,i[4]=t.Ol()-e,i[5]=t.Dl()-s,i[6]=t.Gl()-e,i[7]=t.Dl()-s,this.Yc.I(t),0===e&&0===s||this.Yc.offset(-e,-s),this.qc=!1}su(t,e,s){tempQuad.I(t),tempQuad.offset(e,s),this.Zc(tempQuad.toArray()),this.qc=!0}transform(t,e,s){let i=0,r=1;0!==s&&(i=Math.sin(s),r=Math.cos(s)),this.iu(t,e,i,r)}iu(s,i,r,n){const h=this.Xc;for(let t=0,e=h.length;t<e;t+=2){const o=t+1,a=h[t]*s,l=h[o]*i;h[t]=a*n-l*r,h[o]=l*n+a*r}this.qc=!0}offset(s,i){const r=this.Xc;for(let t=0,e=r.length;t<e;t+=2)r[t]+=s,r[t+1]+=i}rc(s,i){const r=this.Xc;if(s===r[0]&&i===r[1])return!0;this.eu();let t=this.Yc,n=t.Gl()-110,h=t.Pl()-101,o=t.Ol()+131,a=t.Dl()+120,l=0,c=0,u,f,d=0,p=0,m,C,g=(u=n<s?(l=n,s):(l=s,n),f=h<i?(c=h,i):(c=i,h),m=o<s?(d=o,s):(d=s,o),C=a<i?(p=a,i):(p=i,a),0),S=0;for(let t=0,e=r.length;t<e;t+=2){const y=(t+2)%e,T=r[t],_=r[t+1],E=r[y],A=r[1+y];C33.rh(n,h,s,i,l,u,c,f,T,_,E,A)&&++g,C33.rh(o,a,s,i,d,m,p,C,T,_,E,A)&&++S}return g%2==1||S%2==1}ru(t,u,f){const d=t.Xc,p=this.Xc;if(this.rc(d[0]+u,d[1]+f))return!0;if(t.rc(p[0]-u,p[1]-f))return!0;for(let e=0,c=p.length;e<c;e+=2){let t=(e+2)%c,s=p[e],i=p[e+1],r=p[t],n=p[1+t],h=0,o=0,a,l;a=s<r?(h=s,r):(h=r,s),l=i<n?(o=i,n):(o=n,i);for(let t=0,e=d.length;t<e;t+=2){const m=(t+2)%e,C=d[t]+u,g=d[t+1]+f,S=d[m]+u,y=d[1+m]+f;if(C33.rh(s,i,r,n,h,a,o,l,C,g,S,y))return!0}}return!1}Nc(s,i,r,n,h,o){if(this.rc(r-s,n-i))return!0;if(this.rc(h-s,o-i))return!0;let a=0,l=0,c,u;c=r<h?(a=r,h):(a=h,r),u=n<o?(l=n,o):(l=o,n);const f=this.Xc;for(let t=0,e=f.length;t<e;t+=2){const d=(t+2)%e,p=f[t]+s,m=f[t+1]+i,C=f[d]+s,g=f[1+d]+i;if(C33.rh(r,n,h,o,a,c,l,u,p,m,C,g))return!0}return!1}Bc(s){const i=this.Xc;for(let t=0,e=i.length;t<e;t+=2)i[t]=2*s-i[t];this.qc=!0}Wc(s){const i=this.Xc;for(let t=0,e=i.length;t<e;t+=2){const r=t+1;i[r]=2*s-i[r]}this.qc=!0}Uc(){const s=this.Xc;for(let t=0,e=s.length;t<e;t+=2){const i=t+1,r=s[t];s[t]=s[i],s[i]=r}this.qc=!0}nu(){let s=this.Xc,i=0;for(let t=0,e=s.length;t<e;t+=2)i+=s[t];return i/this.Jc()}hu(){let s=this.Xc,i=0;for(let t=0,e=s.length;t<e;t+=2)i+=s[t+1];return i/this.Jc()}ou(){return this.Xc}au(){return this.Jc()}lu(){return this.Kc}}}{const C33=self.Fe;C33.cu=class extends C33.pn{constructor(t){if(super(),this.uu=new Map,t)for(const[e,s,i]of t)this.Set(e,s,i)}gn(){this.fu(),this.uu=null}du(){return 0===this.uu.size}fu(){const t=this.uu;for(const e of t.values())e.clear();t.clear()}Set(t,e,s){let i=this.uu,r=i.get(t);r||(r=new Map,i.set(t,r)),r.set(e,s)}rs(t,e){const s=this.uu.get(t);return s&&s.get(e)}es(t,e){const s=this.uu.get(t);return!!s&&s.has(e)}pu(t,e){const s=this.uu,i=s.get(t);if(!i)return!1;const r=i.delete(e);return r&&0===i.size&&s.delete(t),r}mu(t){const e=this.uu,s=e.get(t);s&&(s.clear(),e.delete(t));for(const[i,r]of e.entries())r.delete(t)&&0===r.size&&e.delete(i)}Cu(){let t=0;for(const e of this.uu.values())t+=e.size;return t}*values(){for(const t of this.uu.values())yield*t.values()}*gu(){for(const[t,e]of this.uu.entries())for(const s of e.keys())yield[t,s]}*entries(){for(const[t,e]of this.uu.entries())for(const[s,i]of e.entries())yield[t,s,i]}}}{const C33=self.Fe;C33.Su=class extends C33.pn{constructor(){super(),this.yu=new Set,this.Tu=[],this._u=!1}gn(){this.fu()}fu(){this.yu.clear(),C33.Vh(this.Tu),this._u=!1}Eu(t){this.yu.has(t)||(this.yu.add(t),this._u)||this.Tu.push(t)}es(t){return this.yu.has(t)}pu(t){this.yu.delete(t)&&(this._u=!0)}Cu(){return this.yu.size}du(){return 0===this.yu.size}Au(){return this._u&&(this.Iu(),this._u=!1),this.Tu}Iu(){const t=this.Tu;C33.Vh(t);for(const e of this.yu)t.push(e)}}}{const C33=self.Fe,EASE_MAP=new Map,PREDEFINED_EASE_MAP=new Map,CUSTOM_EASE_EDITOR_MAP=new Map,CUSTOM_EASE_DATA_EDITOR_MAP=new Map,CUSTOM_EASE_RUNTIME_MAP=new Map,CUSTOM_EASE_DATA_RUNTIME_MAP=new Map,PRIVATE_EASE_MAP=new Map,BUILT_IN_TRANSITION_MAP=new Map,ALIAS_MAP=new Map,EASE_TRANSLATION_KEYS=(ALIAS_MAP.set("linear","noease"),ALIAS_MAP.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),SHORT_EASE_TRANSLATION_KEYS=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],EASE_API2INTERNAL_NAMES=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),SAMPLE_COUNT=(self.wu=class d{constructor(){}static Ru(){return"default"}static Mu(){return"noease"}static bu(t){return EASE_API2INTERNAL_NAMES.get(t)}static vu(e,...s){this.xu();let t,i=(e?(CUSTOM_EASE_EDITOR_MAP.has(e)||CUSTOM_EASE_EDITOR_MAP.set(e,new Map),[...(t=CUSTOM_EASE_EDITOR_MAP.get(e)).keys()].filter(t=>!d.Gu(t,e)||d.Gu(t,e).transition.IsForAnyPurpose())):[...(t=CUSTOM_EASE_RUNTIME_MAP).keys()]).sort();return[...PREDEFINED_EASE_MAP.keys()].concat(i).filter(t=>!s.includes(t))}static Pu(){this.xu();const t=[...CUSTOM_EASE_RUNTIME_MAP.keys()];return t.sort(),[...PREDEFINED_EASE_MAP.keys()].concat(t)}static Ou(){this.xu();const t=[...CUSTOM_EASE_RUNTIME_MAP.keys()];return t.sort(),t}static Du(t){for(const e of EASE_TRANSLATION_KEYS){const s=self.lang("ui.bars.timeline.eases."+e);if(s===t)return!0}for(const i of SHORT_EASE_TRANSLATION_KEYS){const r=self.lang("ui.bars.timeline.short-eases."+i);if(r===t)return!0}}static Lu(t){return this.xu(),[...PREDEFINED_EASE_MAP.keys()].includes(t)}static Nu(t){const e=ALIAS_MAP.get(t);return e?EASE_MAP.get(e):d.Lu(t)?EASE_MAP.get(t):PRIVATE_EASE_MAP.has(t)?PRIVATE_EASE_MAP.get(t):void 0}static Fu(t){return this.xu(),BUILT_IN_TRANSITION_MAP.get(t)}static ku(t,e){this.xu();const s=d.Nu(t);if(s)return s;if(e)return CUSTOM_EASE_EDITOR_MAP.get(e).get(t);throw new Error("missing ease function")}static Gu(t,e){this.xu();const s=CUSTOM_EASE_DATA_EDITOR_MAP.get(e);if(s)return s.get(t)}static Bu(t,e){this.xu();const s=d.Nu(t);return!!s||!!CUSTOM_EASE_EDITOR_MAP.get(e).get(t)}static $u(t){this.xu();const e=d.Nu(t);return e||CUSTOM_EASE_RUNTIME_MAP.get(t)}static Wu(t){return this.xu(),CUSTOM_EASE_DATA_RUNTIME_MAP.get(t)}static Uu(t){this.xu();const e=this.Pu();return e[t]}static Vu(t,e){this.xu();const s=this.vu(e);return s.indexOf(t)}static Hu(t){return this.Vu(t)}static xu(){0===EASE_MAP.size&&(this.ju("default",()=>{}),this.ju("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.ju("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.ju("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.ju("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.ju("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.ju("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.ju("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.ju("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.ju("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.ju("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.ju("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.ju("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.ju("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.ju("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.ju("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.ju("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.ju("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.ju("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.ju("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.ju("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.ju("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.ju("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.ju("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.ju("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.ju("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.ju("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.ju("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.ju("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.ju("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.ju("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.ju("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Xu("cubicbezier",this.Yu),this.Xu("spline",this.qu))}static ju(t,e,s=!1){if("function"==typeof e)d.Ku(t,e,"predefined");else{if(!C33.$i(e))throw new Error("unexpected arguments");if(self.BuiltInTransition){const r=C33.Cn(self.BuiltInTransition,t,s);r.SetFromJson(e),d.Ku(t,(t,e,s,i)=>r.zu(t,e,s,i),"predefined"),BUILT_IN_TRANSITION_MAP.set(t,r)}else{const n=C33.Cn(C33.Ju,[t,e.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.Zu(s),d.Ku(t,(t,e,s,i)=>n.zu(t,e,s,i),"predefined")}}}static Xu(t,e){d.Ku(t,e,"private")}static Qu(t,e,s,i){this.xu(),d.Ku(t,e,"custom",s,i)}static tf(t,e){if(!this.Lu(t)&&![...PRIVATE_EASE_MAP.keys()].includes(t)){const s=CUSTOM_EASE_EDITOR_MAP.get(e),i=(s&&s.delete(t),CUSTOM_EASE_DATA_EDITOR_MAP.get(e));i&&i.delete(t)}}static Ku(t,e,s,i,r){switch(s){case"predefined":EASE_MAP.set(t,e),PREDEFINED_EASE_MAP.set(t,e);break;case"custom":if(i){CUSTOM_EASE_EDITOR_MAP.has(i)||CUSTOM_EASE_EDITOR_MAP.set(i,new Map),CUSTOM_EASE_DATA_EDITOR_MAP.has(i)||CUSTOM_EASE_DATA_EDITOR_MAP.set(i,new Map);const n=CUSTOM_EASE_EDITOR_MAP.get(i),h=(n.set(t,e),CUSTOM_EASE_DATA_EDITOR_MAP.get(i));h.set(t,r)}else CUSTOM_EASE_RUNTIME_MAP.set(t,e),CUSTOM_EASE_DATA_RUNTIME_MAP.set(t,r);break;case"private":EASE_MAP.set(t,e),PRIVATE_EASE_MAP.set(t,e);break;default:throw new Error("unexpected ease mode")}}static ef(t,e,s,i){return 0===i?e:s*t/i+e}static Yu(t,e,s,i,r){const n=e,h=3*t*(s-e),o=3*t**2*(e+i-2*s),a=t**3*(r-e+3*s-3*i);return n+h+o+a}static qu(t,e,s,i,r,n,h,o,l,u){if(i===r&&n===h)return t;const f=get_t_for_x(t,e,i,n,o,u),d=a(s,r,h,l),p=b(s,r,h,l),m=c(s,r,h,l);return calc_bezier(f,d,p,m)}static if(t,e,s,i){const r=[],n=a(t,e,s,i),h=b(t,e,s,i),o=c(t,e,s,i);for(let t=0;t<SAMPLE_COUNT;++t){const l=calc_bezier(t*SAMPLE_STEP,n,h,o);r.push(l)}return r}},11),SAMPLE_STEP=1/(SAMPLE_COUNT-1),NEWTON_RAPHSON_ITERATIONS=4,NEWTON_RAPHSON_MIN_SLOPE=.01,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,a=(t,e,s,i)=>i-3*s+3*e-t,b=(t,e,s,i)=>3*s-6*e+3*t,c=(t,e,s,i)=>3*(e-t),calc_bezier=(t,e,s,i)=>((e*t+s)*t+i)*t,get_slope=(t,e,s,i)=>3*e*t*t+2*s*t+i,get_t_for_x=(h,t,e,s,i,r)=>{if(1==h)return 1;let o=0,n=1,l=r[n],u=SAMPLE_COUNT-1;for(SAMPLE_COUNT;n!=u&&l<=h;)n++,l=r[n],o+=SAMPLE_STEP;n--;let f=(h-(l=r[n]))/(r[n+1]-l),d=o+f*SAMPLE_STEP,p=a(t,e,s,i),m=b(t,e,s,i),C=c(t,e,s,i),g=get_slope(d,p,m,C);if(0===g)return d;if(g>=NEWTON_RAPHSON_MIN_SLOPE){for(let t=0;t<NEWTON_RAPHSON_ITERATIONS;++t){const S=calc_bezier(d,p,m,C)-h,y=get_slope(d,p,m,C);d-=S/y}return d}{let e=o,s=o+SAMPLE_STEP,i=0,r,n;do{d=e+(s-e)/2;let t=calc_bezier(d,p,m,C)-h;0<t?s=d:e=d,r=Math.abs(t)>SUBDIVISION_PRECISION,n=++i<SUBDIVISION_MAX_ITERATIONS}while(r&&n);return d}}}{let RequireStringOrNumber2=function(t){C33.wi(t)};RequireStringOrNumber=RequireStringOrNumber2;const C33=self.Fe;C33.rf=class{constructor(t){this.nf=[],this.Tn=t||"",this.hf=0}gn(){this.fu(),this.nf=null}lf(){return this.Tn}fu(){C33.Hh(this.nf),this.hf=0}cf(){return this.hf}uf(t=Math.random()*this.cf()){let e=0;for(const[s,i]of this.nf)if(t<(e+=s))return i;return 0}ff(t,e){RequireStringOrNumber2(e),this.hf+=t,this.nf.push([t,e])}df(e,s){RequireStringOrNumber2(s);const i=0===e;for(let t=0;t<this.nf.length;t++){const r=this.nf[t],n=i||r[0]===e,h=r[1]===s;if(n&&h){this.nf.splice(t,1),this.hf-=r[0];break}}}pf(){return JSON.stringify(this.nf)}static mf(t,e){const s=new C33.rf(e),i=JSON.parse(t);for(const r of i){const n=r[0],h=r[1];s.ff(n,h)}return s}}}{let C33=self.Fe,nextId=0;C33.Cf=class{constructor(t,e){this.gf=t,this.Sf=e,this.yf=nextId++,this.gf.Tf("runtime","screen-reader-text",{type:"create",id:this.yf,text:this.Sf})}gn(){this.gf.Tf("runtime","screen-reader-text",{type:"release",id:this.yf}),this.gf=null,this.Sf="",this.yf=-1}_f(t){this.Sf!==t&&(this.Sf=t,this.gf.Tf("runtime","screen-reader-text",{type:"update",id:this.yf,text:this.Sf}))}}}{const C33=self.Fe;C33.Event=class{constructor(t,e){this.type=t,this.cancelable=!!e,this.defaultPrevented=!1,this.Ef=!1,this.Af=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Af)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Ef=!0}}}{const C33=self.Fe,assert=self.assert;C33.Event.If=class extends C33.pn{constructor(t){super(),this.wf=t,this.Rf=[],this.Mf=new Set,this.bf=[],this.vf=new Set,this.xf=0,this.Gf=[]}gn(){0<this.xf||(C33.Vh(this.Rf),this.Mf.clear(),C33.Vh(this.bf),this.vf.clear(),C33.Vh(this.Gf),C33.gn(this))}Pf(t,e){this.Of()?this.Gf.push({Df:"add",Lf:t,capture:e}):e?this.Mf.has(t)||(this.Rf.push(t),this.Mf.add(t)):this.vf.has(t)||(this.bf.push(t),this.vf.add(t))}Nf(t,e){this.Of()?this.Gf.push({Df:"remove",Lf:t,capture:e}):e?this.Mf.has(t)&&(this.Mf.delete(t),C33.Kh(this.Rf,t)):this.vf.has(t)&&(this.vf.delete(t),C33.Kh(this.bf,t))}Ff(){return!this.Rf.length&&!this.bf.length}Of(){return 0<this.xf}kf(){const t=new Set,e=new Set;for(const s of this.Gf)if("add"===s.Df)this.Pf(s.Lf,s.capture),(s.capture?e:t).delete(s.Lf);else{if("remove"!==s.Df)throw new Error("invalid op");(s.capture?(this.Mf.delete(s.Lf),e):(this.vf.delete(s.Lf),t)).add(s.Lf)}C33.Zh(this.bf,t),C33.Zh(this.Rf,e),C33.Vh(this.Gf)}Bf(s){this.$f();let i=!1;for(let t=0,e=this.Rf.length;t<e;++t)if(this.Rf[t](s),s.Ef){i=!0;break}if(!i)for(let t=0,e=this.bf.length;t<e&&(this.bf[t](s),!s.Ef);++t);return this.Wf(),!s.defaultPrevented}Uf(s){this.$f();for(let t=0,e=this.Rf.length;t<e;++t)this.Rf[t](s);for(let t=0,e=this.bf.length;t<e;++t)this.bf[t](s);return this.Wf(),!0}$f(){this.xf++}Wf(){this.xf--,0===this.xf&&0<this.Gf.length&&this.kf()}Vf(t){t?this.$f():this.Wf()}Hf(s){let i=[];for(let e=0,t=this.Rf.length;e<t;++e){let t=this.Rf[e];i.push(C33.jf(()=>t(s)))}for(let e=0,t=this.bf.length;e<t;++e){let t=this.bf[e];i.push(C33.jf(()=>t(s)))}return Promise.all(i).then(()=>!s.defaultPrevented)}Xf(s){const i=[];this.$f();for(let t=0,e=this.Rf.length;t<e;++t){const r=this.Rf[t](s);r instanceof Promise&&i.push(r)}for(let t=0,e=this.bf.length;t<e;++t){const n=this.bf[t](s);n instanceof Promise&&i.push(n)}return this.Wf(),i.length?Promise.all(i).then(()=>!s.defaultPrevented):!s.defaultPrevented}async Yf(t){return this.Xf(t)}async qf(s){this.$f();for(let t=0,e=this.Rf.length;t<e;++t){const i=this.Rf[t](s);i instanceof Promise&&await i}for(let t=0,e=this.bf.length;t<e;++t){const r=this.bf[t](s);r instanceof Promise&&await r}return this.Wf(),!s.defaultPrevented}*Kf(s){this.$f();for(let t=0,e=this.Rf.length;t<e;++t){const i=this.Rf[t](s);C33.Yo(i)&&(yield*i)}for(let t=0,e=this.bf.length;t<e;++t){const r=this.bf[t](s);C33.Yo(r)&&(yield*r)}this.Wf()}}}{const C33=self.Fe;C33.Event.zf=class extends C33.pn{constructor(){super(),this.Jf=new Map,this.Zf=!1}gn(){if(this.Zf)throw new Error("already released");this.Qf(),this.Zf=!0,C33.gn(this)}Sn(){return this.Zf}Qf(){if(this.Jf){for(let t of this.Jf.values())t.gn();this.Jf.clear()}}t0(t,e){let s=this.Jf.get(t);return s||(e?(s=C33.Cn(C33.Event.If,t),this.Jf.set(t,s),s):null)}e0(t){return this.Jf.has(t)}addEventListener(t,e,s){let i=this.t0(t,!0);i.Pf(e,!!s)}removeEventListener(t,e,s){let i=this.t0(t,!1);i&&(i.Nf(e,!!s),i.Ff())&&this.Jf.delete(t)}dispatchEvent(t){const e=this.t0(t.type,!1);return!e||(t.cancelable?e.Bf(t):e.Uf(t))}s0(t){const e=this.t0(t.type,!1);return e?(t.Af=!0,e.Hf(t)):Promise.resolve(!0)}async i0(t){const e=this.t0(t.type,!1);if(!e)return!0;this.Jf.delete(t.type),t.Af=!0;const s=await e.Hf(t);return e.gn(),s}async r0(t){const e=this.t0(t.type,!1);return!e||e.Yf(t)}n0(t){const e=this.t0(t.type,!1);return!e||e.Xf(t)}async h0(t){const e=this.t0(t.type,!1);return!e||e.qf(t)}o0(t){const e=this.t0(t.type,!1);if(!e)return null;if(t.cancelable)throw new Error("not supported");return e.Kf(t)}Vf(t){for(const e of this.Jf.values())e.Vf(t)}}}{let SetNewCallback2=function(t){callbackId=SUPPORTS_RIC&&0===highThroughputMode?requestIdleCallback(DoAsyncifiedWork2,{timeout:IDLECALLBACK_TIMEOUT}):setTimeout(DoAsyncifiedWork2,0<highThroughputMode?1:t)},DoAsyncifiedWork2=function(r){if(callbackId=-1,workQueue.length){let s=performance.now(),i=s,t=0,e;for(;DoNextAsyncifiedJob2(workQueue.shift()),i=performance.now(),++t,e=(i-s)/t*1.1,workQueue.length&&(SUPPORTS_RIC&&0===highThroughputMode&&void 0!==r?e<r.timeRemaining():i-s+e<SETTIMEOUT_WORK_DURATION););if(-1===callbackId&&workQueue.length){let t=i-s,e=Math.max(SETTIMEOUT_INTERVAL-t,4);SetNewCallback2(e)}}},DoNextAsyncifiedJob2=function(e){let t;try{t=e.Lf()}catch(t){return void e.reject(t)}e.resolve(t)},C33=(SetNewCallback=SetNewCallback2,DoAsyncifiedWork=DoAsyncifiedWork2,DoNextAsyncifiedJob=DoNextAsyncifiedJob2,self.Fe),SETTIMEOUT_WORK_DURATION=12,SETTIMEOUT_INTERVAL=16,IDLECALLBACK_TIMEOUT=35,SUPPORTS_RIC="undefined"!=typeof requestIdleCallback,workQueue=[],callbackId=-1,highThroughputMode=0,asyncifyDisabled=C33.os.es("disable-asyncify");asyncifyDisabled&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),C33.jf=function(s){let i=null;return C33.isDebug&&(i=C33.di()),new Promise((t,e)=>{workQueue.push({Lf:s,resolve:t,reject:e,stack:i}),asyncifyDisabled?DoNextAsyncifiedJob2(workQueue.pop()):-1===callbackId&&SetNewCallback2(SETTIMEOUT_INTERVAL)})},C33.jf.a0=function(t){if(t)++highThroughputMode;else if(--highThroughputMode<0)throw new Error("already turned off high throughput mode")}}{let ClearTimeCache2=function(){cachedNowTime=-1},CheckActiveIdleTimeouts2=function(){timerId=-1,nextDeadline=-1;let s=Date.now();for(let e of activeIdleTimeouts)if(e.l0(s)){let t=e.c0();(-1===nextDeadline||t<nextDeadline)&&(nextDeadline=t)}else activeIdleTimeouts.delete(e);if(-1!==nextDeadline){let t=Math.max(nextDeadline-s+IDLE_CHECK_TIMER_OVERSHOOT,IDLE_CHECK_MIN_INTERVAL);timerId=self.setTimeout(CheckActiveIdleTimeouts2,t)}},C33=(ClearTimeCache=ClearTimeCache2,CheckActiveIdleTimeouts=CheckActiveIdleTimeouts2,self.Fe),IDLE_CHECK_MIN_INTERVAL=1e3,IDLE_CHECK_TIMER_OVERSHOOT=100,cachedNowTime=-1,timerId=(C33.u0=function(){return-1===cachedNowTime&&(cachedNowTime=Date.now(),self.setTimeout(ClearTimeCache2,16)),cachedNowTime},-1),nextDeadline=-1,activeIdleTimeouts=new Set;C33.f0=class{constructor(t,e){this.d0=t,this.p0=1e3*e,this.m0=0,this.C0=!1}g0(){let t=C33.u0();this.m0=t+this.p0,this.C0||(activeIdleTimeouts.add(this),this.C0=!0),-1===timerId?(nextDeadline=this.m0,timerId=self.setTimeout(CheckActiveIdleTimeouts2,this.p0+IDLE_CHECK_TIMER_OVERSHOOT)):this.m0<nextDeadline&&nextDeadline>t+IDLE_CHECK_MIN_INTERVAL&&(self.clearTimeout(timerId),nextDeadline=this.m0,timerId=self.setTimeout(CheckActiveIdleTimeouts2,this.p0+IDLE_CHECK_TIMER_OVERSHOOT))}l0(t){return!(t>=this.m0)||(this.d0()?(this.m0=t+this.p0,!0):this.C0=!1)}c0(){return this.m0}S0(){this.C0&&(activeIdleTimeouts.delete(this),this.C0=!1,0===activeIdleTimeouts.size)&&-1!==timerId&&(self.clearTimeout(timerId),timerId=-1,nextDeadline=-1)}gn(){this.S0(),this.d0=null}}}{const C33=self.Fe;C33.y0=class a{constructor(t){this.T0=!1,this._0=t}E0(){this.T0||(this.T0=!0,this._0&&(this._0(),this._0=null))}A0(){return this.T0}gn(){this.E0()}static gn(t){return new a(()=>t.gn())}static I0(e,s,i,r,t){if(null==r)r=!1;else if("boolean"!=typeof r&&"object"!=typeof r)throw new TypeError("invalid event listener options");if(t&&(i=i.bind(t)),s.includes(" ")){s=s.split(" ");const n=new C33.w0;for(let t of s)e.addEventListener(t,i,r),n.Eu(C33.Cn(C33.y0,()=>e.removeEventListener(t,i,r)));return n}return e.addEventListener(s,i,r),C33.Cn(C33.y0,()=>e.removeEventListener(s,i,r))}},C33.R0=class extends C33.y0{M0(t){this._0=t}},C33.w0=class extends C33.y0{constructor(...e){super(),this.b0=new Set;for(let t of e)this.Eu(t)}Eu(...e){if(this.T0)throw new Error("already disposed");for(let t of e)this.b0.add(t)}v0(t){if(this.T0)throw new Error("already disposed");this.b0.delete(t)}x0(){if(this.T0)throw new Error("already disposed");if(this.b0){for(let t of this.b0)t.E0();this.b0.clear()}}A0(){return this.T0}E0(){if(this.T0)throw new Error("already disposed");this.T0=!0;for(let t of this.b0)t.E0();this.b0.clear(),this.b0=null}gn(){this.E0()}}}{const C33=self.Fe;C33.G0=class extends C33.pn{constructor(){super(),this.P0=0,this.ll=0,this.O0=0,this.D0=0}Eu(t){this.ll=(t=+t)-this.P0,this.O0=this.D0+this.ll,this.P0=this.O0-this.D0-this.ll,this.D0=this.O0}L0(t){this.D0-=+t}rs(){return this.D0}g0(){this.P0=0,this.ll=0,this.O0=0,this.D0=0}Set(t){this.P0=0,this.ll=0,this.O0=0,this.D0=+t}N0(t){this.P0=t.P0,this.ll=t.ll,this.O0=t.O0,this.D0=t.D0}gn(){}}}{const C33=self.Fe,js_cols={},RED=!0,BLACK=!1;js_cols.F0=function(t){this.k0=t,this.right=this.k0.B0,this.left=this.k0.B0,this.parent=null,this.color=!1,this.key=null},js_cols.$0=function(t){this.size=0,this.B0=new js_cols.F0(this),this.B0.color=BLACK,this.root=this.B0,this.root.parent=this.B0,this.compare=t||this.W0},js_cols.$0.prototype.W0=function(t,e){return t<e?-1:e<t?1:0},js_cols.$0.prototype.clone=function(){var t=new js_cols.$0(this.compare);return t.U0(this),t},js_cols.$0.prototype.clear=function(){this.size=0,this.B0=new js_cols.F0(this),this.B0.color=BLACK,this.root=this.B0,this.root.parent=this.B0},js_cols.$0.prototype.V0=function(t){var e=t.right;t.right=e.left,e.left!=this.B0&&(e.left.parent=t),e.parent=t.parent,t.parent==this.B0?this.root=e:t==t.parent.left?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e},js_cols.$0.prototype.H0=function(t){var e=t.left;t.left=e.right,e.right!=this.B0&&(e.right.parent=t),e.parent=t.parent,t.parent==this.B0?this.root=e:t==t.parent.right?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e},js_cols.$0.prototype.j0=function(t){if(this.contains(t))this.X0(t).key=t;else{for(var e=new js_cols.F0(this),s=(e.key=t,this.B0),i=this.root;i!=this.B0;)s=i,i=this.compare(e.key,i.key)<0?i.left:i.right;(e.parent=s)==this.B0?this.root=e:this.compare(e.key,s.key)<0?s.left=e:s.right=e,e.left=this.B0,e.right=this.B0,e.color=RED,this.Y0(e),this.size++}},js_cols.$0.prototype.Y0=function(t){for(;t!=this.B0&&t!=this.root&&t.parent.color==RED;){var e;t.parent==t.parent.parent.left?(e=t.parent.parent.right).color==RED?(t.parent.color=BLACK,e.color=BLACK,t.parent.parent.color=RED,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.V0(t)),t.parent.color=BLACK,t.parent.parent.color=RED,t.parent.parent!=this.B0&&this.H0(t.parent.parent)):(e=t.parent.parent.left).color==RED?(t.parent.color=BLACK,e.color=BLACK,t.parent.parent.color=RED,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.H0(t)),t.parent.color=BLACK,t.parent.parent.color=RED,t.parent.parent!=this.B0&&this.V0(t.parent.parent))}this.root.color=BLACK},js_cols.$0.prototype.q0=function(t){var e=t.left==this.B0||t.right==this.B0?t:this.K0(t),s=e.left!=this.B0?e.left:e.right;s.parent=e.parent,e.parent==this.B0?this.root=s:e==e.parent.left?e.parent.left=s:e.parent.right=s,e!=t&&(t.key=e.key),e.color==BLACK&&this.z0(s),this.size--},js_cols.$0.prototype.z0=function(t){for(;t!=this.root&&t.color==BLACK;){var e;t=t==t.parent.left?((e=t.parent.right).color==RED&&(e.color=BLACK,t.parent.color=RED,this.V0(t.parent),e=t.parent.right),e.left.color==BLACK&&e.right.color==BLACK?(e.color=RED,t.parent):(e.right.color==BLACK&&(e.left.color=BLACK,e.color=RED,this.H0(e),e=t.parent.right),e.color=t.parent.color,t.parent.color=BLACK,e.right.color=BLACK,this.V0(t.parent),this.root)):((e=t.parent.left).color==RED&&(e.color=BLACK,t.parent.color=RED,this.H0(t.parent),e=t.parent.left),e.right.color==BLACK&&e.left.color==BLACK?(e.color=RED,t.parent):(e.left.color==BLACK&&(e.right.color=BLACK,e.color=RED,this.V0(e),e=t.parent.left),e.color=t.parent.color,t.parent.color=BLACK,e.left.color=BLACK,this.H0(t.parent),this.root))}t.color=BLACK},js_cols.$0.prototype.remove=function(t){var e;return(t=this.X0(t))!=this.B0?(e=t.key,this.q0(t),e):null},js_cols.$0.prototype.J0=function(t,e){this.remove(e)},js_cols.$0.prototype.min=function(t){for(;t.left!=this.B0;)t=t.left;return t},js_cols.$0.prototype.max=function(t){for(;t.right!=this.B0;)t=t.right;return t},js_cols.$0.prototype.K0=function(t){if(t.right!=this.B0)return this.min(t.right);for(var e=t.parent;e!=this.B0&&t==e.right;)e=(t=e).parent;return e},js_cols.$0.prototype.Z0=function(t){if(t.left!=this.B0)return this.max(t.left);for(var e=t.parent;e!=this.B0&&t==e.left;)e=(t=e).parent;return e},js_cols.$0.prototype.Q0=function(t){if(0<this.size){var e=this.X0(t);if(e==this.B0)return null;if(e.right!=this.B0)return this.min(e.right).key;for(var s=e.parent;s!=this.B0&&e==s.right;)s=(e=s).parent;return s!=this.B0?s.key:null}return null},js_cols.$0.prototype.td=function(t){if(0<this.size){var e=this.X0(t);if(e==this.B0)return null;if(e.left!=this.B0)return this.max(e.left).key;for(var s=e.parent;s!=this.B0&&e==s.left;)s=(e=s).parent;return s!=this.B0?s.key:null}return null},js_cols.$0.prototype.ed=function(){return this.min(this.root).key},js_cols.$0.prototype.rd=function(){return this.max(this.root).key},js_cols.$0.prototype.X0=function(t){for(var e=this.root;e!=this.B0&&0!=this.compare(e.key,t);)e=this.compare(t,e.key)<0?e.left:e.right;return e},js_cols.$0.prototype.contains=function(t){return null!=this.X0(t).key},js_cols.$0.prototype.getValues=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},js_cols.$0.prototype.U0=function(t){if("array"==js_cols.typeOf(t))for(var e=0;e<t.length;e++)this.j0(t[e]);else if("function"==js_cols.typeOf(t.forEach))t.forEach(this.j0,this);else if("function"==js_cols.typeOf(t.getValues))for(var s=t.getValues(),e=0;e<s.length;e++)this.j0(s[e]);else if("object"==js_cols.typeOf(t))for(var i in t)this.j0(t[i])},js_cols.$0.prototype.nd=function(t){if("array"==js_cols.typeOf(t))for(var e=0;e<t.length;e++)this.remove(t[e]);else if("function"==js_cols.typeOf(t.forEach))t.forEach(this.J0,this);else if("function"==js_cols.typeOf(t.getValues))for(var s=t.getValues(),e=0;e<s.length;e++)this.remove(s[e]);else if("object"==js_cols.typeOf(t))for(var i in t)this.remove(t[i])},js_cols.$0.prototype.hd=function(t){if("array"==js_cols.typeOf(t)){for(var e=0;e<t.length;e++)if(!this.contains(t[e]))return!1;return!0}if("function"==js_cols.typeOf(t.forEach))return t.every(this.contains,this);if("function"==js_cols.typeOf(t.getValues)){for(var s=t.getValues(),e=0;e<s.length;e++)if(!this.contains(s[e]))return!1;return!0}if("object"==js_cols.typeOf(t)){for(var i in t)if(!this.contains(t[i]))return!1;return!0}},js_cols.$0.prototype.range=function(t,e){var s=[];return this.od(function(t){s.push(t)},t,e),s},js_cols.$0.prototype.ad=function(t,e){if(!this.ld())for(var s=this.min(this.root);s!=this.B0;){if(t.call(e,s.key,this))return;s=this.K0(s)}},js_cols.$0.prototype.ud=function(t,e,s){if(!this.ld())for(var i=this.X0(e);i!=this.B0;){if(t.call(s,i.key,this))return;i=this.K0(i)}},js_cols.$0.prototype.fd=function(t,e,s){if(!this.ld())for(var i=this.min(this.root),r=this.X0(e);i!=r;){if(t.call(s,i.key,this))return;i=this.K0(i)}},js_cols.$0.prototype.od=function(t,e,s,i){if(!this.ld())for(var r=this.X0(e),n=this.X0(s);r!=n;){if(t.call(i,r.key,this))return;r=this.K0(r)}},js_cols.$0.prototype.dd=function(t,e){if(!this.ld())for(var s=this.max(this.root);s!=this.B0;){if(t.call(e,s.key,this))return;s=this.Z0(s)}},js_cols.$0.prototype.forEach=function(t,e){if(!this.ld())for(var s=this.min(this.root);s!=this.B0;s=this.K0(s))t.call(e,s.key,s.key,this)},js_cols.$0.prototype.some=function(t,e){if(!this.ld())for(var s=this.min(this.root);s!=this.B0;s=this.K0(s))if(t.call(e,s.key,s.key,this))return!0;return!1},js_cols.$0.prototype.every=function(t,e){if(this.ld())return!1;for(var s=this.min(this.root);s!=this.B0;s=this.K0(s))if(!t.call(e,s.key,s.key,this))return!1;return!0},js_cols.$0.prototype.map=function(t,e){var s=[];if(!this.ld())for(var i=this.min(this.root);i!=this.B0;i=this.K0(i))s.push(t.call(e,i.key,i.key,this));return s},js_cols.$0.prototype.filter=function(t,e){var s=[];if(!this.ld())for(var i=this.min(this.root);i!=this.B0;i=this.K0(i))t.call(e,i.key,i.key,this)&&s.push(i.key);return s},js_cols.$0.prototype.getCount=function(){return this.size},js_cols.$0.prototype.ld=function(){return 0==this.size},js_cols.$0.prototype.isSubsetOf=function(t){var e=js_cols.getCount(t);if(this.getCount()>e)return!1;var s=0;if(this.ld())return!0;for(var i=this.min(this.root);i!=this.B0;i=this.K0(i))js_cols.contains.call(t,t,i.key)&&s++;return s==this.getCount()},js_cols.$0.prototype.intersection=function(t){var e=new js_cols.$0(this.compare);if(!this.ld())for(var s=this.min(this.root);s!=this.B0;s=this.K0(s))t.contains.call(t,s.key,s.key,this)&&e.j0(s.key);return e},C33.$0=class extends C33.pn{constructor(t){super(),this.md=new js_cols.$0(t),this.Cd=!1,this.gd=new Set,this.Sd=new Set}Eu(t){this.Cd?this.md.contains(t)?this.Sd.delete(t):this.gd.add(t):this.md.j0(t)}v0(t){this.Cd?this.md.contains(t)?this.Sd.add(t):this.gd.delete(t):this.md.remove(t)}es(t){return this.Cd?!!this.gd.has(t)||!this.Sd.has(t)&&this.md.contains(t):this.md.contains(t)}fu(){this.md.clear(),this.gd.clear(),this.Sd.clear()}toArray(){if(this.Cd)throw new Error("cannot be used in queueing mode");return this.md.getValues()}Cu(){return this.md.getCount()+this.gd.size-this.Sd.size}du(){return 0===this.Cu()}yd(){if(this.du())throw new Error("empty set");if(this.Cd)throw new Error("cannot be used in queueing mode");const t=this.md,e=t.min(t.root);return e.key}Td(){if(this.du())throw new Error("empty set");if(this.Cd)throw new Error("cannot be used in queueing mode");const t=this.yd();return this.v0(t),t}_d(t){if(this.Cd!==(t=!!t)&&!(this.Cd=t)){for(const e of this.Sd)this.md.remove(e);this.Sd.clear();for(const s of this.gd)this.md.j0(s);this.gd.clear()}}Ed(t){this.md.forEach(t)}*values(){if(!this.du()){const e=this.md;for(let t=e.min(e.root);t!=e.B0;t=e.K0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const C33=self.Fe;C33.Ad=class{constructor(t=C33.hardwareConcurrency){this.Id=t,this.wd=[],this.Rd=0}Eu(s){return new Promise((t,e)=>{this.wd.push({Lf:s,resolve:t,reject:e}),this.Md()})}bd(s){for(let t=0,e=this.wd.length;t<e;++t)if(this.wd[t].Lf===s)return t;return-1}vd(t,e){const s=this.bd(t);if(-1===s)throw new Error("cannot find promise to resolve");this.wd[s].resolve(e),this.wd.splice(s,1)}xd(t,e){const s=this.bd(t);if(-1===s)throw new Error("cannot find promise to reject");this.wd[s].reject(e),this.wd.splice(s,1)}async Md(){if(this.wd.length&&!(this.Rd>=this.Id)){this.Rd++;const e=this.wd.shift();try{const t=await e.Lf();e.resolve(t)}catch(t){e.reject(t)}this.Rd--,this.Md()}}static async Gd(t,e){let s=[],i=!1,r=[];for(;t--;)r.push((async()=>{let t;for(;t=e.pop();){if(i)return;try{s.push(await t())}catch(t){throw i=!0,t}}})());return await Promise.all(r),s}}}{const C33=self.Fe;C33.Pd=class{constructor(t,e,s){this.d0=t,this.Od=e,this.Dd=s||2*e,this.Ld=-1,this.Nd=-1/0,this.Fd=()=>this.kd(),this.Bd=!1,this.$d=!1,this.Wd=null}Ud(t){this.$d=!!t}Vd(){return void 0!==C33.Battery&&C33.Battery.IsOnBatteryPower()?this.Dd:this.Od}Hd(...i){if(-1===this.Ld){this.Wd=i;let t=C33.u0(),e=t-this.Nd,s=this.Vd();s<=e&&this.$d?(this.Nd=t,this.jd()):this.Ld=self.setTimeout(this.Fd,Math.max(s-e,4))}}jd(){this.Bd=!0;const t=this.Wd;this.Wd=null,t?this.d0(...t):this.d0(),this.Bd=!1}g0(){this.Bd||(this.Xd(),this.Wd=null,this.Nd=C33.u0())}kd(){this.Ld=-1,this.Nd=C33.u0(),this.jd()}Xd(){-1!==this.Ld&&(self.clearTimeout(this.Ld),this.Ld=-1)}gn(){this.Xd(),this.d0=null,this.Wd=null,this.Fd=null}}}{const C33=self.Fe;C33.Yd=class{constructor(){this.qd=new Map,this.Kd=!1,this.zd=null,this.Jd=null,this.Zd=null,this.Qd=null}t3(t){this.Kd=!!t}e3(){return this.Kd}s3(t){this.zd=t}i3(t){if(this.zd)return this.zd(t);throw new Error("no get base size callback set")}r3(t){this.Jd=t}n3(t,e,s,i,r,n){if(this.Jd)return this.Jd(t,e,s,i,r,n);throw new Error("no raster at size callback set")}h3(t){this.Zd=t}o3(t){if(!this.Zd)throw new Error("no release result callback set");this.Zd(t)}a3(t){this.Qd=t}l3(){if(!this.Qd)throw new Error("no redraw callback set");this.Qd()}u3(t){let e=this.qd.get(t);return e||(e=C33.Cn(C33.f3,this,t),this.qd.set(t,e)),e.d3(),e}m3(t){this.qd.delete(t.C3())}g3(){for(const t of this.qd.values())t.S3(),t.y3()}}}{const C33=self.Fe,MAX_SURFACE_SIZE=4096;C33.f3=class{constructor(t,e){this.T3=t,this._3=e,this.E3=0,this.A3=0,this.I3=0,this.w3=this.T3.i3(e).then(t=>{this.T3&&(this.A3=t[0],this.I3=t[1],this.T3.l3())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.R3=!0,this.T3&&this.T3.l3()}),this.M3=0,this.b3=0,this.v3=0,this.x3=0,this.G3=!1,this.P3=null,this.O3=!1,this.R3=!1}gn(){if(this.E3<=0)throw new Error("already released");this.E3--,0===this.E3&&this.D3()}S3(){this.P3&&(this.T3.o3(this.P3),this.P3=null)}D3(){this.S3(),this.T3.m3(this),this.T3=null}C3(){return this._3}d3(){this.E3++}L3(){return 0<this.E3}N3(){return this.P3}y3(){this.O3=!0}async F3(i,r,n){if(0!==r&&0!==n&&!this.R3&&!this.G3){let t=C33.Un(Math.ceil(r)),e=C33.Un(Math.ceil(n)),s=Math.max(t,e);if(s>MAX_SURFACE_SIZE){const h=MAX_SURFACE_SIZE/s;r*=h,n*=h,t=Math.min(Math.ceil(t*h),MAX_SURFACE_SIZE),e=Math.min(Math.ceil(e*h),MAX_SURFACE_SIZE)}if(r<t&&n<e){const o=r/n,a=t/e;n=o<a?(r=e*o,e):(r=t)/o}if(this.T3.e3()&&(t=Math.ceil(r),e=Math.ceil(n)),!(t<=this.M3&&e<=this.b3)||this.O3){this.G3=!0,this.M3=t,this.b3=e;const l=await this.T3.n3(this._3,i,this.M3,this.b3,r,n);this.T3&&(this.S3(),this.P3=l,this.v3=r,this.x3=n,this.G3=!1,this.O3=!1,this.T3.l3())}}}B3(){return this.w3}W3(){return this.A3}U3(){return this.I3}V3(){return this.v3}H3(){return this.x3}j3(){return this.R3}}}{let lookupHtmlEntity2=function(t){return HTML_ENTITY_MAP.get(t)};lookupHtmlEntity=lookupHtmlEntity2;const C33=self.Fe,NUMERIC_CHARS=(C33.X3="\ufeff",new Set("0123456789")),WHITESPACE_CHARS=(C33.Y3=function(t){return NUMERIC_CHARS.has(t)},new Set(" \t\n\r\u2028\u2029"));C33.q3=function(t){return WHITESPACE_CHARS.has(t)},C33.K3=function(t){return[...t].filter(t=>!C33.q3(t)).join("")},C33.z3=function(t){for(const e of t)if(!C33.q3(e))return!1;return!0},C33.J3=function(t){for(const e of t)if(!C33.q3(e))return!1;return!0},C33.Z3=function(t){return 1===t.length&&t.charCodeAt(0)<32},C33.Q3=function(t){return[...t].filter(t=>!C33.Z3(t)).join("")};let cjkPunctuationRegex=null;try{cjkPunctuationRegex=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}C33.tp=function(t){return!C33.q3(t)&&cjkPunctuationRegex&&cjkPunctuationRegex.test(t)};const NUMERIC_STRING_CHARS=new Set("0123456789.+-e"),HTML_ENTITY_MAP=(C33.ep=function(e){if(!(e=e.trim()).length)return!1;let t=e.charAt(0);if("-"!==t&&!NUMERIC_CHARS.has(t))return!1;for(let t of e)if(!NUMERIC_STRING_CHARS.has(t))return!1;return!0},C33.sp=function(e){let s=e.length;for(;0<s;){let t=e.charAt(s-1);if(!C33.Y3(t))break;--s}return e.substr(0,s)},C33.rp=function(t){let e=C33.sp(t),s=t.substr(e.length);return e+(s?(parseInt(s,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),HTML_ENTITY_REGEX=/[&<>"']/g,ESCAPE_REGEX=(C33.np=function(t){return t.replace(HTML_ENTITY_REGEX,lookupHtmlEntity2)},C33.hp=function(t){let e=C33.op(t,"\\","\\\\");return e=C33.op(e,'"','\\"'),e=C33.op(e,"\t","\\t"),e=C33.op(e,"\r",""),C33.op(e,"\n","\\n")},C33.lp=function(t){let e=C33.op(t,"&","&amp;");return e=C33.op(e,"<","&lt;"),e=C33.op(e,">","&gt;"),C33.op(e,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),intlSegmenter=(C33.fi=function(t){return t.replace(ESCAPE_REGEX,"\\$&")},C33.cp=function(t,e){let s=0;for(const i of t)i===e&&++s;return s},C33.up=function(t,e,s=!1){if(!e)return[];s||(t=t.toLowerCase(),e=e.toLowerCase());let i=e.length,r=0,n,h=[];for(;-1<(n=t.indexOf(e,r));)h.push(n),r=n+i;return h},C33.op=function(t,e,s){return t.replaceAll(e,()=>s)},C33.fp=function(t,e,s){return t.replace(new RegExp(C33.fi(e),"gi"),()=>s)},C33.pp=function(t,e){"string"==typeof e?t.textContent=e:e.mp()?t.textContent=e.toString():(t.innerHTML=e.Cp(),e instanceof C33.Br&&e.gp(t))},C33.Sp=function(t,e){return t instanceof C33.HtmlString||t instanceof C33.Br?t.equals(e):e instanceof C33.HtmlString||e instanceof C33.Br?e.equals(t):t===e},C33.yp=function(s,...i){let r=s;for(let t=0,e=i.length;t<e;++t){const n=`{${t}}`;if(!s.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);r=r.replace(n,i[t].toString())}return r},C33.Tp=function(s,...i){let r=s,n=-1,h=-1;for(let t=0,e=i.length;t<e;++t){const o=`{${t}}`;s.includes(o)?(h=t,r=r.replace(o,i[t].toString())):-1===n&&(n=t)}if(0<=n&&0<=h&&n<h)throw new Error(`missing placeholder '${n}' in string substitution`);return r},C33._p=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},C33.Ep=function(t,e){return e<t?1:t<e?-1:0},C33.Ap=function(t,e){let s=t.toLowerCase(),i=e.toLowerCase();return i<s?1:s<i?-1:0},new self.Intl.Segmenter),KILOBYTE=(C33.Ip=function(t){const e=[];for(const s of intlSegmenter.segment(t))e.push(s.segment);return e},C33.wp=function*(t){for(const e of intlSegmenter.segment(t))yield e.segment},C33.Rp=function(t){let e=0;for(const s of intlSegmenter.segment(t))++e;return e},1024),MEGABYTE=1024*KILOBYTE,GIGABYTE=1024*MEGABYTE,TERABYTE=1024*GIGABYTE,DEFAULT_FORMATTIME_OPTS={Mp:(C33.bp=function(e,t){let s="common."+(t?"dataRates":"dataSizes")+".",i=self.langSub;if(e<KILOBYTE)return i(s+"bytes",e);if(e<MEGABYTE){let t=e/KILOBYTE;return t=t<10?Math.round(10*t)/10:Math.round(t),i(s+"kilobytes",t)}if(e<GIGABYTE){let t=e/MEGABYTE;return t=t<10?Math.round(10*t)/10:Math.round(t),i(s+"megabytes",t)}if(e<TERABYTE){let t=e/GIGABYTE;return t=t<10?Math.round(10*t)/10:Math.round(t),i(s+"gigabytes",t)}{let t=e/TERABYTE;return t=t<10?Math.round(10*t)/10:Math.round(t),i(s+"terabytes",t)}},!1),vp:!0,xp:!0,Gp:!0,Pp:!0};C33.Op=function(t,e){e=Object.assign({},DEFAULT_FORMATTIME_OPTS,e),C33.Lang.PushContext("common.time");const s=[],i=self.lang,r=self.langPluralSub;if(e.vp){const h=Math.floor(t/86400);0<h&&(t-=24*h*3600,s.push(r(".days",null,h)))}if(e.xp){const o=Math.floor(t/3600);(0<o||s.length)&&(t-=3600*o,s.push(r(".hours",null,o)))}if(e.Gp){const a=Math.floor(t/60);(0<a||s.length||!e.Pp)&&(t-=60*a,s.push(r(".minutes",null,a)))}if(e.Pp){const l=Math.floor(t%60);s.push(r(".seconds",null,l))}const n=(e.Mp?i(".approx-prefix"):"")+s.join(i(".separator"));return C33.Lang.PopContext(),n},C33.Dp=function(t,e){let s=t<0?"-":"",i=(t=Math.abs(t)).toString(),r=e-i.length;for(let t=0;t<r;++t)s+="0";return s+i},C33.Lp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},C33.Np=function(t,e){let s=t.split(".").map(t=>t.trim()),i=e.split(".").map(t=>t.trim());C33.Xh(s,4,"0"),C33.Xh(i,4,"0"),s=s.map(t=>parseInt(t,10)),i=i.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const r=s[t]-i[t];if(0!=r)return r<0?-1:1}return 0},C33.Fp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.floor(16*Math.random()),s="x"===t?e:3&e|8;return s.toString(16)})},C33.kp=function(s,i){if(s.length!==i.length)throw new Error("strings must be same length");let r=0;for(let t=0,e=s.length;t<e;++t)s.charAt(t)!==i.charAt(t)&&++r;return r},C33.Bp=function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;let s,i,r,n,h,o;for(e.length<t.length&&(s=t,t=e,e=s),o=Array(t.length+1),i=0;i<=t.length;i++)o[i]=i;for(i=1;i<=e.length;i++){for(n=i,r=1;r<=t.length;r++)h=e[i-1]===t[r-1]?o[r-1]:Math.min(o[r-1]+1,Math.min(n+1,o[r]+1)),o[r-1]=n,n=h;o[t.length]=n}return o[t.length]}}{let bbToHtmlReplacerFunc2=function(t,s,i){const r=BB_CODE_MAP.get(i);if(!r)return"class"===i?s?"</span>":`<span class="bbclass${classIndex++}">`:t;if("string"==typeof r){if("a"===r&&0===linkActions.length||"abbr"===r&&0===tipList.length)return t;if("a"!==r||s){if("abbr"!==r||s)return"<"+s+r+">";{const n=parseInt(i.substring(3),10)-1;if(n<0||n>=tipList.length)throw new Error("invalid bbcode tip substitution");let t=tipList[n],e="";if("string"==typeof t?e=t:"function"==typeof t&&(e=t()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${C33.op(e,'"',"&quot;")}">`}}{const e=parseInt(i.substring(1),10)-1;if(e<0||e>=linkActions.length)throw new Error("invalid bbcode link substitution");const h=linkActions[e];if("string"==typeof h)return`<a href="${linkActions[e]}">`;if("function"==typeof h)return`<a class="bblink${e}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(r)){let t=r[0],e=r[1];return s?"</"+t+">":`<${t} class="${e}">`}},C33=(bbToHtmlReplacerFunc=bbToHtmlReplacerFunc2,self.Fe),assert=self.assert,BB_CODE_MAP=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),SELF_CLOSING_TAGS=new Set(["icon"]),BBREGEX=/\[(\/?)([a-zA-Z0-9]+)\]/g,CUSTOM_BBREGEX=/\[(\/?)([^\[\n]*?)\]/g,linkActions=null,tipList=null,classIndex=0,LINEBREAK_REGEX=/\n/g;C33.Br=class{constructor(t,e){if(this.$p=e&&e.Wp?t:C33.np(t),this.Up="",this.Vp=!1,this.Hp=[],this.jp=[],e){if(this.Vp=!!e.convertLineBreaks,e.links){if(9<e.links.length)throw new Error("too many links");this.Hp=e.links}if(e.tips){if(9<e.tips.length)throw new Error("too many tips");this.jp=e.tips}}this.Xp=this.$p.includes("["),this.Yp=this.Vp&&this.$p.includes("\n"),this.qp=!this.Xp&&!this.Yp&&!this.$p.includes("&"),this.Kp=!1,this.zp=[]}toString(){return this.$p}valueOf(){return this.$p}mp(){return this.qp}Jp(){return this.Xp?this.$p.replace(BBREGEX,""):this.$p}Cp(){if(this.qp)return this.$p;if(!this.Up&&this.$p){let t=this.$p;this.Xp&&(classIndex=0,linkActions=this.Hp,tipList=this.jp,t=t.replace(BBREGEX,bbToHtmlReplacerFunc2),linkActions=null,tipList=null),this.Yp&&(t=t.replace(LINEBREAK_REGEX,"<br>")),this.Up=t}return this.Up}gp(s){if(this.Hp.length)for(let t=0,e=this.Hp.length;t<e;++t){const i=this.Hp[t];if("function"==typeof i){const r=s.querySelector(".bblink"+t);if(!r)throw new Error("unable to attach BBString link handler");r.onclick=i}}}equals(t){return t instanceof C33.HtmlString?this.Cp()===t.Cp():t instanceof C33.Br?this.$p===t.$p:this.$p===t}Zp(){if(!this.Kp){let i=[],t=this.$p,r=[],e=CUSTOM_BBREGEX.lastIndex=0,s;for(;null!==(s=CUSTOM_BBREGEX.exec(t));){const n=s.index;if(!(0<n&&"\\"===t.charAt(n-1))){const h=s[0],o=s[1],a=s[2],l=t.substring(e,n);if(e=n+h.length,l&&i.push({text:l,Qp:r.slice(0)}),a)if(o){const c=a.toLowerCase();for(let t=r.length-1;0<=t;--t)if(r[t].tag===c){r.splice(t,1);break}}else{let t=a,e=null,s=a.indexOf("=");if(-1!==s?(t=a.substring(0,s).toLowerCase(),e=a.substring(s+1)):t=t.toLowerCase(),SELF_CLOSING_TAGS.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);i.push({icon:e,Qp:r.slice(0)})}else r.push({tag:t,param:e})}}}e<t.length&&i.push({text:t.substring(e),Qp:r.slice(0)});for(const u of i)u.text&&(u.text=this.tm(u.text));this.zp=i.map(t=>t.icon?C33.Cn(C33.im,{icon:t.icon,Qp:t.Qp}):C33.Cn(C33.rm,{nm:C33.Ip(t.text),Qp:t.Qp})),this.Kp=!0}return this.zp}tm(t){return t=C33.op(t,"\\[","["),C33.op(t,"\\\\","\\")}static hm(t){return C33.Cn(C33.Br,t,{Wp:!0}).Jp()}static om(t){return t.replace(CUSTOM_BBREGEX,"")}}}{let IsWordBreakWhiteSpace2=function(t){return""!==t&&""!==t&&C33.q3(t)},IsOpeningCJKPunctiationChar2=function(t){return CJK_OPEN_PUNCTUATION.has(t)},IsContinuingCJKPunctuationChar2=function(t){return C33.tp(t)&&!IsOpeningCJKPunctiationChar2(t)},WordBreakTrimEnd2=function(t){for(;0<t.length&&IsWordBreakWhiteSpace2(t.at(-1));)t.pop()},IsNewline2=function(t){return"\n"===t||"\r\n"===t};IsWordBreakWhiteSpace=IsWordBreakWhiteSpace2,IsOpeningCJKPunctiationChar=IsOpeningCJKPunctiationChar2,IsContinuingCJKPunctuationChar=IsContinuingCJKPunctuationChar2,WordBreakTrimEnd=WordBreakTrimEnd2,IsNewline=IsNewline2;const C33=self.Fe,CJK_OPEN_PUNCTUATION=new Set("");C33.am=class{constructor(){this.lm=[],this.um=null}fm(){return this.lm}pm(){return this.lm.length}Cm(t){this.um=t}gm(t,e){let s=0,i=0,r=0,n=0,h=0;for(const o of t){if(-1===o.Sm()){const a=e(o);o.ym(a.height),o.Tm(a.fontBoundingBoxAscent||0),o._m(a.fontBoundingBoxDescent||0),o.Em(a.Am||0),o.Im()?o.wm(a.width):o.Rm()&&o.Mm(this.um)}s+=o.Sm(),i=Math.max(i,o.vm()),r=Math.max(r,o.xm()),n=Math.max(n,o.Gm()),h=Math.max(h,o.Pm())}return{width:s,height:i,fontBoundingBoxAscent:r,fontBoundingBoxDescent:n,Am:h}}Om(t,e,s,i,r,n){this.lm.push(C33.Cn(C33.am.Dm,{Lm:t,width:e,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:r,Am:n}))}am(e,n,h,s,o){if("string"==typeof e&&(e=[C33.Cn(C33.rm,{nm:C33.Ip(e)})]),C33.Vh(this.lm),!(!e.length||1===e.length&&e[0].Im()&&e[0].du()||h<2)){if(1===e.length){const a=e[0];if(a.Im()&&a.Nm()<=100&&!a.Fm()){let{width:t,height:e,fontBoundingBoxAscent:s,fontBoundingBoxDescent:i,Am:r}=n(a);if(t+=o,a.wm(t),a.ym(e),a.Tm(s||0),a._m(i||0),a.Em(r||0),t<=h)return void this.Om([a],t,e,s,i,r)}}let t;t="word"===s?this.km(e):"cjk"===s?this.Bm(e):this.$m(e),this.Wm(t,n,h,o)}}km(t){let e=[],s=[],i=!1;for(const r of t){const n=r.Um();if(r.Rm())0<s.length&&e.push(s),e.push([r]),s=[];else for(const h of r.Vm())if(IsNewline2(h))0<s.length&&e.push(s),e.push([C33.Cn(C33.rm,{nm:["\n"],Qp:n})]),s=[];else if(0===s.length)s.push(C33.Cn(C33.rm,{nm:[h],Qp:n})),i=IsWordBreakWhiteSpace2(h);else{const o=IsWordBreakWhiteSpace2(h);if(o===i){const a=s.at(-1);a.Um()===n?a.Hm(h):s.push(C33.Cn(C33.rm,{nm:[h],Qp:n}))}else e.push(s),s=[C33.Cn(C33.rm,{nm:[h],Qp:n})],i=o}}return 0<s.length&&e.push(s),e}Bm(t){let e=[],s=[],i=!1;for(const r of t){const n=r.Um();if(r.Rm())0<s.length&&e.push(s),e.push([r]),s=[];else for(const h of r.Vm())if(IsNewline2(h))0<s.length&&e.push(s),e.push([C33.Cn(C33.rm,{nm:["\n"],Qp:n})]),s=[];else{if(0===s.length)s.push(C33.Cn(C33.rm,{nm:[h],Qp:n}));else if(i||IsContinuingCJKPunctuationChar2(h)){const o=s.at(-1);o.Um()===n?o.Hm(h):s.push(C33.Cn(C33.rm,{nm:[h],Qp:n}))}else e.push(s),s=[C33.Cn(C33.rm,{nm:[h],Qp:n})];i=IsOpeningCJKPunctiationChar2(h)}}return 0<s.length&&e.push(s),e}$m(t){const e=[];for(const s of t)if(s.Im()){const i=s.Vm();C33.sn(e,i.map(t=>[C33.Cn(C33.rm,{nm:[t],Qp:s.Um()})]))}else e.push([s]);return e}jm(t){return t.map(t=>t.Xm())}Ym(e,s){let t=e.length?e.at(-1):null,i=0;t&&t.Im()&&s[0].Im()&&s[0].Um()===t.Um()&&(t.qm(s[0].Vm()),i=1);for(let t=s.length;i<t;++i){const r=s[i];e.push(r.Xm())}}Wm(t,e,s,i){let r=[],n=0,h=0,o=0,a=0,l=0;for(const c of t)if(1===c.length&&c[0].Im()&&1===c[0].Nm()&&IsNewline2(c[0].Vm()[0])){if(0===h){const u=C33.Cn(C33.rm,{nm:[" "],Qp:c[0].Um()}),f=e(u);h=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.Am||0}this.Om(r,n,h,o,a,l),r=[],n=0,h=0,o=0,a=0,l=0}else{const d=this.jm(r),p=(this.Ym(d,c),this.gm(d,e)),m=p.width;if(s<=m)if(0<r.length&&this.Om(r,n,h,o,a,l),r=[],c[0].Im()&&C33.J3(c[0].Vm()))n=0,h=0,o=0,a=0,l=0;else{this.Ym(r,c);const C=this.gm(r,e);n=C.width,h=C.height,o=C.fontBoundingBoxAscent,a=C.fontBoundingBoxDescent,l=C.Am}else r=d,n=m,h=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.Am}0<r.length&&this.Om(r,n,h,o,a,l),this.Km(e,i)}Km(e,s){for(const i of this.lm){const r=i.zm();if(r.length){let t=r.at(-1);if(t.Im()){const n=t.Vm(),h=n.slice(0);if(WordBreakTrimEnd2(h),0===h.length)i.Jm(-t.Sm()),r.pop();else if(h.length<n.length){t.Zm(h);const o=e(t).width,a=t.Sm()-o;t.wm(o),i.Jm(-a)}0!==s&&0<r.length&&((t=r.at(-1)).Jm(s),i.Jm(s))}}}}fu(){C33.Vh(this.lm)}Qm(){return this.lm.reduce((t,e)=>Math.max(t,e.Sm()),0)}tC(){return this.lm.reduce((t,e)=>t+e.vm(),0)}}}{const C33=self.Fe;C33.am.Dm=class{constructor(t){this.zp=t.Lm||[],this.eC=t.width||-1,this.sC=t.height||-1,this.iC=t.fontBoundingBoxAscent||-1,this.rC=t.fontBoundingBoxDescent||-1,this.nC=t.Am||-1,this.hC=0,this.oC=0}Lm(){return this.zp.values()}*aC(){const e=this.zp;for(let t=e.length-1;0<=t;--t)yield e[t]}zm(){return this.zp}Jm(t){this.eC+=t}Sm(){return this.eC}vm(){return this.sC}lC(){return this.iC}Gm(){return this.rC}Pm(){return this.nC}cC(t){this.hC=t}uC(){return this.hC}fC(t){this.oC=t}dC(){return this.oC}}}{const C33=self.Fe;C33.pC=class{constructor(t){this.mC=t.Qp||[],this.eC=t.width||-1,this.sC=t.height||-1,this.iC=t.fontBoundingBoxAscent||-1,this.rC=t.fontBoundingBoxDescent||-1,this.nC=t.Am||-1,this.hC=0,this.oC=0}Im(){return!1}Rm(){return!1}Um(){return this.mC}CC(e){const s=this.mC;for(let t=s.length-1;0<=t;--t){const i=s[t];if(i.tag===e)return i}return null}gC(t){return!!this.CC(t)}SC(){const t=new Map;for(const e of this.mC)t.set(e.tag,e.param);return t}Jm(t){this.eC+=t}wm(t){this.eC=t}Sm(){return this.eC}ym(t){this.sC=t}vm(){return this.sC}Tm(t){this.iC=t}xm(){return this.iC}_m(t){this.rC=t}Gm(){return this.rC}Em(t){this.nC=t}Pm(){return this.nC}cC(t){this.hC=t}uC(){return this.hC}fC(t){this.oC=t}dC(){return this.oC}}}{const C33=self.Fe;C33.rm=class extends C33.pC{constructor(t){super(t),this.yC=t.nm}Im(){return!0}qm(t){C33.sn(this.yC,t),this.eC=-1,this.sC=-1,this.iC=-1,this.rC=-1,this.nC=-1}Hm(t){this.yC.push(t)}Xm(){return C33.Cn(C33.rm,{nm:this.yC.slice(0),Qp:this.mC,width:this.eC,height:this.sC,fontBoundingBoxAscent:this.iC,fontBoundingBoxDescent:this.rC,Am:this.nC})}Vm(){return this.yC}Zm(t){this.yC=t}Nm(){return this.yC.length}du(){return 0===this.yC.length}Fm(){return this.yC.includes("\n")}}}{const C33=self.Fe;C33.im=class extends C33.pC{constructor(t){super(t),this.TC=t.icon}Rm(){return!0}_C(){return this.TC}Xm(){return C33.Cn(C33.im,{icon:this.TC,Qp:this.mC,width:this.eC,height:this.sC,fontBoundingBoxAscent:this.iC,fontBoundingBoxDescent:this.rC,Am:this.nC})}EC(t){if(!t)return null;let e=Number(this.TC);return String(e)===this.TC?(e=Math.floor(e),t.AC(e)):t.IC(this.TC)}Mm(t){const e=this.EC(t);this.eC=e?this.sC*e.Sm()/e.vm():0}wC(t){const e=this.EC(t);return e?e.wC():null}Nm(){return 1}}}{const C33=self.Fe;C33.RC=class{constructor(t){this.MC=new Map,this.bC=t.vC,this.xC=t.GC}gn(){for(const t of this.MC.values())t.gn();this.MC.clear()}PC(t){let e=this.MC.get(t);if(!e){const s=this.bC(t);e=C33.Cn(C33.OC,this,{source:t,DC:s}),this.MC.set(t,e)}return e}LC(t){return this.MC.has(t)}NC(t){const e=this.MC.get(t);e&&e.gn(),this.MC.delete(t)}async FC(t){return this.xC(t)}}}{const C33=self.Fe;C33.OC=class{constructor(t,e){this.kC=t,this.BC=e.source,this.$C=[],this.WC=new Map,this.UC=!1,this.VC=!1,this.HC=null;const s=e.DC.jC;for(let t=0,e=s.length;t<e;++t){const i=s[t],r=C33.Cn(C33.XC,this,{index:t,tag:i.tag,source:i.source,width:i.width,height:i.height});this.$C.push(r),i.tag&&this.WC.set(i.tag.toLowerCase(),r)}}gn(){for(const t of this.$C)t.gn();C33.Vh(this.$C),this.WC.clear(),this.kC=null,this.BC=null}YC(){return this.UC}qC(){return this.VC}KC(){return this.HC||(this.HC=this.zC()),this.HC}async zC(){if(!this.UC){this.UC=!0,this.VC=!0;const t=await this.kC.FC(this.BC);if(this.kC){const s=t.jC;for(let t=0,e=Math.min(s.length,this.$C.length);t<e;++t){const i=s[t].JC;this.$C[t].ZC(i)}this.VC=!1}}}AC(t){return(t=Math.floor(t))<0||t>=this.$C.length?null:this.$C[t]}IC(t){return this.WC.get(t.toLowerCase())||null}}}{const C33=self.Fe;C33.XC=class{constructor(t,e){this.QC=t,this.BC=e.source||null,this.t1=e.index,this.e1=e.tag,this.eC=e.width,this.sC=e.height,this.s1=null}gn(){this.eC=0,this.sC=0,this.QC=null}i1(){return this.BC}Sm(){return this.eC}vm(){return this.sC}ZC(t){this.s1=t}wC(){return this.s1}}}{let PlaneFromPoints2=function(t,e,s,i){const r=tempVec3c;vec32.$(tempVec3a,s,e),vec32.$(tempVec3b,t,e),vec32.Nt(r,tempVec3a,tempVec3b),vec32.normalize(r,r),i.set(r[0],r[1],r[2],vec32.Lt(t,r))},IsInFrontOfPlane2=function(t,e,s,i,r,n,h){const o=h.x,a=h.y,l=h.z,c=h.w,u=h.n1,f=h.h1,d=h.o1,p=1-u,m=1-f,C=1-d,g=o*t*u+o*i*p+a*e*f+a*r*m+l*s*d+l*n*C;if(c<=g)return!0;const S=o*i*u+o*t*p+a*r*f+a*e*m+l*n*d+l*s*C;return c<S},IsPointInFrontOfPlane2=function(t,e,s,i){const r=i.x,n=i.y,h=i.z,o=i.w,a=r*t+n*e+h*s;return o<=a};PlaneFromPoints=PlaneFromPoints2,IsInFrontOfPlane=IsInFrontOfPlane2,IsPointInFrontOfPlane=IsPointInFrontOfPlane2;const C33=self.Fe,glMatrix=self.ye,vec32=glMatrix.Me,vec42=glMatrix.ve,mat42=glMatrix.Ae,tempVec3a=vec32.create(),tempVec3b=vec32.create(),tempVec3c=vec32.create(),tempVec4=vec42.create(),tempMat4=mat42.create(),neartl=vec32.create(),neartr=vec32.create(),nearbl=vec32.create(),nearbr=vec32.create(),fartl=vec32.create(),fartr=vec32.create(),farbl=vec32.create(),farbr=vec32.create(),unitViewport=vec42.R(0,0,1,1);C33.l1={c1(t,e,s,i,r,n,h){let o=i[0]*t+i[4]*e+i[8]*s+i[12],a=i[1]*t+i[5]*e+i[9]*s+i[13],l=i[2]*t+i[6]*e+i[10]*s+i[14],c=i[3]*t+i[7]*e+i[11]*s+i[15],u=r[0]*o+r[4]*a+r[8]*l+r[12]*c,f=r[1]*o+r[5]*a+r[9]*l+r[13]*c,d=r[2]*o+r[6]*a+r[10]*l+r[14]*c,p=r[3]*o+r[7]*a+r[11]*l+r[15]*c;return 0!=p&&(f*=p=1/p,d*=p,h[0]=(.5*(u*=p)+.5)*n[2]+n[0],h[1]=(.5*f+.5)*n[3]+n[1],h[2]=.5*(1+d),!0)},u1(t,e,s,i,r,n,h){const o=tempMat4,a=tempVec4;return mat42.multiply(o,r,i),null!==mat42.G(o,o)&&(a[0]=(t-n[0])/n[2]*2-1,a[1]=(e-n[1])/n[3]*2-1,a[2]=2*s-1,a[3]=1,vec42.Wt(a,a,o),0!==a[3])&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0)},f1(t,e,s,i,r,n,h){const o=tempVec3a,a=tempVec3b;if(!C33.l1.u1(t,e,0,i,r,n,o))return!1;if(!C33.l1.u1(t,e,1,i,r,n,a))return!1;let l=tempVec3b,c=(vec32.$(l,a,o),tempVec3c),u=(vec32.set(c,0,0,1),-s),f=vec32.Lt(c,l),d=0;if(0===f){const p=vec32.Lt(c,o)+u;if(0!==p)return!1}else if((d=-(vec32.Lt(o,c)+u)/f)<0)return!1;return vec32.xt(h,o,l,d),!0}};class Plane{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.n1=NaN,this.h1=NaN,this.o1=NaN}set(t,e,s,i){this.x=t,this.y=e,this.z=s,this.w=i,this.n1=0<t?1:0,this.h1=0<e?1:0,this.o1=0<s?1:0}}C33.l1.d1=class{constructor(){this.m1=new Plane,this.C1=new Plane,this.g1=new Plane,this.S1=new Plane,this.T1=new Plane,this._1=new Plane}E1(t,e){const s=unitViewport;C33.l1.u1(0,1,0,t,e,s,neartl),C33.l1.u1(1,1,0,t,e,s,neartr),C33.l1.u1(0,0,0,t,e,s,nearbl),C33.l1.u1(1,0,0,t,e,s,nearbr),C33.l1.u1(0,1,1,t,e,s,fartl),C33.l1.u1(1,1,1,t,e,s,fartr),C33.l1.u1(0,0,1,t,e,s,farbl),C33.l1.u1(1,0,1,t,e,s,farbr),PlaneFromPoints2(nearbl,neartl,fartl,this.m1),PlaneFromPoints2(neartl,neartr,fartr,this.C1),PlaneFromPoints2(neartr,nearbr,farbr,this.g1),PlaneFromPoints2(nearbr,nearbl,farbl,this.S1),PlaneFromPoints2(farbl,fartl,fartr,this._1),PlaneFromPoints2(nearbr,neartr,neartl,this.T1)}A1(t,e,s,i,r,n){return IsInFrontOfPlane2(t,e,s,i,r,n,this.m1)&&IsInFrontOfPlane2(t,e,s,i,r,n,this.C1)&&IsInFrontOfPlane2(t,e,s,i,r,n,this.g1)&&IsInFrontOfPlane2(t,e,s,i,r,n,this.S1)&&IsInFrontOfPlane2(t,e,s,i,r,n,this.T1)&&IsInFrontOfPlane2(t,e,s,i,r,n,this._1)}I1(t,e,s){return!IsPointInFrontOfPlane2(t,e,s,this.T1)}}}{const C33=self.Fe,glMatrix=self.ye,vec32=glMatrix.Me,vec42=glMatrix.ve,mat42=glMatrix.Ae,tempMat4=mat42.create(),tmpVec3a=vec32.R(0,0,0),tmpVec3b=vec32.R(0,0,0),tmpVec3c=vec32.R(0,0,0),defaultUpVector=vec32.R(0,1,0),tmpVec4=vec42.R(0,0,0,0),tmpQuad=new C33.ac,tmpRect=new C33.Rect,defaultTexCoordsQuad=new C33.ac(0,0,1,0,1,1,0,1),DEFAULT_RENDERERBASE_OPTS={w1:1,R1:1e4},matWebGLtoWebGPU=mat42.R(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);C33.l1.M1=class{constructor(t){t=Object.assign({},DEFAULT_RENDERERBASE_OPTS,t),this.eC=0,this.sC=0,this.b1=C33.In(45),this.v1=Math.tan(this.b1/2),this.G1=mat42.create(),this.P1=mat42.create(),this.O1=!1,this.D1=t.w1,this.L1=t.R1,this.N1=[],this.F1=new Map,this.B1=null,this.W1=null,this.U1=null,this.V1=null,this.H1=null,this.j1=null,this.X1=null,this.Y1=null,this.q1=null,this.K1=null,this.z1=null,this.J1=null,this.Z1=new Map,this.Q1=null,this.tg=[],this.eg=new Map,this.sg=0,this.ig=0,this.rg=1,this.ng=[this.rg],this.hg=1,this.og=[this.hg],this.ag=.5,this.lg=[this.ag],this.ug=0,this.fg=!0,this.dg=!1}pg(t){let e=0,s=t.length,i=0;for(;e<s;)t[e++]=i,t[e++]=i+1,t[e++]=i+2,t[e++]=i,t[e++]=i+2,t[e++]=i+3,i+=4}mg(){this.sg=0,this.ig=0,this.B1=null,this.W1=null,this.U1=null,this.V1=null,this.H1=null,this.j1=null,this.X1=null,this.Y1=null,this.q1=null,this.K1=null,this.z1=null,this.J1=null,this.Cg()}gg(){this.mg(),this.Q1=null}Sg(){for(const t of this.N1)t.gn();this.mg()}Sm(){return this.eC}vm(){return this.sC}yg(t){return this.Tg()?100:t/(2*this._g())}Eg(t){if(this.Tg()){const e=t/(2*this._g());return e/this.yg(t)}return 1}Ag(t){this.D1=t}Ig(){return this.D1}wg(t){this.L1=t}Rg(){return this.L1}Mg(t){this.b1=t,this.v1=Math.tan(this.b1/2)}bg(){return this.b1}_g(){return this.v1}vg(){this.O1=!1}xg(){this.O1=!0}Tg(){return!this.O1}Gg(){return this.O1}Pg(t,e,s=.5,i=.5){const r=this.Ig(),n=this.Rg(),h=this.bg();if(.5===s&&.5===i)this.Og()?mat42.Et(t,h,e,r,n):mat42.perspective(t,h,e,r,n);else{const o=2*(s=1-s)-2,a=2*s,l=2*i-2,c=2*i,u=this._g()*r,f=u*e;mat42.Tt(t,o*f,a*f,l*u,c*u,r,n),this.Og()&&mat42.mul(t,matWebGLtoWebGPU,t)}}Dg(t,e,s,i=1){const r=self.devicePixelRatio,n=2*this.yg(s)*r*this._g()/s,h=e*n/(2*r*i),o=s*n/(2*r*i),a=-h,l=h,c=-o,u=o;this.Og()?mat42.Rt(t,a,l,c,u,this.Ig(),this.Rg()):mat42.ortho(t,a,l,c,u,this.Ig(),this.Rg())}Lg(t,e,s,i,r,n=1){let h=1;this.Tg()&&(h=200*this._g()/r);const o=tmpVec3c,a=(vec32.set(o,h,-h,1),tmpVec3a),l=tmpVec3b;vec32.multiply(a,e,o),vec32.multiply(l,s,o),mat42.Mt(t,a,l,i||defaultUpVector),o[2]=n,mat42.scale(t,t,o)}Ng(t,e,s,i,r,n,h,o){return vec32.set(tmpVec3a,t,e,s),vec32.set(tmpVec3b,i,r,n),this.Lg(tempMat4,tmpVec3a,tmpVec3b,defaultUpVector,h,o),tempMat4}Fg(t){this.N1.push(t),this.F1.set(t.lf(),t)}kg(t){const e=this.N1.indexOf(t);-1!==e&&this.N1.splice(e,1),this.F1.delete(t.lf())}Cg(){C33.Vh(this.N1),this.F1.clear()}Bg(t){return this.F1.get(t)||null}$g(){return this.B1}Wg(){this.Ug(this.B1)}Vg(){return this.W1}Hg(){this.Ug(this.W1)}jg(){this.Ug(this.U1)}Xg(){this.Ug(this.V1)}Yg(){this.Ug(this.H1)}qg(){this.Ug(this.j1)}Kg(){this.Ug(this.X1)}zg(){this.Ug(this.Y1)}Jg(){this.Ug(this.q1)}Zg(){this.Ug(this.K1)}Qg(){this.Ug(this.z1)}t2(){this.Ug(this.J1)}e2(t){this.Q1=t}s2(){return this.Q1}i2(t,e,s,i){let r=C33.l1.h2.n2(t,e,s,i),n=this.Z1.get(r);return n||(n=C33.Cn(C33.l1.h2,this,t,e,s,i),this.Z1.set(r,n)),n.o2(),n}l2(t){t.c2(),0===t.u2()&&(this.Q1===t&&(this.Q1=null),this.Z1.delete(t.f2()),t.gn())}d2(t){C33.Vh(this.tg),this.eg.clear();let e=0;for(const s of t){const i=s[0],r=s[1],n=s[2];this.tg.push([r,n]),this.eg.set(i,{number:e,m2:r,C2:n}),e++}}g2(t){return this.tg[t]}S2(t){return this.g2(t)[0]}T2(t){return this.g2(t)[1]}_2(t){const e=this.eg.get(t);if(void 0===e)throw new Error("invalid blend name");return e}E2(t){const e=this.eg.get(t);if(void 0===e)throw new Error("invalid blend name");return e.number}A2(t){this.sg=t}I2(){return this.sg}w2(t){this.ig=t,this.Q1=null}R2(){return this.ig}Dm(t,e,s,i){const r=C33.bn(t,e,s,i),n=Math.sin(r),h=Math.cos(r),o=.5*this.rg,a=n*o,l=h*o,c=this.hg;2===c?this.M2(t,e,0,s,i,0,a,l):1===c?this.b2(t,e,0,s,i,0,a,l):this.v2(t,e,0,s,i,0,a,l)}G2(t,e,s,i,r,n){const h=C33.bn(t,e,i,r),o=Math.sin(h),a=Math.cos(h),l=.5*this.rg,c=o*l,u=a*l,f=this.hg;2===f?this.M2(t,e,s,i,r,n,c,u):1===f?this.b2(t,e,s,i,r,n,c,u):this.v2(t,e,s,i,r,n,c,u)}M2(t,e,s,i,r,n,h,o){const a=this.ag,l=t+a-o,c=e+a-h,u=i+a+o,f=r+a+h,d=2*o,p=2*h,m=l+h,C=c-o,g=l-h+d,S=c+o+p,y=u+h,T=f-o,_=u-h-d,E=f+o-p;this.P2(m,C,s,y,T,n,_,E,n,g,S,s,defaultTexCoordsQuad)}b2(t,e,s,i,r,n,h,o){const a=this.ag,l=t+a-o,c=e+a-h,u=i+a+o,f=r+a+h,d=l+h,p=c-o,m=l-h,C=c+o,g=u+h,S=f-o,y=u-h,T=f+o;this.P2(d,p,s,g,S,n,y,T,n,m,C,s,defaultTexCoordsQuad)}v2(t,e,s,i,r,n,h,o){const a=this.ag,l=t+a,c=e+a,u=i+a,f=r+a,d=l+h,p=c-o,m=l-h,C=c+o,g=u+h,S=f-o,y=u-h,T=f+o;this.P2(d,p,s,g,S,n,y,T,n,m,C,s,defaultTexCoordsQuad)}O2(t,e,s,i,r,n){const h=C33.bn(t,e,s,i),o=Math.sin(h),a=Math.cos(h),l=.5*this.rg,c=o*l,u=a*l,f=this.hg;2===f?this.D2(t,e,s,i,c,u,r,n):1===f?this.L2(t,e,s,i,c,u,r,n):this.N2(t,e,s,i,c,u,r,n)}D2(t,e,s,i,r,n,h,o){const a=this.ag,l=t+a-n,c=e+a-r,u=s+a+n,f=i+a+r,d=2*n,p=2*r,m=l+r,C=c-n,g=l-r+d,S=c+n+p,y=u+r,T=f-n,_=u-r-d,E=f+n-p;tmpQuad.set(m,C,y,T,_,E,g,S),tmpRect.set(h,0,o,0),this.F2(tmpQuad,tmpRect)}L2(t,e,s,i,r,n,h,o){const a=this.ag,l=t+a-n,c=e+a-r,u=s+a+n,f=i+a+r,d=l+r,p=c-n,m=l-r,C=c+n,g=u+r,S=f-n,y=u-r,T=f+n;tmpQuad.set(d,p,g,S,y,T,m,C),tmpRect.set(h,0,o,0),this.F2(tmpQuad,tmpRect)}N2(t,e,s,i,r,n,h,o){const a=this.ag,l=t+a,c=e+a,u=s+a,f=i+a,d=l+r,p=c-n,m=l-r,C=c+n,g=u+r,S=f-n,y=u-r,T=f+n;tmpQuad.set(d,p,g,S,y,T,m,C),tmpRect.set(h,0,o,0),this.F2(tmpQuad,tmpRect)}B2(t,e,s,i){const r=.5*this.rg,n=this.hg;2===n?this.W2(t,e,s,i,r):1===n?this.U2(t,e,s,i,r):this.V2(t,e,s,i,r)}W2(t,e,s,i,r){this.M2(t,e,0,s,e,0,0,r),this.M2(s,e,0,s,i,0,r,0),this.M2(s,i,0,t,i,0,0,-r),this.M2(t,i,0,t,e,0,-r,0)}U2(t,e,s,i,r){this.b2(t,e,0,s,e,0,0,r),this.b2(s,e,0,s,i,0,r,0),this.b2(s,i,0,t,i,0,0,-r),this.b2(t,i,0,t,e,0,-r,0)}V2(t,e,s,i,r){this.v2(t,e,0,s,e,0,0,r),this.v2(s,e,0,s,i,0,r,0),this.v2(s,i,0,t,i,0,0,-r),this.v2(t,i,0,t,e,0,-r,0)}H2(t){this.B2(t.Gl(),t.Pl(),t.Ol(),t.Dl())}j2(t){const e=C33.bn(t.hh(),t.oh(),t.ah(),t.uh()),s=Math.sin(e),i=Math.cos(e),r=.5*this.rg,n=s*r,h=i*r,o=this.hg;2===o?this.X2(t,n,h):1===o?this.Y2(t,n,h):this.q2(t,n,h)}X2(t,e,s){this.M2(t.hh(),t.oh(),0,t.ah(),t.uh(),0,e,s),this.M2(t.ah(),t.uh(),0,t.fh(),t.ph(),0,s,-e),this.M2(t.fh(),t.ph(),0,t.mh(),t.Ch(),0,-e,-s),this.M2(t.mh(),t.Ch(),0,t.hh(),t.oh(),0,-s,e)}Y2(t,e,s){this.b2(t.hh(),t.oh(),0,t.ah(),t.uh(),0,e,s),this.b2(t.ah(),t.uh(),0,t.fh(),t.ph(),0,s,-e),this.b2(t.fh(),t.ph(),0,t.mh(),t.Ch(),0,-e,-s),this.b2(t.mh(),t.Ch(),0,t.hh(),t.oh(),0,-s,e)}q2(t,e,s){this.v2(t.hh(),t.oh(),0,t.ah(),t.uh(),0,e,s),this.v2(t.ah(),t.uh(),0,t.fh(),t.ph(),0,s,-e),this.v2(t.fh(),t.ph(),0,t.mh(),t.Ch(),0,-e,-s),this.v2(t.mh(),t.Ch(),0,t.hh(),t.oh(),0,-s,e)}K2(t){this.rg=t,this.ng[this.ng.length-1]=t}z2(){return this.rg}J2(t){if(100<=this.ng.length)throw new Error("pushed too many line widths - check push/pop pairs");this.ng.push(t),this.rg=t}Z2(){if(this.ng.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.ng.pop(),this.rg=this.ng.at(-1)}Q2(){this.hg=0,this.og[this.og.length-1]=0}tS(){this.hg=1,this.og[this.og.length-1]=0}eS(){this.hg=2,this.og[this.og.length-1]=0}sS(t){if("butt"===t)this.iS();else if("square"===t)this.rS();else{if("zag"!==t)throw new Error("invalid line cap");this.nS()}}iS(){if(100<=this.og.length)throw new Error("pushed too many line caps - check push/pop pairs");this.og.push(0),this.hg=0}rS(){if(100<=this.og.length)throw new Error("pushed too many line caps - check push/pop pairs");this.og.push(1),this.hg=1}nS(){if(100<=this.og.length)throw new Error("pushed too many line caps - check push/pop pairs");this.og.push(2),this.hg=2}hS(){if(this.og.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.og.pop(),this.hg=this.og.at(-1)}oS(t){this.ag=t,this.lg[this.lg.length-1]=t}aS(){return this.ag}lS(t){if(100<=this.lg.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.lg.push(t),this.ag=t}cS(){if(this.lg.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.lg.pop(),this.ag=this.lg.at(-1)}uS(e){const t=e.length/2;if(t<3)throw new Error("need at least 3 points");const s=t-2,i=s-1,r=e[0],n=e[1];for(let t=0;t<s;t+=2){const h=2*t,o=e[2+h],a=e[3+h],l=e[4+h],c=e[5+h];if(t===i)this.fS(r,n,o,a,l,c,l,c);else{const u=e[6+h],f=e[7+h];this.fS(r,n,o,a,l,c,u,f)}}}dS(){return 3}pS(){this.mS(!0),this.ug++}CS(){return this.ug}gS(){this.ug++}SS(t){this.fg=!!t}yS(){return this.fg}TS(t){this.dg=!!t}_S(){return this.dg}ES(){return!1}Og(){return!1}AS(){}IS(){}wS(){}RS(){return this.AS()+this.IS()+this.wS()}MS(){return C33.Cn(C33.l1.bS,this)}}}{const C33=self.Fe;C33.l1.vS=class{constructor(t,e){this.Tn=e.name,this.xS=t,this.GS=e.PS||0,this.OS=e.DS||0,this.LS=!!e.NS,this.FS=!!e.kS,this.BS=!!e.$S,this.WS=!!e.US,this.VS=!!e.HS,this.jS=!!e.XS,this.YS=!!e.qS,this.KS=!1,this.zS=this.LS||this.jS||0!==this.GS||0!==this.OS}gn(){this.xS=null}JS(){return this.xS}lf(){return this.Tn}ZS(){return 0!==this.GS||0!==this.OS}QS(){return this.GS}ey(){return this.OS}iy(){return this.LS}ny(){return this.FS}hy(){return this.BS}oy(){return this.WS}uy(){return this.VS}my(){return this.jS}Cy(){return this.YS}gy(){return this.KS}Sy(){return this.zS}yy(){return!1}}}{const C33=self.Fe;C33.l1.h2=class{constructor(t,e,s,i,r){this.xS=t,this.E3=0,this.Ty=null,this._y="",this.Ey=s,this.Ay=C33.Cn(C33.Ko),this.Ay.set(i),this.Iy=r,"string"==typeof e?this._y=e:(this.Ty=e,this._y=this.Ty.lf())}gn(){if(0<this.E3)throw new Error("releasing state group still in use");this.xS=null,this.Ty=null,this._y=""}wy(){const t=this.xS;t.Ug(this.Ty),t.Ry(this.Ey),t.My(this.Ay),t.w2(this.Iy),t.e2(this)}f2(){return C33.l1.h2.n2(this._y,this.Ey,this.Ay,this.Iy)}o2(){++this.E3}c2(){--this.E3}u2(){return this.E3}by(){this.Ty=null}vy(t){if(this.Ty=t.Bg(this._y),!this.Ty)throw new Error("failed to restore shader program")}static n2(t,e,s,i){const r="string"==typeof t?t:t.lf();return r+","+e+","+s.ma()+","+s.Ca()+","+s.ga()+","+s.Sa()+","+i}}}{let interpolateQuad2=function(t,e,s){const i=s.hh(),r=s.oh(),n=s.ah()-i,h=s.uh()-r,o=s.mh()-i,a=s.Ch()-r,l=n*t,c=h*t,u=o*e,f=a*e;return[i+l+u,r+c+f]};interpolateQuad=interpolateQuad2;const C33=self.Fe,tempQuadTex=C33.Cn(C33.ac);C33.l1.xy=class{constructor(t,e,s){this.Gy=t,this.Py=e,this.Oy=s,this.al=NaN,this.ll=NaN,this.Iy=NaN,this.Dy=NaN,this.Ly=NaN,this.al=0,this.ll=0,this.Iy=0,this.Dy=0,this.Ly=0}Ny(t,e,s,i){this.al=t,this.ll=e,this.Dy=s,this.Ly=i}Fy(){return this.al}ky(t){this.al!==t&&(this.al=t,this.Gy.By())}$y(){return this.ll}Wy(t){this.ll!==t&&(this.ll=t,this.Gy.By())}Uy(){return this.Iy}Vy(t){this.Iy!==t&&(this.Iy=Math.max(t,0),this.Gy.By())}Hy(){return this.Dy}jy(t){this.Dy=t}Xy(){return this.Ly}Yy(t){this.Ly=t}qy(t,e,s){[this.al,this.ll]=interpolateQuad2(t.al,t.ll,e),this.Iy=t.Iy,this.Dy=C33.Ft(s.Gl(),s.Ol(),t.Dy),this.Ly=C33.Ft(s.Pl(),s.Dl(),t.Ly)}Ky(t,e,s){[this.al,this.ll]=interpolateQuad2(t.al,t.ll,e),this.Iy=t.Iy,[this.Dy,this.Ly]=interpolateQuad2(t.Dy,t.Ly,s)}zy(){return{x:this.Fy(),y:this.$y(),z:this.Uy(),u:this.Hy(),v:this.Xy()}}Jy(t){this.ky(t.x),this.Wy(t.y),t.hasOwnProperty("z")&&this.Vy(t.z),this.jy(t.u),this.Yy(t.v)}Zy(){return this.Gy}Qy(){return this.Py}tT(){return this.Oy}},C33.l1.eT=class{constructor(s,t,e){if(s<2||t<2)throw new Error("invalid mesh size");this.sT=s,this.iT=t,this.rT=e||null,this.nT=[],this.hT=0,this.oT=0,this.aT=1,this.lT=1,this.cT=0,this.uT=!1;const i=s-1,r=t-1;for(let e=0;e<t;++e){const n=[];for(let t=0;t<s;++t){const h=C33.Cn(C33.l1.xy,this,t,e),o=t/i,a=e/r;h.Ny(o,a,o,a),n.push(h)}this.nT.push(n)}}gn(){C33.Vh(this.nT)}fT(){return this.sT}dT(){return this.iT}pT(){return this.rT}mT(){return this.nT}By(){this.uT=!0}CT(){if(this.uT){let t=1/0,e=1/0,s=-1/0,i=-1/0,r=0;for(const n of this.nT)for(const h of n){const o=h.Fy(),a=h.$y();t=Math.min(t,o),e=Math.min(e,a),s=Math.max(s,o),i=Math.max(i,a),r=Math.max(r,h.Uy())}this.hT=t,this.oT=e,this.aT=s,this.lT=i,this.cT=r,this.uT=!1}}gT(){return this.CT(),this.hT}ST(){return this.CT(),this.oT}yT(){return this.CT(),this.aT}TT(){return this.CT(),this.lT}_T(){return this.CT(),this.cT}ET(){return 0<this._T()}AT(t,e){return t=Math.floor(t),e=Math.floor(e),t<0||t>=this.sT||e<0||e>=this.iT?null:this.nT[e][t]}IT(t,s,i){const r=i instanceof C33.Rect;if(t.fT()!==this.fT()||t.dT()!==this.dT())throw new Error("source mesh wrong size");const n=t.nT,h=this.nT;for(let t=0,e=h.length;t<e;++t){const o=n[t],a=h[t];for(let t=0,e=a.length;t<e;++t){const l=o[t],c=a[t];r?c.qy(l,s,i):c.Ky(l,s,i)}}}wT(n){let h=this.nT,o=h[0];for(let t=1,e=h.length;t<e;++t){let s=h[t],i=o[0],r=s[0];for(let t=1,e=s.length;t<e;++t){const a=o[t],l=s[t];tempQuadTex.set(i.Hy(),i.Xy(),a.Hy(),a.Xy(),l.Hy(),l.Xy(),r.Hy(),r.Xy()),n.P2(i.Fy(),i.$y(),i.Uy(),a.Fy(),a.$y(),a.Uy(),l.Fy(),l.$y(),l.Uy(),r.Fy(),r.$y(),r.Uy(),tempQuadTex),i=a,r=l}o=s}}RT(o,a){a=a||((t,e,s)=>[t,e,s]);let t=this.nT,l=t[0];for(let n=1,h=t.length;n<h;++n){let s=t[n],i=l[0],r=s[0];for(let t=1,e=s.length;t<e;++t){const c=l[t],u=s[t],[f,d,p]=a(i.Fy(),i.$y(),i.Uy()),[m,C,g]=a(c.Fy(),c.$y(),c.Uy()),[S,y,T]=a(u.Fy(),u.$y(),u.Uy()),[_,E,A]=a(r.Fy(),r.$y(),r.Uy());o.G2(f,d,p,m,C,g),o.G2(f,d,p,S,y,T),o.G2(f,d,p,_,E,A),t===e-1&&o.G2(m,C,g,S,y,T),n===h-1&&o.G2(_,E,A,S,y,T),i=c,r=u}l=s}}MT(t){let s=.99999999,i=t.zc(),r=[],n=this.fT()-1,h=this.dT()-1,o=1/n,a=1/h,l=n-1,c=h-1,u=i[0],f=i[1],d=C33.En(Math.floor(u*n),0,l),p=C33.En(Math.floor(f*h),0,c),m=!0,C=0,g=0,S=0,y=-1,T=()=>{u=C33.En(C33.Ft(u,C,S),0,1),f=C33.En(C33.Ft(f,g,S),0,1),r.push(u,f)};for(let t=0,e=i.length;t<e;t+=2){u=i[t],f=i[t+1],r.push(u,f),d=C33.En(Math.floor(u*n),0,l),p=C33.En(Math.floor(f*h),0,c);const _=(t+2)%e;for(C=i[_],g=i[1+_],y=-1;;){if(1e6<r.length)throw new Error("Too many mesh poly points");const E=d*o,A=p*a,I=(d+1)*o,w=(p+1)*a;if(m=C33.Th(u,f,E,A,I,A,I,w),0!==y&&0<=(S=C33.yh(u,f,C,g,E,A,I,w,-.001))&&S<=s)T(),m=!m,y=0;else if(0<p&&2!==y&&0<=(S=C33.yh(u,f,C,g,E,A,I,A,.001))&&S<=s)T(),p--,m=!1,y=4;else if(d<l&&3!==y&&0<=(S=C33.yh(u,f,C,g,I,A,I,w,.001))&&S<=s)T(),d++,m=!1,y=1;else if(0<d&&1!==y&&0<=(S=C33.yh(u,f,C,g,E,A,E,w,.001))&&S<=s)T(),d--,m=!0,y=3;else{if(!(p<c&&4!==y&&0<=(S=C33.yh(u,f,C,g,E,w,I,w,.001))&&S<=s))break;T(),p++,m=!0,y=2}}}return C33.Cn(C33.jc,r)}bT(t,e){const s=this.vT(t);this.xT(s),e.Zc(s)}vT(t){const s=[],i=t.zc();for(let t=0,e=i.length;t<e;t+=2){const r=i[t],n=i[t+1],[h,o]=this.GT(r,n);s.push(h,o)}return s}GT(t,e){const s=this.fT()-1,i=this.dT()-1,r=1/s,n=1/i,h=C33.En(Math.floor(t*s),0,s-1),o=C33.En(Math.floor(e*i),0,i-1),a=h*r,l=o*n,c=(h+1)*r,u=(o+1)*n,f=this.AT(h,o),d=this.AT(h+1,o+1),p=C33.Th(t,e,a,l,c,l,c,u),m=p?a+r:a,C=p?l:l+n,g=this.AT(h+(p?1:0),o+(p?0:1)),[S,y,T]=C33._h(t,e,a,l,m,C,c,u);return C33.Eh(S,y,T,f.Fy(),f.$y(),f.Uy(),g.Fy(),g.$y(),g.Uy(),d.Fy(),d.$y(),d.Uy())}xT(s){let i=[],r=s[0],n=s[1],h=r-s.at(-2),o=n-s.at(-1);for(let t=0,e=s.length;t<e;t+=2){const a=(t+2)%e,l=s[a],c=s[1+a],u=l-r,f=c-n,d=Math.abs(u)<1e-7&&Math.abs(h)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(u)===Math.sign(h);(!d&&!p&&.001<Math.abs(u/h-f/o)||0==u&&0==f)&&i.push(r,n),r=l,n=c,h=u,o=f}6<=i.length&&i.length<s.length&&C33.Yh(s,i)}zy(){return{cols:this.fT(),rows:this.dT(),points:this.nT.map(t=>t.map(t=>t.zy()))}}Jy(t){const s=this.fT(),i=this.dT();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const r=t.points;for(let e=0;e<i;++e){const n=r[e];for(let t=0;t<s;++t){const h=this.AT(t,e);h.Jy(n[t])}}}}}{let GetFormatSpecifiers2=function(t,e){let s,i,r,n;switch(t){case"rgba8":s=e.RGBA8,i=e.RGBA,r=e.RGBA,n=e.UNSIGNED_BYTE;break;case"rgb8":s=e.RGB8,i=e.RGB,r=e.RGB,n=e.UNSIGNED_BYTE;break;case"rgba4":s=e.RGBA4,i=e.RGBA,r=e.RGBA,n=e.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":s=e.RGB5_A1,i=e.RGBA,r=e.RGBA,n=e.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":s=e.RGB565,i=e.RGB,r=e.RGB,n=e.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{PT:s,OT:i,format:r,type:n}};GetFormatSpecifiers=GetFormatSpecifiers2;const C33=self.Fe,VALID_PIXEL_FORMATS=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),VALID_SAMPLINGS=new Set(["nearest","bilinear","trilinear"]),VALID_MIPMAP_QUALITIES=new Set(["default","low","high"]),VALID_WRAP_MODES=new Set(["clamp-to-edge","repeat","mirror-repeat"]),CREATEFROM_DEFAULT_OPTIONS={DT:"clamp-to-edge",LT:"clamp-to-edge",NT:"trilinear",FT:0,kT:"rgba8",BT:!0,$T:"default",premultiplyAlpha:!0,WT:!1,width:-1,height:-1},UPDATE_DEFAULT_OPTIONS={premultiplyAlpha:!0,flipY:!1},allTextures=new Set;C33.l1.UT=class{constructor(t){this.xS=t,this.VT=null,this.eC=0,this.sC=0,this.HT=!0,this.jT="clamp-to-edge",this.XT="clamp-to-edge",this.YT="trilinear",this.qT=0,this.KT="rgba8",this.zT=!1,this.JT="default",this.E3=0}ZT(e,t){if(!("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||e instanceof ImageData||e instanceof ArrayBuffer||null===e))throw new Error("invalid texture source");if(t=Object.assign({},CREATEFROM_DEFAULT_OPTIONS,t),this.VT)throw new Error("already created texture");if(this.jT=t.DT,this.XT=t.LT,this.YT=t.NT,this.qT=t.FT,this.KT=t.kT,this.zT=!!t.BT&&this.xS.yS(),this.JT=t.$T,!VALID_WRAP_MODES.has(this.jT)||!VALID_WRAP_MODES.has(this.XT))throw new Error("invalid wrap mode");if(!VALID_SAMPLINGS.has(this.YT))throw new Error("invalid sampling");if(!VALID_PIXEL_FORMATS.has(this.KT))throw new Error("invalid pixel format");if(!VALID_MIPMAP_QUALITIES.has(this.JT))throw new Error("invalid mipmap quality");if(this.HT=!0,e instanceof ArrayBuffer||null===e||t.WT){if(this.eC=t.width,this.sC=t.height,e instanceof ArrayBuffer&&e.byteLength!==this.eC*this.sC*4)throw new Error("ArrayBuffer wrong size")}else this.eC=e.width,this.sC=e.height;if(this.eC<=0||this.sC<=0)throw new Error("invalid texture data size");if(t.WT){const o=C33.Fo(this.eC,this.sC),a=o.getContext("2d");a.drawImage(e,0,0,this.eC,this.sC),e=o}const s=C33.Wn(this.eC)&&C33.Wn(this.sC),i=this.xS.QT();if(this.eC>i||this.sC>i)throw new Error("texture data exceeds maximum texture size");const r=this.xS.t_(),n=this.xS.e_(),h=(this.VT=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.VT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),GetFormatSpecifiers2(this.KT,r));if(this.xS.s_()||s||!this.i_())if(2<=n){let t;t=this.zT?Math.floor(Math.log2(Math.max(this.eC,this.sC))+1):1,r.texStorage2D(r.TEXTURE_2D,t,h.PT,this.eC,this.sC),e instanceof ArrayBuffer?r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.eC,this.sC,h.format,h.type,new Uint8Array(e)):null!==e&&r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,e)}else e instanceof ArrayBuffer?r.texImage2D(r.TEXTURE_2D,0,h.OT,this.eC,this.sC,0,h.format,h.type,new Uint8Array(e)):null===e?r.texImage2D(r.TEXTURE_2D,0,h.OT,this.eC,this.sC,0,h.format,h.type,null):r.texImage2D(r.TEXTURE_2D,0,h.OT,h.format,h.type,e);else{if(null===e)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((e=e instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(e),this.eC,this.sC):e)instanceof ImageData){const u=C33.Fo(this.eC,this.sC),f=u.getContext("2d");f.putImageData(e,0,0),e=u}const l=C33.Fo(C33.Un(this.eC),C33.Un(this.sC)),c=l.getContext("2d");c.imageSmoothingEnabled="nearest"!==this.YT,c.drawImage(e,0,0,this.eC,this.sC,0,0,l.width,l.height),r.texImage2D(r.TEXTURE_2D,0,h.OT,h.format,h.type,l)}null!==e&&this.r_(r),r.bindTexture(r.TEXTURE_2D,null),this.xS.n_(),this.E3=1,allTextures.add(this)}h_(t,e,s){if(s=Object.assign({},CREATEFROM_DEFAULT_OPTIONS,s),this.VT)throw new Error("already created texture");if(this.jT=s.DT,this.XT=s.LT,this.YT=s.NT,this.KT=s.kT,this.zT=!!s.BT&&this.xS.yS(),this.JT=s.$T,!VALID_WRAP_MODES.has(this.jT)||!VALID_WRAP_MODES.has(this.XT))throw new Error("invalid wrap mode");if(!VALID_SAMPLINGS.has(this.YT))throw new Error("invalid sampling");if(!VALID_PIXEL_FORMATS.has(this.KT))throw new Error("invalid pixel format");if(!VALID_MIPMAP_QUALITIES.has(this.JT))throw new Error("invalid mipmap quality");this.HT=!1,this.eC=Math.floor(t),this.sC=Math.floor(e);const i=C33.Wn(this.eC)&&C33.Wn(this.sC),r=this.xS.QT();if(this.eC<=0||this.sC<=0)throw new Error("invalid texture size");if(this.eC>r||this.sC>r)throw new Error("texture exceeds maximum texture size");if(!this.xS.s_()&&this.i_()&&!i)throw new Error("non-power-of-two tiled textures not supported");const n=this.xS.t_(),h=this.xS.e_(),o=(this.VT=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.VT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),GetFormatSpecifiers2(this.KT,n)),a=2<=h?o.PT:o.OT;n.texImage2D(n.TEXTURE_2D,0,a,this.eC,this.sC,0,o.format,o.type,null),this.r_(n),n.bindTexture(n.TEXTURE_2D,null),this.xS.n_(),this.E3=1,allTextures.add(this)}o_(t){if("default"===this.JT)return this.HT?t.NICEST:t.FASTEST;if("low"===this.JT)return t.FASTEST;if("high"===this.JT)return t.NICEST;throw new Error("invalid mipmap quality")}i_(){return"clamp-to-edge"!==this.jT||"clamp-to-edge"!==this.XT}a_(t,e){if("clamp-to-edge"===e)return t.CLAMP_TO_EDGE;if("repeat"===e)return t.REPEAT;if("mirror-repeat"===e)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}r_(t){const e=C33.Wn(this.eC)&&C33.Wn(this.sC);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.a_(t,this.jT)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.a_(t,this.XT)),"nearest"===this.YT)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.zT=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(e||this.xS.s_())&&this.zT){t.hint(t.GENERATE_MIPMAP_HINT,this.o_(t)),t.generateMipmap(t.TEXTURE_2D);const i="trilinear"===this.YT&&!this.xS._S();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.zT=!1;const s=this.xS.l_();s&&0<this.qT&&"nearest"!==this.YT&&t.texParameterf(t.TEXTURE_2D,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.qT,this.xS.c_()))}u_(t,e){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.VT||this.E3<=0)throw new Error("texture not created");if(this.HT)throw new Error("cannot update static texture");e=Object.assign({},UPDATE_DEFAULT_OPTIONS,e);const s=t.width||t.videoWidth,i=t.height||t.videoHeight,r=this.xS.e_(),n=this.xS.t_(),h=(n.bindTexture(n.TEXTURE_2D,this.VT),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!!e.flipY),GetFormatSpecifiers2(this.KT,n)),o=2<=r?h.PT:h.OT;try{if(this.eC===s&&this.sC===i){const a=C33.Wn(this.eC)&&C33.Wn(this.sC);n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t),(a||this.xS.s_())&&this.zT&&(n.hint(n.GENERATE_MIPMAP_HINT,this.o_(n)),n.generateMipmap(n.TEXTURE_2D))}else{this.eC=s,this.sC=i;const l=C33.Wn(this.eC)&&C33.Wn(this.sC);if(!this.xS.s_()&&this.i_()&&!l)throw new Error("non-power-of-two tiled textures not supported");n.texImage2D(n.TEXTURE_2D,0,o,h.format,h.type,t),(l||this.xS.s_())&&this.zT&&(n.hint(n.GENERATE_MIPMAP_HINT,this.o_(n)),n.generateMipmap(n.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}n.bindTexture(n.TEXTURE_2D,null),this.xS.n_()}f_(){if(0<this.E3)throw new Error("texture still has references");if(!this.VT)throw new Error("already deleted texture");allTextures.delete(this);const t=this.xS.t_();t.deleteTexture(this.VT),this.VT=null}d_(){return!!this.VT}p_(){return this.VT}JS(){return this.xS}m_(){this.E3++}C_(){if(this.E3<=0)throw new Error("no more references");this.E3--}g_(){return this.E3}Sm(){return this.eC}vm(){return this.sC}S_(){return this.HT}y_(){let t=this.eC*this.sC;switch(this.KT){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.zT&&(t+=Math.floor(t/3)),t}static by(){allTextures.clear()}static T_(){return allTextures.values()}}}{const C33=self.Fe,assert=self.assert,glMatrix=self.ye,vec32=glMatrix.Me,mat42=glMatrix.Ae,VALID_SAMPLINGS=new Set(["nearest","bilinear","trilinear"]),DEFAULT_RENDERTARGET_OPTIONS={NT:"trilinear",alpha:!0,depth:!1,__:!0,E_:!0,A_:0},allRenderTargets=new Set;C33.l1.I_=class{constructor(t){this.xS=t,this.w_=null,this.R_=null,this.VT=null,this.M_=null,this.eC=0,this.sC=0,this.b_=!0,this.YT="trilinear",this.v_=!0,this.x_=!1,this.G_=!0,this.P_=0,this.O_=mat42.create(),this.D_=0,this.L_=0,this.N_=0}F_(t,e,s){s=Object.assign({},DEFAULT_RENDERTARGET_OPTIONS,s);const i=this.xS.e_();if(this.VT||this.M_)throw new Error("already created render target");if(this.YT=s.NT,this.v_=!!s.alpha,this.x_=!!s.depth,this.G_=!!s.__,this.b_=!!s.E_,this.P_=s.A_,!VALID_SAMPLINGS.has(this.YT))throw new Error("invalid sampling");if(0<this.P_&&(i<2||this.G_))throw new Error("invalid use of multisampling");if(i<2&&(this.G_=!0),this.eC=t,this.sC=e,this.eC<=0||this.sC<=0)throw new Error("invalid render target size");this.k_();const r=this.xS.t_();if(this.w_=r.createFramebuffer(),this.x_&&(this.R_=r.createFramebuffer()),this.G_){this.VT=this.xS.B_(this.eC,this.sC,{NT:this.YT,kT:this.v_?"rgba8":"rgb8",BT:!1});const h=this.VT.p_();r.bindFramebuffer(r.FRAMEBUFFER,this.w_),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,h,0),this.x_&&(r.bindFramebuffer(r.FRAMEBUFFER,this.R_),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,h,0))}else{this.M_=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,this.M_);const o=this.v_?r.RGBA8:r.RGB8;if(0<this.P_){const a=r.getInternalformatParameter(r.RENDERBUFFER,o,r.SAMPLES);if(a&&a[0]){const l=a[0];this.P_>l&&(this.P_=l)}else this.P_=0}0===this.P_?r.renderbufferStorage(r.RENDERBUFFER,o,this.eC,this.sC):r.renderbufferStorageMultisample(r.RENDERBUFFER,this.P_,o,this.eC,this.sC),r.bindFramebuffer(r.FRAMEBUFFER,this.w_),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,this.M_),this.x_&&(r.bindFramebuffer(r.FRAMEBUFFER,this.R_),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,this.M_)),r.bindRenderbuffer(r.RENDERBUFFER,null)}const n=this.xS.W_();this.x_&&n&&(r.bindFramebuffer(r.FRAMEBUFFER,this.w_),this.xS.U_()?r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,n,0):r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n)),r.bindFramebuffer(r.FRAMEBUFFER,null),allRenderTargets.add(this)}V_(t,e){if(this.eC!==t||this.sC!==e){this.eC=t,this.sC=e,this.k_();const s=this.xS.t_(),i=(s.bindFramebuffer(s.FRAMEBUFFER,this.w_),this.VT?this.VT.u_(new ImageData(this.eC,this.sC)):(s.bindRenderbuffer(s.RENDERBUFFER,this.M_),s.renderbufferStorage(s.RENDERBUFFER,this.v_?s.RGBA8:s.RGB8,this.eC,this.sC),s.bindRenderbuffer(s.RENDERBUFFER,null)),this.xS.W_());this.x_&&i&&(this.xS.U_()?s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,i,0):s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,i)),s.bindFramebuffer(s.FRAMEBUFFER,null)}}f_(){if(!this.VT&&!this.M_)throw new Error("already deleted render target");allRenderTargets.delete(this);const t=this.xS.t_(),e=(this.VT?(t.bindFramebuffer(t.FRAMEBUFFER,this.w_),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.x_&&(t.bindFramebuffer(t.FRAMEBUFFER,this.R_),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.xS.H_(this.VT),this.VT=null):this.M_&&(t.bindFramebuffer(t.FRAMEBUFFER,this.w_),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.x_&&(t.bindFramebuffer(t.FRAMEBUFFER,this.R_),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.M_),this.M_=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.xS.e_()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.w_),this.x_&&t.deleteFramebuffer(this.R_),this.xS.j_());e.X_=null,this.w_=e.Y_=null}k_(){this.xS.Pg(this.O_,this.eC/this.sC),this.D_=this.xS.bg(),this.L_=this.xS.Ig(),this.N_=this.xS.Rg()}q_(){return this.w_}K_(){return this.R_}JS(){return this.xS}z_(){return this.VT}J_(){return this.xS.bg()===this.D_&&this.xS.Ig()===this.L_&&this.xS.Rg()===this.N_||this.k_(),this.O_}Z_(){return"nearest"!==this.YT}Q_(){return this.v_}tE(){return this.G_}eE(){return this.x_}Sm(){return this.eC}vm(){return this.sC}sE(){return this.b_}iE(){return this.P_}rE(){const t={NT:this.YT,alpha:this.v_,__:this.G_};return this.b_||(t.width=this.eC,t.height=this.sC),t}nE(t){return"nearest"!==(t=Object.assign({},DEFAULT_RENDERTARGET_OPTIONS,t)).NT===this.Z_()&&!!t.alpha===this.Q_()&&!!t.depth===this.eE()&&!(2<=this.xS.e_()&&!!t.__!==this.tE())&&("number"==typeof t.width||"number"==typeof t.height?!this.sE()&&this.Sm()===Math.floor(t.width)&&this.vm()===Math.floor(t.height):this.sE())}hE(){return this.VT?this.VT.p_():null}y_(){return this.VT?this.VT.y_():this.eC*this.sC*(this.v_?4:3)}static async oE(t,e){const s=await t.aE(e,!0);return C33.$o(s)}static by(){allRenderTargets.clear()}static lE(){return allRenderTargets.values()}static cE(t,e){for(const s of allRenderTargets)s.sE()&&s.V_(t,e)}}}{const C33=self.Fe,glMatrix=self.ye,vec32=glMatrix.Me,mat42=glMatrix.Ae,RESERVED_UNIFORM_NAMES=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);C33.l1.uE=class extends C33.l1.vS{static async fE(t,e){const s=t.t_(),i=e.src,r=e.dE,n=e.name,h=s.createShader(s.FRAGMENT_SHADER),o=(s.shaderSource(h,i),s.compileShader(h),s.createShader(s.VERTEX_SHADER)),a=(s.shaderSource(o,r),s.compileShader(o),s.createProgram()),l=(s.attachShader(a,h),s.attachShader(a,o),s.bindAttribLocation(a,0,"aPos"),s.bindAttribLocation(a,1,"aTex"),s.bindAttribLocation(a,2,"aPoints"),s.linkProgram(a),t.pE());if(l?await t.mE(()=>s.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await C33.Fh(5),!s.getShaderParameter(h,s.COMPILE_STATUS)){const u=s.getShaderInfoLog(h);throw s.deleteShader(h),s.deleteShader(o),s.deleteProgram(a),new Error("Error compiling fragment shader: "+u)}if(!s.getShaderParameter(o,s.COMPILE_STATUS)){const f=s.getShaderInfoLog(o);throw s.deleteShader(h),s.deleteShader(o),s.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!s.getProgramParameter(a,s.LINK_STATUS)){const d=s.getProgramInfoLog(a);throw s.deleteShader(h),s.deleteShader(o),s.deleteProgram(a),new Error("Error linking shader program: "+d)}const c=C33.Q3(s.getProgramInfoLog(a)||"").trim();return c&&!C33.z3(c)&&console.info(`[WebGL] Shader program '${n}' compilation log: `,c),s.deleteShader(h),s.deleteShader(o),a}static async CE(t,e){const s=await C33.l1.uE.fE(t,e);return new C33.l1.uE(t,s,e)}constructor(t,e,s){super(t,s);const i=t.t_(),r=t.j_(),n=(t.mS(),i.useProgram(e),this.gE=i,this.Ty=e,this.SE="<default-device-transform>"===s.name,i.getAttribLocation(e,"aPos")),h=i.getAttribLocation(e,"aTex"),o=(this.yE=i.getAttribLocation(e,"aPoints"),-1!==n&&(i.bindBuffer(i.ARRAY_BUFFER,t.TE),i.vertexAttribPointer(n,t.dS(),i.FLOAT,!1,0,0),i.enableVertexAttribArray(n)),-1!==h&&(i.bindBuffer(i.ARRAY_BUFFER,t._E),i.vertexAttribPointer(h,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(h)),-1!==this.yE&&(i.bindBuffer(i.ARRAY_BUFFER,t.EE),i.vertexAttribPointer(this.yE,4,i.FLOAT,!1,0,0),i.enableVertexAttribArray(this.yE)),i.bindBuffer(i.ARRAY_BUFFER,null),this.AE=new C33.l1.IE(this,"matP","mat4"),this.wE=new C33.l1.IE(this,"matMV","mat4"),this.RE=new C33.l1.IE(this,"color","vec4"),this.ME=new C33.l1.IE(this,"samplerFront","sampler"),this.bE=new C33.l1.IE(this,"pointTexStart","vec2"),this.vE=new C33.l1.IE(this,"pointTexEnd","vec2"),this.xE=new C33.l1.IE(this,"zElevation","float"),this.GE=new C33.l1.IE(this,"tileSize","vec2"),this.PE=new C33.l1.IE(this,"tileSpacing","vec2"),this.OE=new C33.l1.IE(this,"color2_","vec4"),this.DE=new C33.l1.IE(this,"outlineThickness","float"),this.LE=new C33.l1.IE(this,"samplerBack","sampler"),this.NE=new C33.l1.IE(this,"samplerDepth","sampler"),this.FE=new C33.l1.IE(this,"destStart","vec2"),this.kE=new C33.l1.IE(this,"destEnd","vec2"),this.BE=new C33.l1.IE(this,"srcStart","vec2"),this.$E=new C33.l1.IE(this,"srcEnd","vec2"),this.WE=new C33.l1.IE(this,"srcOriginStart","vec2"),this.UE=new C33.l1.IE(this,"srcOriginEnd","vec2"),this.VE=new C33.l1.IE(this,"pixelSize","vec2"),this.HE=new C33.l1.IE(this,"seconds","float"),this.jE=new C33.l1.IE(this,"devicePixelRatio","float"),this.XE=new C33.l1.IE(this,"layerScale","float"),this.YE=new C33.l1.IE(this,"layerAngle","float"),this.qE=new C33.l1.IE(this,"layoutStart","vec2"),this.KE=new C33.l1.IE(this,"layoutEnd","vec2"),this.zE=new C33.l1.IE(this,"zNear","float"),this.JE=new C33.l1.IE(this,"zFar","float"),this.ZE=!!(this.VE.QE()||this.HE.QE()||this.LE.QE()||this.FE.QE()||this.kE.QE()||this.BE.QE()||this.$E.QE()||this.WE.QE()||this.UE.QE()||this.jE.QE()||this.XE.QE()||this.YE.QE()||this.qE.QE()||this.KE.QE()),s.parameters||[]);this.tA=[],this.KS=this.VE.QE()||this.BE.QE()||this.$E.QE()||this.WE.QE()||this.UE.QE(),this.eA=!1,this.sA=!1,this.RE.iA(1,1,1,1),this.OE.iA(1,1,1,1),this.ME.rA(0),this.LE.rA(1),this.NE.rA(2),this.bE.nA(0,0),this.vE.nA(1,1),this.xE.hA(0),this.GE.nA(0,0),this.PE.nA(0,0),this.FE.nA(0,0),this.kE.nA(1,1),this.BE.nA(0,0),this.$E.nA(0,0),this.WE.nA(0,0),this.UE.nA(0,0),this.VE.nA(0,0),this.jE.hA(1),this.zE.hA(t.Ig()),this.JE.hA(t.Rg()),this.XE.hA(1),this.YE.hA(0),this.HE.hA(0),this.qE.nA(0,0),this.KE.nA(0,0),this.DE.hA(1);for(const l of o){const c=l[0],u=l[2],f=new C33.l1.IE(this,c,u);"color"===u?f.oA(0,0,0):f.hA(0),this.tA.push(f)}this.SE?this.aA(r.lA):(this.cA(r.lA,!0),this.uA(r.fA,!0));const a=r.dA;i.useProgram(a?a.Ty:null)}gn(){this.gE.deleteProgram(this.Ty),this.Ty=null,this.xS.kg(this),this.gE=null,super.gn()}pA(){return this.gE}mA(){return this.Ty}CA(){return this.tA.length}gA(t){return t<0||t>=this.tA.length?null:this.tA[t].SA()}yA(s){for(let t=0,e=s.length;t<e;++t)if(!this.tA[t].TA(s[t]))return!1;return!0}_A(s){for(let t=0,e=s.length;t<e;++t)this.tA[t].EA(s[t])}AA(t,e,s,i,r,n,h,o,a,l){return!this.LE.QE()&&!(this.VE.QE()&&!this.VE.IA(r,n)||this.FE.QE()&&!this.FE.IA(t.Gl(),t.Pl())||this.kE.QE()&&!this.kE.IA(t.Ol(),t.Dl())||this.jE.QE()&&!this.jE.wA(h)||this.XE.QE()&&!this.XE.wA(o)||this.YE.QE()&&!this.YE.wA(a)||this.BE.QE()&&!this.BE.IA(e.Gl(),e.Pl())||this.$E.QE()&&!this.$E.IA(e.Ol(),e.Dl())||this.WE.QE()&&!this.WE.IA(s.Gl(),s.Pl())||this.UE.QE()&&!this.UE.IA(s.Ol(),s.Dl())||this.qE.QE()&&!this.qE.IA(i.Gl(),i.Pl())||this.KE.QE()&&!this.KE.IA(i.Pl(),i.Dl())||this.HE.QE()&&!this.HE.wA(l))}RA(t,e,s,i,r,n,h,o,a,l){this.LE.QE()||(this.VE.QE()&&this.VE.MA(r,n),this.FE.QE()&&this.FE.MA(t.Gl(),t.Pl()),this.kE.QE()&&this.kE.MA(t.Ol(),t.Dl()),this.jE.QE()&&this.jE.bA(h),this.XE.QE()&&this.XE.bA(o),this.YE.QE()&&this.YE.bA(a),this.BE.QE()&&this.BE.MA(e.Gl(),e.Pl()),this.$E.QE()&&this.$E.MA(e.Ol(),e.Dl()),this.WE.QE()&&this.WE.MA(s.Gl(),s.Pl()),this.UE.QE()&&this.UE.MA(s.Ol(),s.Dl()),this.qE.QE()&&this.qE.MA(i.Gl(),i.Pl()),this.KE.QE()&&this.KE.MA(i.Pl(),i.Dl()),this.HE.QE()&&this.HE.bA(l))}cA(t,e){this.eA&&!e||this.SE||(this.AE.QE()&&this.AE.vA(t),this.eA=!0)}xA(){this.eA=!1}uA(t,e){this.sA&&!e||this.SE||(this.wE.QE()&&this.wE.vA(t),this.sA=!0)}GA(){this.sA=!1}aA(t){if(!this.SE)throw new Error("not device transform shader");this.AE.vA(t);const e=this.xS,s=e.Sm()/2,i=e.vm()/2,r=e.Ng(s,i,e.yg(e.vm()),s,i,0,e.vm());this.wE.vA(r)}PA(t){this.RE.QE()&&this.RE.OA(t[0],t[1],t[2],t[3])}static DA(){return RESERVED_UNIFORM_NAMES}static LA(t){const e=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${e} vec2 aTex;`,`varying ${e} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static NA(t){const e=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${e} vec2 aTex;`,`out ${e} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static FA(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static kA(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static BA(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static $A(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static WA(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static UA(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static VA(t,e,s){let i="";return 2<=t?i="#version 300 es\n":(e&&(i="#extension GL_EXT_frag_depth : enable\n"),s&&(i+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),i+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&s?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!s?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||s?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||s?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&e?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static HA(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static jA(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static XA(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static YA(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static qA(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static KA(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static zA(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static JA(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static ZA(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static QA(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static tI(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static eI(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static sI(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const C33=self.Fe,glMatrix=self.ye,mat42=glMatrix.Ae,TYPE_SIZES=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);C33.l1.IE=class{constructor(t,e,s){if(!TYPE_SIZES.has(s))throw new Error("invalid uniform type");this.rT=t,this.gE=this.rT.pA(),this.Tn=e,this.wf=s,this.iI="color"===this.wf,this.rI=this.gE.getUniformLocation(this.rT.mA(),e),this.nI=!!this.rI;const i=TYPE_SIZES.get(s);this.hI=new Float32Array(i),this.oI=new Float32Array(i)}gn(){this.rT=null,this.gE=null,this.rI=null}QE(){return this.nI}SA(){return this.wf}aI(){return this.iI}hA(t){this.QE()&&(this.hI[0]=t,this.oI.set(this.hI),this.gE.uniform1f(this.rI,t))}rA(t){this.QE()&&(this.hI[0]=t,this.oI.set(this.hI),this.gE.uniform1i(this.rI,t))}nA(t,e){this.QE()&&(this.hI[0]=t,this.hI[1]=e,this.oI.set(this.hI),this.gE.uniform2f(this.rI,t,e))}oA(t,e,s){this.QE()&&(this.hI[0]=t,this.hI[1]=e,this.hI[2]=s,this.oI.set(this.hI),this.gE.uniform3f(this.rI,t,e,s))}iA(t,e,s,i){this.QE()&&(this.hI[0]=t,this.hI[1]=e,this.hI[2]=s,this.hI[3]=i,this.oI.set(this.hI),this.gE.uniform4f(this.rI,t,e,s,i))}lI(t){t=Math.fround(t);const e=this.hI;e[0]!==t&&(e[0]=t,this.gE.uniform1f(this.rI,t))}cI(t){const e=this.hI;e[0]!==t&&this.gE.uniform1i(this.rI,e[0]=t)}uI(t,e){t=Math.fround(t),e=Math.fround(e);const s=this.hI;s[0]===t&&s[1]===e||(s[0]=t,s[1]=e,this.gE.uniform2f(this.rI,t,e))}fI(t,e,s){t=Math.fround(t),e=Math.fround(e),s=Math.fround(s);const i=this.hI;i[0]===t&&i[1]===e&&i[2]===s||(i[0]=t,i[1]=e,i[2]=s,this.gE.uniform3f(this.rI,t,e,s))}OA(t,e,s,i){t=Math.fround(t),e=Math.fround(e),s=Math.fround(s),i=Math.fround(i);const r=this.hI;r[0]===t&&r[1]===e&&r[2]===s&&r[3]===i||(r[0]=t,r[1]=e,r[2]=s,r[3]=i,this.gE.uniform4f(this.rI,t,e,s,i))}vA(t){const e=this.hI;mat42.W(e,t)||(C33.Wh(e,t,0),this.gE.uniformMatrix4fv(this.rI,!1,t))}TA(t){const e=this.oI;return this.aI()?e[0]===Math.fround(t.ma())&&e[1]===Math.fround(t.Ca())&&e[2]===Math.fround(t.ga()):e[0]===Math.fround(t)}EA(t){const e=this.oI;this.aI()?(e[0]=t.ma(),e[1]=t.Ca(),e[2]=t.ga()):e[0]=t}wA(t){return this.oI[0]===Math.fround(t)}IA(t,e){const s=this.oI;return s[0]===Math.fround(t)&&s[1]===Math.fround(e)}bA(t){this.oI[0]=t}MA(t,e){const s=this.oI;s[0]=t,s[1]=e}}}{const C33=self.Fe,glMatrix=self.ye,vec42=glMatrix.ve,mat42=glMatrix.Ae,BATCH_NULL=0,BATCH_QUAD=1,BATCH_SETTEXTURE=2,BATCH_SETCOLOR=3,BATCH_SETBLEND=4,BATCH_SETVIEWPORT=5,BATCH_SETPROJECTION=6,BATCH_SETMODELVIEW=7,BATCH_SETRENDERTARGET=8,BATCH_CLEARSURFACE=9,BATCH_POINTS=10,BATCH_SETPROGRAM=11,BATCH_SETPROGRAMPARAMETERS=12,BATCH_SETPROGRAMCUSTOMPARAMETERS=13,BATCH_INVALIDATEFRAMEBUFFER=14,BATCH_SETPOINTTEXCOORDS=15,BATCH_SETTILEMAPINFO=16,BATCH_BLITFRAMEBUFFER=17,BATCH_STARTQUERY=18,BATCH_ENDQUERY=19,BATCH_SETELLIPSEPARAMS=20,BATCH_SETGRADIENTCOLOR=21,BATCH_CLEARDEPTH=22,BATCH_SETDEPTHENABLED=23,BATCH_SETDEPTHSAMPLINGENABLED=24,BATCH_COPLANAR_STARTSTENCILPASS=25,BATCH_COPLANAR_STARTCOLORPASS=26,BATCH_COPLANAR_RESTORE=27,BATCH_SET_SCISSOR=28,BATCH_SETTILERANDOMIZATIONINFO=29;C33.l1.dI=class{constructor(t){this.renderer=t,this.fA=mat42.create(),this.lA=mat42.create(),this.X_=null,this.Y_=null,this.pI=!1,this.mI=vec42.R(1,1,1,1),this.dA=null,this.CI=new C33.Rect,this.clearColor=C33.Cn(C33.Ko,0,0,0,0)}},C33.l1.gI=class{constructor(t){const e=new ArrayBuffer(96);this.wf=0,this.SI=t,this.gE=t.renderer.t_(),this.yI=0,this.TI=0,this._I=null,this.EI=new Float32Array(e,0,16),this.AI=new Float32Array(e,64,4),this.II=new Float32Array(e,80,4),this.wI=[]}RI(t,e){this.wf=BATCH_QUAD,this.yI=t,this.TI=e}MI(){const t=this.gE;t.drawElements(t.TRIANGLES,this.TI,t.UNSIGNED_SHORT,this.yI)}bI(t){this.wf=BATCH_SETTEXTURE,this._I=t}vI(){const t=this.gE,e=this._I;t.bindTexture(t.TEXTURE_2D,e?e.p_():null)}xI(t){this.wf=BATCH_SETCOLOR,t.Ta(this.AI,0)}GI(){const t=this.AI,e=this.SI;vec42.I(e.mI,t),e.dA.PA(t)}OI(t){this.wf=BATCH_SETGRADIENTCOLOR,t.Ta(this.AI,0)}DI(){const t=this.AI,e=this.SI.dA;e.OE.QE()&&e.OE.OA(t[0],t[1],t[2],t[3])}LI(t,e){this.wf=BATCH_SETBLEND,this.yI=t,this.TI=e}NI(){this.gE.blendFunc(this.yI,this.TI)}FI(t,e,s,i){this.wf=BATCH_SETVIEWPORT;const r=this.AI;r[0]=t,r[1]=e,r[2]=s,r[3]=i}kI(){const t=this.AI;this.gE.viewport(t[0],t[1],t[2],t[3])}BI(t){this.wf=BATCH_SETPROJECTION,mat42.I(this.EI,t)}$I(){const t=this.SI,s=t.renderer.N1,i=t.dA,r=this.EI;for(let t=0,e=s.length;t<e;++t){const n=s[t];n===i?n.cA(r,!0):n.xA()}mat42.I(t.lA,r)}WI(t){this.wf=BATCH_SETMODELVIEW,mat42.I(this.EI,t)}UI(){const t=this.SI,s=t.renderer.N1,i=t.dA,r=this.EI;for(let t=0,e=s.length;t<e;++t){const n=s[t];n===i?n.uA(r,!0):n.GA()}mat42.I(t.fA,r)}VI(t){this.wf=BATCH_SETRENDERTARGET,this._I=t}HI(){const t=this.gE,e=this._I,s=this.SI;e?(s.X_=e.q_(),s.Y_=e.K_(),s.pI&&s.Y_?t.bindFramebuffer(t.FRAMEBUFFER,s.Y_):t.bindFramebuffer(t.FRAMEBUFFER,s.X_)):(s.X_=null,s.Y_=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}jI(t){this.wf=BATCH_CLEARSURFACE,t.Ta(this.EI,0)}XI(t,e,s,i){this.wf=BATCH_CLEARSURFACE;const r=this.EI;r[0]=t,r[1]=e,r[2]=s,r[3]=i}YI(){const t=this.gE,e=this.EI,s=this.SI,i=s.clearColor,r=e[0],n=e[1],h=e[2],o=e[3];i.Ia(r,n,h,o)||(t.clearColor(r,n,h,o),i.ta(r,n,h,o)),t.clear(t.COLOR_BUFFER_BIT)}qI(t){this.wf=BATCH_SETPOINTTEXCOORDS,t.Ta(this.EI,0)}KI(){const t=this.EI;this.SI.CI.set(t[0],t[1],t[2],t[3])}zI(t,e){this.wf=BATCH_POINTS,this.yI=t,this.TI=1,this.EI[0]=e}JI(){const t=this.gE,e=this.SI,s=e.renderer,i=s.W1,r=(t.useProgram(i.Ty),i.cA(e.lA,!1),i.uA(e.fA,!1),e.CI),n=(i.bE.QE()&&i.bE.uI(r.Gl(),r.Pl()),i.vE.QE()&&i.vE.uI(r.Ol(),r.Dl()),this.EI[0]);if(i.xE.QE()&&i.xE.lI(n),i.RE.QE()){const h=e.mI;i.RE.OA(h[0],h[1],h[2],h[3])}t.drawArrays(t.POINTS,this.yI/4,this.TI),t.useProgram(e.dA.Ty)}ZI(t){this.wf=BATCH_SETPROGRAM,this._I=t}QI(){const t=this.gE,e=this.SI,s=this._I;if(e.dA=s,t.useProgram(s.Ty),s.cA(e.lA,!1),s.uA(e.fA,!1),s.RE.QE()){const i=e.mI;s.RE.OA(i[0],i[1],i[2],i[3])}}ew(){this.wf=BATCH_SETPROGRAMPARAMETERS}iw(){const t=this.SI.dA,e=this.gE,s=this.EI,i=this.AI,r=this.II;if(t.LE.QE()){const n=this.SI.renderer,h=this._I;n.rw!==h&&(e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,h?h.p_():null),n.rw=h,e.activeTexture(e.TEXTURE0))}t.VE.QE()&&t.VE.uI(s[0],s[1]),t.FE.QE()&&t.FE.uI(s[2],s[3]),t.kE.QE()&&t.kE.uI(s[4],s[5]),t.jE.QE()&&t.jE.lI(this.TI),t.XE.QE()&&t.XE.lI(s[6]),t.YE.QE()&&t.YE.lI(s[7]),t.BE.QE()&&t.BE.uI(s[12],s[13]),t.$E.QE()&&t.$E.uI(s[14],s[15]),t.WE.QE()&&t.WE.uI(r[0],r[1]),t.UE.QE()&&t.UE.uI(r[2],r[3]),t.qE.QE()&&t.qE.uI(i[0],i[1]),t.KE.QE()&&t.KE.uI(i[2],i[3]),t.HE.QE()&&t.HE.lI(this.yI)}hw(){this.wf=BATCH_SETPROGRAMCUSTOMPARAMETERS}ow(){const t=this.SI.dA,s=t.tA,i=this.wI;for(let t=0,e=s.length;t<e;++t){const r=s[t],n=i[t];r.aI()?r.fI(n.ma(),n.Ca(),n.ga()):r.lI(n)}}aw(t){this.wf=BATCH_INVALIDATEFRAMEBUFFER,this._I=t}lw(){const t=this.gE,e=this._I,s=this.SI.X_;e!==s&&t.bindFramebuffer(t.FRAMEBUFFER,e),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),e!==s&&t.bindFramebuffer(t.FRAMEBUFFER,s)}uw(t,e,s){this.wf=BATCH_BLITFRAMEBUFFER;const i=this.EI,r=this.SI.renderer,n=(i[0]=t.Sm(),i[1]=t.vm(),i[2]=(e||r).Sm(),i[3]=(e||r).vm(),i[4]=t.Z_()?1:0,i[5]="stretch"===s,this.wI);C33.Vh(n),n.push(t.q_()),n.push(e?e.q_():null)}fw(){const t=this.EI,e=this.wI,s=this.gE,i=t[0],r=t[1],n=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=e[0],c=e[1];if(s.bindFramebuffer(s.READ_FRAMEBUFFER,l),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,c),a)s.blitFramebuffer(0,0,i,r,0,0,n,h,s.COLOR_BUFFER_BIT,o?s.LINEAR:s.NEAREST);else{const u=Math.min(i,n),f=Math.min(r,h),d=Math.max(r-h,0),p=Math.max(h-r,0);s.blitFramebuffer(0,d,u,f+d,0,p,u,f+p,s.COLOR_BUFFER_BIT,s.NEAREST)}}pw(t){this.wf=BATCH_STARTQUERY,this._I=t}mw(){this._I.Cw(),this._I=null}gw(t){this.wf=BATCH_ENDQUERY,this._I=t}Sw(){this._I.yw(),this._I=null}Tw(t,e,s){this.wf=BATCH_SETELLIPSEPARAMS;const i=this.EI;i[0]=t,i[1]=e,i[2]=s}_w(){const t=this.SI.dA,e=this.EI;t.VE.QE()&&t.VE.uI(e[0],e[1]),t.DE.QE()&&t.DE.lI(e[2])}Ew(t,e,s,i,r,n,h){this.wf=BATCH_SETTILEMAPINFO;const o=this.EI;t.Ta(o,0),o[4]=1/e,o[5]=1/s,o[6]=i/e,o[7]=r/s,o[8]=n/e,o[9]=h/s}Aw(){const t=this.SI.dA,e=this.EI;t.BE.QE()&&t.BE.uI(e[0],e[1]),t.VE.QE()&&t.VE.uI(e[4],e[5]),t.GE.QE()&&t.GE.uI(e[6],e[7]),t.PE.QE()&&t.PE.uI(e[8],e[9])}Iw(t,e,s,i,r,n,h){this.wf=BATCH_SETTILERANDOMIZATIONINFO;const o=this.EI;o[0]=1/t,o[1]=1/e,o[2]=s,o[3]=i,o[4]=r,o[5]=n,o[6]=h}ww(){const t=this.SI.dA,e=this.EI;t.VE.QE()&&t.VE.uI(e[0],e[1]),t.GE.QE()&&t.GE.uI(e[2],e[3]),t.DE.QE()&&t.DE.lI(e[4]),t.PE.QE()&&t.PE.uI(e[5],e[6])}Rw(t){this.wf=BATCH_CLEARDEPTH,this.yI=t?1:0}Mw(){const t=this.gE,e=0!==this.yI;e||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),e||t.depthMask(!1)}bw(t){this.wf=BATCH_SETDEPTHENABLED,this.yI=t?1:0}xw(){const t=this.gE;0===this.yI?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}Gw(t){this.wf=BATCH_SETDEPTHSAMPLINGENABLED,this.yI=t?1:0}Pw(){const t=this.gE,e=this.SI,s=e.renderer,i=0!==this.yI;e.pI=i,t.activeTexture(t.TEXTURE2),i?(e.Y_&&t.bindFramebuffer(t.FRAMEBUFFER,e.Y_),t.bindTexture(t.TEXTURE_2D,s.W_())):(t.bindTexture(t.TEXTURE_2D,null),e.Y_&&t.bindFramebuffer(t.FRAMEBUFFER,e.X_)),t.activeTexture(t.TEXTURE0)}Ow(){this.wf=BATCH_COPLANAR_STARTSTENCILPASS}Dw(){const t=this.gE;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}Lw(){this.wf=BATCH_COPLANAR_STARTCOLORPASS}Nw(){const t=this.gE;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}Fw(){this.wf=BATCH_COPLANAR_RESTORE}kw(){const t=this.gE;t.disable(t.STENCIL_TEST)}Bw(t,e,s,i,r){this.wf=BATCH_SET_SCISSOR,this.yI=t?1:0;const n=this.EI;n[0]=e,n[1]=s,n[2]=i,n[3]=r}$w(){const t=this.gE,e=this.EI;1===this.yI?(t.enable(t.SCISSOR_TEST),t.scissor(e[0],e[1],e[2],e[3])):t.disable(t.SCISSOR_TEST)}Ww(){switch(this.wf){case 1:return void this.MI();case 2:return void this.vI();case 3:return void this.GI();case 4:return void this.NI();case 5:return void this.kI();case 6:return void this.$I();case 7:return void this.UI();case 8:return void this.HI();case 9:return void this.YI();case 10:return void this.JI();case 11:return void this.QI();case 12:return void this.iw();case 13:return void this.ow();case 14:return void this.lw();case 15:return void this.KI();case 16:return void this.Aw();case 17:return void this.fw();case 18:return void this.mw();case 19:return void this.Sw();case 20:return void this._w();case 21:return void this.DI();case 22:return void this.Mw();case 23:return void this.xw();case 24:return void this.Pw();case 25:return void this.Dw();case 26:return void this.Nw();case 27:return void this.kw();case 28:return void this.$w();case 29:return void this.ww()}}}}{let fillOrStrokeRect2=function(t,e,s,i,r,n){e?t.strokeRect(s,i,r,n):t.fillRect(s,i,r,n)},ptToPx2=function(t){return t*(4/3)},getOffsetParam2=function(t,e){t=t.trim();const s=parseFloat(t);return isFinite(s)?t.endsWith("%")?e*s/100:s:0};fillOrStrokeRect=fillOrStrokeRect2,ptToPx=ptToPx2,getOffsetParam=getOffsetParam2;const C33=self.Fe,MAX_TEXTURE_SIZE=4096,EXTRA_LINE_HEIGHT=4,GENERIC_FONT_FAMILIES=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),DEFAULT_OPTS={timeout:60},tempColor=new C33.Ko(0,0,0,1),VALID_HORIZ_ALIGNMENTS=new Set(["left","center","right"]),VALID_VERT_ALIGNMENTS=new Set(["top","center","bottom"]),VALID_WORD_WRAP_MODES=new Set(["word","cjk","character"]),VALID_TEXT_DIRECTIONS=new Set(["ltr","rtl"]),allRendererTexts=new Set;C33.FontManager&&C33.FontManager.addEventListener("fontload",t=>{const e=t.font.lf();for(const s of allRendererTexts)(s.Uw()||C33.Ir(s.Vw(),e))&&s.Hw()});let didCheckFoundBoundingBoxSupport=!1,supportsFontBoundingBoxMeasurements=!1;C33.l1.bS=class{constructor(t,e){e=Object.assign({},DEFAULT_OPTS,e),this.xS=t,this.jw="Arial",this.Xw=16,this.Yw=1,this.qw=0,this.Kw=!1,this.zw=!1,this.Jw="black",this.Zw=!1,this.um=null,this.Qw=!0,this.tR=null,this.eR=new Set,this.sR="left",this.iR="top",this.Sf="",this.rR=null,this.nR=C33.Cn(C33.am),this.hR="word",this.oR="ltr",this.aR=!1,this.lR=!1,this.cR=!1,this.uR=-1,this.fR=0,this.dR=0,this.pR=0,this.eC=0,this.sC=0,this.mR=1,this.CR=null,this.gR=null,this.SR=null,this.yR=null,this.TR=-1,this._R=-1,this.ER="",this.AR="",this.IR="",this.wR=1,this.RR=1,this.MR=t=>this.bR(t),this.VT=null,this.vR=new C33.Rect,this.xR=1,this.GR=new C33.f0(()=>{this.PR(),this.OR(8,8)},e.timeout),this.DR=null,this.LR=!1,allRendererTexts.add(this)}gn(){this.tR=null,this.eR.clear(),this.um=null,this.rR=null,this.CR=null,this.gR=null,this.SR=null,this.yR=null,this.MR=null,this.GR.gn(),this.DR=null,this.PR(),this.nR.fu(),this.nR=null,this.xS=null,this.LR=!0,allRendererTexts.delete(this)}NR(){this.cR=!0}FR(){this.NR(),this.lR=!0}Hw(){this.FR(),this.aR=!0}kR(t){if(this.Zw!==(t=!!t)){this.Zw=t;const e=this.Zw?"alphabetic":"top";this.gR&&(this.gR.textBaseline=e),this.SR&&(this.SR.textBaseline=e),this.Hw()}}Uw(){return this.Zw}Cm(t){this.um!==t&&(this.um=t,this.nR.Cm(t),this.um&&this.um.qC()&&this.um.KC().then(()=>this.NR()),this.Hw())}BR(t){this.Qw!==(t=!!t)&&(this.Qw=t,this.NR())}$R(t){this.jw!==(t=t||"serif")&&(this.jw=t,this.Hw())}Vw(){return this.jw}WR(t){this.Xw!==(t=t<.1?.1:t)&&(this.Xw=t,this.Hw())}UR(){return this.Xw}VR(t){this.Yw!==t&&(this.Yw=t,this.Hw())}HR(t){this.qw!==t&&(this.qw=t,this.FR())}jR(){return this.qw}YR(t){this.Kw!==(t=!!t)&&(this.Kw=t,this.Hw())}qR(){return this.Kw}KR(t){this.zw!==(t=!!t)&&(this.zw=t,this.Hw())}zR(){return this.zw}JR(t){t=Math.floor(t),this.uR!==t&&(this.uR=t,this.NR())}ZR(){return this.uR}QR(t,e){let s=[];(this.Kw||e.gC("b"))&&s.push("bold"),(this.zw||e.gC("i"))&&s.push("italic");const i=e.CC("size"),r=(i?parseFloat(i.param):this.Xw)*this.Yw;s.push(t?r+"pt":r*this.tM()+"pt");let n=this.jw,h=e.CC("font");return h&&h.param&&(n=h.param,this.tR)&&!this.eR.has(n)&&(this.tR(n),this.eR.add(n)),n&&(GENERIC_FONT_FAMILIES.has(n)?s.push(n):s.push('"'+n+'"')),s.join(" ")}My(t){t instanceof C33.Ko&&(t=t.Pa()),this.Jw!==t&&(this.Jw=t,this.NR())}eM(t,e,s){tempColor.ea(t,e,s),this.My(tempColor)}sM(t){if(!VALID_HORIZ_ALIGNMENTS.has(t))throw new Error("invalid horizontal alignment");this.sR!==t&&(this.sR=t,this.FR())}iM(){return this.sR}rM(t){if(!VALID_VERT_ALIGNMENTS.has(t))throw new Error("invalid vertical alignment");this.iR!==t&&(this.iR=t,this.FR())}nM(){return this.iR}hM(t){if(!VALID_WORD_WRAP_MODES.has(t))throw new Error("invalid word wrap mode");this.hR!==t&&(this.hR=t,this.Hw())}oM(){return this.hR}aM(t){if(!VALID_TEXT_DIRECTIONS.has(t))throw new Error("invalid text direction");this.oR!==t&&(this.oR=t,this.gR&&(this.gR.direction=this.oR),this.SR&&(this.SR.direction=this.oR),this.Hw())}lM(){return this.oR}_f(t){this.Sf!==t&&(this.Sf=t,this.Hw())}cM(){return this.Sf}tM(){return this.xR*this.mR*self.devicePixelRatio}uM(n,h,o){if(void 0===o&&(o=1),!(n<=0||this.dR===n&&this.pR===h&&this.mR===o)){let t=this.dR,e=(this.dR=n,this.pR=h,this.mR=o,self.devicePixelRatio),s=(this.eC=this.dR*this.mR*e,this.sC=this.pR*this.mR*e,Math.max(this.eC,this.sC)),i=Math.min(this.xS.QT(),MAX_TEXTURE_SIZE),r=1;i<s&&(r=i/s,this.eC=Math.min(this.eC*r,i),this.sC=Math.min(this.sC*r,i)),this.xR=r,this.dR!==t?this.Hw():this.FR()}}Sm(){return this.eC}vm(){return this.sC}fM(){return this.mR}dM(){return this.pM(),this.nR.Qm()}mM(){return this.pM(),this.nR.tC()+this.nR.pm()*(this.qw+EXTRA_LINE_HEIGHT)-this.qw}CM(){this.pM();let t=0;for(const e of this.nR.fm())for(const s of e.Lm())t+=s.Nm();return t}z_(){return this.GR.g0(),this.gM(),this.VT}SM(t,e){this.pM();const s=this.tM(),i=this.nR.fm();for(const r of i){const n=r.Gm()*s;if(e>=r.dC()-r.vm()*s+n&&e<r.dC()+n)for(const h of r.Lm())if(t>=h.uC()&&t<h.uC()+h.Sm()*s)return h}return null}*yM(t){this.pM();const e=this.nR.fm();for(const s of e)for(const i of s.Lm()){const r=i.CC("tag");r&&C33.Ir(r.param,t)&&(yield i)}}TM(t,e){for(const s of this.yM(t)){if(0===e)return s;--e}return null}_M(t){let e=0;for(const s of this.yM(t))++e;return e}gM(){this.VT&&!this.cR&&!this.lR&&!this.aR||this.LR||this.eC<=0||this.sC<=0||(this.cR=!1,this.EM())}EM(){this.LR||(this.pM(),this.OR(Math.max(C33.Un(Math.ceil(this.eC)),128),Math.max(C33.Un(Math.ceil(this.sC)),64)),this.AM(),this.IM(),this.GR.g0())}OR(t,e){this.CR||(this.CR=C33.Fo(16,16));let s=!1;this.TR===t&&this._R===e||(this.TR=t,this._R=e,this.CR.width=t,this.CR.height=e,s=!0),this.gR||(this.gR=this.CR.getContext("2d"),s=!0),s?(this.gR.textBaseline=this.Zw?"alphabetic":"top",this.gR.direction=this.oR,this.gR.font=this.ER,this.gR.fillStyle=this.IR,this.gR.strokeStyle=this.IR,this.gR.globalAlpha=this.wR,this.gR.lineWidth=this.RR):this.gR.clearRect(0,0,t,e)}wM(){this.SR||(this.SR=C33.Fo(16,16).getContext("2d"),this.yR=C33.Fo(16,16).getContext("2d"),this.SR.textBaseline=this.Zw?"alphabetic":"top",this.yR.textBaseline="top",this.SR.direction=this.oR,this.yR.direction=this.oR)}RM(t){this.AR!==t&&(this.AR=t,this.SR.font=t,this.yR.font=t)}MM(){if(!didCheckFoundBoundingBoxSupport){didCheckFoundBoundingBoxSupport=!0,this.wM();const t=this.SR.measureText("test");supportsFontBoundingBoxMeasurements="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return supportsFontBoundingBoxMeasurements}pM(){this.bM(),this.vM()}bM(){this.aR&&(this.wM(),!this.Zw||this.rR&&this.rR.toString()===this.Sf||(this.rR=new C33.Br(this.Sf,{Wp:!0})),this.nR.am(this.Zw?this.rR.Zp():this.Sf,this.MR,this.dR,this.hR,0),this.aR=!1)}vM(){this.lR&&(this.xM(),this.lR=!1)}bR(t){let e=t.Im()?t.Vm().join(""):" ",s=(this.RM(this.QR(!0,t)),t.CC("size")),i=(s?parseFloat(s.param):this.Xw)*this.Yw,r=this.SR.measureText(e),n=0;if(this.Zw&&this.MM()){const h=this.yR.measureText(e);n=r.fontBoundingBoxAscent-h.fontBoundingBoxAscent}return{width:r.width,height:ptToPx2(i),fontBoundingBoxAscent:r.fontBoundingBoxAscent||0,fontBoundingBoxDescent:r.fontBoundingBoxDescent||0,Am:n}}GM(t){this.ER!==t&&(this.ER=t,this.gR.font=t)}PM(t){this.IR!==t&&(this.IR=t,this.gR.fillStyle=t,this.gR.strokeStyle=t)}OM(t){this.wR!==t&&(this.wR=t,this.gR.globalAlpha=t)}DM(t){this.RR!==t&&(this.RR=t,this.gR.lineWidth=t)}xM(){let i=this.tM(),r=(EXTRA_LINE_HEIGHT+this.qw)*i,n=0,h=this.nR.fm();if(0!==h.length){for(const e of h){e.cC(NaN),e.fC(NaN);for(const o of e.Lm())o.cC(NaN),o.fC(NaN)}let t=this.Zw&&this.MM(),s=h[0].vm()*i;if("center"===this.iR){const a=h.reduce((t,e)=>t+e.vm()*i+r,0)-r;n=Math.max(this.sC/2-a/2,0),t&&(s=h[0].Pm()*i)}else if("bottom"===this.iR){const l=h.reduce((t,e)=>t+e.vm()*i+r,0)-this.qw*i,c=t?h.at(-1).Gm()*i:0;n=this.sC-l-c-2}for(let t=0,e=h.length;t<e;++t){const u=h[t],f=u.vm()*i,d=n;if(this.Zw){if(n+=0===t?s:f,0<t&&n>this.sC-EXTRA_LINE_HEIGHT*i)break}else if(0<t&&n>=this.sC-f)break;0<=d&&this.LM(u,n,i),this.Zw||(n+=f),n+=r}}}LM(t,e,s){let i=0;"center"===this.sR?i=Math.floor((this.eC-t.Sm()*s)/2):"right"===this.sR&&(i=this.eC-t.Sm()*s),t.cC(i),t.fC(e);for(const r of"ltr"===this.oR?t.Lm():t.aC())this.NM(r,i,e,s),i+=r.Sm()*s}NM(t,e,s,i){const r=t.CC("offsetx"),n=(e+=r?getOffsetParam2(r.param,t.vm())*i:0,t.CC("offsety"));if(s+=n?getOffsetParam2(n.param,t.vm())*i:0,t.Rm()){const h=t.CC("iconoffsety");s+=h?getOffsetParam2(h.param,t.vm())*i:.2*t.vm()*i}t.cC(e),t.fC(s)}AM(){this.gR.imageSmoothingEnabled=this.Qw,this.gR.imageSmoothingQuality="high",this.fR=0;const t=this.tM(),e=this.nR.fm();for(const s of e)this.FM(s,t)}FM(t,e){const s=t.uC(),i=t.dC();if(Number.isFinite(s)&&Number.isFinite(i))for(const r of"ltr"===this.oR?t.Lm():t.aC())this.kM(r,e,t.vm())}kM(h,o,a){const l=this.gR,c=h.uC(),u=h.dC();if(Number.isFinite(c)&&Number.isFinite(u)){let t=a/16,e=h.Sm()*o,s=h.vm()*o,i=h.vm()/16,r=(EXTRA_LINE_HEIGHT+this.qw)*o,n=h.Im()?h.Vm():null;if(-1!==this.uR){if(this.fR>=this.uR)return;h.Im()&&this.fR+n.length>this.uR&&(n=n.slice(0,this.uR-this.fR),e=this.bR(h).width*o),this.fR+=h.Nm()}const f=h.CC("background"),d=h.gC("u"),p=h.gC("s");if((!h.Im()||!C33.J3(n)||f||d||p)&&!h.gC("hide")){const m=h.CC("color"),C=h.CC("opacity"),g=(this.OM(C?parseFloat(C.param)/100:1),f&&(this.PM(f.param),l.fillRect(c,u-s,e,s+r)),h.CC("linethickness")),S=g?parseFloat(g.param):1,y=h.gC("stroke");if(y&&this.DM(.5*i*S*this.tM()),h.Im()){const T=n.join("");if(this.GM(this.QR(!1,h)),!y){this.DM(.5*i*S*this.tM());const _=h.CC("outlineback");_&&(this.PM(_.param),this.BM(!0,T,c,u,e))}if(this.PM(m?m.param:this.Jw),this.BM(y,T,c,u,e),!y){this.DM(.5*i*S*this.tM());const E=h.CC("outline");E&&(this.PM(E.param),this.BM(!0,T,c,u,e))}}else if(h.Rm()&&0<h.Sm()){const A=h.wC(this.um);A&&l.drawImage(A,c,u-s,e,s)}if(this.PM(m?m.param:this.Jw),d&&fillOrStrokeRect2(l,y,c,u+o*t,e,o*t*S),p){const I=u-s/4,w=o*i,R=I+w/2;l.fillRect(c,R-w*S/2,e,w*S)}}}}BM(t,e,s,i,r){"rtl"===this.oR&&(s+=r),t?"Gecko"===C33.ds._s?this.gR.strokeText(e,s,i,r):this.gR.strokeText(e,s,i):"Gecko"===C33.ds._s?this.gR.fillText(e,s,i,r):this.gR.fillText(e,s,i)}IM(){this.xS.$M()||(this.VT||(this.VT=this.xS.B_(this.CR.width,this.CR.height,{BT:!0,$T:"high"})),this.xS.WM(this.CR,this.VT),this.vR.set(0,0,this.eC/this.VT.Sm(),this.sC/this.VT.vm()),this.DR&&this.DR())}UM(){return this.vR}PR(){this.VT&&(this.xS.$M()||this.xS.H_(this.VT),this.VT=null)}static by(){for(const t of allRendererTexts)t.PR()}static VM(){return allRendererTexts.values()}}}{const C33=self.Fe;class WebGLRealTimeElapsedQuery{constructor(t){this.gE=t.t_(),this.HM=t.e_(),this.jM=t.XM(),this.YM=null,this.C0=!1,this.qM=!1,this.KM=0,1===this.HM?this.YM=this.jM.createQueryEXT():this.YM=this.gE.createQuery()}gn(){this.zM(),this.gE=null,this.jM=null,this.qM=!1}zM(){this.YM&&(1===this.HM?this.jM.deleteQueryEXT(this.YM):this.gE.deleteQuery(this.YM),this.YM=null)}Cw(){if(this.C0)throw new Error("query already active");1===this.HM?this.jM.beginQueryEXT(this.jM.TIME_ELAPSED_EXT,this.YM):this.gE.beginQuery(this.jM.TIME_ELAPSED_EXT,this.YM),this.C0=!0}yw(){if(!this.C0)throw new Error("query not active");1===this.HM?this.jM.endQueryEXT(this.jM.TIME_ELAPSED_EXT):this.gE.endQuery(this.jM.TIME_ELAPSED_EXT),this.C0=!1}JM(){if(this.YM&&!this.qM&&!this.C0){let t;t=1===this.HM?this.jM.getQueryObjectEXT(this.YM,this.jM.QUERY_RESULT_AVAILABLE_EXT):this.gE.getQueryParameter(this.YM,this.gE.QUERY_RESULT_AVAILABLE);const e=this.gE.getParameter(this.jM.GPU_DISJOINT_EXT);t&&!e&&(1===this.HM?this.KM=this.jM.getQueryObjectEXT(this.YM,this.jM.QUERY_RESULT_EXT):this.KM=this.gE.getQueryParameter(this.YM,this.gE.QUERY_RESULT),this.KM/=1e9,this.qM=!0),(t||e)&&this.zM()}}ZM(){return this.qM}QM(){if(this.qM)return this.KM;throw new Error("no result available")}}C33.l1.tb=class{constructor(t){this.xS=t,this.ug=t.CS(),this.C0=!1,this.eb=null,this.sb=!1,this.ib=null,this.rb=[]}gn(){for(const t of this.rb)t instanceof WebGLRealTimeElapsedQuery&&t.gn();C33.Vh(this.rb),this.eb=null,this.ib=null,this.xS=null}Cw(){if(this.C0)throw new Error("query already active");const t=this.xS.nb();0<t.length?(this.sb=!0,this.eb=t.at(-1),this.eb.hb(),this.eb.rb.push(this)):(this.sb=!1,this.eb=null),this.C0=!0,t.push(this),this.ob()}yw(){if(!this.C0)throw new Error("query not active");const t=this.xS.nb().pop();if(t!==this)throw new Error("can only end most nested query");this.C0=!1,this.hb(),this.eb&&(this.eb.ob(),this.eb=null)}ob(){this.ib=C33.Cn(WebGLRealTimeElapsedQuery,this.xS),this.rb.push(this.ib),this.ib.Cw()}hb(){this.ib.yw(),this.ib=null}JM(){for(const t of this.rb)t.JM()}ab(){return this.sb}ZM(){return this.rb.every(t=>t.ZM())}QM(){return this.rb.reduce((t,e)=>t+e.QM(),0)}CS(){return this.ug}}}{const C33=self.Fe;C33.l1.lb=class{constructor(t,e=1e3){this.xS=t,this.cb=e,this.ub=[],this.xS.fb(this)}gn(){this.fu(),this.xS.pb(this),this.xS=null}fu(){for(const t of this.ub)t.gn();C33.Vh(this.ub)}mb(){const t=new C33.l1.tb(this.xS);if(this.ub.push(t),this.ub.length>this.cb){const e=this.ub.shift();e.gn()}return t}Cb(t){for(const e of this.ub){if(e.CS()>=t)return;if(e.ab())return;e.JM()}}gb(t,e){if(e<=t)return NaN;let s=0;for(const i of this.ub){if(i.CS()>=e)break;if(!(i.CS()<t)){if(!i.ZM())return NaN;s+=i.QM()}}return s}Sb(s){for(let t=0,e=this.ub.length;t<e;++t){const i=this.ub[t];if(!(i.CS()<s))return void(0<t&&this.ub.splice(0,t));i.gn()}}}}{let CheckPendingPolls2=function(){pollRafId=-1;for(const t of pendingPolls)t.yb()&&(t.resolve(),pendingPolls.delete(t));0<pendingPolls.size&&(pollRafId=self.requestAnimationFrame(CheckPendingPolls2))},C33=(CheckPendingPolls=CheckPendingPolls2,self.Fe),assert=self.assert,glMatrix=self.ye,vec32=glMatrix.Me,vec42=glMatrix.ve,mat42=glMatrix.Ae,DEFAULT_WEBGLRENDERER_OPTS={powerPreference:"default",Tb:!0,alpha:!1,depth:!1,_b:!1,Eb:2,failIfMajorPerformanceCaveat:!1},VALID_POWER_PREFERENCES=new Set(["default","low-power","high-performance"]),MAX_VERTICES=8e3,MAX_INDICES=MAX_VERTICES/2*3,MAX_POINTS=8e3,LAST_POINT=MAX_POINTS-4,PARTIAL_TEXTURE_UPLOAD_CHUNK_SIZE=262144,defaultTexCoordsQuad=new C33.ac(0,0,1,0,1,1,0,1),tmpProjection=mat42.create(),tmpModelView=mat42.create(),tmpQuad=new C33.ac,tmpRect=new C33.Rect,loseContextExtension=null,pendingPolls=(C33.isDebug&&(self.Ab=function(){loseContextExtension?loseContextExtension.loseContext():console.warn("WEBGL_lose_context not supported")},self.Ib=function(){loseContextExtension?loseContextExtension.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),pollRafId=-1;C33.l1.wb=class extends C33.l1.M1{constructor(t,e){if(super(e),e=Object.assign({},DEFAULT_WEBGLRENDERER_OPTS,e),!VALID_POWER_PREFERENCES.has(e.powerPreference))throw new Error("invalid power preference");let s={alpha:!!e.alpha,depth:!1,antialias:!1,powerPreference:e.powerPreference,failIfMajorPerformanceCaveat:!!e.failIfMajorPerformanceCaveat},i=null,r=0;if(2<=e.Eb&&(i=t.getContext("webgl2",s),r=2),i||(i=t.getContext("webgl",s),r=1),!i)throw new Error("renderer-unavailable (could not get WebGL context)");this.gE=i,this.Rb=i.getContextAttributes(),this.Mb=i.getParameter(i.VERSION),this.HM=r,this.bb=vec42.create(),this.vb=!1,this.xb=mat42.create(),this.Gb=!!e.depth,this.Pb=!(!e.depth||!e._b),this.Ob=this.Gb,this.Db=!1,this.Lb=null,this.Nb=!0,this.Fb=0,this.kb=0,this.TE=null,this._E=null,this.Bb=null,this.EE=null,this.$b=new Float32Array(MAX_VERTICES*this.dS()),this.Wb=new Uint16Array(MAX_INDICES),this.Ub=new Float32Array(2*MAX_VERTICES),this.Vb=new Float32Array(4*MAX_POINTS),this.Hb=0,this.jb=0,this.Xb=0,this.Yb=0,this.qb=null,this.Kb=null,this.zb=[],this.Jb=0,this.Zb=0,this.Qb=null,this.tv=0,this.SI=C33.Cn(C33.l1.dI,this),this.sv=C33.Cn(C33.Ko,1,1,1,1),this.rv=null,this.rw=null,this.nv=0,this.hv=0,this.ov=new C33.Rect,this.av=C33.Cn(C33.Rect,0,0,-1,-1),this.lv=0,this.cv=-1,this.uv=0,this.dv=0,this.pv=0,this.Cv="(unavailable)",this.gv="(unavailable)",this.Sv=[],this.yv=!1,this.Tv=null,this._v=null,this.Ev=null,this.Av=null,this.Iv=null,this.wv=null,this.Rv=0,this.Mv=!!e.Tb,this.jM=null,this.bv=new Set,this.vv=[],this.pg(this.Wb)}ES(){return!0}async gg(){super.gg();const t=this.gE,e=this.dS(),s=(this.sv.ta(1,1,1,1),this.rv=null,this.rw=null,this.Hb=0,this.Xb=0,this.Yb=MAX_VERTICES*e-4*e,C33.Vh(this.zb),this.Jb=0,this.Zb=0,this.qb=null,this.Qb=null,this.ov.set(0,0,1,1),this.tv=0,this.SI),i=(s.dA=null,s.X_=null,s.Y_=null,vec42.set(s.mI,1,1,1,1),s.clearColor.ta(0,0,0,0),s.CI.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.nv=t.ONE,this.hv=t.ONE_MINUS_SRC_ALPHA,this.xv(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.Gb?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.Ob=this.Gb,this.Db=!1,this.EE=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.EE),t.bufferData(t.ARRAY_BUFFER,this.Vb.byteLength,t.DYNAMIC_DRAW),this.TE=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.TE),t.bufferData(t.ARRAY_BUFFER,this.$b.byteLength,t.DYNAMIC_DRAW),this._E=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._E),t.bufferData(t.ARRAY_BUFFER,this.Ub.byteLength,t.DYNAMIC_DRAW),this.Bb=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.Bb),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.Wb,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.cv=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),r=(this.uv=i[0],this.dv=i[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),n=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),h=(this.pv=r&&n?Math.min(r.precision,n.precision):0,2048<this.dv&&(this.dv=2048),this.Sv=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(h&&(this.Cv=t.getParameter(h.UNMASKED_VENDOR_WEBGL),this.gv=t.getParameter(h.UNMASKED_RENDERER_WEBGL)),this.Tv=t.getExtension("KHR_parallel_shader_compile"),C33.isDebug&&(loseContextExtension=t.getExtension("WEBGL_lose_context")),this.Mv&&(1===this.e_()?this.jM=t.getExtension("EXT_disjoint_timer_query"):this.jM=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this._v=t.getExtension("EXT_texture_filter_anisotropic"),this._v?this.Rv=t.getParameter(this._v.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.Rv=0,this.e_()<2&&this.Gb&&this.Pb&&(this.Ev=t.getExtension("WEBGL_depth_texture"),!this.Ev))throw new Error("no depth texture support");this.e_()<2&&(this.Av=t.getExtension("EXT_frag_depth"),this.Iv=t.getExtension("OES_standard_derivatives"),this.wv=t.getExtension("EXT_shader_texture_lod"));let o=C33.l1.uE,a=o.LA(!1),l=o.FA(),c=a,u=o.XA(),f=o.HA(),d=o.$A(),p=o.LA(!0),m=!1;this.Gb&&(this.e_()<2?this.Av&&(l=o.kA(),u=o.YA(),d=o.WA(),m=!0):(c=o.NA(),l=o.BA(),u=o.qA(),f=o.jA(),d=o.UA(),p=o.NA(!0)));const C=o.VA(this.e_(),m,this.Iv&&this.wv),g=2<=this.e_()?o.NA():a,S=[[l,c,"<default>"],[l,c,"<default-device-transform>"],[u,f,"<point>"],[o.KA(),a,"<fill>"],[o.zA(),a,"<lineargradient>"],[o.JA(),a,"<penumbra>"],[o.QA(),a,"<hardellipse>"],[o.tI(),a,"<hardellipseoutline>"],[o.eI(),a,"<smoothellipse>"],[o.sI(),a,"<smoothellipseoutline>"],[o.ZA(),a,"<smoothline>"],[d,p,"<tilemap>"],[C,g,"<tilerandomization>"]],y=await Promise.all(S.map(t=>this.Gv({src:t[0],dE:t[1],name:t[2]})));this.B1=y[0],this.Kb=y[1],this.W1=y[2],this.H1=y[3],this.j1=y[4],this.X1=y[5],this.Y1=y[6],this.q1=y[7],this.K1=y[8],this.z1=y[9],this.J1=y[10],this.U1=y[11],this.V1=y[12],this.Wg()}async Gv(t){const e=await C33.l1.uE.CE(this,t);return this.Fg(e),e}Pv(){this.qb=null}uM(t,e,s){if(this.eC!==t||this.sC!==e||s){this.mS();const i=this.gE,r=this.SI;this.eC=t,this.sC=e,this.Ov(0,0,t,e),this.Pg(this.xb,t/e),this.Dv(this.xb),this.Kb&&(i.useProgram(this.Kb.mA()),this.Kb.aA(this.G1),this.qb=this.Kb,this.SI.dA=this.Kb),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE0),this.rv=null,this.rw=null,this.Gb&&this.Nb&&this.Lv(this.eC,this.sC),this.Qb&&this.Qb.V_(this.eC,this.sC),i.bindFramebuffer(i.FRAMEBUFFER,null),this.Qb=null,r.X_=null,r.Y_=null}}Lv(t,e){const s=this.gE;this.Lb&&this.Fb===t&&this.kb===e||(this.Pb?(this.Lb&&s.deleteTexture(this.Lb),this.Lb=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.Lb),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),2<=this.e_()?s.texImage2D(s.TEXTURE_2D,0,s.DEPTH24_STENCIL8,t,e,0,s.DEPTH_STENCIL,s.UNSIGNED_INT_24_8,null):this.Ev&&s.texImage2D(s.TEXTURE_2D,0,s.DEPTH_STENCIL,t,e,0,s.DEPTH_STENCIL,this.Ev.UNSIGNED_INT_24_8_WEBGL,null),s.bindTexture(s.TEXTURE_2D,null)):(this.Lb&&s.deleteRenderbuffer(this.Lb),this.Lb=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,this.Lb),s.renderbufferStorage(s.RENDERBUFFER,2<=this.HM?s.DEPTH24_STENCIL8:s.DEPTH_STENCIL,t,e),s.bindRenderbuffer(s.RENDERBUFFER,null)),this.Fb=t,this.kb=e)}Nv(t,e){this.Gb&&(this.Nb=!1,this.Lv(t,e))}Fv(){this.Gb&&(this.Nb=!0,this.Lv(this.eC,this.sC))}Ov(t,e,s,i){const r=this.bb;if(r[0]!==t||r[1]!==e||r[2]!==s||r[3]!==i){const n=this.kv();n.FI(t,e,s,i),vec42.set(r,t,e,s,i),this.Zb=0}}Mg(t){super.Mg(t),this.Pg(this.xb,this.eC/this.sC)}Ag(t){super.Ag(t),this.Pg(this.xb,this.eC/this.sC)}wg(t){super.wg(t),this.Pg(this.xb,this.eC/this.sC)}Dv(t){if(!mat42.W(this.G1,t)){const e=this.kv();e.BI(t),mat42.I(this.G1,t),this.Zb=0,this.vb=!0}}Bv(){let t,e,s,i=this.Qb;s=(null===i?(t=this.xb,e=this.Sm(),this):(t=i.J_(),e=i.Sm(),i)).vm(),this.Dv(t),this.Ov(0,0,e,s)}$v(t){if(!mat42.W(this.P1,t)){const e=this.kv();e.WI(t),mat42.I(this.P1,t),this.Zb=0,this.vb=!0}}Wv(){this.vb=!1}Uv(){return this.vb}j_(){return this.SI}kv(){const t=this.zb;return this.Jb===t.length&&t.push(new C33.l1.gI(this.SI)),t[this.Jb++]}mS(){0===this.Jb||this.$M()||(this.Vv(),this.Hv(),this.Jb=0,this.Hb=0,this.jb=0,this.Xb=0,this.Zb=0)}Vv(){const t=this.gE;0<this.Xb&&(t.bindBuffer(t.ARRAY_BUFFER,this.EE),t.bufferSubData(t.ARRAY_BUFFER,0,this.Vb.subarray(0,this.Xb))),0<this.Hb&&(t.bindBuffer(t.ARRAY_BUFFER,this.TE),t.bufferSubData(t.ARRAY_BUFFER,0,this.$b.subarray(0,this.Hb)),t.bindBuffer(t.ARRAY_BUFFER,this._E),t.bufferSubData(t.ARRAY_BUFFER,0,this.Ub.subarray(0,this.jb)))}Hv(){const s=this.zb;for(let t=0,e=this.Jb;t<e;++t)s[t].Ww()}jv(){return this.sv.Sa()}Xv(t,e,s,i){const r=this.sv;if(!r.Ia(t,e,s,i)){r.ta(t,e,s,i);const n=this.kv();n.xI(r),this.Zb=0,this.Q1=null}}Yv(t){const e=this.sv;if(e.Sa()!==t){e.ua(t);const s=this.kv();s.xI(e),this.Zb=0,this.Q1=null}}My(t){const e=this.sv;if(!e.equals(t)){e.set(t);const s=this.kv();s.xI(e),this.Zb=0,this.Q1=null}}qv(){this.Xv(1,1,1,1)}Kv(){return this.sv}zv(t){if(t!==this.rv){const e=this.kv();e.bI(t),this.rv=t,this.Zb=0}}n_(){this.rv=null}Ry(t){const e=this.g2(t);this.Jv(e[0],e[1])}Zv(t){const e=this._2(t);this.Jv(e.m2,e.C2)}Jv(t,e){if(t!==this.nv||e!==this.hv){const s=this.kv();s.LI(t,e),this.nv=t,this.hv=e,this.Zb=0,this.Q1=null}}Qv(){return this.nv===this.gE.ONE&&this.hv===this.gE.ONE_MINUS_SRC_ALPHA}ix(){this.Jv(this.gE.ONE,this.gE.ONE_MINUS_SRC_ALPHA)}nx(){this.Jv(this.gE.SRC_ALPHA,this.gE.ONE_MINUS_SRC_ALPHA)}hx(){this.Jv(this.gE.ONE,this.gE.ZERO)}Rect(t){this.ox(t.Gl(),t.Pl(),t.Ol(),t.Dl())}ox(t,e,s,i){this.fS(t,e,s,e,s,i,t,i)}ux(){let t=this.Hb;if(t>=this.Yb&&(this.mS(),t=0),1===this.Zb)this.zb[this.Jb-1].TI+=6;else{const e=this.kv();e.RI(t,6),this.Zb=1}}mx(t){t.Gc(this.$b,this.Hb,this.sg+this.ig),this.Hb+=12}ac(t){this.ux(),this.mx(t),defaultTexCoordsQuad.Ta(this.Ub,this.jb),this.jb+=8}fS(t,e,s,i,r,n,h,o){this.ux();let a=this.$b,l=this.Hb,c=this.sg+this.ig;a[l++]=t,a[l++]=e,a[l++]=c,a[l++]=s,a[l++]=i,a[l++]=c,a[l++]=r,a[l++]=n,a[l++]=c,a[l++]=h,a[l++]=o,a[l++]=c,this.Hb=l,defaultTexCoordsQuad.Ta(this.Ub,this.jb),this.jb+=8}F2(t,e){this.ux(),this.mx(t),e.Fl(this.Ub,this.jb),this.jb+=8}Cx(t,e){this.ux(),this.mx(t),e.Ta(this.Ub,this.jb),this.jb+=8}gx(t,e,s,i,r,n,h,o,a,l,c,u,f){this.ux();let d=this.$b,p=this.Hb,m=this.sg+this.ig;d[p++]=t,d[p++]=e,d[p++]=m+s,d[p++]=i,d[p++]=r,d[p++]=m+n,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=c,d[p++]=m+u,this.Hb=p,f.Fl(this.Ub,this.jb),this.jb+=8}P2(t,e,s,i,r,n,h,o,a,l,c,u,f){this.ux();let d=this.$b,p=this.Hb,m=this.sg+this.ig;d[p++]=t,d[p++]=e,d[p++]=m+s,d[p++]=i,d[p++]=r,d[p++]=m+n,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=c,d[p++]=m+u,this.Hb=p,f.Ta(this.Ub,this.jb),this.jb+=8}Sx(i,r,n){const h=this.$b,o=this.Ub;if(n.length%3!=0)throw new Error("invalid index buffer length");for(let s=0,t=n.length;s<t;){const a=n[s++],l=n[s++],c=n[s++],u=3*a,f=3*l,d=3*c,p=2*a,m=2*l,C=2*c;this.ux();let t=this.Hb,e=this.jb;h[t++]=i[0+u],h[t++]=i[1+u],h[t++]=i[2+u],h[t++]=i[0+f],h[t++]=i[1+f],h[t++]=i[2+f],h[t++]=i[0+d],h[t++]=i[1+d],h[t++]=i[2+d],h[t++]=i[0+d],h[t++]=i[1+d],h[t++]=i[2+d],o[e++]=r[0+p],o[e++]=r[1+p],o[e++]=r[0+m],o[e++]=r[1+m],o[e++]=r[0+C],o[e++]=r[1+C],o[e++]=r[0+C],o[e++]=r[1+C],this.Hb=t,this.jb=e}}yx(t,e){this.w2(0),mat42.I(tmpProjection,this.G1),mat42.I(tmpModelView,this.P1),this.Bv();const[s,i]=this.Tx(this.Qb),r=this.Ng(0,0,this.yg(i),0,0,0,i);if(this.$v(r),"crop"===t&&this.Qb&&e){const n=this.eC/2,h=this.sC/2,o=e.Sm(),a=e.vm(),l=this.Qb.Sm(),c=this.Qb.vm(),u=Math.min(l,o),f=Math.min(c,a),d=Math.max(a-c,0),p=Math.max(c-a,0);tmpRect.set(-n,h-p,-n+u,h-f-p),tmpQuad.Pc(tmpRect),tmpRect.set(0,d,u,f+d),tmpRect.vt(o,a),this.F2(tmpQuad,tmpRect)}else{const m=s/2,C=i/2;this.ox(-m,C,m,-C)}this.Dv(tmpProjection),this.$v(tmpModelView)}_x(t){if(!this.ov.equals(t)){this.ov.I(t);const e=this.kv();e.qI(t),this.Zb=0}}Ex(){}Ax(t,e,s,i){this.Xb>=LAST_POINT&&this.mS();let r=this.Xb,n=this.sg+this.ig;if(2===this.Zb&&this.tv===n)this.zb[this.Jb-1].TI++;else{const o=this.kv();o.zI(r,n),this.Zb=2,this.tv=n}const h=this.Vb;h[r++]=t,h[r++]=e,h[r++]=s,h[r++]=i,this.Xb=r}Ug(t){if(this.qb!==t){const e=this.kv();e.ZI(t),this.qb=t,this.Zb=0,this.Q1=null}}Ix(){return this.qb}wx(){this.Ug(this.Kb)}Rx(t){const e=this.kv();e.OI(t),this.Zb=0}Mx(t,e,s=1){const i=this.kv();i.Tw(t,e,s),this.Zb=0}bx(t,e,s,i,r,n,h){if(this.qb!==this.U1)throw new Error("must set tilemap fill mode first");const o=this.kv();o.Ew(t,e,s,i,r,n,h),this.Zb=0}vx(t,e,s,i,r,n,h){if(this.qb!==this.V1)throw new Error("must set tile randomization mode first");const o=this.kv();o.Iw(t,e,s,i,r,n,h),this.Zb=0}xx(t,e,s,i,r,n,h,o,a,l,c){const u=this.qb;if(c%=10800,u.ZE&&!u.AA(e,s,i,r,n,h,o,a,l,c)){const f=this.kv(),d=(f.ew(),u.RA(e,s,i,r,n,h,o,a,l,c),f.EI),p=(d[0]=n,d[1]=h,e.Ta(d,2),d[6]=a,d[7]=l,s.Ta(d,12),f.AI),m=(r.Ta(p,0),p[1]);p[1]=p[3],p[3]=m,i.Ta(f.II,0),f.yI=c,f.TI=o,u.LE.QE()?f._I=t?t.z_():null:f._I=null,this.Zb=0}}Gx(t){const e=this.qb;if(0!==t.length&&!e.yA(t)){const s=this.kv();s.hw(),e._A(t),C33.Yh(s.wI,t),this.Zb=0}}Px(t,e,s,i){const r=this.kv();r.XI(t,e,s,i),this.Zb=0}fu(t){const e=this.kv();e.jI(t),this.Zb=0}Ox(){}pS(){super.pS(),this.gE.flush()}Dx(){if(this.Gb&&this.Qb&&this.Qb.eE()){const t=this.kv();t.Rw(this.Ob),this.Zb=0}}Lx(t){if(this.Ob!==(t=!!t)&&this.Gb){this.Ob=t;const e=this.kv();e.bw(t),this.Zb=0}}Nx(){return this.Ob}W_(){return this.Lb}U_(){return this.Pb}Fx(t){if(t=!!t,this.Pb&&this.Db!==t){if(t&&this.Nx())throw new Error("depth still enabled");this.Db=t;const e=this.kv();e.Gw(t),this.Zb=0}}kx(t,e,s,i,r=0){if(t=Math.floor(t),e=Math.floor(e),s=Math.floor(s),i=Math.floor(i),!this.av.xl(t,e,s,i)){this.av.Al(t,e,s,i);const n=r||this.Tx(this.Bx())[1],h=(e=n-e-i,this.kv());h.Bw(!0,t,e,s,i),this.Zb=0}}$x(){if(-1!==this.av.Ol()){this.av.set(0,0,-1,-1);const t=this.kv();t.Bw(!1,0,0,0,0),this.Zb=0}}Wx(){for(const t of this.bv)t.Cb(this.ug)}$M(){return!this.gE||this.gE.isContextLost()||this.yv}by(){super.Sg(),C33.l1.UT.by(),C33.l1.I_.by(),C33.l1.bS.by();for(const t of this.bv)t.fu();this.Sv=[],this.jM=null,this.Tv=null,this._v=null,this.Ev=null,this.Av=null,this.Iv=null,this.wv=null,this.Rv=0,this.Cv="(unavailable)",this.gv="(unavailable)",this.qb=null,this.Kb=null,this.Lb=null;for(const e of this.Z1.values())e.by()}async vy(){this.yv=!0,await this.gg(),this.yv=!1;for(const t of this.Z1.values())t.vy(this);this.uM(this.eC,this.sC,!0)}Ux(t,e){if(this.$M())throw new Error("context lost");this.mS();const s=C33.Cn(C33.l1.UT,this);return s.ZT(t,e),s}async Vx(i,r){if(this.$M())throw new Error("context lost");if(r=Object.assign({},r),C33.Xs.ImageBitmapOptions){let t=await createImageBitmap(i,{premultiplyAlpha:"premultiply"}),e=r.DT&&"clamp-to-edge"!==r.DT||r.LT&&"clamp-to-edge"!==r.LT,s=C33.Wn(t.width)&&C33.Wn(t.height);return this.s_()||s||!e?r.premultiplyAlpha=!1:C33.Xs.zs?(t=await createImageBitmap(i,{premultiplyAlpha:"premultiply",resizeWidth:C33.Un(t.width),resizeHeight:C33.Un(t.height)}),r.premultiplyAlpha=!1):t=await createImageBitmap(i,{premultiplyAlpha:"none"}),C33.jf(()=>this.Ux(t,r))}if(i instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await C33.No(i);i=t}return C33.jf(()=>this.Ux(i,r))}B_(t,e,s){this.mS();const i=C33.Cn(C33.l1.UT,this);return i.h_(t,e,s),i}WM(t,e,s){this.mS(),e.u_(t,s)}H_(t){t&&(t.C_(),0<t.g_()||(this.mS(),t===this.rv&&(this.gE.bindTexture(this.gE.TEXTURE_2D,null),this.rv=null),t===this.rw&&(this.gE.activeTexture(this.gE.TEXTURE1),this.gE.bindTexture(this.gE.TEXTURE_2D,null),this.gE.activeTexture(this.gE.TEXTURE0),this.rw=null),t.f_()))}Hx(t){let e=this.eC,s=this.sC,i=!0;if(t&&("number"==typeof t.width&&(e=Math.floor(t.width),i=!1),"number"==typeof t.height)&&(s=Math.floor(t.height),i=!1),e<=0||s<=0)throw new Error("invalid size");this.mS();const r=C33.Cn(C33.l1.I_,this);return r.F_(e,s,Object.assign({E_:i},t)),this.Qb=null,this.SI.X_=null,this.SI.Y_=null,r}jx(t,e=!0){if(t!==this.Qb){t&&t.sE()&&t.V_(this.eC,this.sC);const s=this.kv();s.VI(t),this.Qb=t,this.Zb=0,e&&this.Bv()}}Bx(){return this.Qb}Tx(t){return t?[t.Sm(),t.vm()]:[this.eC,this.sC]}Xx(t,e="stretch"){if(this.HM<2||this.Qb&&0<this.Qb.iE())this.hx(),this.qv(),this.Yx(t,e);else{const s=this.kv();s.uw(t,this.Qb,e),this.Zb=0}}Yx(t,e="stretch"){const s=t.z_();if(!s)throw new Error("not a texture-backed render target");this.zv(s),this.yx(e,s)}qx(t){if(!(this.HM<2)){const e=this.kv();e.aw(t.q_()),this.Zb=0}}Kx(t){this.jx(null),this.mS();const e=t.z_();e===this.rv&&(this.gE.bindTexture(this.gE.TEXTURE_2D,null),this.rv=null),e===this.rw&&(this.gE.activeTexture(this.gE.TEXTURE1),this.gE.bindTexture(this.gE.TEXTURE_2D,null),this.gE.activeTexture(this.gE.TEXTURE0),this.rw=null),t.f_()}async aE(t,e,s){this.mS();let i=this.Qb,r,n,h,o=(h=t?(r=t.Sm(),n=t.vm(),t.q_()):(r=this.Sm(),n=this.vm(),null),0),a=0,l=r,c=n;if(s){o=C33.En(Math.floor(s.Gl()),0,r-1),a=C33.En(Math.floor(s.Pl()),0,n-1);let t=s.width(),e=(t=0===t?r-o:C33.En(Math.floor(t),0,r-o),s.height());e=0===e?n-a:C33.En(Math.floor(e),0,n-a),l=t,c=e,a=n-(a+c)}let u=this.gE,f=(u.bindFramebuffer(u.FRAMEBUFFER,h),()=>{u.bindFramebuffer(u.FRAMEBUFFER,null),this.Qb=null,this.SI.X_=null,this.SI.Y_=null,this.jx(i)}),d;if(!e&&2<=this.e_()){u.bindFramebuffer(u.READ_FRAMEBUFFER,h);const p=u.createBuffer(),m=l*c*4,C=u.PIXEL_PACK_BUFFER,g=(u.bindBuffer(C,p),u.bufferData(C,m,u.STREAM_READ),u.readPixels(o,a,l,c,u.RGBA,u.UNSIGNED_BYTE,0),u.bindFramebuffer(u.READ_FRAMEBUFFER,null),u.bindBuffer(C,null),f(),u.fenceSync(u.SYNC_GPU_COMMANDS_COMPLETE,0));await this.mE(()=>u.getSyncParameter(g,u.SYNC_STATUS)===u.SIGNALED),u.deleteSync(g),d=new ImageData(l,c),u.bindBuffer(C,p),u.getBufferSubData(C,0,new Uint8Array(d.data.buffer),0,m),u.bindBuffer(C,null),u.deleteBuffer(p)}else d=new ImageData(l,c),u.readPixels(o,a,l,c,u.RGBA,u.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}zx(){this.Lx(!0);const t=this.kv();t.Ow(),this.Zb=0,this.lv=1}Jx(){this.Lx(!1);const t=this.kv();t.Lw(),this.Zb=0,this.lv=2}Zx(){return 2===this.lv}Qx(){this.Lx(!0);const t=this.kv();t.Fw(),this.Zb=0,this.lv=0}tG(t){if(this.eG()){const e=this.kv();e.pw(t),this.Zb=0}}sG(t){if(this.eG()){const e=this.kv();e.gw(t),this.Zb=0}}mE(e){const t=new Promise(t=>pendingPolls.add({resolve:t,yb:e}));return-1===pollRafId&&(pollRafId=self.requestAnimationFrame(CheckPendingPolls2)),t}AS(){return this.eC*this.sC*(this.Rb.alpha?4:3)}IS(){let t=0;for(const e of C33.l1.I_.lE())e.z_()||(t+=e.y_());return t}wS(){let t=0;for(const e of C33.l1.UT.T_())t+=e.y_();return t}iG(){return this.Mb}e_(){return this.HM}rG(){return"webgl"+this.e_()}s_(){return 2<=this.e_()}QT(){return this.cv}nG(){return this.uv}hG(){return this.dv}oG(){return 0!==this.pv}aG(){return this.pv}lG(){return this.Cv}cG(){return this.gv}uG(){if(2<=this.e_())return"webgl2";{const t=[];return this.Av&&t.push("EXT_frag_depth"),this.Iv&&t.push("OES_standard_derivatives"),this.wv&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}fG(){return this.Sv}eG(){return!!this.jM}XM(){return this.jM}pE(){return this.Tv}l_(){return this._v}c_(){return this.Rv}fb(t){this.bv.add(t)}pb(t){this.bv.delete(t)}nb(){return this.vv}t_(){return this.gE}xv(t){this.d2([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}dG(){return this.MS()}}}{const C33=self.Fe,DEFAULT_CTOR_OPTS={pG:null,mG:null,CG:null,getTime:null,gG:null};C33.l1.SG=class{constructor(t){t=Object.assign({},DEFAULT_CTOR_OPTS,t),this.yG=t.pG,this.TG=t.mG,this._G=t.CG,this.EG=t.getTime,this.AG=t.gG,this.IG=null,this.wG=new Set}MG(t){this.wG.add(t)}bG(t){this.wG.delete(t)}by(){this.IG=null;for(const t of this.wG)t.by()}vG(t){return this.yG?this.yG(t):[t.Sm(),t.vm()]}Bx(t){return this.TG(t)}xG(t,e){this._G(t,e)}GG(){return this.EG()}l3(t){this.AG(t)}PG(t,e,s){return e=Math.floor(e),s=Math.floor(s),!this.IG||this.IG.Sm()===e&&this.IG.vm()===s||(t.H_(this.IG),this.IG=null),null===this.IG&&(this.IG=t.Ux(null,{width:e,height:s,NT:"nearest",BT:!1})),this.IG}}}{const C33=self.Fe,assert=self.assert,glMatrix=self.ye,mat42=glMatrix.Ae,tempRect=C33.Cn(C33.Rect),tempRect2=C33.Cn(C33.Rect),tempRect3=C33.Cn(C33.Rect),tempRect4=C33.Cn(C33.Rect),tempMat4a=mat42.create(),tempMat4b=mat42.create(),DEFAULT_CTOR_OPTS={OG:null,DG:null,LG:null,NG:!1},DEFAULT_BUILDSTEPS_OPTS={FG:null,kG:!1,BG:!1,$G:!1,WG:!1,UG:!1,VG:!1};C33.l1.HG=class{constructor(t,e){e=Object.assign({},DEFAULT_CTOR_OPTS,e),this.T3=t,this.jG=e.OG,this.XG=e.DG,this.YG=e.LG,this.qG=null,this.KG=[],this.zG=[],this.JG=[],this.ZG=!1,this.Ey=0,this.QG=!1,this.tP=!1,this.eP=!1,this.sP=!1,this.iP=!1,this.rP=!1,this.vb=!1,this.nP=!1,this.hP=!1,this.oP=!1,this.aP=!1,this.lP=!1,this.cP=0,this.uP=[null,null,null],this.fP=!!e.NG,this.dP=0,this.pP=0,this.mP=0,this.CP=0,this.gP=null,this.SP=null,this.yP=C33.Cn(C33.Rect),this.TP=C33.Cn(C33.Rect),this._P=C33.Cn(C33.Rect),this.EP=C33.Cn(C33.Rect),this.AP=C33.Cn(C33.Rect),this.IP=1,this.wP=1,this.RP=0,this.MP=0,this.bP=null,this.vP=null,this.xP=0,this.GP=0,this.PP=!1,this.O_=mat42.create(),this.OP=mat42.create(),this.T3.MG(this)}gn(){this.T3.bG(this),C33.Vh(this.JG),C33.Vh(this.KG),C33.Vh(this.zG),this.gP=null,this.SP=null,this.jG=null,this.XG=null,this.YG=null}by(){this.ZG=!0,C33.Vh(this.JG),C33.Vh(this.KG),C33.Vh(this.zG)}DP(){return this.ZG}LP(r,t){if(t=Object.assign({},DEFAULT_BUILDSTEPS_OPTS,t),C33.Vh(this.JG),this.dP=0,this.pP=0,this.QG=!1,this.tP=!1,this.eP=!1,this.sP=!1,this.iP=!1,this.rP=!1,this.cP=0,this.lP=!!t.WG,this.aP=!!t.VG,this.ZG=!1,C33.Yh(this.KG,r),0!==r.length){if(t.FG){if(t.FG.length!==r.length)throw new Error("incorrect indexMap length");C33.Yh(this.zG,t.FG)}else{C33.Vh(this.zG);for(let t=0,e=r.length;t<e;++t)this.zG.push(t)}for(const e of r)this.dP+=e.QS(),this.pP+=e.ey(),e.uy()&&(this.QG=!0),e.Cy()&&(this.tP=!0),e.my()&&(this.eP=!0),e.iy()&&(this.sP=!0),e.yy()&&(this.iP=!0);this.rP=this.NP(r[0].JS());const n=this.FP(r[0],t),h=this.kP(r.at(-1),t);if(1!==r.length||n||h){this.oP=!1;let i=0;n&&(this.cP=1,this.JG.push(C33.Cn(C33.l1.HG.$P.BP,this,-1,1)),i=1);for(let e=0,s=r.length;e<s;++e)if(0!==e||n){let t=1===i?2:1;e!==s-1||h||(t=0),this.cP=Math.max(this.cP,t),this.JG.push(C33.Cn(C33.l1.HG.$P.WP,this,i,t,e)),i=t}else this.cP=1,this.JG.push(C33.Cn(C33.l1.HG.$P.UP,this,-1,1,e)),i=1;h&&this.JG.push(C33.Cn(C33.l1.HG.$P.VP,this,i,0))}else this.oP=!0}}FP(t,e){return!!(e.kG||t.ny()||e.$G&&!t.oy()||t.Cy()&&!this.aP||0!==this.dP||0!==this.pP)||(t.JS().ES()?t.my()&&(e.UG||e.WG)||t.gy()&&e.WG:t.my()&&!this.rP&&e.UG)}kP(t,e){return!!e.BG||(t.JS().ES()?t.my()||t.iy():(t.my()||t.iy())&&this.HP())}NP(t){return t.Og()&&this.eP&&!this.sP}jP(t,e,s){t.Og()&&null===e&&(e=t.GetBackbufferRenderTarget()),this.bP=e,this.gP=s.XP||null,this.SP=s.contextObject||null,this.Ey=s.YP||0,this.IP=s.devicePixelRatio||1,this.wP=s.qP||1,this.RP=s.KP||0,this.MP="number"==typeof s.time?s.time:this.T3.GG(),this.vb=!1,t.Wv(),this.QG&&this.zP();let i=!1;if(this.JP()&&(this.ZP(t,s),i=!0,this.vP=this.T3.PG(t,this.mP,this.CP),tempRect.I(this.TP),tempRect.Ql(),t.Og()&&t._MaybeDoPendingClearRenderPass(this.bP),t.CopyTextureToTexture(this.bP.z_(),this.vP,tempRect.Gl(),tempRect.Pl(),tempRect.width(),tempRect.height())),this.oP)this.QP(t,s);else if(i||this.ZP(t,s),0!==this._P.width()||0!==this._P.height()){t.ix(),t.qv(),t.A2(0),t.w2(0),this.qG=s.tO||null,this.xP=s.eO||0,this.GP=s.sO||0,this.PP=!!s.iO,this.rO(t),this.uP[0]=e,this.uP[1]=1<=this.cP?this.nO():null,this.uP[2]=2===this.cP?this.nO():null;for(const r of this.JG){const n=this.hO(r.oO()),h=this.hO(r.aO());t.Og()?r.lO(t,n,h):r.cO(t,n,h)}t.zv(null),this.uP[1]&&this.uO(this.uP[1]),this.uP[2]&&this.uO(this.uP[2]),this.uP.fill(null),this.fO(t),this.bP=null,this.vP=null,this.gP=null,this.SP=null,this.qG=null}}ZP(t,e){const[s,i]=this.T3.vG(t);this.dO(t,s,i),this.pO(e)}dO(t,e,s){if(e<=0||s<=0)throw new Error("invalid draw size");this.mP===e&&this.CP===s||this.mO(t,e,s,0,0,this.O_,this.OP),this.mP=e,this.CP=s}mO(t,e,s,i,r,n,h){const o=e/2+i,a=s/2+r,l=(t.Pg(n,e/s),t.Ng(o,a,t.yg(s),o,a,0,s));mat42.I(h,l)}pO(t){this.yP.I(t.CO),t.gO?this.TP.I(t.gO):this.TP.set(0,0,this.mP,this.CP),this._P.I(this.TP),this._P.vt(this.mP,this.CP);const e=this.wP*this.IP;this.TP.Hl(this.dP*e,this.pP*e),this.AP.I(this.TP),this.AP.vt(this.mP,this.CP),this.TP.tc(0,0,this.mP,this.CP),this.EP.I(this.TP),this.EP.vt(this.mP,this.CP)}rO(t){if(this.nP=t.Nx(),this.hP=t.Zx(),this.aP)t.Lx(!1),this.tP&&t.Fx(!0);else{if(tempRect.I(this.TP),t.ES()){const e=this.wP*this.IP;tempRect.Hl(Math.max(this.dP,1)*e,Math.max(this.pP,1)*e),tempRect.Ql(),tempRect.En(0,0,this.mP,this.CP)}else tempRect.Ql();t.kx(tempRect.Gl(),tempRect.Pl(),tempRect.width(),tempRect.height(),this.CP)}}SO(t){t.qv(),this.aP||(this.hP&&t.Qx(),t.Lx(!1),this.tP&&t.Fx(!0)),t.Og()&&t.SetNormalizedCoordsProgramVariant(!0)}fO(t){t.Fx(!1),this.hP&&t.Jx(),t.Lx(this.nP),this.aP||t.$x(),t.Og()&&t.SetNormalizedCoordsProgramVariant(!1),this.vb=t.Uv()}yO(){this.AP.En(0,0,1,1)}hO(t){return t<0?null:this.uP[t]}nO(){return this.T3.Bx(this)}TO(){return this.bP}uO(t){this.T3.xG(t,this)}_O(t){return this.KG[t]}EO(t){this.qG?this.qG(this,t,()=>this.jG(t,this)):this.jG(t,this),this.oP||this.SO(t)}AO(t){if(this.aP)return!0;if(0!==this.xP||0!==this.GP)return!1;const[e,s]=t.Tx(t.Bx());return e===this.mP&&s===this.CP}IO(t,e){let s=this.O_,i=this.OP;if(e&&!this.AO(t)){s=tempMat4a,i=tempMat4b;const[r,n]=t.Tx(t.Bx());this.mO(t,r,n,this.xP,this.GP,s,i),this.aP||t.$x()}t.Dv(s),t.$v(i)}zP(){this.T3.l3(this)}wO(t,e){return this.YG(this.zG[t],e)}RO(t,e){let s=this.AP,i=this.EP,r=this._P;t.ES()&&(tempRect2.I(s),tempRect2.Yl(1),s=tempRect2,tempRect3.I(i),tempRect3.Yl(1),i=tempRect3,tempRect4.I(r),tempRect4.Yl(1),r=tempRect4),this.MO(t,e,i,r,s,1/this.mP,1/this.CP)}bO(t,e){let i=this.EP,r=this._P,n=1/this.mP,h=1/this.CP;if(this.XG){let{vO:t,xO:e,GO:s}=this.XG(this.gP);t||(tempRect.set(0,0,0,0),t=tempRect),e=e||this.mP,s=s||this.CP,i=t,r=t,n=1/e,h=1/s}else t.ES()&&(tempRect3.I(i),tempRect3.Yl(1),i=tempRect3,tempRect4.I(r),tempRect4.Yl(1),r=tempRect4);let s=this.AP;t.ES()&&((s=tempRect2).I(this.AP),s.Yl(1)),this.MO(t,e,i,r,s,n,h),t.Og()&&this.iP&&t.SetProgramParameter_IsSrcTexRotated(this.lP)}PO(t){return this.eP?t.Og()?this.JP()?this.vP:this.bP.z_():this.bP:null}MO(t,e,s,i,r,n,h){t.xx(this.PO(t),r,s,i,this.yP,n,h,this.IP,this.wP,this.RP,this.MP),t.Gx(this.wO(e,t))}QP(t,e){const s=this.KG[0],i=t.Nx(),r=s.Cy();r&&(t.Lx(!1),t.Fx(!0),this.AP.set(0,0,1,1),this._P.set(0,0,1,1)),t.Ug(s),t.Ry(this.Ey),t.jx(this.bP);let n=0,h=1;if(this._P.set(0,0,1,1),s.gy()&&this.XG){const{vO:o,xO:a,GO:l}=this.XG(this.gP);o&&this._P.I(o),n=Number.isFinite(a)?1/a:0,h=Number.isFinite(l)?1/l:0}else{const[c,u]=this.T3.vG(t);n=1/c,h=1/u}e.CO?this.yP.I(e.CO):this.yP.set(0,0,0,0),t.xx(this.PO(t),this.AP,this._P,this._P,this.yP,n,h,this.IP,this.wP,this.RP,this.MP),t.Gx(this.wO(0,t)),t.Og()&&this.iP&&t.SetProgramParameter_IsSrcTexRotated(this.lP),t.A2(0),this.EO(t),r&&(t.Fx(!1),t.Lx(i))}JP(){return this.rP}HP(){return!this.rP}OO(){return this.eP}DO(){return!!this.oP&&!this.JP()}LO(){return this.aP}NO(){return this.gP}FO(){return this.SP}kO(){return this.Ey}BO(){return this.PP}Uv(){return this.vb}$O(){return this.TP}WO(){return this.EP}UO(){return this.fP}async VO(t,e,s){}}}{const C33=self.Fe;C33.l1.HG.$P=class{constructor(t,e,s,i=-1){this.HO=t,this.jO=e,this.XO=s,this.t1=i}YO(){return this.HO}oO(){return this.jO}aO(){return this.XO}qO(){return this.t1}mA(){return this.YO()._O(this.qO())}cO(t,e,s){}lO(t,e,s){}}}{const C33=self.Fe;C33.l1.HG.$P.BP=class extends C33.l1.HG.$P{constructor(t,e,s,i){super(t,e,s,i)}cO(t,e,s){const i=this.YO();t.ix(),t.Wg(),t.jx(s,i.BO()),t.Px(0,0,0,0),i.EO(t),i.yO()}lO(t,e,s){const i=this.YO();t.ix(),t.Wg(),t.jx(s,!1),t.Px(0,0,0,0),i.EO(t),i.yO()}}}{const C33=self.Fe,tempRect=C33.Cn(C33.Rect),tempQuad=C33.Cn(C33.ac);C33.l1.HG.$P.VP=class extends C33.l1.HG.$P{constructor(t,e,s,i){super(t,e,s,i)}cO(t,e,s){const i=this.YO();t.Wg(),t.jx(s),i.IO(t,!0),t.Ry(i.kO()),t.zv(e.z_()),tempQuad.Pc(i.$O()),tempRect.I(i.WO()),tempRect.Yl(1),t.F2(tempQuad,tempRect),i.UO()&&t.qx(e)}lO(t,e,s){const i=this.YO();t.Wg(),t.jx(s,!1),i.AO(t)?tempQuad.Pc(i.WO()):(t.SetNormalizedCoordsProgramVariant(!1),i.IO(t,!0),tempQuad.Pc(i.$O())),t.SetBackTexture(null),t.Ry(i.kO()),t.zv(e.z_()),i.LO()?t.yx():t.F2(tempQuad,i.WO())}}}{const C33=self.Fe;C33.l1.HG.$P.UP=class extends C33.l1.HG.$P{constructor(t,e,s,i){super(t,e,s,i)}cO(t,e,s){const i=this.YO();t.jx(s,i.BO()),t.Px(0,0,0,0),t.hx(),t.Ug(this.mA()),i.bO(t,this.qO()),i.EO(t),i.yO()}lO(t,e,s){const i=this.YO();t.jx(s,!1),t.Px(0,0,0,0),t.hx(),t.Ug(this.mA()),i.bO(t,this.qO()),i.EO(t),i.yO()}}}{const C33=self.Fe,tempRect=C33.Cn(C33.Rect),tempQuad=C33.Cn(C33.ac);C33.l1.HG.$P.WP=class extends C33.l1.HG.$P{constructor(t,e,s,i){super(t,e,s,i)}cO(t,e,s){const i=this.YO(),r=(t.jx(s),0===this.aO());r?t.Ry(i.kO()):(t.Px(0,0,0,0),t.hx()),t.Ug(this.mA()),i.RO(t,this.qO()),t.zv(e.z_()),i.IO(t,r),tempQuad.Pc(i.$O()),tempRect.I(i.WO()),tempRect.Yl(1),t.F2(tempQuad,tempRect),i.UO()&&t.qx(e)}lO(t,e,s){const i=this.YO(),r=(t.jx(s,!1),0===this.aO());r?(t.Ry(i.kO()),t.SetBackTexture(null),i.AO(t)?tempQuad.Pc(i.WO()):(t.SetNormalizedCoordsProgramVariant(!1),i.IO(t,!0),tempQuad.Pc(i.$O()))):(t.Px(0,0,0,0),t.hx(),tempQuad.Pc(i.WO())),t.Ug(this.mA()),i.RO(t,this.qO()),t.zv(e.z_()),i.LO()?t.yx():t.F2(tempQuad,i.WO())}}}{let SortZOrderList2=function(t,e){const s=t[0],i=e[0],r=s-i;if(0!=r)return r;const n=t[1],h=e[1];return n-h},C33=(SortZOrderList=SortZOrderList2,self.Fe),C3X=self.Ye,runtime=null,keysDownByKey=new Set,tempZOrderList=[],tempInstances=[],didWarnInAlertPolyfill=!1,didWarnFpsDeprecated=!1,VALID_FRAMERATE_MODES=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.KO=class{constructor(t){runtime=t,Object.defineProperties(this,{zO:{value:runtime.ZO().JO(),writable:!1},QO:{value:runtime.eD().tD(),writable:!1},sD:{value:{},writable:!1},iD:{value:{},writable:!1},rD:{value:runtime.nD(),writable:!1},hD:{value:runtime.oD(),writable:!1},storage:{value:new self.aD(runtime),writable:!1},isInWorker:{value:runtime.lD(),writable:!1},cD:{value:runtime.uD(),writable:!1},fD:{value:runtime.dD(),writable:!1},NT:{value:runtime.pD(),writable:!1},mD:{value:runtime.CD(),writable:!1},gD:{value:new self.SD(t),writable:!1},yD:{value:new self.TD(t),writable:!1}}),runtime._D().addEventListener("keydown",t=>{keysDownByKey.has(t.key)?t.stopPropagation():keysDownByKey.add(t.key)}),runtime._D().addEventListener("keyup",t=>keysDownByKey.delete(t.key)),runtime.zf().addEventListener("window-blur",()=>keysDownByKey.clear()),runtime.lD()&&(self.alert=t=>(didWarnInAlertPolyfill||(didWarnInAlertPolyfill=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}ED(t){Object.defineProperties(this.sD,t)}AD(t){Object.defineProperties(this.iD,t)}addEventListener(t,e){runtime._D().addEventListener(t,e)}removeEventListener(t,e){runtime._D().removeEventListener(t,e)}ID(t,...e){C3X.Ri(t);const s=runtime.wD(),i=s.RD(t);if(!i)throw new Error(`cannot find function name '${t}'`);if(!i.lu())return i.MD();if(e.length<i.bD())throw new Error(`not enough function parameters passed for '${t}' (${e.length} passed, ${i.bD()} expected)`);let r=i.vD(),n=r.xD(),h=s.GD();if(h){n=n.slice(0);const a=new Set(n);for(const l of h.xD())a.has(l)||(n.push(l),a.add(l));for(const c of s.PD())a.has(c)||(n.push(c),a.add(c))}const o=r.OD(n,i.DD(),i.LD(),i.MD(),...e);return o}ND(t){const e=runtime.kD().FD();if(!e)throw new Error("not in a function which returns a value");switch(e.BD()){case 1:"number"==typeof t&&e.$D(t);break;case 2:"string"==typeof t&&e.$D(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||e.$D(t)}}signal(t){C3X.Ri(t),runtime.wD().WD(t)}UD(t){return C3X.Ri(t),runtime.wD().VD(t)}HD(){return[runtime.uD(),runtime.dD()]}get isSuspended(){return runtime.jD()}get dt(){return runtime.XD()}get YD(){return runtime.qD()}get gameTime(){return runtime.KD()}get zD(){return runtime.JD()}get timeScale(){return runtime.ZD()}set timeScale(t){C3X.Ei(t),runtime.QD(t)}get fps(){return didWarnFpsDeprecated||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),didWarnFpsDeprecated=!0),runtime.tL()}get framesPerSecond(){return runtime.tL()}get eL(){return runtime.sL()}get iL(){return runtime.rL()}get nL(){return runtime.hL()}get oL(){return runtime.aL()}set oL(t){if(!VALID_FRAMERATE_MODES.has(t))throw new Error("invalid framerate mode");runtime.lL(t)}get cL(){return runtime.uL()}set cL(t){C3X.Ei(t),runtime.fL(t)}get dL(){return runtime.pL()}set dL(t){runtime.mL(t)}random(){return runtime.CL()}get layout(){const t=runtime.gL();if(t)return t.SL();throw new Error("no layout is running - make sure a layout is loaded before accessing")}yL(t){let e=runtime.TL(),s=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(s=e._L(t))return s.SL();throw new Error("invalid layout")}EL(){return runtime.TL().AL().map(t=>t.SL())}IL(t){let e=runtime.TL(),s;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(s=e._L(t)))throw new Error("invalid layout");e.wL()||e.RL(s)}get keyboard(){const t=runtime.ML().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get bL(){const t=runtime.ML().bL;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get vL(){const t=runtime.ML().vL;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get xL(){const t=runtime.ML().xL;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}GL(t,e){C3X.Ri(t),C3X.Ri(e),runtime.PL(t,e)}OL(t){C3X.Ei(t);const e=runtime.DL(t);return e?e.LL():null}NL(t,i){C3X.Ki(i);const r=runtime.FL();for(const e of t){const s=runtime.kL(e),n=s.BL();tempZOrderList.push([n.$L().qO(),n.WL()]),tempInstances.push(s)}if(0!==tempZOrderList.length){tempZOrderList.sort(SortZOrderList2),tempInstances.sort((t,e)=>i(t.LL(),e.LL()));let s=!1;for(let t=0,e=tempZOrderList.length;t<e;++t){const h=tempInstances[t],o=r.UL(tempZOrderList[t][0]),a=tempZOrderList[t][1],l=o.VL();l[a]!==h&&((l[a]=h).BL().HL(o,!0),o.jL(h),s=!0)}s&&runtime.XL(),C33.Vh(tempZOrderList),C33.Vh(tempInstances)}}async YL(t,e){const s=new MessageChannel,i=s.port1,r=s.port2;return await runtime.qL("runtime","script-create-worker",{url:t,opts:e,port2:r},[r]),i}alert(t){return runtime.qL("runtime","alert",{message:t+(runtime.lD()?" [via Web Worker]":"")})}KL(t){return C3X.Ei(t),runtime.zL(t)}JL(t){runtime.ZL(t)}}}{let C33=self.Fe,C3X=self.Ye,assetManager=null;self.QL=class{constructor(t){assetManager=t,Object.defineProperties(this,{tN:{value:assetManager.eN("audio/webm; codecs=opus"),writable:!1}})}sN(t){const e=self.rN.iN(t);if(!e)throw new Error("invalid IImageInfo");e.nN(assetManager.hN())}oN(t){return assetManager.bo(t)}aN(t){return assetManager.vo(t)}lN(t){return assetManager.xo(t)}cN(t){return assetManager.Go(t)}uN(t){return assetManager.fN(t)}dN(t){return"flat"===assetManager.pN()&&C33.wo(t)&&(t=t.toLowerCase()),assetManager.mN(t)}get CN(){return assetManager.gN()}async SN(t,e){if(this.tN)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const s=await assetManager.hN().yN(e),i=new Float32Array(s),r=t.createBuffer(1,i.length,48e3),n=r.getChannelData(0);return n.set(i),r}TN(...t){return assetManager._N(...t)}EN(t){return assetManager.AN(t)}IN(t){return assetManager.wN(t)}}}{let C33=self.Fe,C3X=self.Ye,collisionEngine=null;self.RN=class{constructor(t){collisionEngine=t,Object.defineProperties(this,{runtime:{value:collisionEngine.hN(),writable:!1}})}MN(t,e){const s=collisionEngine.hN(),i=s.kL(t),r=s.kL(e);return collisionEngine.bN(i,r)}vN(t,e){const s=collisionEngine.hN(),i=s.kL(t);for(const r of e){const n=s.kL(r);if(collisionEngine.bN(i,n))return r}return null}xN(t){const e=collisionEngine.hN().kL(t),s=collisionEngine.GN(e);return s?s.LL():null}PN(t,e){if(C3X.Ei(t),C3X.Ei(e),t=Math.floor(t),e=Math.floor(e),t<=0||e<=0)throw new Error("invalid cell size");collisionEngine.ON(t,e)}DN(){return collisionEngine.LN()}NN(t,e){let s=collisionEngine.hN(),i;i=Array.isArray(t)?t.map(t=>s.FN(t)):[s.FN(t)];const r=C33.Rect.vl(e),n=[];return collisionEngine.kN(null,i,r,n),n.map(t=>t.LL())}}}{let C33=self.Fe,C3X=self.Ye,runtime=null,osMap=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),browserMap=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),browserEngineMap=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.SD=class{constructor(t){runtime=t,Object.defineProperties(this,{BN:{value:C33.ds.Is,writable:!1},$N:{value:osMap.get(C33.ds.Cs)||"unknown",writable:!1},WN:{value:C33.ds.gs,writable:!1},UN:{value:browserMap.get(C33.ds.Ss)||"unknown",writable:!1},VN:{value:C33.ds.ys,writable:!1},HN:{value:browserEngineMap.get(C33.ds._s)||"unknown",writable:!1}})}get exportType(){let t=runtime.jN();return runtime.XN()?t="nwjs":runtime.YN()?t="windows-webview2":"cordova"===t?t="Android"===C33.ds.Cs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return runtime.KN().qN()}get zN(){return runtime.KN().JN()}get ZN(){return runtime.KN().QN()}get tF(){return runtime.KN().eF()}get sF(){return runtime.KN().iF()}get rF(){return runtime.KN().nF()}get devicePixelRatio(){return runtime.hF()}}}{const C33=self.Fe,C3X=self.Ye;self.aD=class{constructor(t){this.oF=t.aF()}getItem(t){return C3X.Ri(t),this.oF.getItem(t)}setItem(t,e){return C3X.Ri(t),this.oF.setItem(t,e)}removeItem(t){return C3X.Ri(t),this.oF.removeItem(t)}clear(){return this.oF.clear()}keys(){return this.oF.keys()}}}{const C33=self.Fe,C3X=self.Ye,internalApiToken=C33.ke();self.lF=class{#cF;constructor(){const t=C33.fF.uF(internalApiToken);this.#cF=t,Object.defineProperties(this,{runtime:{value:t.hN().dF(),writable:!1},pF:{value:t.mF(),writable:!1},CF:{value:t.gF(),writable:!1},SF:{value:t.yF(),writable:!1},TF:{value:t._F(),writable:!1},EF:{value:t.AF(),writable:!1},IF:{value:t.wF(),writable:!1},RF:{value:t.MF(),writable:!1},bF:{value:t.vF(),writable:!1}})}static xF(t){if(!t)return null;const e=C33.fF.GF(t);return e?e.PF():null}OF(){return this.#cF.LF().DF()}NF(){return this.#cF.FF().LL()}}}{const C33=self.Fe,C3X=self.Ye,internalApiToken=C33.ke();self.kF=class{#cF;constructor(){const t=C33.fF.uF(internalApiToken);this.#cF=t,Object.defineProperties(this,{name:{value:t.lf(),writable:!1},runtime:{value:t.hN().dF(),writable:!1},BF:{value:t.$F().PF(),writable:!1}}),t.hN().WF(this,t)}addEventListener(t,e){C3X.Ri(t),C3X.Ki(e),this.#cF._D().addEventListener(t,e)}removeEventListener(t,e){C3X.Ri(t),C3X.Ki(e),this.#cF._D().removeEventListener(t,e)}UF(){return[...this.instances()]}VF(){return C33.first(this.instances())}HF(){return[...this.jF()]}XF(){return C33.first(this.jF())}YF(t){const e=this.#cF,s=e.hN().qF(t),i=e.KF(s);return i?i.LL():null}*instances(){for(const t of this.#cF.zF())yield t.LL()}*jF(){for(const t of this.#cF.ZF().JF())yield t.LL()}QF(t){C3X.Ki(t);const e=this.#cF;if(0<e.ek())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");e.sk(t)}Ws(t,e,s,i,r){if(C3X.gi(e),C3X.gi(s),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const n=this.#cF,h=n.hN(),o=h.gL().$L(t);if(!o)throw new Error("invalid layer");const a=h.ik(n,o,e,s,i,r),l=(i&&o.rk(a),h.wD());return l.nk(!0),a.hk(),l.nk(!1),l.ak()||h.TL().lk()||h.ck(),a.LL()}}}{const C33=self.Fe,C3X=self.Ye,map=new WeakMap,VALID_WHERE_STRINGS=["above","below","top-sublayer","bottom-sublayer"];self.uk=class{constructor(t){map.set(this,t);const e=[],s=t.fk(),i=s.dk().length;for(let t=0;t<i;++t)e.push(new self.pk(s,t));Object.defineProperties(this,{name:{value:t.lf(),writable:!1},index:{value:t.qO(),writable:!1},effects:{value:e,writable:!1}})}addEventListener(t,e){C3X.Ri(t),C3X.Ki(e),map.get(this)._D().addEventListener(t,e)}removeEventListener(t,e){C3X.Ri(t),C3X.Ki(e),map.get(this)._D().removeEventListener(t,e)}get width(){return map.get(this).Sm()}set width(t){C3X.Ei(t),map.get(this).wm(t)}get height(){return map.get(this).vm()}set height(t){C3X.Ei(t),map.get(this).ym(t)}mk(t,e){C3X.Ei(t),C3X.Ei(e);const s=map.get(this);s.wm(t),s.ym(e)}getSize(){const t=map.get(this);return[t.Sm(),t.vm()]}set scale(t){C3X.Ei(t),map.get(this).Ck(t)}get scale(){return map.get(this).gk()}set angle(t){C3X.Ei(t),map.get(this).Sk(t)}get angle(){return map.get(this).yk()}set scrollX(t){C3X.gi(t),map.get(this).Tk(t)}get scrollX(){return map.get(this)._k()}set scrollY(t){C3X.gi(t),map.get(this).Ek(t)}get scrollY(){return map.get(this).Ak()}scrollTo(t,e){C3X.gi(t),C3X.gi(e);const s=map.get(this);s.Tk(t),s.Ek(e)}Ik(){const t=map.get(this);return[t._k(),t.Ak()]}wk(t){let e=map.get(this),s=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(s=e.$L(t))?s.Rk():null}Mk(){return map.get(this).bk().map(t=>t.Rk())}*vk(){for(const t of map.get(this).vk())yield t.Rk()}xk(t,e,s){const i=map.get(this),r=self.Gk,n=(C3X.Ri(t),C3X.hr(e,r),e?i.hN().Pk(e):null),h=VALID_WHERE_STRINGS.indexOf(s);if(h<0)throw new Error("invalid location");i.Ok(t,n,h)}Dk(t,e,s){const i=map.get(this),r=i.hN(),n=self.Gk,h=(C3X.nr(t,n),r.Pk(t));if(!h)throw new Error("invalid layer");C3X.hr(e,n);const o=e?r.Pk(e):null,a=VALID_WHERE_STRINGS.indexOf(s);if(a<0)throw new Error("invalid location");i.Lk(h,o,a)}Nk(t){const e=map.get(this),s=self.Gk,i=(C3X.nr(t,s),e.hN().Pk(t));if(!i)throw new Error("invalid layer");const r=i.hN();e.Fk(i),r.wD().ak()||r.ck()}kk(){const t=map.get(this),e=t.hN();t.Bk(),e.wD().ak()||e.ck()}$k(t,e){C3X.Ei(t),C3X.Ei(e),map.get(this).Wk(t,e)}Uk(){return map.get(this).Vk()}set J(t){C3X.Ri(t);const e=map.get(this);if("perspective"===t)e.Hk();else{if("orthographic"!==t)throw new Error("invalid projection");e.jk()}}get J(){return map.get(this).Xk()?"orthographic":"perspective"}}}{const C33=self.Fe,C3X=self.Ye,map=new WeakMap,BLEND_MODE_TO_INDEX=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),INDEX_TO_BLEND_MODE=new Map([...BLEND_MODE_TO_INDEX.entries()].map(t=>[t[1],t[0]])),tempColor=C33.Cn(C33.Ko);self.Gk=class{constructor(t){map.set(this,t);const e=[],s=t.fk(),i=s.dk().length;for(let t=0;t<i;++t)e.push(new self.pk(s,t));Object.defineProperties(this,{name:{value:t.lf(),writable:!1},layout:{value:t._L().SL(),writable:!1},effects:{value:e,writable:!1}}),t.hN().WF(this,t)}get Yk(){const t=map.get(this).qk();return t?t.Rk():null}*Kk(){for(const t of map.get(this).Kk())yield t.Rk()}*zk(){for(const t of map.get(this).Jk())yield t.Rk()}*Zk(){for(const t of map.get(this).Jk())for(const e of t.Qk())yield e.Rk()}get index(){return map.get(this).qO()}get isVisible(){return map.get(this).tB()}set isVisible(t){map.get(this).eB(t)}get sB(){return map.get(this).iB()}get isInteractive(){return map.get(this).rB()}set isInteractive(t){map.get(this).nB(t)}get hB(){return map.get(this).oB()}set hB(t){map.get(this).aB(!!t)}get lB(){return map.get(this).cB()}get opacity(){return map.get(this).jv()}set opacity(t){t=C33.En(+t,0,1),isNaN(t)||map.get(this).Yv(t)}set scale(t){C3X.Ei(t),map.get(this).uB(t)}get scale(){return map.get(this).fB()}set scaleRate(t){C3X.Ei(t),map.get(this).dB(t)}get scaleRate(){return map.get(this).pB()}set angle(t){C3X.Ei(t),map.get(this).Sk(t)}get angle(){return map.get(this).mB()}set parallaxX(t){C3X.Ei(t),map.get(this).CB(t)}get parallaxX(){return map.get(this).gB()}set parallaxY(t){C3X.Ei(t),map.get(this).SB(t)}get parallaxY(){return map.get(this).yB()}set TB(t){C3X.Ei(t),map.get(this).Vy(t)}get TB(){return map.get(this).Uy()}set _B(t){map.get(this).EB(t)}get _B(){return map.get(this).AB()}set IB(t){map.get(this).wB(t)}get IB(){return map.get(this).RB()}set YP(t){C3X.Ri(t);const e=BLEND_MODE_TO_INDEX.get(t);if("number"!=typeof e)throw new Error("invalid blend mode");map.get(this).Ry(e)}get YP(){return INDEX_TO_BLEND_MODE.get(map.get(this).MB())}set backgroundColor(t){if(C3X.Wi(t),t.length<3)throw new Error("expected 3 elements");tempColor.ea(t[0],t[1],t[2]);const e=map.get(this),s=e.bB();s.Ea(tempColor)||(s.fa(tempColor),e.hN().XL())}get backgroundColor(){const t=map.get(this).bB();return[t.ma(),t.Ca(),t.ga()]}set scrollX(t){C3X.gi(t);const e=map.get(this);e.vB(!0),e.Tk(t)}get scrollX(){return map.get(this)._k()}set scrollY(t){C3X.gi(t);const e=map.get(this);e.vB(!0),e.Ek(t)}get scrollY(){return map.get(this).Ak()}scrollTo(t,e){C3X.gi(t),C3X.gi(e);const s=map.get(this);s.vB(!0),s.Tk(t),s.Ek(e)}Ik(){const t=map.get(this);return[t._k(),t.Ak()]}xB(){map.get(this).vB(!1)}getViewport(){return map.get(this).GB().Ll()}PB(t,e,s=0){C3X.gi(t),C3X.gi(e),C3X.gi(s);const i=map.get(this),r=i.hN();return i.OB(t-r.DB(),e-r.LB(),s)}NB(t,e,s=0){C3X.gi(t),C3X.gi(e),C3X.gi(s);const i=map.get(this),r=i.hN(),[n,h]=i.kB(t,e,s);return[n+r.DB(),h+r.LB()]}BB(t,e,s=0){return C3X.gi(t),C3X.gi(e),C3X.gi(s),map.get(this).$B(t,e,s)}WB(t,e,s=0){return C3X.gi(t),C3X.gi(e),C3X.gi(s),map.get(this).UB(t,e,s)}get VB(){return map.get(this).HB()}}}{let GetDispatcher2=function(t){let e=dispatchers.get(t);return e||(e=C33.Cn(C33.Event.zf),dispatchers.set(t,e)),e};GetDispatcher=GetDispatcher2;const C33=self.Fe,C3X=self.Ye,dispatchers=new WeakMap,internalApiToken=C33.ke();self.jB=class{#cF;constructor(){const t=C33.fF.uF(internalApiToken),e={runtime:{value:(this.#cF=t).hN().dF(),writable:!1},XB:{value:t.YB().DF(),writable:!1},BF:{value:t.$F().PF(),writable:!1}};t.qB(e),t.KB(e),Object.defineProperties(this,e),t.hN().WF(this,t)}static zB(){return C33.fF.JB()}ZB(){const t=dispatchers.get(this);t&&(t.gn(),dispatchers.delete(this))}addEventListener(t,e,s){C3X.Ri(t),C3X.Ki(e),GetDispatcher2(this).addEventListener(t,e,s)}removeEventListener(t,e,s){C3X.Ri(t),C3X.Ki(e),GetDispatcher2(this).removeEventListener(t,e,s)}dispatchEvent(t){GetDispatcher2(this).dispatchEvent(t)}QB(){const t=this.#cF,e=t.hN();e.t$(t),e.wD().ak()||e.TL().lk()||e.wD().e$()||e.ck()}s$(){const t=this.#cF.i$();return t?t.map(t=>t.LL()):[]}*r$(){const t=this.#cF;if(t.n$())for(const e of t.h$())yield e.LL()}get uid(){return this.#cF.o$()}get a$(){return this.#cF.l$()}set timeScale(t){C3X.Ei(t),this.#cF.QD(t)}get timeScale(){return this.#cF.c$()}u$(){this.#cF.f$()}get dt(){const t=this.#cF;return t.hN().XD(t)}d$(...t){C3X.Wi(t);const e=new Set(t),s=this.#cF.p$();return e.isSubsetOf(s)}m$(t){C3X.nr(t,Set),this.#cF.C$(t)}g$(){return new Set(this.#cF.p$())}signal(t){C3X.Ri(t);const e=this.#cF;e.hN().wD().S$(e,t)}UD(t){C3X.Ri(t);const e=this.#cF;return e.hN().wD().y$(e,t)}}}{const C33=self.Fe,C3X=self.Ye,internalApiToken=C33.ke();self.T$=class extends self.jB{#cF;#_$=!1;#E$=null;#A$=!1;#I$=null;#w$;#R$;constructor(t){super(),this.#cF=C33.fF.uF(internalApiToken),this.#_$=!1,this.#E$=null,this.#A$=!1,this.#I$=null,this.#w$=t?.domComponentId,this.#R$=t?.wrapperComponentId}ZB(){this.M$(!1),this.b$(!1),super.ZB()}v$(){return C33.fF.x$()}G$(t){const e=this.#cF;e.hN().P$(t,e)}O$(t){const e=this.#cF;return e.hN().D$(t,e)}L$(t,e){if(C3X.Ri(t),C3X.Ki(e),!this.#w$)throw new Error("no DOM component id set");const s=this.#cF.hN();s.N$(this.#w$,t,e)}F$(t){C3X.Wi(t);for(const[e,s]of t)this.L$(e,s)}k$(t,e){if(C3X.Ri(t),!this.#w$)throw new Error("no DOM component id set");const s=this.#cF.hN();s.Tf(this.#w$,t,e)}B$(t,e){if(C3X.Ri(t),!this.#w$)throw new Error("no DOM component id set");const s=this.#cF.hN();return s.qL(this.#w$,t,e)}$$(t,e){const s=this.#cF.hN();if(!s.lD())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#w$,handler:t,data:e,responseId:null});this.k$(t,e)}M$(t){if(this.#_$!==(t=!!t)){this.#_$=t;const e=this.#cF.hN();t?(this.#E$||(this.#E$=()=>this.W$()),e.zf().addEventListener("tick",this.#E$)):e.zf().removeEventListener("tick",this.#E$)}}U$(){return this.#_$}W$(){}b$(t){if(this.#A$!==(t=!!t)){this.#A$=t;const e=this.#cF.hN();t?(this.#I$||(this.#I$=()=>this.V$()),e.zf().addEventListener("tick2",this.#I$)):e.zf().removeEventListener("tick2",this.#I$)}}H$(){return this.#A$}V$(){}j$(){return[]}X$(){return null}Y$(t){}q$(){if(!this.#R$)throw new Error("no wrapper component id set");const t=this.#cF.hN();return t.K$(this.#R$)}z$(t,e){if(C3X.Ri(t),C3X.Ki(e),!this.#R$)throw new Error("no wrapper component id set");const s=this.#cF.hN();s.J$(this.#R$,t,e)}Z$(t){C3X.Wi(t);for(const[e,s]of t)this.z$(e,s)}Q$(t,e){if(!this.#R$)throw new Error("no wrapper component id set");this.runtime.yD.t4(this.#R$,t,e)}e4(t,e){if(this.#R$)return this.runtime.yD.s4(this.#R$,t,e);throw new Error("no wrapper component id set")}}}{let MakeIWorldInstanceClass2=function(t){return class r extends t{#i4;#r4;constructor(t){super(t);const e=C33.fF.uF(internalApiToken),s=e.BL(),i=(this.#i4=e,this.#r4=s,map.set(this,e),[]),r=s.n4();if(r){const h=s.YB().fk().dk().length;for(let t=0;t<h;++t)i.push(new self.pk(r,t))}const n={effects:{value:i,writable:!1}};Object.defineProperties(this,n)}get layout(){return this.#r4._L().SL()}get h4(){return this.#r4.$L().Rk()}get x(){return this.#r4.Fy()}set x(t){t=+t;const e=this.#r4;isNaN(t)||e.Fy()===t||(e.ky(t),e.o4())}get y(){return this.#r4.$y()}set y(t){t=+t;const e=this.#r4;isNaN(t)||e.$y()===t||(e.Wy(t),e.o4())}setPosition(t,e){t=+t,e=+e;const s=this.#r4;isNaN(t)||isNaN(e)||s.Fy()===t&&s.$y()===e||(s.a4(t,e),s.o4())}l4(){const t=this.#r4;return[t.Fy(),t.$y()]}c4(t,e){if(t=+t,e=+e,!(isNaN(t)||isNaN(e)||0===t&&0===e)){const s=this.#r4;s.u4(t,e),s.o4()}}get TB(){return this.#r4.Uy()}set TB(t){t=+t;const e=this.#i4,s=this.#r4;isNaN(t)||s.Uy()===t||(s.Vy(t),e.hN().XL())}get f4(){return this.#r4.d4()}get width(){return this.#r4.Sm()}set width(t){t=+t;const e=this.#r4;isNaN(t)||e.Sm()===t||(e.wm(t),e.o4())}get height(){return this.#r4.vm()}set height(t){t=+t;const e=this.#r4;isNaN(t)||e.vm()===t||(e.ym(t),e.o4())}mk(t,e){t=+t,e=+e;const s=this.#r4;isNaN(t)||isNaN(e)||s.Sm()===t&&s.vm()===e||(s.uM(t,e),s.o4())}getSize(){const t=this.#r4;return[t.Sm(),t.vm()]}get angle(){return this.#r4.yk()}set angle(t){t=C33.An(+t);const e=this.#r4;isNaN(t)||e.yk()===t||(e.Sk(t),e.o4())}get m4(){return C33.wn(this.angle)}set m4(t){this.angle=C33.In(t)}Lc(){return this.#r4.C4().Ll()}g4(){return this.#r4.S4().vc()}y4(){return this.#r4.T4()}get isVisible(){return this.#r4.iB()}set isVisible(t){t=!!t;const e=this.#i4,s=this.#r4;s.iB()!==t&&(s.eB(t),e.hN().XL())}get opacity(){return this.#r4.jv()}set opacity(t){t=C33.En(+t,0,1);const e=this.#i4,s=this.#r4;isNaN(t)||s.jv()===t||(s.Yv(t),e.hN().XL())}set _4(t){if(C3X.Wi(t),t.length<3)throw new Error("expected 3 elements");tempColor.ea(t[0],t[1],t[2]);const e=this.#i4,s=this.#r4;s.E4().Ea(tempColor)||(s.A4(tempColor),e.hN().XL())}get _4(){const t=this.#r4.E4();return[t.ma(),t.Ca(),t.ga()]}set YP(t){C3X.Ri(t);const e=BLEND_MODE_TO_INDEX.get(t);if("number"!=typeof e)throw new Error("invalid blend mode");const s=this.#i4,i=this.#r4;i.Ry(e),s.hN().XL()}get YP(){return INDEX_TO_BLEND_MODE.get(this.#r4.MB())}I4(){this.#r4.w4()}R4(){this.#r4.M4()}b4(t){C3X.nr(t,ILayer);const e=this.#i4,s=e.hN().Pk(t);if(!s)throw new Error("invalid layer");e.BL().v4(s)}x4(t,e){C3X.nr(t,r),this.#r4.G4(map.get(t),e)}get zIndex(){return this.#r4.WL()}get P4(){return this.#r4.O4()}set P4(t){this.#r4.D4(!!t)}rc(t,e){return C3X.gi(t),C3X.gi(e),this.#r4.L4(+t,+e)}MN(t){C3X.nr(t,r);const e=this.#i4,s=map.get(t);return e.hN().eD().bN(e,s)}xN(){const t=this.#i4,e=t.hN().eD().GN(t);return e?e.LL():null}getParent(){const t=this.#i4.N4();return t?t.LL():null}F4(){const t=this.#i4.B4();return t?t.LL():null}*W4(){for(const t of this.#i4.W4())yield t.LL()}U4(){return this.#i4.V4()}H4(t){const e=this.#i4.j4(t);return e?e.LL():null}*children(){for(const t of this.#i4.children())yield t.LL()}*X4(){for(const t of this.#i4.X4())yield t.LL()}Y4(t,e){C3X.nr(t,r),C3X.Di(e),e=e||{};const s=this.#i4,i=map.get(t);s.q4(i,e)}removeChild(t){C3X.nr(t,r);const e=this.#i4,s=map.get(t);e.K4(s)}z4(){const t=this.#i4;if(t.J4()){const e=t.N4();e.K4(t)}}Z4(){const t=this.#r4;return{Q4:t.t5(),e5:t.s5(),i5:t.r5(),n5:t.h5(),o5:t.a5(),l5:t.c5(),u5:t.f5(),d5:t.p5(),m5:t.C5()}}g5(t,e){C3X.Ei(t),C3X.Ei(e),this.#r4.S5(t,e)}y5(){const t=this.#r4;t.T5(),t.o4()}_5(t,e,s){C3X.Ei(t),C3X.Ei(e),C3X.Oi(s);const i=this.#r4;i.E5(t,e,s)&&i.o4()}A5(t,e){let s=NaN,i=NaN,r=NaN,n=NaN,h=NaN,o=this.#r4;if(o.I5()){const a=o.w5(),l=a.AT(t,e);null!==l&&(s=l.Fy(),i=l.$y(),r=l.Uy(),n=l.Hy(),h=l.Xy())}return{x:s,y:i,TB:r,u:n,v:h}}R5(){const t=this.#r4;if(!t.I5())return[0,0];const e=t.w5();return[e.fT(),e.dT()]}}};MakeIWorldInstanceClass=MakeIWorldInstanceClass2;const C33=self.Fe,C3X=self.Ye,IInstance=self.jB,ILayer=self.Gk,map=new WeakMap,internalApiToken=C33.ke(),BLEND_MODE_TO_INDEX=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),INDEX_TO_BLEND_MODE=new Map([...BLEND_MODE_TO_INDEX.entries()].map(t=>[t[1],t[0]])),tempColor=C33.Cn(C33.Ko);self.M5=MakeIWorldInstanceClass2(self.jB),self.b5=MakeIWorldInstanceClass2(self.T$)}{const C33=self.Fe,C3X=self.Ye;self.v5=class extends self.M5{#cF;constructor(){super(),this.#cF=self.jB.zB()}x5(){return this.#cF.P5().G5()}focus(){this.#cF.P5().O5()}blur(){this.#cF.P5().D5()}L5(t,e){C3X.Ri(t),this.#cF.P5().N5(t,e)}}}{let GetDispatcher2=function(t){let e=dispatchers.get(t);return e||(e=C33.Cn(C33.Event.zf),dispatchers.set(t,e)),e};GetDispatcher=GetDispatcher2;const C33=self.Fe,C3X=self.Ye,dispatchers=new WeakMap,internalApiToken=C33.ke();self.F5=class{#cF;constructor(){const t=C33.fF.uF(internalApiToken),e={runtime:{value:(this.#cF=t).hN().dF(),writable:!1},behavior:{value:t.B5().k5(),writable:!1},W5:{value:t.V5().U5(),writable:!1}};Object.defineProperties(this,e),t.hN().WF(this,t)}static zB(){return C33.fF.JB()}get H5(){return this.#cF.j5().LL()}ZB(){const t=dispatchers.get(this);t&&(t.gn(),dispatchers.delete(this))}addEventListener(t,e,s){C3X.Ri(t),C3X.Ki(e),GetDispatcher2(this).addEventListener(t,e,s)}removeEventListener(t,e,s){C3X.Ri(t),C3X.Ki(e),GetDispatcher2(this).removeEventListener(t,e,s)}dispatchEvent(t){GetDispatcher2(this).dispatchEvent(t)}}}{const C33=self.Fe,C3X=self.Ye,internalApiToken=C33.ke();self.X5=class{constructor(){const t=C33.fF.uF(internalApiToken),e={runtime:{value:t.hN().dF(),writable:!1},behavior:{value:t.B5().k5(),writable:!1},name:{value:t.lf(),writable:!1}};Object.defineProperties(this,e)}}}{const C33=self.Fe,C3X=self.Ye,internalApiToken=C33.ke();self.Y5=class{#cF;constructor(){const t=C33.fF.uF(internalApiToken),e={runtime:{value:(this.#cF=t).hN().dF(),writable:!1}};Object.defineProperties(this,e)}UF(){return this.#cF.JF().map(t=>t.LL())}static xF(t){if(!t)return null;const e=C33.fF.q5(t);return e?e.k5():null}}}{const C33=self.Fe,C3X=self.Ye,tempColor=C33.Cn(C33.Ko);self.pk=class{#cF;constructor(t,e){this.#cF=t;const s={index:{value:e,writable:!1}};Object.defineProperties(this,s)}get name(){const t=this.#cF.dk();return t[this.index].lf()}get isActive(){return this.#cF.K5(this.index)}set isActive(t){t=!!t;const e=this.#cF;e.K5(this.index)!==t&&(e.z5(this.index,t),e.J5(),e.hN().XL())}setParameter(t,e){C3X.Ei(t),t=Math.floor(+t);const s=this.#cF,i=s.Z5(this.index,t);if(null===i)throw new RangeError("invalid index");if(i instanceof C33.Ko){if(!Array.isArray(e)||e.length<3)throw new TypeError("expected array with 3 elements");tempColor.ea(e[0],e[1],e[2]),e=tempColor}else if("number"!=typeof e)throw new TypeError("expected number");const r=s.Q5(this.index,t,e);r&&s.K5(this.index)&&s.hN().XL()}getParameter(t){C3X.Ei(t),t=Math.floor(+t);const e=this.#cF,s=e.Z5(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof C33.Ko?[s.ma(),s.Ca(),s.ga()]:s}}}{const C33=self.Fe,C3X=self.Ye;self.tW=class{#cF;constructor(t){this.#cF=t,Object.defineProperties(this,{name:{value:t.lf(),writable:!1}})}get speed(){return this.#cF.eW()}get isLooping(){return this.#cF.sW()}get repeatCount(){return this.#cF.iW()}get rW(){return this.#cF.nW()}get hW(){return this.#cF.oW()}get frameCount(){return this.#cF.aW()}lW(){return this.#cF.cW().map(t=>t.uW())}*frames(){for(const t of this.#cF.cW())yield t.uW()}}}{const C33=self.Fe,C3X=self.Ye;self.rN=class{#cF;constructor(t){this.#cF=t}static iN(t){return t.#cF}get width(){return this.#cF.Sm()}get height(){return this.#cF.vm()}getSize(){const t=this.#cF;return[t.Sm(),t.vm()]}fW(t){return t.dW(this)}pW(){return this.#cF.UM().Ll()}}}{const C33=self.Fe,C3X=self.Ye;self.mW=class extends self.rN{#cF;constructor(t){super(t.gW()),this.#cF=t,Object.defineProperties(this,{duration:{value:t.SW(),writable:!1},yW:{value:t.TW(),writable:!1},_W:{value:t.EW(),writable:!1}})}AW(){const t=this.#cF;return[t.TW(),t.EW()]}IW(){return this.#cF.wW()}RW(t){return this.MW(t)[0]}bW(t){return this.MW(t)[1]}MW(t){let e=this.#cF,s=null;if("number"==typeof t)s=e.vW(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");s=e.xW(t)}return s?[s.Fy(),s.$y()]:this.AW()}GW(){const t=this.#cF.PW();return t?t.Jc():0}OW(t){return this.DW(t)[0]}LW(t){return this.DW(t)[1]}DW(t){C3X.Ei(t),t=Math.floor(t);const e=this.#cF.PW();if(!e||t<0||t>=e.Jc())return[0,0];const s=e.zc(),i=s[2*t],r=s[2*t+1];return[i,r]}get tag(){return this.#cF.NW()}}}{let GetTimelineState2=function(t){const e=map.get(t);if(e.FW())throw new Error("timeline/tween was released and is no longer valid");return e};GetTimelineState=GetTimelineState2;const C33=self.Fe,C3X=self.Ye,map=new WeakMap;self.kW=class{constructor(t){map.set(this,t),t.hN().WF(this,t)}pause(){GetTimelineState2(this).BW()}resume(){GetTimelineState2(this).$W()}stop(){GetTimelineState2(this).g0()}d$(t){return GetTimelineState2(this).WW(t)}set time(t){C3X.Ei(t),GetTimelineState2(this).UW(t)}get time(){return GetTimelineState2(this).GG()}set totalTime(t){C3X.Ei(t),GetTimelineState2(this).VW(t)}get totalTime(){return GetTimelineState2(this).HW()}set isLooping(t){GetTimelineState2(this).jW(!!t)}get isLooping(){return GetTimelineState2(this).XW()}set hW(t){GetTimelineState2(this).YW(!!t)}get hW(){return GetTimelineState2(this).qW()}set playbackRate(t){C3X.Ei(t),GetTimelineState2(this).KW(t)}get playbackRate(){return GetTimelineState2(this).zW()}get progress(){const t=GetTimelineState2(this);return t.GG()/t.HW()}get tags(){return GetTimelineState2(this).JW()}get finished(){return GetTimelineState2(this).ZW()}get isPlaying(){return GetTimelineState2(this).IsPlaying()}get QW(){return GetTimelineState2(this).tU()}get eU(){return map.get(this).FW()}}}{let GetTimelineState2=function(t){const e=map.get(t);if(e.FW())throw new Error("timeline was released and is no longer valid");return e},C33=(GetTimelineState=GetTimelineState2,self.Fe),C3X=self.Ye,map=new WeakMap,easeToIndexFunc=null;self.sU=class extends self.kW{constructor(t){super(t),map.set(this,t);const e={name:{value:t.lf(),writable:!1}};Object.defineProperties(this,e)}}}{let GetTweenState2=function(t){const e=map.get(t);if(e.FW())throw new Error("tween was released and is no longer valid");return e},C33=(GetTweenState=GetTweenState2,self.Fe),C3X=self.Ye,map=new WeakMap,behInstMap=new WeakMap,easeToIndexFunc=null;self.iU=class extends self.kW{constructor(t,e,s){super(t),easeToIndexFunc=easeToIndexFunc||s.rU,map.set(this,t),e&&behInstMap.set(this,e)}stop(){const t=GetTweenState2(this),e=behInstMap.get(this);e.nU(t)}hU(t){C3X.Ri(t);const e=self.wu.Uu(easeToIndexFunc(t));GetTweenState2(this).oU(e)}get H5(){const t=GetTweenState2(this).aU();return t?t.LL():null}get lU(){return GetTweenState2(this).cU()}set lU(t){GetTweenState2(this).uU(!!t)}get value(){const t=GetTweenState2(this);if("value"!==t.fU())throw new Error("not a value tween");return t.pU("value").dU()}}}{const C33=self.Fe,C3X=self.Ye;self.mU=class extends self.lF{constructor(){super()}}}{const C33=self.Fe,C3X=self.Ye,internalApiToken=C33.ke();self.CU=class extends self.mU{#cF;#w$;#gU=0;#SU=new Map;constructor(t){if(super(),this.#cF=C33.fF.uF(internalApiToken),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#w$=t.domComponentId,this.yU("elem-focused",t=>t.TU()),this.yU("elem-blurred",t=>{t&&t._U()})}EU(t){const e=this.#gU++;return this.#SU.set(e,t),e}AU(t){this.#SU.delete(t)}yU(t,s){const e=this.#cF.hN();e.N$(this.#w$,t,t=>{const e=this.#SU.get(t.elementId);s(e,t)})}IU(t){C3X.Wi(t);for(const[e,s]of t)this.IU(e,s)}}}{const C33=self.Fe,C3X=self.Ye,map=new WeakMap,internalApiToken=C33.ke();self.wU=class extends self.kF{#cF;constructor(){super(),this.#cF=C33.fF.uF(internalApiToken)}RU(){}MU(){return this.#cF.gW().bU()}vU(t){}xU(t){}GU(){}PU(t){}}}{const C33=self.Fe,C3X=self.Ye,map=new WeakMap,internalApiToken=C33.ke();self.OU=class extends self.b5{#cF;#DU=null;#LU=null;constructor(t){super(t),this.#cF=C33.fF.uF(internalApiToken)}ZB(){if(super.ZB(),this.#DU){const t=this.#cF.hN().zf();t.removeEventListener("renderercontextlost",this.#DU),t.removeEventListener("renderercontextrestored",this.#LU),this.#DU=null,this.#LU=null}}NU(){if(!this.#DU){this.#DU=()=>this.FU(),this.#LU=()=>this.kU();const t=this.#cF.hN().zf();t.addEventListener("renderercontextlost",this.#DU),t.addEventListener("renderercontextrestored",this.#LU)}}FU(){}kU(){}BU(t){}}}{const C33=self.Fe,C3X=self.Ye,tempRect=C33.Cn(C33.Rect),map=new WeakMap,internalApiToken=C33.ke();self.$U=class extends self.OU{#WU=-1;#UU=!0;#VU=!1;#HU=!1;#jU=-.2;#XU=C33.Cn(C33.Rect,0,0,-1,-1);#YU=0;#qU=0;#KU=-1;#zU=-1;#JU=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const e=C33.fF.uF(internalApiToken),s=(map.set(this,e),this.#WU=this.BF.EU(this),e.hN().KN());this.#YU=s.ZU(),this.#qU=s.QU(),this.M$(!0)}ZB(){super.ZB(),this.BF.AU(this.#WU),this.tV("destroy"),this.#WU=-1,map.delete(this)}eV(){const t=map.get(this).hN();if(t.lD())throw new Error("not valid in worker mode");return this.sV("get-element")}tV(t,e){(e=e||{}).elementId=this.#WU,this.k$(t,e)}sV(t,e){return(e=e||{}).elementId=this.#WU,this.$$(t,e)}iV(t,e){return(e=e||{}).elementId=this.#WU,this.B$(t,e)}rV(t){t=t||{};const e=map.get(this).BL();t.elementId=this.#WU,t.isVisible=e.iB(),t.htmlIndex=e.$L().nV(),t.htmlZIndex=e.hV(),Object.assign(t,this.oV()),this.#UU=!!t.isVisible,this.$$("create",t),this.aV(!0)}lV(t){this.#UU!==(t=!!t)&&(this.#UU=t,this.tV("set-visible",{isVisible:t}))}W$(){this.aV(!1)}cV(){const t=map.get(this).hN(),e=t.KN().uV();return"Android"===C33.ds.Cs&&("scale-inner"===e||"scale-outer"===e||"crop"===e)}aV(c){const u=map.get(this);if(!u.fV()){let t=u.BL(),e=t.$L(),s=t.C4(),[i,r]=e.kB(s.Gl(),s.Pl()),[n,h]=e.kB(s.Ol(),s.Dl()),o=u.hN().KN(),a=o.QN(),l=o.eF();if(t.iB()&&e.iB())if(!this.cV()&&(n<=0||h<=0||a<=i||l<=r))this.lV(!1);else{tempRect.set(i,r,n,h);const f=o.ZU(),d=o.QU(),p=e.nV(),m=t.hV();if(!c&&tempRect.equals(this.#XU)&&this.#YU===f&&this.#qU===d&&this.#KU===p&&this.#zU===m)this.lV(!0);else{this.#XU.I(tempRect),this.#YU=f,this.#qU=d,this.#KU=p,this.#zU=m,this.lV(!0);let t=null;this.#HU&&(t=e.dV()+this.#jU),this.tV("update-position",{left:Math.round(this.#XU.Gl()),top:Math.round(this.#XU.Pl()),width:Math.round(this.#XU.width()),height:Math.round(this.#XU.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.lV(!1)}}pV(){this.sV("focus",{focus:!0})}mV(){this.sV("focus",{focus:!1})}TU(){this.#VU=!0}_U(){this.#VU=!1}CV(){return this.#VU}gV(t,e){this.postToDOMElement("set-css-style",{prop:C33.Xo(t),val:e})}SV(t,e){this.postToDOMElement("set-attribute",{name:t,val:e})}yV(t){this.postToDOMElement("remove-attribute",{name:t})}TV(){this.#JU||(this.#JU=!0,Promise.resolve().then(()=>{this.#JU=!1,this.tV("update-state",this.oV())}))}oV(){}_V(){return this.#WU}}}{const C33=self.Fe,C3X=self.Ye;self.EV=class extends self.Y5{constructor(){super()}}}{const C33=self.Fe,C3X=self.Ye;self.AV=class extends globalThis.X5{constructor(){super()}RU(){}}}{const C33=self.Fe,C3X=self.Ye,map=new WeakMap,internalApiToken=C33.ke();self.IV=class extends self.F5{#_$=!1;#A$=!1;#wV=!1;constructor(){super(),map.set(this,C33.fF.uF(internalApiToken))}ZB(){super.ZB(),this.M$(!1),this.b$(!1),this.RV(!1),map.delete(this)}v$(){return C33.fF.x$()}MV(){}G$(t){const e=map.get(this);e.hN().P$(t,e.j5(),e.V5())}O$(t){const e=map.get(this);return e.hN().D$(t,e.j5(),e.V5())}M$(t){if(this.#_$!==(t=!!t)){this.#_$=t;const e=map.get(this).hN();t?e.bV(this):e.vV(this)}}U$(){return this.#_$}W$(){}b$(t){if(this.#A$!==(t=!!t)){this.#A$=t;const e=map.get(this).hN();t?e.xV(this):e.GV(this)}}H$(){return this.#A$}V$(){}RV(t){if(this.#wV!==(t=!!t)){this.#wV=t;const e=map.get(this).hN();t?e.PV(this):e.OV(this)}}DV(){return this.#wV}LV(){}j$(){return[]}X$(){return null}Y$(t){}}}{let C33=self.Fe,C3X=self.Ye,runtime=null;self.TD=class{constructor(t){runtime=t}JL(t){runtime.ZL(t)}t4(t,e,s){C3X.Ri(t),C3X.Ri(e),C3X.Ui(s),runtime.NV(t,e,s)}s4(t,e,s){return C3X.Ri(t),C3X.Ri(e),C3X.Ui(s),runtime.FV(t,e,s)}kV(t){return C3X.Mi(t),new self.BV(runtime,t)}set $V(t){runtime.WV(!!t)}get $V(){return runtime.UV()}VV(t){runtime.HV(!!t)}jV(t){C3X.gi(t);const e=runtime.XV(t);return e?e.DF():null}}}{const C33=self.Fe,C3X=self.Ye;self.BV=class{#YV;#qV;#KV;#zV;#JV;#ZV;constructor(t,e){const s=(this.#YV=t).wD(),i=t.GD(),r=(this.#qV=i,this.#KV=i.QV(),t.kD()),n=(this.#zV=r.tH(),this.#JV=r.eH(i),s.sH()),h=n.eH();this.#ZV=h,e&&h.iH(e),t.rH(!1)}nH(){const t=this.#YV.wD(),e=this.#KV,s=this.#ZV;t.hH(e),this.#qV.oH(this.#zV,this.#JV),t.aH(e),s.lH(s.qO()+1)}get cH(){return this.#ZV.uH()}release(){const t=this.#YV,e=t.kD(),s=t.wD().sH();t.rH(!0),s.fH(),e.fH()}}}{let C33=self.Fe,C3X=self.Ye,renderer=null,runtime=null;self.dH=class{constructor(t,e){runtime=t,renderer=e}pH(){renderer.ix()}mH(t){renderer.Zv(t)}CH(){renderer.Yg()}gH(){renderer.Wg()}SH(){renderer.t2()}setColor(t){renderer.Xv(t[0],t[1],t[2],t[3])}yH(t,e,s,i){renderer.Xv(t,e,s,i)}TH(){renderer.qv()}_H(t){renderer.Yv(t)}EH(t){renderer.w2(t)}AH(){renderer.R2()}rect(t){renderer.ox(t.left,t.top,t.right,t.bottom)}IH(t,e,s,i){renderer.ox(t,e,s,i)}wH(t){renderer.ac(C33.ac.xc(t))}RH(t,e,s,i,r,n,h,o){renderer.fS(t,e,s,i,r,n,h,o)}MH(t,e){renderer.F2(C33.ac.xc(t),C33.Rect.Nl(e))}bH(t,e){renderer.Cx(C33.ac.xc(t),C33.ac.xc(e))}vH(t,e,s,i,r,n,h,o,a,l,c,u,f){renderer.gx(t,e,s,i,r,n,h,o,a,l,c,u,C33.Rect.Nl(f))}xH(t,e,s,i,r,n,h,o,a,l,c,u,f){renderer.P2(t,e,s,i,r,n,h,o,a,l,c,u,C33.ac.xc(f))}GH(t,e,s){renderer.Sx(t,e,s)}PH(t){renderer.uS(t)}line(t,e,s,i){renderer.Dm(t,e,s,i)}OH(t,e,s,i,r,n){renderer.O2(t,e,s,i,r,n)}DH(t,e,s,i){renderer.B2(t,e,s,i)}LH(t){renderer.H2(C33.Rect.Nl(t))}NH(t){renderer.j2(C33.ac.xc(t))}FH(t){renderer.J2(t)}kH(){renderer.Z2()}BH(t){renderer.sS(t)}$H(){renderer.hS()}WH(t){C3X.hr(t,self.UH);const e=t?runtime.Pk(t):null;renderer.zv(e)}VH(t,e){const s=self.rN.iN(t);if(s)return s.HH(renderer,{DT:e?.DT??"clamp-to-edge",LT:e?.LT??"clamp-to-edge",NT:e?.NT??"trilinear",BT:e?.BT??!0});throw new Error("invalid IImageInfo")}jH(t){const e=self.rN.iN(t);if(!e)throw new Error("invalid IImageInfo");e.PR()}dW(t){const e=self.rN.iN(t);if(!e)throw new Error("invalid IImageInfo");const s=e.z_();return self.UH.XH(runtime,s)}YH(t,e,s){C3X.Ei(t),C3X.Ei(e);const i=renderer.B_(t,e,{DT:s?.DT??"clamp-to-edge",LT:s?.LT??"clamp-to-edge",NT:s?.NT??"trilinear",BT:s?.BT??!0});return self.UH.XH(runtime,i)}qH(t,e,s){C3X.nr(e,self.UH);const i=runtime.Pk(e);renderer.WM(t,i,{premultiplyAlpha:s?.premultiplyAlpha??!0})}deleteTexture(t){C3X.nr(t,self.UH);const e=runtime.Pk(t);renderer.H_(e)}KH(){const t=renderer.MS();return new self.zH(runtime,t)}JH(){runtime.KN().ZH(renderer)}QH(t){C3X.nr(t,globalThis.Gk);const e=runtime.Pk(t);e.tj(renderer)}}}{const C33=self.Fe,C3X=self.Ye,map=new WeakMap,reverseMap=new WeakMap;self.UH=class{constructor(t,e){map.set(this,{runtime:t,ej:e}),reverseMap.set(e,this),t.WF(this,e),Object.defineProperties(this,{width:{value:e.Sm(),writable:!1},height:{value:e.vm(),writable:!1}})}static XH(t,e){if(!e)return null;const s=reverseMap.get(e);return s||new self.UH(t,e)}}}{let getActual2=function(t){return map.get(t).sj};getActual=getActual2;const C33=self.Fe,C3X=self.Ye,map=new WeakMap;self.zH=class{constructor(t,e){map.set(this,{runtime:t,sj:e}),t.WF(this,e)}release(){getActual2(this).gn()}set ij(t){C3X.Ri(t),getActual2(this).$R(t)}get ij(){return getActual2(this).Vw()}set rj(t){C3X.Ei(t),getActual2(this).WR(t)}get rj(){return getActual2(this).UR()}set lineHeight(t){C3X.Ei(t),getActual2(this).HR(t)}get lineHeight(){return getActual2(this).jR()}set nj(t){getActual2(this).YR(t)}get nj(){return getActual2(this).qR()}set hj(t){getActual2(this).KR(t)}get hj(){return getActual2(this).zR()}setColor(t){C3X.Wi(t),this.oj(t[0],t[1],t[2])}oj(t,e,s){getActual2(this).eM(t,e,s)}aj(t){C3X.Ri(t),getActual2(this).My(t)}set lj(t){getActual2(this).sM(t)}get lj(){return getActual2(this).iM()}set verticalAlign(t){getActual2(this).rM(t)}get verticalAlign(){return getActual2(this).nM()}set cj(t){getActual2(this).hM(t)}get cj(){return getActual2(this).oM()}set uj(t){getActual2(this).aM(t)}get uj(){return getActual2(this).lM()}set text(t){C3X.Ri(t),getActual2(this)._f(t)}get text(){return getActual2(this).cM()}mk(t,e,s){C3X.Ei(t),C3X.Ei(e),C3X.Ei(s),getActual2(this).uM(t,e,s)}fW(){const{runtime:t,sj:e}=map.get(this),s=e.z_();return self.UH.XH(t,s)}pW(){return getActual2(this).UM().Ll()}fj(t){C3X.Ki(t),getActual2(this).DR=t}dj(){getActual2(this).PR()}get pj(){return getActual2(this).dM()}get mj(){return getActual2(this).mM()}}}{let GetTypeFromFileExtension2=function(t){if(!t)return"";const e=t.split(".");if(e.length<2)return"";const s=e.at(-1).toLowerCase();return EXT_TO_TYPE.get(s)||""},AddScript2=function(i){return new Promise((t,e)=>{const s=document.createElement("script");s.onload=t,s.onerror=e,s.async=!1,s.type="module",s.src=i,document.head.appendChild(s)})};GetTypeFromFileExtension=GetTypeFromFileExtension2,AddScript=AddScript2;const C33=self.Fe,VALID_LOAD_POLICIES=new Set(["local","remote"]),EXT_TO_TYPE=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);C33.Cj=class extends C33.pn{constructor(t,e){super();const s=e.exportType,i=(this.gf=t,this.gj="folders",this.Sj=new Map,this.yj="cordova"===s,this.Tj=!!e.isiOSCordova,this._j=!!e.isFileProtocol,this.Ej=e.swClientId,this.Aj=e.supportedAudioFormats||{},this.Ij=new Map,this.wj=!1,this.Rj=e.scriptFolder,this.Mj="",this.bj="",this.vj="",this.xj=e.fileMap||new Map,this.Gj=new Map,"html5"===s||"scirra-arcade"===s||"instant-games"===s);this.Pj=i?"remote":"local",this.Oj=new Map,this.Dj=[],this.Lj=[],this.Nj=!1,this.Fj=0,this.kj=0,this.Bj=0,this.$j=!1,this.Wj=C33.Cn(C33.Pd,()=>this.Uj(),50),this.Vj=C33.Cn(C33.Ad,Math.max(C33.hardwareConcurrency,8)),this.Hj=C33.Cn(C33.Ad,20),this.jj=new self.QL(this)}gn(){for(const t of this.Oj.values())t.gn();this.Oj.clear(),C33.Vh(this.Lj),this.gf=null}hN(){return this.gf}Xj(t){this.gj=t}pN(){return this.gj}Yj(){return this.Rj}qj(t){this.Mj=t}gN(){return this.Mj}Kj(t){this.bj=t}zj(){return this.bj}Jj(t){this.vj=t}Zj(){return this.vj}Qj(){return this._j}xo(t,e){return e=e||this.Pj,C33.wo(t)?("flat"===this.gj&&(t=t.toLowerCase()),this.yj&&this._j?this.tX(t):"playable-ad-single-file"===this.gf.jN()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===e?this.Vj:this.Hj).Eu(()=>C33.xo(t))):C33.xo(t)}Go(t){return C33.wo(t)?("flat"===this.gj&&(t=t.toLowerCase()),this.yj&&this._j?this.eX(t):"playable-ad-single-file"===this.gf.jN()?C33.Oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.Pj?this.Vj:this.Hj).Eu(()=>C33.Go(t))):C33.Go(t)}bo(t){return C33.wo(t)?("flat"===this.gj&&(t=t.toLowerCase()),this.yj&&this._j?this.sX(t):"playable-ad-single-file"===this.gf.jN()?C33.Do(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.Pj?this.Vj:this.Hj).Eu(()=>C33.bo(t))):C33.bo(t)}async vo(t){const e=await this.bo(t);return JSON.parse(e)}iX(t,e){return"flat"===this.gj&&(t=t.toLowerCase()),this.gf.qL("runtime","cordova-fetch-local-file",{filename:t,as:e})}sX(t){return this.iX(t,"text")}async tX(t){const e=await this.iX(t,"buffer"),s=GetTypeFromFileExtension2(t);return new Blob([e],{type:s})}async rX(t){"flat"===this.gj&&(t=t.toLowerCase());let e=this.Sj.get(t);if(!e){const s=await this.tX(t);e=URL.createObjectURL(s),this.Sj.set(t,e)}return e}eX(t){return this.iX(t,"buffer")}mN(t){"flat"===this.gj&&(t=t.toLowerCase());let e=this.Mj+t;return"Gecko"===C33.ds._s&&"preview"===this.gf.jN()?this.nX(e):e}fN(t){return C33.Io(t)?Promise.resolve(t):this.yj&&this._j?this.rX(t):"playable-ad-single-file"===this.gf.jN()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.gj&&(t=t.toLowerCase()),Promise.resolve(t))}hX(e){if(C33.Io(e)||"preview"!==this.gf.jN()||!this.Ej||!e)return e;try{const t=new URL(e,location.href);return t.searchParams.set("__c3_client_id",this.Ej),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+e),e}}aX(t){return this.fN(t)}lX(t){if(t.cX&&!VALID_LOAD_POLICIES.has(t.cX))throw new Error("invalid load policy");let e=this.Oj.get(t.url);return e||(e=C33.Cn(C33.uX,this,{url:t.url,size:t.size||0,cX:t.cX||this.Pj}),this.Oj.set(e.fX(),e),this.Nj)||(this.Fj+=e.Cu(),this.Lj.push(e.dX().then(()=>this.pX(e.Cu())))),e}mX(t){this.Oj.delete(t.fX())}async CX(){try{await Promise.all(this.Lj),this.Bj=1}catch(t){console.error("Error loading: ",t),this.$j=!0,this.Uj()}}gX(){this.Nj=!0}SX(){return this.$j}pX(t){this.kj+=t,this.Wj.Hd()}Uj(){const t=C33.Cn(C33.Event,"loadingprogress");this.Bj=C33.En(this.kj/this.Fj,0,1),t.progress=this.Bj,this.gf.zf().dispatchEvent(t)}yX(){return this.Bj}TX(t){C33.Yh(this.Dj,t),this.Dj.length&&this.Lj.push(this._X())}async _X(){const t=[],e=[];for(const[s,i,r]of this.Dj)this.Fj+=r,t.push(this.EX(s,i,e).then(()=>this.pX(r)));await Promise.all(t),this.gf.lD()&&0<e.length&&await this.gf.qL("runtime","load-webfonts",{webfonts:e})}async EX(e,s,i){try{let t=await this.fN(s);"Gecko"===C33.ds._s&&(e=`'${e}'`),("Gecko"===C33.ds._s&&"preview"===this.gf.jN()||"playable-ad-single-file"===this.gf.jN())&&(t=this.nX(t));const r=new FontFace(e,`url('${t}')`);(this.gf.lD()?self:document).fonts.add(r),await r.load(),this.gf.lD()&&i.push({name:e,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${e}': `,t)}}eN(t){return!!this.Aj[t]}AX(t,e){this.wj=!!e;for(const[s,i,r]of t)this.Ij.set(s,{fileName:s,IX:i.map(t=>({type:t[0],wX:t[1],RX:s+t[1],fileSize:t[2]})),isMusic:r})}MX(t){"flat"===this.gj&&(t=t.toLowerCase());const e=this.Ij.get(t);if(!e)return null;let s=null;for(const i of e.IX)if(s||"audio/webm; codecs=opus"!==i.type||(s=i),this.eN(i.type))return i;return s}bX(t){const e=this.MX(t);return e?{url:this.mN(e.RX),type:e.type}:null}vX(){if(this.wj){const t=[];for(const e of this.Ij.values())if(!e.isMusic){const s=this.MX(e.fileName);s&&t.push({originalUrl:e.fileName,url:this.mN(s.RX),type:s.type,fileSize:s.fileSize})}return t}return[]}xX(t){return"preview"===this.gf.jN()&&(t=new URL(t,location.href).toString()),this.xj.get(t)||null}nX(t){let e=this.Gj.get(t);if(!e){const s=this.xX(t);if(!s)return t;e=URL.createObjectURL(s),this.Gj.set(t,e)}return e}JO(){return this.jj}async _N(...t){const e=await Promise.all(t.map(t=>this.fN(t)));if(this.gf.lD())if(1===t.length){const s=t[0];await import((C33.wo(s)?"./":"")+s)}else{const i=t.map(t=>`import "${C33.wo(t)?"./":""}${t}";`).join("\n"),r=URL.createObjectURL(new Blob([i],{type:"application/javascript"}));await import(r)}else await Promise.all(e.map(t=>AddScript2(t)))}async AN(t){if(WebAssembly.compileStreaming){const e=await this.fN(t);return WebAssembly.compileStreaming(fetch(e))}{const s=await C33.Go(t);return WebAssembly.compile(s)}}async wN(t){const e=await this.fN(t);return this.gf.qL("runtime","add-stylesheet",{url:e})}}}{const C33=self.Fe;C33.GX=class extends C33.pn{constructor(t,e){super(),this.PX=t,this.gf=t.hN(),this.OX=e.url||"",this.DX=e.size,this.LX=e.cX,this.NX=e.blob||null,this.FX=!!this.NX,this.HC=null}gn(){this.HC=null,this.PX=null,this.gf=null,this.NX=null}fX(){return this.OX}Cu(){return this.DX}dX(){return"local"===this.LX||this.NX?(this.FX=!0,Promise.resolve()):(this.HC||(this.HC=this.PX.xo(this.OX,this.LX).then(t=>(this.FX=!0,this.HC=null,this.NX=t)).catch(t=>{console.error("Error loading resource: ",t),this.HC=null})),this.HC)}kX(){return this.FX}BX(){return this.NX?Promise.resolve(this.NX):this.HC||this.PX.xo(this.OX,this.LX)}}}{const C33=self.Fe,promiseThrottle=new C33.Ad,allImageAssets=new Set;C33.uX=class extends C33.GX{constructor(t,e){super(t,e),this.$X=null,this.WX=null,this.E3=0,this.UX=-1,this.VX=-1,allImageAssets.add(this)}gn(){if(0!==this.E3)throw new Error("released image asset which still has texture references");this.PX.mX(this),this.$X=null,allImageAssets.delete(this),super.gn()}static HX(){for(const t of allImageAssets)t.$X=null,t.WX=null,t.E3=0}HH(t,e){return e=e||{},this.E3++,this.WX?Promise.resolve(this.WX):(this.$X||(e.FT=this.gf.KN().jX(),this.$X=this.XX(t,e)),this.$X)}async XX(e,s){try{const i=await this.BX();return 0===this.E3?this.$X=null:await promiseThrottle.Eu(async()=>{const t=await e.Vx(i,s);return this.$X=null,0===this.E3?(e.H_(t),null):(this.WX=t,this.UX=t.Sm(),this.VX=t.vm(),this.WX)})}catch(t){throw console.error("Failed to load texture: ",t),t}}PR(){if(this.E3<=0)throw new Error("texture released too many times");if(this.E3--,0===this.E3&&this.WX){const t=this.WX.JS();t.H_(this.WX),this.WX=null}}YX(){return this.E3}z_(){return this.WX}Sm(){return this.UX}vm(){return this.VX}async qX(){const t=await this.BX();return C33.Xs.ImageBitmap?createImageBitmap(t):C33.No(t)}}}{let SortByInstLastCachedZIndex2=function(t,e){return t.BL().KX()-e.BL().KX()};SortByInstLastCachedZIndex=SortByInstLastCachedZIndex2;const C33=self.Fe,assert=self.assert;C33.zX=class extends C33.pn{constructor(t,e,s){super(),this.JX=t,this.al=e,this.ll=s,this.ZX=[],this.QX=!0,this.t6=new Set,this.e6=!1}gn(){C33.Vh(this.ZX),this.t6.clear(),this.JX=null}g0(){C33.Vh(this.ZX),this.QX=!0,this.t6.clear(),this.e6=!1}s6(){this.QX=!1}du(){if(this.ZX.length){if(this.ZX.length>this.t6.size)return!1;this.i6()}return!0}r6(t){this.t6.has(t)?(this.t6.delete(t),0===this.t6.size&&(this.e6=!1)):(this.ZX.push(t),this.QX=1===this.ZX.length)}v0(t){this.t6.add(t),this.e6=!0,50<=this.t6.size&&this.i6()}i6(){this.e6&&(this.ZX.length===this.t6.size?this.g0():(C33.Zh(this.ZX,this.t6),this.t6.clear(),this.e6=!1))}n6(){this.QX||(this.ZX.sort(SortByInstLastCachedZIndex2),this.QX=!0)}h6(t){this.i6(),this.n6(),this.ZX.length&&t.push(this.ZX)}}}{const C33=self.Fe;C33.o6=class extends C33.pn{constructor(t,e){super(),this.a6=t,this.l6=e,this.c6=C33.Cn(C33.cu)}gn(){this.c6.gn(),this.c6=null}u6(t,e,s){let i=this.c6.rs(t,e);return i||(s?(i=C33.Cn(C33.zX,this,t,e),this.c6.Set(t,e,i),i):null)}f6(t){return Math.floor(t/this.a6)}d6(t){return Math.floor(t/this.l6)}p6(i,r,n){if(r)for(let s=r.Gl(),t=r.Ol();s<=t;++s)for(let t=r.Pl(),e=r.Dl();t<=e;++t)if(!n||!n.rc(s,t)){const h=this.u6(s,t,!1);h&&(h.v0(i),h.du())&&this.c6.pu(s,t)}if(n)for(let s=n.Gl(),t=n.Ol();s<=t;++s)for(let t=n.Pl(),e=n.Dl();t<=e;++t)r&&r.rc(s,t)||this.u6(s,t,!0).r6(i)}m6(t,e){let s=this.f6(t.Gl()),i=this.d6(t.Pl()),r=this.f6(t.Ol()),n=this.d6(t.Dl());for(;s<=r;++s)for(let t=i;t<=n;++t){const h=this.u6(s,t,!1);h&&h.h6(e)}}C6(t){let e=t.Gl(),s=t.Pl(),i=t.Ol(),r=t.Dl();for(;e<=i;++e)for(let t=s;t<=r;++t){const n=this.u6(e,t,!1);n&&n.s6()}}}}{let SortByInstLastCachedZIndex2=function(t,e){return t.BL().KX()-e.BL().KX()},SortByInstZElevation2=function(t,e){return t.BL().Uy()-e.BL().Uy()};SortByInstLastCachedZIndex=SortByInstLastCachedZIndex2,SortByInstZElevation=SortByInstZElevation2;const C33=self.Fe,assert=self.assert,tmpRect=new C33.Rect,tmpQuad=new C33.ac,renderCellArr=[],tmpDestRect=new C33.Rect,tmpSrcRect=new C33.Rect,glMatrix=self.ye,vec32=glMatrix.Me,vec42=glMatrix.ve,mat42=glMatrix.Ae,tempMat4=mat42.create(),tempVec3=vec32.create(),tempVec4=vec42.create(),camVector=vec32.create(),lookVector=vec32.create(),upVector=vec32.create(),tempVec2=C33.Cn(C33.ol),tempRect=C33.Cn(C33.Rect),tempInstanceList1=[],tempInstanceList2=[],tempInstancesByCameraDist=[],DEFAULT_LAYER_OPTIONS={name:"",sid:-1,g6:!1,isVisible:!0,isInteractive:!0,hB:!1,backgroundColor:[1,1,1,1],_B:!0,S6:[1,1],opacity:1,IB:!1,y6:!1,T6:!1,_6:!1,scaleRate:1,YP:0,TB:0,E6:[],A6:[],I6:[]};C33.w6=class extends C33.pn{constructor(t,e,s){super(),s=Object.assign({},DEFAULT_LAYER_OPTIONS,s),this.R6=t,this.gf=t.hN(),this.M6=e,this.Tn=s.name,this.t1=-1,this.b6=!!s.hB,this.v6=-1,this.x6=s.sid,this.G6=!!s.g6,this.P6=!!s.isVisible,this.O6=!!s.isInteractive,this.D6=C33.Cn(C33.Ko),this.D6.za(s.backgroundColor),this.L6=!!s._B,this.N6=s.S6[0],this.F6=s.S6[1],this.Ay=C33.Cn(C33.Ko,1,1,1,s.opacity),this.k6=C33.Cn(C33.Ko),this.B6=!!s.IB,this.W6=!!s.y6,this.U6=!!s.T6,this.V6=!!s._6,this.H6=s.scaleRate,this.Ey=s.YP,this.j6=null,this.X6=1,this.Iy=s.TB,this.Y6=0,this.q6=0,this.K6=0,this.z6=!1,this.bb=C33.Cn(C33.Rect),this.J6=C33.Cn(C33.Rect),this.Z6=C33.Cn(C33.Rect),this.Q6=!0,this.O_=mat42.create(),this.tY=!0,this.OP=mat42.create(),this.eY=!0,this.sY=C33.Cn(C33.l1.d1),this.iY=!0,this.rY=[],this.nY=s.E6,this.hY=[],this.aY=[],this.lY=new Map,this.ZX=[],this.cY=!1,this.uY=!1,this.fY=!1;const r=this.gf.KN();this.dY=C33.Cn(C33.pY,this,s.A6),this.HO=C33.Cn(C33.l1.HG,r.mY(),{OG:(t,e)=>{const s=e.NO(),i=s.Bx();t.My(s.CY()),t.Yx(i),t.qx(i),r.gY(i)},LG:t=>this.fk().SY(t)}),this.yY=!0,this.TY=!0,this._Y=null,this.EY=[],this.AY=!1,this.IY=C33.Cn(C33.Rect,0,0,-1,-1),this.wY=C33.Cn(C33.Rect,0,0,-1,-1),this.RY=new self.Gk(this),this.MY(),this.bY()&&(this._Y=C33.Cn(C33.o6,this.gf.uD(),this.gf.dD())),this.vY=s.I6.map(t=>C33.w6.xY(this.R6,this,t))}GY(){for(const t of this.nY){const e=this.gf.PY(t[1]);this.R6.OY(e),e.DY()||(e.LY(t),e.NY(this.t1)),this.hY.push(t),this.lY.set(t[2],t)}C33.Yh(this.rY,this.hY),this.nY=null}static xY(t,e,s){return C33.Cn(C33.w6,t,e,{name:s[0],sid:s[2],isVisible:s[3],isInteractive:s[13],hB:s[19],backgroundColor:s[4].map(t=>t/255),_B:s[5],S6:[s[6],s[7]],opacity:s[8],IB:s[9],y6:s[17],T6:s[18],_6:s[10],scaleRate:s[11],YP:s[12],TB:s[16],E6:s[14],A6:s[15],I6:s[20]})}gn(){for(const t of this.vY)t.gn();C33.Vh(this.vY);for(const e of this.ZX)this.gf.t$(e);C33.Vh(this.ZX),this.dY.gn(),this.dY=null,this.HO.gn(),this.HO=null,this.RY=null,this.M6=null,this.R6=null,this.gf=null}FY(t){return this.lY.get(t)}kY(r){let n=this.R6.BY(),h=0,o=this.hY;for(let i=0,t=o.length;i<t;++i){let t=o[i],e=this.gf.PY(t[1]),s=!0;if(!e.$Y()||n){const a=this.gf.WY(t,this,!0);r.push(a),e.UY()&&(s=!1,this.aY.push(a.o$()))}s&&(o[h]=o[i],++h)}C33.Uh(o,h),this.gf.ck(),this.jL()}VY(t,e){if(!t.$F().gF())throw new Error("instance is not of world type");const s=t.BL();if(s.$L()!==this)throw new Error("instance added to wrong layer");this.ZX.push(t),0!==s.Uy()&&(this.fY=!0),e&&this.bY()&&t.BL().o4(),this.jL(t)}HY(t){this.ZX.includes(t)||(this.ZX.push(t),0!==t.BL().Uy()&&(this.fY=!0),this.jL(t))}jY(t,e){const s=t.BL();if(s.$L()!==this)throw new Error("instance added to wrong layer");this.ZX.unshift(t),0!==s.Uy()&&(this.fY=!0),this.jL(t),e&&this.bY()&&t.BL().o4()}XY(t,e){const s=this.ZX.indexOf(t);s<0||(e&&this.bY()&&t.BL().YY(),this.ZX.splice(s,1),this.jL(t),this.qY())}KY(){this.fY=!0}qY(){0===this.ZX.length&&(this.fY=!1)}zY(t){if(t){const e=new Set;for(const s of this.ZX){const i=s.BL().KX();0<=i&&e.add(i)}let t=-1;for(const r of this.ZX){const n=r.BL();if(!(0<=n.KX())){for(++t;e.has(t);)++t;n.JY(t)}}}this.ZX.sort(SortByInstLastCachedZIndex2)}ZY(){}QY(){for(const t of this.ZX)t.YB().UY()||this.gf.t$(t);this.gf.ck(),C33.Vh(this.ZX),this.fY=!1,this.jL()}tq(e,t,s,i,r,n){const h=this.gf.wD(),o=this.gf.eq(),a=e.sq(),l=[];for(const c of this.hY){const u=c[0],f=u[0],d=u[1];if(t.rc(f,d)){const p=o[c[1]];if(p!==e){if(!a)continue;if(!e.iq(p))continue}let t=r;if(!t){const g=this.gf.FL();t=this._L()===g?this:(t=g.rq(this.lf()))||g.UL(this.qO())}const m=this.gf.WY(c,t,!1,void 0,void 0,!1,n),C=(t.rk(m),m.BL());C.u4(s,i),C.o4(),h.nk(!0),m.hk(),h.nk(!1),l.push(m)}}return l}ek(){return this.ZX.length}_L(){return this.R6}lf(){return this.Tn}nq(t){this.t1=t}qO(){return this.t1}hq(t){this.v6=t}nV(){return this.v6}oB(){return this.b6}aB(t){this.b6!==(t=!!t)&&(this.b6=t,this.R6.oq(),this.gf.XL())}aq(){let t=this.qk();return(t?t.Jk():this._L().lq()).indexOf(this)}cq(){return this.x6}hN(){return this.gf}uq(){return this.G6}fq(){for(const t of this.Kk())if(t.uq())return!0;return!1}hF(){return this.gf.hF()}fk(){return this.dY}YO(){return this.pq(),this.HO}pq(){const t=this.mq();if(this.yY||t!==this.TY||this.HO.DP()){const e=this.fk().Cq();this.HO.LP(e.map(t=>t.mA()),{FG:e.map(t=>t.qO()),kG:!t,VG:!0}),this.yY=!1,this.TY=t}}J5(){this.fk().J5(),this.yY=!0}bY(){return this.V6&&!this.U6}gq(){return this._Y}Sq(){this.AY=!1}iB(){for(const t of this.yq())if(!t.tB())return!1;return!0}tB(){return this.P6}eB(t){this.P6!==(t=!!t)&&(this.P6=t,this.gf.XL())}nB(t){this.O6=!!t}rB(){return this.O6}cB(){for(const t of this.yq())if(!t.rB())return!1;return!0}vB(t){if(this.z6!==(t=!!t)){if(this.z6=t){const e=this._L();this.q6=e._k(),this.K6=e.Ak()}this.Tq(),this.gf.XL()}}_q(){return this.z6}Tk(t){const e=this._L(),s=e.Eq(),i=e.Aq();this.q6!==(t=(t=i<t?i:t)<s?s:t)&&(this.q6=t,this._q())&&(this.Tq(),this.gf.XL())}Ek(t){const e=this._L(),s=e.Iq(),i=e.wq();this.K6!==(t=(t=i<t?i:t)<s?s:t)&&(this.K6=t,this._q())&&(this.Tq(),this.gf.XL())}_k(){return this._q()?this.q6:this._L()._k()}Ak(){return this._q()?this.K6:this._L().Ak()}GB(){return this.Rq(),this.bb}Mq(){return this.Rq(),this.J6}bq(){return this.Rq(),this.Z6}Vk(){const t=this._L();return[t.vq(),t.xq()]}yg(t){return this.gf.yg(t)}Gq(u,i){const r=this.Mq();if(0===u)i.I(r);else{let o=r.Bl(),a=r.$l(),t=this.Pq(u),e=r.width()/t,s=r.height()/t,[l,c]=this.Vk();if(.5!==l||.5!==c){let t=this.Oq(),e=this.gf,s=this.yg()/t,i=(l-.5)*e.Dq()/s,r=(c-.5)*e.Lq()/s,n=this.yk(),h=(0!==n&&(tempVec2.set(i,r),tempVec2.rotate(n),i=tempVec2.fl(),r=tempVec2.pl()),C33.Nn(t,0,u));o+=C33.Ft(i,0,h),a+=C33.Ft(r,0,h)}i.set(o-e/2,a-s/2,o+e/2,a+s/2)}}jv(){return this.Ay.Sa()}Yv(t){t=C33.En(t,0,1),this.Ay.Sa()!==t&&(this.Ay.ua(t),this.MY(),this.gf.XL())}MY(){this.k6.I(this.Ay),this.k6.ba()}CY(){return this.k6}mq(){return this.Ay.Ia(1,1,1,1)}pB(){return this.H6}dB(t){this.H6!==t&&(this.H6=t,this.Tq(),this.gf.XL())}gB(){return this.N6}yB(){return this.F6}Nq(t,e){this.N6===t&&this.F6===e||(this.N6=t,this.F6=e,this.Tq(),this.gf.XL())}CB(t){this.Nq(t,this.yB())}SB(t){this.Nq(this.gB(),t)}Vy(t){this.Iy!==t&&(this.Iy=t,this.gf.XL())}Uy(){return this.Iy}Sk(t){t=C33.An(t),this.Y6!==t&&(this.Y6=t,this.Tq(),this.gf.XL())}yk(){return C33.An(this.R6.yk()+this.Y6)}mB(){return this.Y6}Fq(){return 0<this.ZX.length}VL(){return this.ZX}kq(){return this.Bq()&&this.U6?(C33.Yh(tempInstancesByCameraDist,this.VL()),tempInstancesByCameraDist.sort((t,e)=>this.$q(t,e)),tempInstancesByCameraDist):this.VL()}Wq(t){C33.sn(t,this.kq());for(const e of this.vY)e.iB()&&0<e.jv()&&e.Wq(t)}$q(t,e){const s=this._L().Uq(),i=s[0],r=s[1],n=s[2],h=t.BL(),o=e.BL(),a=h.Fy()-i,l=h.$y()-r,c=h.Uy()-n,u=o.Fy()-i,f=o.$y()-r,d=o.Uy()-n;return u*u+f*f+d*d-(a*a+l*l+c*c)}bB(){return this.D6}AB(){return this.L6}EB(t){this.L6!==(t=!!t)&&(this.L6=t,this.gf.XL())}RB(){return this.B6}wB(t){this.B6!==(t=!!t)&&(this.B6=t,this.gf.XL())}Vq(){return!this.hN().Hq()||!this.W6}Bq(){return!this.Vq()}jq(){return this.Bq()&&this._L().Xq()}Yq(){if(!this.jq())return!1;for(const t of this.vY)if(!t.Yq())return!1;return!0}Ry(t){this.Ey!==t&&(this.Ey=t,this.gf.XL())}MB(){return this.Ey}qq(){return!this.M6}qk(){return this.M6}Kq(t){this.M6=t}Jk(){return this.vY}zq(){return 0<this.vY.length}Jq(t,e=!0){e?this.vY.push(t):this.vY.unshift(t)}Zq(t,e,s){let i=this.vY.indexOf(e);if(-1===i)throw new Error("cannot find layer to insert by");s&&++i,this.vY.splice(i,0,t)}Qq(t){const e=this.vY.indexOf(t);if(-1===e)throw new Error("cannot find layer to remove");this.vY.splice(e,1)}tK(){for(const t of this.vY)if(t.eK())return!0;return!1}*Qk(){for(const t of this.vY)yield*t.Qk();yield this}*Kk(){let t=this.qk();for(;t;)yield t,t=t.qk()}*yq(){yield this,yield*this.Kk()}sK(t){for(const e of this.Kk())if(e===t)return!0;return!1}iK(t){return this===t||this.N6===t.N6&&this.F6===t.F6&&this.X6===t.X6&&this.H6===t.H6&&this.Y6===t.Y6&&this._k()===t._k()&&this.Ak()===t.Ak()}rK(){return{parallaxX:this.gB(),parallaxY:this.yB(),scale:this.fB(),scaleRate:this.pB(),angle:this.mB(),hasOwnScroll:this._q(),scrollX:this._k(),scrollY:this.Ak()}}nK(t){this.Nq(t.parallaxX,t.parallaxY),this.uB(t.scale),this.dB(t.scaleRate),this.Sk(t.angle),this.vB(t.hasOwnScroll),this.Tk(t.scrollX),this.Ek(t.scrollY),this.Rq()}hK(t){if(0!==t.size){const e=C33.Zh(this.ZX,t);0<e&&(this.qY(),this.jL())}}jL(t){this.cY=!1,this.AY=!1,t&&!t.YB().$F().yF()||(this.uY=!1)}oK(){if(!this.cY){if(this.ZX.sort(SortByInstZElevation2),this.bY())for(let t=0,e=this.ZX.length;t<e;++t){const s=this.ZX[t].BL();s.JY(t),this._Y.C6(s.aK())}else for(let t=0,e=this.ZX.length;t<e;++t)this.ZX[t].BL().JY(t);this.cY=!0}}lK(){if(!this.uY){let t=this.R6.cK(this.nV()),e=t.map(t=>[...t.Qk()]).flat(),s=0;for(const i of e){for(const r of i.VL())r.YB().$F().yF()&&r.BL().uK(s++);i.fK()}}}fK(){this.uY=!0}dK(){return{isVisible:this.iB(),opacity:this.jv(),isInteractive:this.rB()}}pK(t,e,s){const i=t.BL(),r=e.BL();if(i.$L()!==this||r.$L()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let n=i.WL(),h=r.WL();return n!==h+(s?1:-1)&&(C33.qh(this.ZX,n),n<h&&h--,s&&h++,h===this.ZX.length?this.ZX.push(t):this.ZX.splice(h,0,t),this.jL(t),!0)}mK(t,e){let s=[],i=0,r=0,n=t.length,h=e.length;for(;i<n&&r<h;){const o=t[i],a=e[r];o.BL().KX()<a.BL().KX()?(s.push(o),++i):(s.push(a),++r)}for(;i<n;++i)s.push(t[i]);for(;r<h;++r)s.push(e[r]);return s}CK(e){const s=[],i=e.length;for(let t=0;t<i-1;t+=2){const r=e[t],n=e[t+1];s.push(this.mK(r,n))}return i%2==1&&s.push(e[i-1]),s}gK(t){for(;1<t.length;)t=this.CK(t);return t[0]}SK(){return this.oK(),C33.Vh(renderCellArr),this._Y.m6(this.GB(),renderCellArr),renderCellArr.length?1===renderCellArr.length?renderCellArr[0]:this.gK(renderCellArr):[]}eK(){return this.iB()&&0<this.jv()&&this.yK()}yK(){if(this.Fq()||!this.AB())return!0;for(const t of this.vY)if(t.yK())return!0;return!1}TK(){return this.RB()||!this.mq()||0!==this.MB()||this.dY._K()}EK(){if(this.TK())return!0;for(const t of this.vY)if(t.EK())return!0;return!1}Bx(){return this.j6}Pq(t){if(this.R6.Xk())return 1;{const e=this.AK();return e/(e-t)}}IK(t){const e=this.gf.HB();if(this.R6.Xk())return e;{const s=this.AK(),i=this.yg();return i/Math.abs(s-t)*e}}Tq(){this.eY=!0,this.iY=!0,this.Q6=!0}wK(t){return this.eY&&(this.RK(t,this.OP,0,0,null),this.eY=!1),this.OP}Oq(t){return this.yg(t)/this.MK()}AK(){return this.jq()?this._L().Uq()[2]:this.Oq()}bK(){if(this.jq()){const t=this._L().Uq();return[t[0],t[1],t[2]]}return this.vK()}vK(t=0,e=0,r=0){let n=this.gf,s=this._L(),i=n.xK(),h=n.GK(),o=(this._k()-i)*this.N6+i,a=(this.Ak()-h)*this.F6+h,l=(n.CD()&&(o=Math.round(o),a=Math.round(a)),o+t),c=a+e,u=s.Xk()?this.yg(r):this.Oq(r),[f,d]=this.Vk();if(.5!==f||.5!==d){let t=this.yg(r)/u,e=(f-.5)*n.Dq()/t,s=(d-.5)*n.Lq()/t,i=this.yk();0!==i&&(tempVec2.set(e,s),tempVec2.rotate(i),e=tempVec2.fl(),s=tempVec2.pl()),l+=e,c+=s}return[l,c,u]}RK(t,e,s,i,r){const n=this.gf,h=this._L();if(this.jq()){vec32.I(camVector,h.Uq()),vec32.I(lookVector,h.PK()),vec32.I(upVector,h.DK());const o=n.xK(),a=n.GK(),l=lookVector[0]-camVector[0],c=lookVector[1]-camVector[1],u=lookVector[2]-camVector[2];camVector[0]=(camVector[0]-o)*this.N6+o,camVector[1]=(camVector[1]-a)*this.F6+a,camVector[2]*=Math.max(this.N6,this.F6),lookVector[0]=camVector[0]+l,lookVector[1]=camVector[1]+c,lookVector[2]=camVector[2]+u}else{const[f,d,p]=this.vK(s,i,r),m=(vec32.set(camVector,f,d,p),vec32.set(lookVector,f,d,p-100),this.yk());0===m?vec32.set(upVector,0,1,0):vec32.set(upVector,Math.sin(m),Math.cos(m),0)}t.Lg(e,camVector,lookVector,upVector,r||n.Lq())}LK(){this.tY=!0,this.iY=!0,this.Q6=!0}NK(t){return this.tY&&(this.FK(t),this.tY=!1),this.O_}FK(t){const e=this.gf.KN(),[s,i]=this.Vk();if(this.R6.Xk())t.Dg(this.O_,e.kK(),e.BK());else if(.5===s&&.5===i)mat42.I(this.O_,e.$K());else{const r=e.kK(),n=e.BK();t.Pg(this.O_,r/n,s,i)}}tj(t,e=!0,s=0,i=0,r=0){e&&t.Dv(this.NK(t));let n;n=0===s&&0===i&&0===r?this.wK(t):(this.RK(t,tempMat4,s,i,r),tempMat4),t.$v(n)}WK(t){this.tj(t),t.A2(this.Uy())}UK(t){let e=null;if(t.ES()&&this.gf.VK()){const s=this.gf.KN().HK(this);s&&(e=s.mb(),t.tG(e))}return e}jK(t){if(t.Og()&&this.gf.VK()){const e=2*(this.qO()+1);t.StartMeasuringRenderPassTime(e,1+e)}}wT(t,e,s){let i=this.gf.KN(),r=this.TK(),n=null,h=this.UK(t);if(this.jK(t),r){const o={NT:this.gf.pD(),__:!0,XK:!!t.Og()&&this.gf.YK()};"low"===i.qK()&&(o.width=i.kK(),o.height=i.BK()),n=this.gf.KK(o),this.j6=n,t.jx(n),this.AB()&&t.Px(0,0,0,0)}else this.j6=e,t.jx(e);if(this.AB()||t.fu(this.D6),this.R6.zK(t,this.j6,this.vY,r&&this.AB()),this.jK(t),this.tj(t),t.A2(this.Uy()),t.Lx(this.Bq()),this.MK()>Number.EPSILON){this.oK();const a=this.bY()&&0===this.Uy()&&!this.fY;this.jq()?this.JK(t):a?this.ZK(t):this.QK(t,this.kq())}t.A2(0),t.w2(0),r&&(t.Lx(!1),this.t8(t,n,e,s)),h&&t.sG(h),this.j6=null}QK(s,i){let r=this.GB(),n=this.j6,h=this._L().Xk(),o=this._L().e8(),a=null;for(let t=0,e=i.length;t<e;++t){const l=i[t];if(l!==a){const c=(a=l).BL();c.iB()&&c.s8(r,o,h)&&this.i8(l,c,s,n)}}}JK(i){const r=this.j6,n=this.r8(),h=tempInstanceList1,o=tempInstanceList2,a=this.kq();for(let e=0,s=a.length;e<s;){const l=a[e],c=l.BL();if(c.iB()&&c.n8(n)){(!l.h8()||0<c.o8())&&o.push(l);const u=l.BL().d4();h.push(l);let t=e+1;for(;t<s;++t){const f=a[t],d=f.BL();if(d.iB()&&d.n8(n)){if(d.d4()!==u)break;(f.h8()?(0<d.o8()&&o.push(f),h):o).push(f)}}if(1!==h.length||h[0].a8()){this.l8(i,h);for(let t=0,e=o.length;t<e;++t){const p=o[t],m=p.BL();m.c8(!0),this.i8(p,m,i,r),m.c8(!1)}}else{this.i8(l,c,i,r);for(let t=0,e=o.length;t<e;++t){const C=o[t];if(C!==l){const g=C.BL(),S=g.$L();S.i8(C,g,i,r)}}}e=t,C33.Vh(h),C33.Vh(o)}else++e}}l8(s,i){const r=this.j6;s.zx();for(let t=0,e=i.length;t<e;++t){const n=i[t],h=n.BL();h.u8(!0),this.f8(n,h,s)}s.Jx();for(let t=0,e=i.length;t<e;++t){const o=i[t],a=o.BL();this.i8(o,a,s,r),a.u8(!1)}s.Qx()}ZK(t){let e=this._Y,s=this.wY,i=this.IY,r=this.GB(),n;s.set(e.f6(r.Gl()),e.d6(r.Pl()),e.f6(r.Ol()),e.d6(r.Dl())),this.AY&&s.equals(i)?n=this.EY:(n=this.SK(),this.AY=!0,i.I(s)),this.QK(t,n),n!==this.EY&&C33.Yh(this.EY,n)}i8(t,e,s,i){e._K()?this.d8(t,e,s,i):this.f8(t,e,s)}f8(t,e,s){const i=e.p8();s.s2()!==i&&i.wy(),t.wT(s)}d8(t,e,s,i){this.m8(t,e,s,i,null)&&this.tj(s)}m8(t,e,s,i,r){const n=e.n4().YO();return n.jP(s,i,{XP:t,YP:e.MB(),devicePixelRatio:this.gf.C8(),time:t.g8(),qP:this.gf.S8()*this.MK(),KP:this.yk(),CO:e.C4(),gO:n.DO()?null:this.y8(e),tO:r&&r.tO,eO:r&&r.eO,sO:r&&r.sO,iO:r&&r.iO}),s.A2(this.Uy()),n.Uv()}t8(t,e,s,i){const r=this.dY.Cq(),n=this.gf;0===r.length?(t.jx(s),t.Wg(),i&&0===this.Ey&&this.mq()?t.Xx(e):(t.Ry(this.Ey),t.My(this.k6),t.Yx(e)),t.qx(e),n.gY(e)):this.YO().jP(t,s,{XP:this,YP:this.MB(),devicePixelRatio:n.C8(),qP:n.S8()*this.MK(),KP:this.yk(),CO:this.GB(),gO:null,NG:!0})}fB(){return this.X6}uB(t){this.X6!==t&&(this.X6=t,this.R6.T8(),this.Tq(),this.gf.XL())}HB(){return this.MK()*this.gf.HB()}dV(){return this.MK()*this.gf.dV()}MK(){return(this.X6*this.R6.gk()-1)*this.H6+1}Rq(){if(this.Q6){this.Q6=!1;let t=this.gf.xK(),e=this.gf.GK(),s=(this._k()-t)*this.N6+t,i=(this.Ak()-e)*this.F6+e,r=this.MK(),n=this.gf.Dq()/r,h=this.gf.Lq()/r,o=s-n/2,a=i-h/2;this.gf.CD()&&(o=Math.round(o),a=Math.round(a));const l=this.J6,c=(l.set(o,a,o+n,a+h),this.yk()),u=(0!==c&&(tmpRect.I(l),tmpRect.offset(-l.Bl(),-l.$l()),tmpQuad.Oc(tmpRect,c),tmpQuad.Lc(tmpRect),tmpRect.offset(l.Bl(),l.$l()),l.I(tmpRect)),this.Iy);this.Gq(u,this.bb),this.jq()?this._8(u,this.Z6):this.Z6.I(this.bb)}}_8(t,e){let s=this.gf.KN(),i=s.QN(),r=s.eF(),[n,h]=this.OB(0,0,t),[o,a]=this.OB(i,0,t),[l,c]=this.OB(i,r,t),[u,f]=this.OB(0,r,t),d=Math.min(n,o,l,u),p=Math.min(h,a,c,f),m=Math.max(n,o,l,u),C=Math.max(h,a,c,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(C)||(C=1/0),e.set(d,p,m,C)}OB(t,e,s=0){return this.E8(t,e,s,this.dV())}$B(t,e,s=0){return this.E8(t,e,s,this.HB()*this.hF())}E8(t,e,s,i){const r=this.gf,n=r.JS(),h=this.MK(),o=r.Dq()/h,a=r.Lq()/h,l=tempVec4,c=(vec42.set(l,0,0,o,a),t/=i,e=l[3]-e/i,this.NK(n)),u=this.wK(n),f=tempVec3,d=C33.l1.f1(t,e,s,u,c,l,f);return d?[f[0],f[1]]:[NaN,NaN]}A8(t,e){const s=this.X6,i=this.H6,r=this.N6,n=this.F6,h=this.Y6,o=(this.X6=1,this.H6=1,this.N6=1,this.F6=1,this.Y6=0,this.Tq(),this.OB(t,e));return this.X6=s,this.H6=i,this.N6=r,this.F6=n,this.Y6=h,this.Tq(),o}kB(t,e,s=0){return this.I8(t,e,s,this.dV())}UB(t,e,s=0){return this.I8(t,e,s,this.HB()*this.hF())}I8(t,e,s,i){const r=this.gf,n=r.JS(),h=this.MK(),o=r.Dq()/h,a=r.Lq()/h,l=tempVec4,c=(vec42.set(l,0,0,o,a),this.NK(n)),u=this.wK(n),f=tempVec3,d=C33.l1.c1(t,e,s,u,c,l,f);return d?[f[0]*i,(l[3]-f[1])*i]:[NaN,NaN]}w8(t,e){return t*=this.HB()*this.hF(),0!==e&&(t*=this.Pq(e)),t}y8(t){const e=t.C4(),s=t.d4(),i=t.o8(),l=s+i,c=e.Gl(),u=e.Pl(),f=e.Ol(),d=e.Dl();if(this.jq()){if(this.M8(c,u,s)||this.M8(f,u,s)||this.M8(f,d,s)||this.M8(c,d,s))return null;if(0<i&&(this.M8(c,u,l)||this.M8(f,u,l)||this.M8(f,d,l)||this.M8(c,d,l)))return null}else if(l>=this.Oq())return null;let[p,m]=this.UB(c,u,s),[C,g]=this.UB(f,d,s);if(0!==this.yk()||0<i||this.jq()){const[S,y]=this.UB(f,u,s),[T,_]=this.UB(c,d,s);if(0<i){let[t,e]=this.UB(c,u,l),[s,i]=this.UB(f,u,l),[r,n]=this.UB(f,d,l),[h,o]=this.UB(c,d,l),a=Math.min(p,C,S,T,t,s,r,h);C=Math.max(p,C,S,T,t,s,r,h),p=a,a=Math.min(m,g,y,_,e,i,n,o),g=Math.max(m,g,y,_,e,i,n,o),m=a}else{let t=Math.min(p,C,S,T);C=Math.max(p,C,S,T),p=t,t=Math.min(m,g,y,_),g=Math.max(m,g,y,_),m=t}}return tmpRect.set(p,m,C,g),tmpRect}r8(){return this.iY&&(this.b8(),this.iY=!1),this.sY}b8(){const t=this.gf.JS(),e=this.NK(t),s=this.wK(t);this.sY.E1(s,e)}M8(t,e,s){return this.r8().I1(t,e,s)}v8(){const t={d:this.uq(),s:this.fB(),a:this.mB(),v:this.tB(),i:this.rB(),html:this.oB(),bc:this.D6.toJSON(),t:this.AB(),sx:this.q6,sy:this.K6,hosp:this.z6,px:this.gB(),py:this.yB(),c:this.Ay.toJSON(),sr:this.pB(),fx:this.dY.zy(),cg:this.aY};return t}x8(t){this.G6=!!t.d,this.X6=t.s,this.Y6=t.a,this.P6=!!t.v,this.O6=!t.hasOwnProperty("i")||t.i,this.b6=!!t.html,this.D6.za(t.bc),this.L6=!!t.t,t.hasOwnProperty("sx")&&(this.q6=t.sx),t.hasOwnProperty("sy")&&(this.K6=t.sy),t.hasOwnProperty("hosp")&&(this.z6=!!t.hosp),this.N6=t.px,this.F6=t.py,this.Ay.za(t.c),this.MY(),this.H6=t.sr,C33.Yh(this.aY,t.cg),C33.Yh(this.hY,this.rY);let s=new Set(this.aY),i=0;for(let t=0,e=this.hY.length;t<e;++t)s.has(this.hY[t][2])||(this.hY[i]=this.hY[t],++i);C33.Uh(this.hY,i),this.dY.Jy(t.fx),this.yY=!0}G8(){this.zY(!1),this.jL(),this.Tq(),this.LK()}Rk(){return this.RY}rk(t,e=!1){if(this.ZX.includes(t))e&&this.ZX.sort((t,e)=>{const s=t.BL().P8(),i=e.BL().P8();return s-i});else if(t.O8()){const s=[...t.X4()];s.push(t),s.sort((t,e)=>{const s=t.BL().P8(),i=e.BL().P8();return s-i});for(const i of s)if(i.n$())for(const r of i.h$())if(!s.includes(r)){const n=[...r.X4()];n.push(r),n.sort((t,e)=>{const s=t.BL().P8(),i=e.BL().P8();return s-i}),n&&n.length&&s.splice(s.length,0,...n)}for(const h of s)h.$F().gF()&&this.VY(h,!0)}else if(t.$F().gF()&&this.VY(t,!0),t.n$())for(const o of t.h$()){const a=[...o.X4()];if(a.push(o),a.sort((t,e)=>{const s=t.BL().P8(),i=e.BL().P8();return s-i}),a&&a.length)for(const l of a)l.$F().gF()&&this.VY(l,!0)}}}}{let vec3EqualsXYZ2=function(t,e,s,i){return t[0]===Math.fround(e)&&t[1]===Math.fround(s)&&t[2]===Math.fround(i)},MaybePrepareLayerDraw2=function(t,e){lastLayerPreparedForDrawing!==t&&(t.WK(e),lastLayerPreparedForDrawing=t)},C33=(vec3EqualsXYZ=vec3EqualsXYZ2,MaybePrepareLayerDraw=MaybePrepareLayerDraw2,self.Fe),C3Debugger=self.C3Debugger,assert=self.assert,tempDestRect=C33.Cn(C33.Rect),tempSrcRect=C33.Cn(C33.Rect),tempLayoutRect=C33.Cn(C33.Rect),tempColor=C33.Cn(C33.Ko),glMatrix=self.ye,vec32=glMatrix.Me,tempRender3dList=[],tempInstanceList1=[],tempInstanceList2=[],tempInstanceList3=[],lastLayerPreparedForDrawing=null;C33.D8=class extends C33.pn{constructor(t,e,s){super(),this.L8=t,this.gf=t.hN(),this.Tn=s[0],this.N8=s[1],this.F8=s[2],this.eC=s[1],this.sC=s[2],this.k8=!!s[3],this.B8=!!s[4],this.W8=s[5],this.U8=s[6],this.V8=s[7],this.H8=null,this.x6=s[8],this.t1=e,this.q6=0,this.K6=0,this.X6=1,this.Y6=0,this.j8=new Set,this.X8=new Set,this.Y8=new Set,this.q8=[],this.K8=[],this.z8=new Map,this.J8=new Map,this.Z8=[],this.Q8=!1,this.ez=vec32.create(),this.sz=vec32.create(),this.iz=vec32.create(),this.rz=[],this.nz=[],this.hz=new Map,this.oz=new Map,this.az=-1;const r=this.gf.KN();this.dY=C33.Cn(C33.pY,this,s[11]),this.HO=C33.Cn(C33.l1.HG,r.mY(),{OG:(t,e)=>{const s=e.NO(),i=s.Bx();t.qv(),t.Yx(i),t.qx(i),r.gY(i)},LG:t=>this.fk().SY(t)}),this.yY=!0,this.lz=!1,this.j6=null,this.cz={},this.uz=new Map,this.fz=!0,this.pz=new self.uk(this),this.mz=C33.Cn(C33.Event.zf);for(const i of s[9])this.rz.push(C33.w6.xY(this,null,i));this.Cz();for(const n of this.vk())n.GY();for(const h of s[10]){const o=this.gf.PY(h[1]);if(!o)throw new Error("missing nonworld object class");o.DY()||o.LY(h),this.Z8.push(h),this.OY(o)}}gn(){for(const t of this.nz)t.gn();C33.Vh(this.nz),this.Y8.clear(),this.H8=null,this.L8=null,this.gf=null}hN(){return this.gf}lf(){return this.Tn}cq(){return this.x6}qO(){return this.t1}fk(){return this.dY}YO(){return this.pq(),this.HO}pq(){const t="low"===this.gf.KN().qK();if(this.yY||this.lz!==t||this.HO.DP()){const e=this.fk().Cq();this.HO.LP(e.map(t=>t.mA()),{FG:e.map(t=>t.qO()),BG:t,VG:!0}),this.yY=!1,this.lz=t}}J5(){this.fk().J5(),this.yY=!0}gz(){let s=this.nz[0].MK();for(let t=1,e=this.nz.length;t<e;++t){const i=this.nz[t];0===i.gB()&&0===i.yB()||(s=Math.min(s,i.MK()))}return s}Sz(){return.5*this.gf.Dq()/this.gz()}yz(){return.5*this.gf.Lq()/this.gz()}Eq(){return this.Tz()?-1/0:this.Sz()}Aq(){return this.Tz()?1/0:this.Sm()-this.Sz()}Iq(){return this.Tz()?-1/0:this.yz()}wq(){return this.Tz()?1/0:this.vm()-this.yz()}Tk(t){const e=this.Eq(),s=this.Aq();this.q6!==(t=(t=s<t?s:t)<e?e:t)&&(this.q6=t,this._z(),this.gf.XL())}_k(){return this.q6}Ek(t){const e=this.Iq(),s=this.wq();this.K6!==(t=(t=s<t?s:t)<e?e:t)&&(this.K6=t,this._z(),this.gf.XL())}Ak(){return this.K6}Tz(){return this.k8}T8(){this.Tk(this._k()),this.Ek(this.Ak());for(const t of this.nz)t._q()&&(t.Tk(t._k()),t.Ek(t.Ak()))}Wk(t,e){this.W8===t&&this.U8===e||(this.W8=t,this.U8=e,this.Ez()&&(this.Az(),this._z(),this.gf.XL()))}vq(){return this.Xk()?.5:this.W8}xq(){return this.Xk()?.5:this.U8}e8(){const t=this.vq(),e=this.xq();return t<0||1<t||e<0||1<e}Hk(){this.B8&&(this.B8=!1,this.Az(),this._z(),this.gf.XL())}jk(){this.B8||(this.B8=!0,this.Az(),this._z(),this.gf.XL())}Xk(){return this.B8}Ez(){return!this.Xk()}Iz(t){this.Q8!==(t=!!t)&&(this.Q8=t,this._z(),this.gf.XL())}Xq(){return this.Q8}wz(t,e,s,i,r,n,h,o,a){vec3EqualsXYZ2(this.ez,t,e,s)&&vec3EqualsXYZ2(this.sz,i,r,n)&&vec3EqualsXYZ2(this.iz,h,o,a)||(vec32.set(this.ez,t,e,s),vec32.set(this.sz,i,r,n),vec32.set(this.iz,h,o,a),this.Rz())}Rz(){this._z(),this.gf.XL()}Uq(){return this.ez}PK(){return this.sz}DK(){return this.iz}gk(){return this.X6}Ck(t){this.X6!==t&&(this.X6=t,this._z(),this.T8(),this.gf.XL())}Sk(t){t=C33.An(t),this.Y6!==t&&(this.Y6=t,this._z(),this.gf.XL())}yk(){return this.Y6}Sm(){return this.eC}wm(t){!isFinite(t)||t<1||(this.eC=t)}vm(){return this.sC}ym(t){!isFinite(t)||t<1||(this.sC=t)}Mz(){return this.H8}lq(){return this.rz}*vk(){for(const t of this.rz)yield*t.Qk()}bk(){return this.nz}bz(){return this.nz.length}$L(t){return"number"==typeof t?this.UL(t):this.rq(t.toString())}UL(t){return t=C33.En(Math.floor(t),0,this.nz.length-1),this.nz[t]}rq(t){return this.hz.get(t.toLowerCase())||null}vz(t){return!!this.rq(t)}xz(t){return this.oz.get(t)||null}Az(){for(const t of this.nz)t.LK()}_z(){for(const t of this.nz)t.Tq()}Ok(t,e,s){if(this.vz(t))throw new Error(`layer name '${t}' already in use`);if(!e&&s<2)throw new Error("invalid insert position");const i=2<=s?e:e.qk(),r=C33.Cn(C33.w6,this,i,{name:t,sid:Math.floor(1e15*Math.random()),g6:!0});this.Gz(r,e,s),this.hN().XL(),this.oq()}Lk(t,e,s){if(!e&&s<2)throw new Error("invalid insert position");t===e&&s<2||(this.Pz(t),this.Gz(t,e,s),this.hN().XL(),this.oq())}Fk(t){if(this.Pz(t)){const e=this.gf.wD();e.nk(!0),t.gn(),e.nk(!1),this.hN().XL(),this.oq()}}Bk(){const t=new Set;for(const e of this.vk())e.uq()&&!e.fq()&&t.add(e);if(0!==t.size){const s=this.gf.wD();s.nk(!0);for(const i of t)this.Pz(i),i.gn();s.nk(!1),this.hN().XL(),this.oq()}}Gz(e,s,i){if(2<=i)if(s){if(s===e||s.sK(e))throw new Error(`cannot move layer '${e.lf()}' to sub-layer of itself`);s.Jq(e,2===i),e.Kq(s)}else 2===i?this.rz.push(e):this.rz.unshift(e),e.Kq(null);else{const t=s.qk();if(t){if(s.sK(e))throw new Error(`cannot move layer '${e.lf()}' to sub-layer of itself`);t.Zq(e,s,0===i),e.Kq(t)}else{let t=this.rz.indexOf(s);if(-1===t)throw new Error("cannot find layer to insert by");0===i&&++t,this.rz.splice(t,0,e),e.Kq(null)}}}Pz(t){const e=t.qk();if(e)return e.Qq(t),!0;if(1<this.rz.length){const s=this.rz.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.rz.splice(s,1),!0}return!1}Cz(){this.nz=[...this.vk()],this.hz.clear(),this.oz.clear();for(let t=0,e=this.nz.length;t<e;++t){const s=this.nz[t];s.nq(t),this.hz.set(s.lf().toLowerCase(),s),this.oz.set(s.cq(),s)}}Oz(){let t=0;for(const e of this.rz){for(const s of e.Qk())s.hq(t);e.oB()&&t++}}Dz(){return this.rz.at(-1).nV()+1}async oq(){this.Cz(),this.Oz(),this.az=this.Dz()}Lz(){return this.az}Nz(){this.az=-1}cK(t){const e=[];for(const s of this.rz){const i=s.nV();if(i===t)e.push(s);else if(t<i)break}return e}rK(){return{scrollX:this._k(),scrollY:this.Ak(),scale:this.gk(),angle:this.yk(),vpX:this.vq(),vpY:this.xq()}}nK(t){this.Tk(t.scrollX),this.Ek(t.scrollY),this.Ck(t.scale),this.Sk(t.angle),this.Wk(t.vpX,t.vpY)}Fz(){let t=this.rz.filter(t=>t.eK())[0];for(;t;){if(!t.AB())return tempColor.fa(t.bB()),tempColor.ua(1),tempColor;if(t.TK())return tempColor.ta(0,0,0,0),tempColor;t=t.Jk().filter(t=>t.eK())[0]}return tempColor.ta(0,0,0,0),tempColor}BY(){return this.fz}kz(){return[...this.j8]}OY(t){if(t.n$())for(const e of t.$z().Bz())this.j8.add(e);else this.j8.add(t)}Wz(){return[...this.X8]}Uz(t,e){if(t===this||!e)return Promise.resolve();t&&(C33.Wo(this.X8,t.X8),t.X8.clear());const s=[];for(const i of this.j8)this.X8.has(i)||(s.push(i.Vz(e)),this.X8.add(i));return Promise.all(s)}async jz(t){if(t.sq())throw new Error("cannot load textures for family");const e=this.gf.JS();if(e&&!e.$M()&&!this.X8.has(t)){this.X8.add(t);const s=t.Vz(e);this.Xz(s),await s,t.Yz(),this.gf.XL()}}Xz(t){this.Y8.add(t),t.then(()=>this.Y8.delete(t)).catch(()=>this.Y8.delete(t))}qz(){return Promise.all([...this.Y8])}Kz(t){if(t.sq()||0<t.ek())throw new Error("cannot unload textures");const e=this.gf.JS();e&&this.X8.has(t)&&(this.X8.delete(t),t.zz(e))}Jz(t,e){if(t!==this&&e)for(const s of this.X8)s.UY()||t.j8.has(s)||(s.zz(),this.X8.delete(s))}Zz(){this.X8.clear()}async Qz(t){const e=this.gf,s=this.L8,i=e.wD(),r=(this.V8&&(this.H8=i.t7(this.V8),this.H8.e7()),s.s7(this),this.eC=this.N8,this.sC=this.F8,this.q6=e.uD()/2,this.K6=e.dD()/2,this.T8(),this.Az(),this._z(),this.Oz(),await this.gf.KN().i7(this.Dz(),!0),this.r7(t),this.gf.n7(!0),this.h7(),this.fz||this.o7(),this.a7(this.q8),this.a7(this.K8),this.l7(),s.c7(),e.ck(),this.gf.n7(!1),this.gf.u7());if(await Promise.all(r),C33.Vh(r),!e.f7()){for(const n of this.q8)n.d7();for(const h of this.K8)h.p7(this.z8,this.J8);for(const[o,a]of Object.entries(this.cz)){const l=this.gf.XV(parseInt(o,10));l&&!l.sq()&&l.$Y()&&C33.Vh(a)}for(const c of this.q8)c.m7();for(const u of this.K8)u.m7()}C33.Vh(this.q8),C33.Vh(this.K8),this.z8.clear(),this.J8.clear(),await Promise.all([...this.j8].map(t=>t.C7(this.gf.JS()))),t&&(e.zf().dispatchEvent(new C33.Event("beforefirstlayoutstart")),await e.g7(new C33.Event("beforeprojectstart"))),await this.S7(new C33.Event("beforeanylayoutstart")),e.zf().dispatchEvent(new C33.Event("beforelayoutstart")),await this.g7(new C33.Event("beforelayoutstart")),e.f7()||await e.D$(C33.E7._7.T7.y7,null,null),e.zf().dispatchEvent(new C33.Event("afterlayoutstart")),await this.g7(new C33.Event("afterlayoutstart")),await this.S7(new C33.Event("afteranylayoutstart")),t&&(e.zf().dispatchEvent(new C33.Event("afterfirstlayoutstart")),await e.g7(new C33.Event("afterprojectstart"))),i.A7(s),await this.qz(),this.fz=!1}r7(t){for(const e of this.gf.eq())if(!e.sq()&&e.gF())for(const s of e.JF()){const i=s.BL(),r=i.$L(),n=C33.En(r.qO(),0,this.nz.length-1),h=this.nz[n];i.HL(h,!0),h.HY(s)}if(!t)for(const o of this.nz)o.zY(!1)}h7(){for(const t of this.nz)t.kY(this.q8),t.ZY()}o7(){let e=!1;for(const[t,s]of Object.entries(this.cz)){const i=this.gf.XV(parseInt(t,10));if(i&&!i.sq()&&i.$Y())for(const r of s){let t=null;if(!i.gF()||(t=r.hasOwnProperty("instJson")?this.xz(r.instJson.w.l):this.xz(r.w.l))){const n=this.gf.WY(i,t,!1,0,0,!0);r.hasOwnProperty("instJson")?n.Jy(r.instJson):n.Jy(r),e=!0,this.K8.push(n),r.hasOwnProperty("instJson")&&(this.z8.set(n,r),this.J8.set(r.index,n))}}}for(const h of this.nz)h.zY(!0),h.jL();e&&(this.gf.ck(),this.gf.I7())}a7(e){for(const s of e)if(s.n$()){const i=s.BL(),t=s.w7();for(const r of s.YB().$z().R7())if(r!==s.YB()){const n=r.JF();if(n.length>t)s.M7(n[t]);else{let t;t=i?this.gf.WY(r,i.$L(),!0,i.Fy(),i.$y(),!0):this.gf.WY(r,null,!0,0,0,!0),this.gf.ck(),r.b7(),s.M7(t),e.push(t)}}}}l7(){for(const t of this.Z8){const e=this.gf.PY(t[1]);e.n$()||this.gf.WY(t,null,!0)}}v7(){let s=[],i=this.Z8,r=0;for(let t=0,e=i.length;t<e;++t){const n=i[t],h=this.gf.PY(n[1]);h.UY()?h.n$()&&h.$z().x7()||s.push(this.gf.WY(n,null,!0)):(i[r]=n,++r)}C33.Uh(i,r),this.gf.ck(),this.a7(s)}tq(t,e,s,i,r,n,h){if(s)return s.tq(t,e,r,n,i,h);{const o=[];for(const a of this.nz)o.push(a.tq(t,e,r,n,i,h));return o.flat()}}async G7(){const t=this.L8;this.gf.f7()||(await this.S7(new C33.Event("beforeanylayoutend")),await this.g7(new C33.Event("beforelayoutend")),await this.gf.D$(C33.E7._7.T7.P7,null,null),await this.g7(new C33.Event("afterlayoutend")),await this.S7(new C33.Event("afteranylayoutend"))),t.O7(!0),this.gf.wD().D7(),this.fz||this.L7();for(const e of this.nz)e.QY();for(const s of this.gf.eq())if(!(s.UY()||s.gF()||s.$F().mF()||s.sq())){for(const i of s.JF())this.gf.t$(i);this.gf.ck()}t.O7(!1),t.gL()===this&&t.s7(null)}N7(t,e){const s=t.YB().cq().toString(),i=(this.cz.hasOwnProperty(s)||(this.cz[s]=[]),this.cz[s]),r={index:e,instJson:t.zy(),sceneGraphJson:{children:[]}};i.push(r),this.uz.set(t,r)}F7(t){const e=this.uz.get(t);for(const s of t.k7()){const i=this.uz.get(s);i&&e.sceneGraphJson.children.push({index:i.index,flags:C33.W7.B7(s.BL())})}}L7(){this.uz.clear();let t=0;for(const e of this.nz){e.oK();for(const s of e.VL()){const i=s.YB();!i.UY()&&i.$Y()&&(this.N7(s,t),t++)}}for(const r of this.nz)for(const n of r.VL()){const h=n.YB();!h.UY()&&h.$Y()&&this.F7(n)}this.uz.clear()}U7(){this.cz={},this.fz=!0}Bx(){return this.j6}TK(){const t=this.gf,e=t.JS().ES();return"low"===t.KN().qK()||e&&t.YK()||this.dY._K()||e&&t.Hq()}V7(t){const e=this.gf.KN();if(this.TK()){t.jx(null),t.Px(0,0,0,0);const s={NT:this.gf.pD(),__:t.Og()||this.gf.YK()||this.dY._K(),XK:!!t.Og()&&this.gf.YK()};"low"===e.qK()&&(s.width=e.kK(),s.height=e.BK()),this.j6=this.gf.KK(s)}else this.j6=null}H7(t){this.gf.j7(t)&&(t.Lx(!1),t.jx(null),t.Wg(),t.Xx(this.j6))}X7(t){this.TK()&&(t.Lx(!1),this.Y7(t,this.j6))}q7(t){t.jx(this.j6),t.fu(this.Fz()),this.gf.Hq()&&t.Dx();const e=this.cK(0);this.zK(t,this.j6,e,!0),t.Og()&&t.StartMeasuringRenderPassTime(0,1),this.X7(t),this.j6=null}K7(t,e){let s=null;this.gf.j7(t)&&(s=this.j6),t.jx(s),t.Px(0,0,0,0),this.gf.Hq()&&t.Dx();const i=this.cK(e);this.zK(t,s,i,!0),this.H7(t),t.mS(),this.gf.KN().z7(e)}zK(t,i,e,r){const n=e.filter(t=>t.eK());for(let e=0,s=n.length;e<s;){const h=n[e];if(h.Yq()&&!h.EK()){tempRender3dList.push(h);for(let t=e+1;t<s;++t){const o=n[t];if(!o.Yq()||o.EK())break;tempRender3dList.push(n[t])}if(2<=tempRender3dList.length||1===tempRender3dList.length&&tempRender3dList[0].tK()){this.J7(t,i,tempRender3dList),e+=tempRender3dList.length,C33.Vh(tempRender3dList);continue}C33.Vh(tempRender3dList)}h.wT(t,i,r&&0===e),++e}}Y7(t,e){const s=this.dY.Cq(),i=this.gf;0===s.length?(t.jx(null),t.Wg(),t.Xx(e),t.qx(e),i.gY(e)):(tempLayoutRect.set(0,0,i.Dq(),i.Lq()),this.YO().jP(t,null,{XP:this,YP:3,devicePixelRatio:this.gf.C8(),qP:this.gf.S8()*this.gk(),KP:this.yk(),CO:tempLayoutRect,gO:null,NG:!0}))}J7(i,r,t){t[0].AB()||(tempColor.fa(t[0].bB()),tempColor.ua(1),i.fu(tempColor)),this.gf.KN(),i.Lx(!0);const n=tempInstanceList1,h=tempInstanceList2,o=tempInstanceList3;for(const a of t)a.oK(),a.Wq(n);const e=t[0],s=e.UK(i);e.jK(i);for(let e=0,s=n.length;e<s;){const l=n[e],c=l.BL(),u=c.$L();if(c.iB()&&c.n8(u.r8())){(!l.h8()||0<c.o8())&&o.push(l);const f=l.BL().d4();h.push(l);let t=e+1;for(;t<s;++t){const d=n[t],p=d.BL();if(p.iB()&&p.n8(p.$L().r8())){if(p.d4()!==f)break;(d.h8()?(0<p.o8()&&o.push(d),h):o).push(d)}}if(1!==h.length||h[0].a8()){this.Z7(i,r,h);for(let t=0,e=o.length;t<e;++t){const m=o[t],C=m.BL(),g=C.$L();C.c8(!0),MaybePrepareLayerDraw2(g,i),g.i8(m,C,i,r),C.c8(!1)}}else{MaybePrepareLayerDraw2(u,i),u.i8(l,c,i,r);for(let t=0,e=o.length;t<e;++t){const S=o[t];if(S!==l){const y=S.BL(),T=y.$L();MaybePrepareLayerDraw2(T,i),T.i8(S,y,i,r)}}}e=t,C33.Vh(h),C33.Vh(o)}else++e}s&&i.sG(s),C33.Vh(n),lastLayerPreparedForDrawing=null}Z7(s,i,r){s.zx();for(let t=0,e=r.length;t<e;++t){const n=r[t],h=n.BL(),o=h.$L();h.u8(!0),MaybePrepareLayerDraw2(o,s),o.f8(n,h,s)}s.Jx();for(let t=0,e=r.length;t<e;++t){const a=r[t],l=a.BL(),c=l.$L();MaybePrepareLayerDraw2(c,s),c.i8(a,l,s,i),l.u8(!1)}s.Qx()}v8(){const t={sx:this._k(),sy:this.Ak(),s:this.gk(),a:this.yk(),w:this.Sm(),h:this.vm(),ortho:this.Xk(),vpX:this.vq(),vpY:this.xq(),fv:this.fz,persist:this.cz,fx:this.dY.zy(),layers:{},dynamicLayers:[]};for(const e of this.nz)if(e.uq()){const s=e.qk();t.dynamicLayers.push({sid:e.cq(),name:e.lf(),parentSid:s?s.cq():null,siblingIndex:e.aq(),data:e.v8()})}else t.layers[e.cq().toString()]=e.v8();return t}x8(t){this.q6=t.sx,this.K6=t.sy,this.X6=t.s,this.Y6=t.a,this.eC=t.w,this.sC=t.h,this.B8=!!t.ortho,t.hasOwnProperty("vpX")&&(this.W8=t.vpX),t.hasOwnProperty("vpY")&&(this.U8=t.vpY),this.fz=!!t.fv,this.cz=t.persist,this.dY.Jy(t.fx),this.yY=!0;for(const[e,s]of Object.entries(t.layers)){const i=parseInt(e,10),r=this.xz(i);r&&r.x8(s)}if(t.hasOwnProperty("dynamicLayers")){this.Bk(),this.gf.ck();const n=new Map,h=t.dynamicLayers;for(let t=h.length-1;0<=t;--t){const o=h[t],a=o.sid,l=o.name,c=o.parentSid,u=o.siblingIndex,f=o.data;if(this.Cz(),!this.vz(l)&&!this.xz(a)){let t,e;if(null===c)t=null,e=this.rz;else{if(!(t=this.xz(c)))continue;e=t.Jk()}const d=C33.Cn(C33.w6,this,t,{name:l,sid:a,g6:!0});e.push(d);let s=n.get(e);s||(s=[],n.set(e,s)),s.push({h4:d,siblingIndex:u}),d.x8(f)}}for(const[p,m]of n){m.sort((t,e)=>t.siblingIndex-e.siblingIndex);for(const C of m){let t=C.h4,e=C.siblingIndex,s=p.indexOf(t);p.splice(s,1),p.splice(e,0,t)}}}this.oq(),this.Az(),this._z()}SL(){return this.pz}_D(){return this.mz}Q7(t){t.layout=this.SL();const e=this.gf,s=e.tJ()&&!e.wD().ak();s&&C3Debugger.StartMeasuringScriptTime(),this.mz.dispatchEvent(t),s&&C3Debugger.AddScriptTime()}g7(t){return t.layout=this.SL(),this.mz.r0(t)}S7(t){return t.layout=this.SL(),this.gf.g7(t)}eJ(){this.sJ(this.rz)}sJ(t,e=0){const s=t.slice(0);s.reverse();for(const i of s)console.log("\t".repeat(e)+"- "+i.lf()),this.sJ(i.Jk(),e+1)}}}{const C33=self.Fe;C33.iJ=class extends C33.pn{#YV;#rJ=[];#nJ=new Map;#hJ=new Map;#oJ=null;#aJ=[];#lJ=null;#cJ=0;#uJ=null;constructor(t){super(),this.#YV=t}gn(){this.#YV=null,this.#oJ=null,this.#lJ=null,this.#uJ=null,C33.Vh(this.#rJ),this.#nJ.clear(),this.#hJ.clear(),C33.Vh(this.#aJ)}CE(t){const e=C33.Cn(C33.D8,this,this.#rJ.length,t);this.#rJ.push(e),this.#nJ.set(e.lf().toLowerCase(),e),this.#hJ.set(e.cq(),e)}hN(){return this.#YV}fJ(t){this.#lJ=t}dJ(){if(this.#lJ)return this.#lJ;if(this.#rJ.length)return this.#rJ[0];throw new Error("no first layout")}pJ(t){return this.#nJ.get(t.toLowerCase())||null}mJ(t){return this.#hJ.get(t)||null}CJ(t){return t=C33.En(Math.floor(t),0,this.#rJ.length-1),this.#rJ[t]}_L(t){return"number"==typeof t?this.CJ(t):this.pJ(t.toString())}AL(){return this.#rJ}s7(t){this.#oJ=t}gL(){return this.#oJ}gJ(t){if(this.#aJ.includes(t))throw new Error("layout already running");this.#aJ.push(t)}SJ(t){const e=this.#aJ.indexOf(t);if(-1===e)throw new Error("layout not running");this.#aJ.splice(e,1)}*yJ(){this.#oJ&&(yield this.#oJ),this.#aJ.length&&(yield*this.#aJ)}TJ(t){return this.#oJ===t||this.#aJ.includes(t)}O7(t){if(t)this.#cJ++;else{if(this.#cJ<=0)throw new Error("already unset");this.#cJ--}}lk(){return 0<this.#cJ}RL(t){this.#uJ=t}c7(){this.#uJ=null}wL(){return!!this.#uJ}_J(){return this.#uJ}EJ(){const t=this.gL();t&&t.Az()}AJ(){const t=this.gL();t&&t._z()}}}{const C33=self.Fe,NAMES_REGEXP=new RegExp("<(.+?)>","g");C33.IJ=class extends C33.pn{constructor(t){super(),this.gf=t,this.wJ=C33.Cn(C33.RJ),this.MJ=null,this.bJ=[],this.vJ=new Map,this.xJ=new Map,this.GJ=new Map,this.PJ=[],this.OJ=[],this.DJ=[],this.LJ=!1,this.NJ=!1,this.FJ=!1,this.kJ=()=>this.BJ(),this.$J=()=>this.WJ(),this.UJ=()=>this.VJ(),this.HJ=()=>this.jJ(),this.XJ=t=>this.YJ(t.H5),this.qJ=t=>this.KJ(),this.zJ=t=>this.JJ(),this.ZJ=t=>this.QJ(),this.t9=[],this.e9=0}gn(){this.s9(),this.kJ=null,this.$J=null,this.UJ=null,this.HJ=null,this.XJ=null,this.zJ=null;for(const t of this.bJ)t.BW(),t.gn();C33.Vh(this.bJ),this.bJ=null,this.wJ.gn(),this.wJ=null,C33.Vh(this.PJ),this.PJ=null,C33.Vh(this.OJ),this.OJ=null,C33.Vh(this.DJ),this.DJ=null,this.vJ.clear(),this.vJ=null,this.xJ.clear(),this.xJ=null,this.GJ.clear(),this.GJ=null,C33.Vh(this.t9),this.t9=null,this.gf=null}i9(){const t=this.gf.zf();t.addEventListener("pretick",this.kJ),t.addEventListener("tick2",this.$J),t.addEventListener("beforelayoutchange",this.UJ),t.addEventListener("layoutchange",this.HJ),t.addEventListener("instancedestroy",this.XJ),t.addEventListener("beforeload",this.qJ),t.addEventListener("afterload",this.zJ),t.addEventListener("afterlayoutstart",this.ZJ)}s9(){const t=this.gf.zf();t.removeEventListener("pretick",this.kJ),t.removeEventListener("tick2",this.$J),t.removeEventListener("beforelayoutchange",this.UJ),t.removeEventListener("layoutchange",this.HJ),t.removeEventListener("instancedestroy",this.XJ),t.removeEventListener("beforeload",this.qJ),t.removeEventListener("afterload",this.zJ),t.removeEventListener("afterlayoutstart",this.ZJ)}CE(t){this.wJ.Eu(t);const e=C33.n9.r9(t,this);this.Eu(e),this.h9(e),this.GJ.set(e.lf(),0)}o9(t){const e=this.a9(),s=t.l$(),i=e.rs(s),r=C33.n9.o9(s+":"+this.GJ.get(s),i,this);return this.l9(s),this.Eu(r),r}l9(t){this.GJ.set(t,this.GJ.get(t)+1)}c9(){for(const t of this.bJ)if(!t.u9()){const e=t.l$();this.l9(e)}}f9(){for(const t of this.GJ.keys())this.GJ.set(t,0)}Eu(t){this.bJ.push(t),this.vJ.set(t.lf().toLowerCase(),t)}v0(t){t.d9(),t.u9()||(C33.Kh(this.bJ,t),C33.Kh(this.PJ,t),C33.Kh(this.OJ,t),C33.Kh(this.DJ,t),this.vJ.delete(t.lf().toLowerCase()),this.p9(t),t.FW())||t.gn()}P$(t){this.gf.P$(t,this.MJ,null)}hN(){return this.gf}a9(){return this.wJ}m9(t){this.MJ=t}C9(){return this.MJ}*g9(){for(const t of this.bJ)yield t}*S9(){for(const t of this.OJ)yield t}y9(t,e){this.xJ.has(t)||this.xJ.set(t,new Set),this.xJ.get(t).add(e)}h9(t){for(const e of t.T9())this.y9(e,t)}p9(t){for(const[e,s]of this.xJ.entries())s.has(t)&&(s.delete(t),0===s.size)&&this.xJ.delete(e)}_9(t){if(this.xJ.has(t))return this.xJ.get(t)}E9(t,e){if(e)for(const s of this.bJ){const i=e.every(t=>s.A9(t.H5,t.trackId));if(i&&s.lf().includes(t.lf()))return s}}I9(t){return this.vJ.get(t.toLowerCase())||null}w9(t){for(const e of this.PJ)if(e.lf()===t)return e;for(const s of this.OJ)if(s.lf()===t)return s;return null}*R9(s){if(NAMES_REGEXP.test(s)){NAMES_REGEXP.lastIndex=0;let t,e=new Set;do{if(t=NAMES_REGEXP.exec(s)){const i=t[1].split(",");for(const r of i)e.add(r)}}while(t);for(const n of e.values()){const h=this.I9(n);h&&(yield h)}e.clear()}else{const t=this.I9(s);t&&(yield t)}}*M9(t){for(const e of this.bJ)e.WW(t)&&(yield e)}b9(t){this.PJ.includes(t)||this.PJ.push(t),this.v9()}x9(t){C33.Kh(this.OJ,t),this.G9()}P9(t){this.OJ.includes(t)?(t.O9(!0),t.D9(!1),t.L9(!1)):(t.O9(!1),t.D9(!0),t.L9(!1),this.PJ.includes(t)||this.PJ.push(t)),this.v9()}N9(t){t.O9(!1),t.D9(!1),t.F9(),C33.Kh(this.PJ,t),this.G9()}k9(t){t.O9(!1),t.D9(!1),this.OJ.includes(t)&&(t.L9(!0),this.DJ.push(t),C33.Kh(this.OJ,t)),this.PJ.includes(t)&&t.L9(!0)}B9(t){t.O9(!1),t.D9(!1),t.L9(!1),t.KW(1),C33.Kh(this.OJ,t)}W9(t){this.k9(t),t.F9()}BJ(){if(!this.hN().f7()&&this.LJ&&!this.NJ){for(this.FJ=!0;this.PJ.length;){const t=this.PJ.pop();(t.U9()?(t.V9(),this.DJ):(t.H9(),this.OJ)).push(t),0!==t.j9()&&(this.e9=1)}const e=this.gf.X9(),s=this.gf.Y9(),i=this.gf.ZD();for(let t=this.OJ.length-1;0<=t;t--){const r=this.OJ[t];r&&r.q9(e,i,s)}this.FJ=!1,0!==this.e9&&this.hN().XL()}}WJ(){if(!this.hN().f7()&&this.LJ&&!this.NJ){let s;for(let t=0,e=this.DJ.length;t<e;t++){const i=this.DJ[t];s=s||new Set,i.d9(),this.K9(i),s.add(i)}if(s){C33.Zh(this.DJ,s);for(let t=this.e9=0,e=this.OJ.length;t<e;t++)if(0!==this.OJ[t].j9()){this.e9=1;break}}this.G9()}}K9(t){t.FW()||t.z9()&&t.J9()&&t.Z9()&&t.Q9()}v9(){this.LJ||(this.LJ=!0)}G9(){this.DJ.length||this.OJ.length||this.PJ.length||this.FJ||(this.LJ=!1)}VJ(){for(this.NJ=!0;this.PJ.length;)this.N9(this.PJ.pop());const t=new Set;for(const e of this.OJ){const s=e.VJ();s&&(e.d9(),t.add(e))}C33.Zh(this.OJ,t),t.clear();for(const i of this.DJ){const r=i.VJ();r&&(i.d9(),t.add(i))}C33.Zh(this.DJ,t),this.G9();for(const n of this.bJ)n.tZ()}jJ(){this.NJ=!1}YJ(t){const e=t.YB(),s=this._9(e);if(s)if(this.gf.f7())this.t9.push(t);else for(const i of s)i.u9()||(i.FW()?this.v0(i):i.z9()||(this.K9(i),this.v0(i)))}KJ(){for(const t of this.PJ.map(t=>t))this.K9(t),this.v0(t);for(const e of this.OJ.map(t=>t))this.K9(e),this.v0(e)}JJ(){for(const t of this.t9)this.YJ(t);C33.Vh(this.t9);for(const e of this.bJ)e.JJ()}QJ(){const t=this.gf.TL(),e=t.gL();if(e)for(const s of this.bJ){const i=s.eZ();i&&e.lf()===i&&this.P9(s)}}v8(){return{timelinesJson:this.sZ(),scheduledTimelinesJson:this.iZ(),playingTimelinesJson:this.rZ(),markedForRemovalTimelinesJson:this.nZ(),hasRuntimeListeners:this.LJ,changingLayout:this.NJ,isTickingTimelines:this.FJ}}x8(t){t&&(this.f9(),this.hZ(t.timelinesJson),this.oZ(t.scheduledTimelinesJson),this.aZ(t.playingTimelinesJson),this.lZ(t.markedForRemovalTimelinesJson),this.LJ=!t.hasRuntimeListeners,this.NJ=!!t.changingLayout,this.FJ=!!t.isTickingTimelines,this.c9(),this.v9(),this.G9())}sZ(){return this.bJ.map(t=>t.v8())}hZ(t){for(const e of t){let t=this.I9(e.name);if(t)t.x8(e);else{const s=this.cZ(e);if(!s)continue;const i=this.I9(s);(t=this.o9(i)).x8(e)}t.uZ()||this.v0(t)}}cZ(t){const e=t.name,s=e.split(":");return s&&2===s.length?s[0]:null}iZ(){return this.fZ(this.PJ)}oZ(t){this.dZ(t,this.PJ)}rZ(){return this.fZ(this.OJ)}aZ(t){this.dZ(t,this.OJ)}nZ(){return this.fZ(this.DJ)}lZ(t){this.dZ(t,this.DJ)}pZ(t,e){if(e)for(const s of e)if(s===t.lf())return!0;return!1}fZ(t){return t.map(t=>t.lf())}dZ(t,e){const s=new Set;for(const i of e)this.pZ(i,t)||s.add(i);if(C33.Zh(e,s),t)for(const r of t){const n=this.I9(r);if(n){const h=e.find((e=>t=>t.lf()===e)(r));h||e.push(n)}}}}}{const C33=self.Fe,STEPS=100,LENGTH_STEP_SIZE=.01,BEZIER_STEP_SIZE=25,REFINE_ITERATIONS=20,LOOKUP_STEPS_FROM_LAST=5,TANGENT_RESULT=[0,0],MAP_RESULT=[0,0],SHORT_PROJECTION_RESULT=[0,0],PROJECTION_RESULT=[0,0,0,0,0],REFINE_LUT=new Array(4),REFINE_LUT_OBJECTS=[{x:0,y:0,t:0,Gt:0},{x:0,y:0,t:0,Gt:0},{x:0,y:0,t:0,Gt:0}],REFINE_RESULT={x:0,y:0,t:0,Gt:0};C33.mZ=class{constructor(t,e){this.CZ=!1,this.gZ=t,this.SZ=[];let s=null;if(s=e?this.gZ.yZ(e):C33.first(this.gZ.TZ())){const i=s.pU("offsetX"),r=s.pU("offsetY");if(i&&r){this._Z=i,this.EZ=r;const n=i.AZ(),h=r.AZ();for(let t=1,e=Math.min(n.length,h.length);t<e;++t){const o=n[t],a=(o.IZ(),o.wZ()),l=h[t],c=(l.IZ(),l.wZ());a&&"cubic-bezier"===a.RZ()&&c&&"cubic-bezier"===c.RZ()?this.SZ.push(C33.Cn(C33.MZ,a,c,o,l,this.SZ.length)):(a&&"line"===a.RZ()&&c&&c.RZ(),this.SZ.push(C33.Cn(C33.bZ,o,l,this.SZ.length)))}this.CZ=!0}}}gn(){for(const t of this.SZ)t.gn();C33.Vh(this.SZ),this.SZ=null,this.gZ=null,this._Z=null,this.EZ=null}vZ(){return this.CZ}xZ(){return this.SZ}GZ(t){const e="relative"===this._Z.PZ()?t.Fy():0,s="relative"===this.EZ.PZ()?t.$y():0;for(const i of this.SZ)i.GZ(e,s)}c1(e,s,t){let i=NaN,r=this.SZ.length;for(let t=0;t<r;t++){const n=this.SZ[t];if("cubic-bezier"===n.SA()){const h=n.c1(e,s);(isNaN(i)||h[3]<i)&&(i=h[3],SHORT_PROJECTION_RESULT[0]=h[2],SHORT_PROJECTION_RESULT[1]=n.qO())}}return SHORT_PROJECTION_RESULT}OZ(e,s,t){const i=t.tRange;C33.Ci(i[0])||(i[0]=0),C33.Ci(i[1])||(i[1]=1);let r=NaN,n=this.SZ.length;for(let t=0;t<n;t++){const h=this.SZ[t];if("cubic-bezier"===h.SA()){const o=h.DZ(e,s,i);(isNaN(r)||o[3]<r)&&(r=o[3],SHORT_PROJECTION_RESULT[0]=o[2],SHORT_PROJECTION_RESULT[1]=h.qO())}}return SHORT_PROJECTION_RESULT}LZ(t,e){return this.SZ[e].LZ(t)}NZ(t,e){return this.SZ[e].NZ(t)}},C33.MZ=class{constructor(t,e,s,i,r){this.t1=r;const n=t.FZ("cubic-bezier"),h=s.FZ("cubic-bezier"),o=e.FZ("cubic-bezier"),a=i.FZ("cubic-bezier");this.kZ=t.BZ(),this.$Z=e.BZ(),this.WZ=t.BZ()+n.UZ(),this.VZ=e.BZ()+o.UZ(),this.HZ=s.BZ()+h.jZ(),this.XZ=i.BZ()+a.jZ(),this.YZ=s.BZ(),this.qZ=i.BZ(),this.KZ=0,this.zZ=0,this.JZ=0,this.ZZ=0,this.QZ=0,this.tQ=0,this.eQ=0,this.sQ=0,this.iQ=0,this.rQ=0,this.nQ=0,this.hQ=0,this.oQ=0,this.aQ=0,this.lQ=0,this.cQ=0,this.uQ=0,this.fQ=0,this.dQ=0,this.pQ=0,this.mQ=NaN,this.CZ=!1,this.CQ=STEPS,this.gQ=new Array(this.CQ+1),this.gQ[0]=0,this.SQ=0,this.yQ=[],this.TQ=[];for(let t=0;t<STEPS;t++)this.TQ.push({x:0,y:0,t:0,Gt:0});this._Q()}gn(){C33.Vh(this.gQ),this.gQ=null,C33.Vh(this.yQ),this.yQ=null,C33.Vh(this.TQ),this.TQ=null}SA(){return"cubic-bezier"}qO(){return this.t1}EQ(){return Math.floor(this.SQ/BEZIER_STEP_SIZE)}AQ(){return 1/this.EQ()}GZ(t,e){this.IQ=t,this.wQ=e,this.gQ=new Array(this.CQ+1),this.gQ[0]=0,this._Q(),this.KZ=this.kZ+this.IQ,this.zZ=this.$Z+this.wQ,this.JZ=this.WZ+this.IQ,this.ZZ=this.VZ+this.wQ,this.QZ=this.HZ+this.IQ,this.tQ=this.XZ+this.wQ,this.eQ=this.YZ+this.IQ,this.sQ=this.qZ+this.wQ,this.iQ=3*(this.JZ-this.KZ),this.rQ=3*(this.ZZ-this.zZ),this.nQ=3*(this.QZ-this.JZ),this.hQ=3*(this.tQ-this.ZZ),this.oQ=3*(this.eQ-this.QZ),this.aQ=3*(this.sQ-this.tQ),this.lQ=3*(this.JZ-this.KZ),this.cQ=3*(this.KZ+this.QZ-2*this.JZ),this.uQ=this.eQ-this.KZ+3*(this.JZ-this.QZ),this.fQ=3*(this.ZZ-this.zZ),this.dQ=3*(this.zZ+this.tQ-2*this.ZZ),this.pQ=this.sQ-this.zZ+3*(this.ZZ-this.tQ)}Map(t){if(!this.CZ)return NaN;const e=this.RQ(t);return MAP_RESULT[0]=this.MQ(e),MAP_RESULT[1]=this.bQ(e),MAP_RESULT}c1(t,e){const s=this.vQ(STEPS),i=this.xQ(t,e,s),r=this.GQ(t,e,s,i);return PROJECTION_RESULT[0]=r.x,PROJECTION_RESULT[1]=r.y,PROJECTION_RESULT[2]=r.t,PROJECTION_RESULT[3]=r.Gt,PROJECTION_RESULT}DZ(t,e,s){const i=this.vQ(STEPS),r=this.PQ(t,e,i,s),n=this.GQ(t,e,i,r);return PROJECTION_RESULT[0]=n.x,PROJECTION_RESULT[1]=n.y,PROJECTION_RESULT[2]=n.t,PROJECTION_RESULT[3]=n.Gt,PROJECTION_RESULT}LZ(t){const e=1-t,s=e*e,i=2*e*t,r=t*t,n=s*this.iQ+i*this.nQ+r*this.oQ,h=s*this.rQ+i*this.hQ+r*this.aQ,o=Math.hypot(n,h);return TANGENT_RESULT[0]=n/o,TANGENT_RESULT[1]=h/o,TANGENT_RESULT}NZ(t){const e=1-t,s=e*e,i=2*e*t,r=t*t,n=s*this.iQ+i*this.nQ+r*this.oQ,h=s*this.rQ+i*this.hQ+r*this.aQ;return Math.atan2(h,n)}RQ(r){if(this.CZ){let t=r*this.gQ[this.CQ],e=0,s=this.CQ,i=0;for(;e<s;)i=e+((s-e)/2|0),this.gQ[i]<t?e=i+1:s=i;this.gQ[i]>t&&i--;const n=this.gQ[i];return n===t?i/this.CQ:(i+(t-n)/(this.gQ[i+1]-n))/this.CQ}}MQ(t){return this.CZ?self.wu.$u("cubicbezier")(t,this.kZ+this.IQ,this.WZ+this.IQ,this.HZ+this.IQ,this.YZ+this.IQ):NaN}bQ(t){return this.CZ?self.wu.$u("cubicbezier")(t,this.$Z+this.wQ,this.VZ+this.wQ,this.XZ+this.wQ,this.qZ+this.wQ):NaN}vQ(e){if(e=e||STEPS,!(this.yQ.length>=e)){this.yQ=new Array(e),e++;for(let t=0;t<e-1;t++){const s=t/(e-1),i=s**2,r=s**3,n=this.lQ*s,h=this.cQ*i,o=this.uQ*r,a=this.fQ*s,l=this.dQ*i,c=this.pQ*r,u=this.KZ+n+h+o,f=this.zZ+a+l+c;this.TQ[t].x=u,this.TQ[t].y=f,this.TQ[t].t=s,this.TQ[t].Gt=0,this.yQ[t]=this.TQ[t]}}return this.yQ}xQ(e,s,i,t=0,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.mQ))for(let t=0;t<STEPS;t++){const h=i[t],o=h.x-e,a=h.y-s;h.Gt=o*o+a*a,h.Gt<r&&(r=h.Gt,n=t)}else{for(let t=this.mQ;t<this.mQ+LOOKUP_STEPS_FROM_LAST&&!(t>=i.length);t++){const l=i[t],c=l.x-e,u=l.y-s;l.Gt=c*c+u*u,l.Gt<r&&(r=l.Gt,n=t)}for(let t=this.mQ;t>this.mQ-LOOKUP_STEPS_FROM_LAST&&!(t<0);t--){const f=i[t],d=f.x-e,p=f.y-s;f.Gt=d*d+p*p,f.Gt<r&&(r=f.Gt,n=t)}}return this.mQ=n}PQ(e,s,i,r,n=Number.MAX_SAFE_INTEGER){let h=0;if(isNaN(this.mQ))for(let t=0;t<STEPS;t++){const o=i[t],a=o.x-e,l=o.y-s;o.Gt=a*a+l*l,o.t>=r[0]&&o.t<=r[1]&&o.Gt<n&&(n=o.Gt,h=t)}else{for(let t=this.mQ;t<this.mQ+LOOKUP_STEPS_FROM_LAST&&!(t>=i.length);t++){const c=i[t],u=c.x-e,f=c.y-s;c.Gt=u*u+f*f,c.t>=r[0]&&c.t<=r[1]&&c.Gt<n&&(n=c.Gt,h=t)}for(let t=this.mQ;t>this.mQ-LOOKUP_STEPS_FROM_LAST&&!(t<0);t--){const d=i[t],p=d.x-e,m=d.y-s;d.Gt=p*p+m*m,d.t>=r[0]&&d.t<=r[1]&&d.Gt<n&&(n=d.Gt,h=t)}}return this.mQ=h}GQ(h,o,a,l){let c=a[l],t=1,u=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,e=0===l?0:l-1,s=l===t-1?t-1:l+1,i=a[e].t,r=a[s].t,n=(r-i)/4;if(n<.001)break;REFINE_LUT[0]=a[e];for(let t=1;t<=2;t++){const f=i+t*n,d=f**2,p=f**3,m=this.lQ*f,C=this.cQ*d,g=this.uQ*p,S=this.fQ*f,y=this.dQ*d,T=this.pQ*p,_=this.KZ+m+C+g,E=this.zZ+S+y+T,A=_-h,I=E-o,w=A*A+I*I;if(w<u){u=w,l=t,REFINE_RESULT.x=_,REFINE_RESULT.y=E,REFINE_RESULT.t=f,REFINE_RESULT.Gt=w,c=REFINE_RESULT;break t}const R=REFINE_LUT_OBJECTS[t-1];R.x=_,R.y=E,R.t=f,R.Gt=w,REFINE_LUT[t]=R}REFINE_LUT[3]=a[s],a=REFINE_LUT}while(t++<REFINE_ITERATIONS);return c}_Q(){this.CZ=!0;let e=this.MQ(0),s=this.bQ(0),i=0;for(let t=1;t<=this.CQ;t++){const r=this.MQ(t*LENGTH_STEP_SIZE),n=this.bQ(t*LENGTH_STEP_SIZE),h=e-r,o=s-n;i+=Math.hypot(h,o),this.gQ[t]=i,e=r,s=n}this.SQ=i}},C33.bZ=class{constructor(t,e,s){this.t1=s,this.OQ=t.BZ(),this.DQ=e.BZ(),this.IQ=0,this.wQ=0}gn(){}SA(){return"line"}qO(){return this.t1}GZ(t,e){this.IQ=t,this.wQ=e}Fy(){return this.OQ+this.IQ}$y(){return this.DQ+this.wQ}}}{const C33=self.Fe,PING_PONG_BEGIN=0,PING_PONG_END=1;C33.n9=class extends C33.pn{constructor(t,e,s){super(),this.gf=s.hN(),this.LQ=s,this.NQ=e,this.Tn=t,this.FQ=[],this.kQ=0,this.BQ=null,this.$Q=0,this.WQ(),this.UQ=null,this.VQ=null,this.HQ=0,this.jQ=0,this.XQ=1,this.YQ=PING_PONG_BEGIN,this.qQ=1,this.KQ=!1,this.zQ=!1,this.JQ=!1,this.ZQ=!0,this.QQ=!1,this.ttt=!1,this.ett=-1,this.stt=!1,this.itt=!1,this.ntt=!1,this.htt=!1,this.ott=NaN,this.att=[""],this.ltt="",this.ctt=!1,this.e9=0,this.utt=0,this.ftt=null}static r9(t,e){const s=e.a9(),i=s.dtt(),r=s.rs(t[i]),n=C33.Cn(C33.n9,t[i],r,e);return n.ptt(!0),n}static o9(t,e,s){return C33.Cn(C33.n9,t,e,s)}gn(){if(!this.FW()){const t=this.gf.zf();this.LQ.N9(this),this.LQ.W9(this);for(const e of this.FQ)e.gn();C33.Vh(this.FQ),this.FQ=null,this.gf=null,this.LQ=null,this.NQ=null,this.QQ=!0,this.UQ=null,this.VQ=null,this.mtt(t)}}mtt(t){const e=C33.Cn(C33.Event,"timelinestatereleased");e.Ctt=this,t.dispatchEvent(e)}SA(){return 0}WQ(){for(const t of this.NQ.Stt().gtt())this.kQ=this.FQ.push(C33.ytt.CE(this,t))}Ttt(){return this.LQ}hN(){return this.gf}TZ(){return this.FQ}_tt(i,r,n,h){if(this.utt){let s;for(let e=0;e<this.FQ.length;e++){let t=this.FQ[e];if(i===t.aU()){const o=t.pU(n);o&&r.constructor===o.Ett().constructor&&o.PZ()===h.PZ()&&(s=s||[]).push(o)}}return s}}uZ(){return!!this.FQ.length}yZ(t){for(const e of this.FQ)if(C33.Ir(e.fU(),t))return e;return null}Att(t){for(const e of this.FQ)if(!e.Itt()&&C33.Ir(e.lf(),t))return e;return null}iH(t){this.Tn=t}lf(){return this.Tn}wtt(){return this.NQ}l$(){return this.NQ.lf()}HW(){return this.NQ.HW()}VW(t){this.NQ.VW(t)}Rtt(){return this.NQ.Rtt()}Mtt(t){this.NQ.Mtt(t)}btt(){return this.NQ.btt()}vtt(t){this.NQ.vtt(t)}PZ(){return this.NQ.PZ()}xtt(t){this.NQ.PZ(t)}oU(t){for(const e of this.TZ())e.oU(t)}XW(){return this.NQ.XW()}jW(t){return this.NQ.jW(t)}qW(){return this.NQ.qW()}YW(t){return this.NQ.YW(t)}iW(){return this.NQ.iW()}Gtt(t){return this.NQ.Gtt(t)}KW(t){return this.XQ=t}zW(){return this.XQ}eZ(){return this.NQ.eZ()}Ptt(){return this.NQ.Ptt()}Ott(){return this.NQ.Ott()}Dtt(){return this.YQ}Ltt(){return!this.IsPlaying()||0<this.XQ}ZW(){return this.UQ||(this.UQ=new Promise(t=>{this.VQ=t})),this.UQ}F9(){this.UQ&&(this.VQ(),this.UQ=null,this.VQ=null)}Ntt(t){this.att=C33.n9.Ftt(t),this.ctt=!0}JW(){return this.att}ktt(){return this.ctt&&(this.ltt=this.att.join(" ")),this.ctt=!1,this.ltt}WW(t){if(!this.att)return!1;if(!this.att.length)return!1;const e=C33.n9.Ftt(t);return!!e&&!!e.length&&e.every(C33.n9.Btt,this)}$tt(){C33.E7.Timeline&&this.constructor===C33.n9&&(C33.E7.Timeline.T7.PushTriggerTimeline(this),this.LQ.P$(C33.E7.Timeline.T7.OnTimelineStarted),this.LQ.P$(C33.E7.Timeline.T7.OnTimelineStartedByName),this.LQ.P$(C33.E7.Timeline.T7.OnTimelineStartedByTags),this.LQ.P$(C33.E7.Timeline.T7.OnAnyTimelineStarted),C33.E7.Timeline.T7.PopTriggerTimeline())}Wtt(){this.ett=this.gf.Utt()}Q9(){this.ntt||(this.ntt=!0,C33.E7.Timeline&&this.constructor===C33.n9&&(C33.E7.Timeline.T7.PushTriggerTimeline(this),this.LQ.P$(C33.E7.Timeline.T7.OnTimelineFinished),this.LQ.P$(C33.E7.Timeline.T7.OnTimelineFinishedByName),this.LQ.P$(C33.E7.Timeline.T7.OnTimelineFinishedByTags),this.LQ.P$(C33.E7.Timeline.T7.OnAnyTimelineFinished),C33.E7.Timeline.T7.PopTriggerTimeline()))}O9(t){this.KQ=t}Vtt(){return this.ett===this.gf.Utt()}IsPlaying(t=!1){return!!this.Vtt()||!(!this.Htt()||t)||this.KQ}jtt(){return this.IsPlaying(!0)}tU(){return this.Xtt()}Xtt(){return!(this.FW()||this.Htt()||this.jtt()||this.J9())}D9(t){this.zQ=t}Htt(){return this.zQ}Ytt(t){this.ZQ=t;const e=this.GG();(e<=0||e>=this.HW())&&(this.ZQ=!0)}J9(){return this.ZQ}FW(){return this.QQ}L9(t){this.ttt=t}U9(){return this.ttt}qtt(t){this.stt=t}Ktt(){return this.stt}ptt(t){this.itt=!!t}u9(){return this.itt}Z9(){return this.JQ}GG(){return this.HQ}UW(t){const e=this.GG();this.ztt(t),this.Ytt(!1),this.J9()||this.qtt(!0),!this.jtt()&&!this.Htt()&&this.JQ||(this.jtt()||this.Htt()||this.JQ?this.jtt()?this.BW():this.Htt()&&(this.LQ.N9(this),this.Jtt()):this.Jtt()),this.Ztt(),this.Qtt(this.GG(),!1,!0,!0,e),this.tet(),this.e9&&this.hN().XL(),this.eet()}ztt(t){(t=C33.Ci(t)?t:this.HW())<0?this.HQ=0:t>=this.HW()?this.HQ=this.HW():this.HQ=t}iet(t){(t=C33.Ci(t)?t:this.HW())<0?this.HQ=0:t>=this.HW()?this.HQ=this.HW():this.HQ=t;for(const e of this.FQ)e.ret()}eet(){C33.E7.Timeline&&this.constructor===C33.n9&&(C33.E7.Timeline.T7.PushTriggerTimeline(this),this.LQ.P$(C33.E7.Timeline.T7.OnTimeSet),this.LQ.P$(C33.E7.Timeline.T7.OnTimeSetByName),this.LQ.P$(C33.E7.Timeline.T7.OnTimeSetByTags),C33.E7.Timeline.T7.PopTriggerTimeline())}net(){if(!this.XW())if(this.qW()&&this.YQ===PING_PONG_END){if(this.Ltt()){if(this.GG()>=this.HW())return!1}else if(this.GG()<=0)return!1}else if(!this.XW()&&!this.qW())if(this.Ltt()){if(this.GG()>=this.HW())return!1}else if(this.GG()<=0)return!1;return!0}$W(){this.FW()||this.net()&&this.Play(!0)}Play(t=!1){return!this.FW()&&!this.Htt()&&(this.jtt()&&this.Vtt()?this.het():!this.jtt()&&!!(this.J9()||t||this.Ktt())&&this.oet())}het(){return this.qtt(!1),this.LQ.x9(this),this.LQ.P9(this),this.ZW(),!0}oet(){return this.qtt(!1),this.LQ.P9(this),this.ZW(),!0}BW(t=!1){this.FW()||(this.Ytt(t),this.LQ.k9(this),this.J9()&&this.F9())}g0(t=!0,e=!1){if(!this.FW()){if(!this.jtt()&&this.Htt())return this.LQ.N9(this);if(!this.J9()){this.BW(!0),this.Ltt()?this.ztt(0):this.ztt(this.HW());const s=this.GG();this.Ztt(),e?this.aet(s):this.Qtt(s,!1,!1,!0),t&&this.eet(),this.tet(),this.e9&&t&&this.hN().XL()}}}let(){this.g0(!1,!0)}aet(t){this.Qtt(t,!1,!1,!0,NaN,!1,!0)}VJ(){if(!this.FW()){if(!this.hN().f7()&&this.cet())return!1;this.LQ.B9(this),this.hN().f7()||this.let()}return!0}Jtt(){this.H9(!0)}V9(){this.H9(!1,!0),this.O9(!1),this.D9(!1)}H9(t=!1,e=!1){if(!this.U9()||e){if(t){this.ntt=!1,this.JQ=!0,this.htt=!0,this.Ztt();for(const s of this.FQ)s.H9()}else if(this.O9(!0),this.D9(!1),this.$tt(),this.J9()){this.ett=-1,this.YQ!==PING_PONG_BEGIN&&(this.XQ=Math.abs(this.XQ)),this.YQ=PING_PONG_BEGIN,this.qQ=1,this.ZQ=!1,this.ntt=!1,this.JQ=!0,this.htt=!0,this.Ltt()?this.ztt(0):this.ztt(this.HW()),this.Ztt();for(const i of this.FQ)i.H9()}else{this.htt=!0,this.ntt=!1,this.Ztt();for(const r of this.FQ)r.uet()}this.tet()}}j9(){return this.e9}Ztt(){this.utt=0;for(const t of this.FQ)t.ab()&&(this.utt=1)}tet(){this.e9=0;for(const t of this.FQ)t.fet(),0===this.e9&&1===t.j9()&&(this.e9=1),this.BQ||1!==t.det()||(this.BQ||(this.BQ=[]),this.$Q=this.BQ.push(t))}q9(t,e,s){if(this.Ott()){if(0===t&&0===this.ott)return;this.ott=t,t=s}else{if(0===s&&0===this.ott)return;t=this.ott=s,e=1}const i=this.HQ+this.jQ,r=t*e*this.XQ,n=i+r,h=this.NQ.pet;n<0?(this.HQ=0,this.jQ=-n):h<=n?(this.HQ=h,this.jQ=this.HQ-n):(this.HQ=n,this.jQ=0);let o=!1,a=!1,l=this.XW(),c=this.qW();l||c?l&&!c?0<this.XQ?this.HQ>=h&&(this.iet(0),a=!0):this.HQ<=0&&(this.iet(h),a=!0):!l&&c?0<this.XQ?this.HQ>=h&&(this.ztt(h),this.KW(-1*this.zW()),a=!0,this.YQ===PING_PONG_END?this.qQ<this.iW()?(this.qQ++,this.YQ=PING_PONG_BEGIN):o=!0:this.YQ===PING_PONG_BEGIN&&(this.YQ=PING_PONG_END)):this.HQ<=0&&(this.ztt(0),this.KW(-1*this.zW()),a=!0,this.YQ===PING_PONG_END?this.qQ<this.iW()?(this.qQ++,this.YQ=PING_PONG_BEGIN):o=!0:this.YQ===PING_PONG_BEGIN&&(this.YQ=PING_PONG_END)):l&&c&&(0<this.XQ?this.HQ>=h&&(this.ztt(h),this.KW(-1*this.zW()),a=!0,this.YQ++,C33.wrap(this.YQ,0,2)):this.HQ<=0&&(this.ztt(0),this.KW(-1*this.zW()),a=!0,this.YQ++,C33.wrap(this.YQ,0,2))):0<this.XQ?this.HQ>=h&&(this.qQ<this.iW()?(this.qQ++,this.iet(0),a=!0):(this.ztt(h),o=!0)):this.HQ<=0&&(this.qQ<this.iW()?(this.qQ++,this.iet(h),a=!0):(this.ztt(0),o=!0));let u,f=this.kQ;if(o){for(u=0;u<f;u++)this.FQ[u].met();this.BW(!0),this.Wtt()}else{const d=this.$Q;for(u=0;u<d;u++)this.BQ[u].Cet();if(1===this.utt)for(u=0;u<f;u++){const p=this.FQ[u],m=p.yet(),C=this.HQ-m,g=i-m;C<0&&0<g?(this.HQ=m<0?0:h<=m?h:m,p.zu(m,!0,!1,a,this.htt,!1)):p.zu(this.HQ,!0,!1,a,this.htt,!1)}else for(u=0;u<f;u++)this.FQ[u].zu(this.HQ,!0,!1,a,this.htt,!1);for(u=0;u<d;u++)this.BQ[u].Tet();this.htt&&(this.htt=!1)}}Qtt(e,s=!1,i=!1,r=!1,n=NaN,t=!1,h=!1){for(const o of this.FQ)o.Cet();for(const a of this.FQ){let t=e;if("number"==typeof n&&!isNaN(n)){const l=this.GG(),c=l-a.yet(),u=n-a.yet();c<0&&0<u&&(t=a.yet(),this.ztt(t))}a.zu(t,s,i,r,this.htt,h)}for(const f of this.FQ)f.Tet();this.htt&&t&&(this.htt=!1)}_et(){const t=this.NQ.Stt().Eet(),e=C33.ytt.CE(this,t);return this.kQ=this.FQ.push(e),e}d9(){if(!this.FW())for(const t of this.FQ)t.Aet()}tZ(){for(const t of this.FQ)t.tZ()}Iet(){for(const t of this.FQ)t.wet()}Ret(t,e,s){if(e){if("number"==typeof s&&0<=s){const i=this.FQ[s];return i?(i.Met(e),void this.LQ.y9(e.YB(),this)):void 0}for(const r of this.FQ)if(r.Itt())if(t){if(r.fU()===t){r.Met(e),this.LQ.y9(e.YB(),this);break}}else if(!r.bet()){r.Met(e),this.LQ.y9(e.YB(),this);break}}}A9(t,e){for(const s of this.FQ)if(s.Itt())if(e){if(e===s.fU()&&t===s.aU())return!0}else if(t===s.aU())return!0;return!1}z9(){return this.FQ.some(t=>!t.Itt()||t.vet())}cet(){return this.FQ.some(t=>{if(t.Itt()){if(!t.vet())return!1;const e=t.YB();return!!e&&e.UY()}return!1})}pU(t){for(const e of this.TZ())for(const s of e.xet())if(s.Get()===t)return s}Pet(t){for(const e of this.FQ)if(t===e.aU())return e;return null}Oet(t){let e=t?t.split(" "):[],s=new Set(e.map(t=>t.toLowerCase().trim()));e=[...s.values()];for(const i of this.TZ())for(const r of i.Det()){const n=e.every(t=>r.Let(t));if(n)return r}}T9(){const t=[];for(const e of this.TZ())t.push(e.YB());return t.filter(t=>t)}JJ(){for(const t of this.TZ())t.JJ()}v8(){return{tracksJson:this.Net(),name:this.Tn,playheadTime:this.GG(),playbackRate:this.XQ,pingPongState:this.YQ,currentRepeatCount:this.qQ,isPlaying:this.KQ,isScheduled:this.zQ,initialStateSet:this.JQ,finishedTriggers:this.ntt,complete:this.ZQ,released:this.QQ,markedForRemoval:this.ttt,completedTick:this.ett,implicitPause:this.stt,isTemplate:this.itt,tags:this.att.join(" "),stringTags:this.ltt,tagsChanged:this.ctt,firstTick:this.htt}}x8(t){t&&(this.Fet(t.tracksJson),this.Tn=t.name,this.HQ=t.playheadTime,this.XQ=t.playbackRate,this.YQ=t.pingPongState,this.qQ=t.currentRepeatCount,this.KQ=!!t.isPlaying,this.zQ=!!t.isScheduled,this.JQ=!!t.initialStateSet,this.ntt=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.ZQ=!!t.complete,this.QQ=!!t.released,this.ttt=!!t.markedForRemoval,this.ett=t.completedTick,this.stt=!!t.implicitPause,this.itt=!!t.isTemplate,this.att=t.tags.split(" "),this.ltt=t.stringTags,this.ctt=!!t.tagsChanged,this.htt=!!t.firstTick)}Net(){return this.FQ.map(t=>t.v8())}Fet(t){this.Iet(),t.forEach((t,e)=>{const s=this.FQ[e];s.x8(t)}),this.FQ.filter(t=>t.vet())}static Btt(t){const e=this.JW();return""===t?1===e.length&&""===e[0]:e.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static Ftt(t){if(C33.$i(t))return t.slice(0);if(C33.wi(t))return t.split(" ");throw new Error("invalid tags")}ket(){return this.ftt||(this.ftt=C33.Cn(self.sU,this)),this.ftt}}}{const C33=self.Fe,INSTANCE_TRACK=0,VALUE_TRACK=1,AUDIO_TRACK=2;C33.ytt=class extends C33.pn{constructor(t,e){super(),this.gZ=t,this.Bet=e,this.$et=e.Stt(),this.Wet=NaN,this.Uet=NaN,this.Vet=null,this.Het=null,this.jet=!1,this.sb=0<e.yet(),this.Xet=!1,this.Yet=!1,this.qet=NaN,this.Ket=null,this.zet=this.Bet.Zet().Jet(),this.Qet=[],this.tst(),this.est=0,this.e9=0,this.sst=0}static CE(t,e){return C33.Cn(C33.ytt,t,e)}gn(){this.zet=null;for(const t of this.Qet)t.gn();C33.Vh(this.Qet),this.Qet=null,this.gZ=null,this.Vet=null,this.Het=null,this.Bet=null,this.Ket=null}tst(){for(const t of this.Bet.rst().ist())this.Qet.push(C33.nst.CE(this,t))}Aet(){for(const t of this.Qet)t.Aet()}tZ(){for(const t of this.Qet)t.tZ();this.Vet=null,this.Het=null}hst(){return this.gZ}hN(){return this.gZ.hN()}Det(){return this.zet||(this.zet=this.Bet.Zet().Jet()),this.zet}xet(){return this.Qet}pU(e){for(let t=0;t<this.Qet.length;t++){const s=this.Qet[t];if(s.Get()===e)return s}}ost(){this.Vet||this.aU()}ast(){return!!this.Vet&&!this.Vet.fV()}vet(){if(!this.Itt())return!1;const t=this.lst(),e=this.hN().DL(t);return!!e&&!e.fV()}YB(){if(this.Itt()){const t=this.cst();if(-1!==t)return this.hN().PY(t)}}ust(){return this.gZ.TZ().indexOf(this)}wet(){this.Vet=null,this.Wet=NaN,this.Het=null,this.Uet=NaN,this.jet=!0}bet(){return!!this.Vet}aU(){if(!this.jet){if(!this.Vet||!this.ast()){const t=this.lst();this.Vet=this.hN().DL(t)}return this.Vet}}Met(t){if(this.jet=!1,this.Vet!==t){this.tZ(),this.Vet=t,this.Uet=t.YB().qO(),this.Wet=t.o$(),this.Het=t.BL();for(const e of this.fst()){const s=e.dst,i=e.pst,r=s.mst();switch(r){case"instance-variable":{i.Cst();const n=t.YB(),h=n.gst(e.name),o=n.Sst(h),a=n.yst(h);o===e.name&&a===e.type&&i.Tst(h);break}case"behavior":{const l=e.W5,c=this.YB(),u=t.YB(),f=i.V5(u);if(l&&f){const d=l.lf();c._st(d),u._st(d),i.Cst(),i.Est(f.cq())}break}}}}}*fst(){for(const t of this.Qet){const e=t.Ett(),s=this.YB(),i={dst:t,pst:e};switch(t.mst()){case"world-instance":i.property=t.Get();break;case"instance-variable":{const r=e.Cst();i.name=s.Sst(r),i.type=s.yst(r);break}case"effect":{const n=s.fk(),h=e.Ast(n);i.Ist=h;break}case"behavior":{const o=e.V5(s);i.W5=o;break}case"plugin":i.BF=s.$F()}yield i}}BL(){if(!this.Het||!this.ast()){const t=this.aU();t&&(this.Het=t.BL())}return this.Het}wst(){return this.Bet}lst(){return isNaN(this.Wet)?this.Bet.lst():this.Wet}Rst(t){this.Bet.Rst(t)}btt(){return this.Bet.btt()}vtt(t){this.Bet.vtt(t)}PZ(){return this.Bet.PZ()}fU(){return this.Bet.fU()}yet(){return this.Bet.yet()}Mst(){return this.Bet.Mst()}bst(t){this.Bet.bst(t)}xtt(t){this.Bet.xtt(t)}oU(t){for(const e of this.Det())e.oU(t);for(const s of this.xet())s.oU(t)}vst(){return this.Bet.vst()}xst(t){this.Bet.xst(t)}cst(){return isNaN(this.Uet)?this.Bet.cst():this.Uet}Gst(t){this.Bet.Gst(t)}Pst(t){this.Bet.Pst(t)}Ost(){const t=this.aU();if(t){const e=t.P5();if(e.Dst())return t.P5().Ost()}return this.Bet.Ost()}Lst(t){this.Bet.Lst(t)}Nst(){const t=this.aU();if(t){const e=t.P5();if(e.Dst())return t.P5().Nst()}return this.Bet.Nst()}SA(){return this.Bet.SA()}lf(){return this.Bet.lf()}Itt(){return this.SA()===INSTANCE_TRACK}Fst(){return this.SA()===VALUE_TRACK}kst(){return this.SA()===AUDIO_TRACK}Bst(){return this.est}j9(){return this.e9}det(){return this.sst}ab(){return this.sb}ret(){for(const t of this.Qet)t.ret()}H9(){if(this.ost(),this.ast()||!this.Itt()){const t=this.hst(),e=t.Ltt(),s=e?0:this.Mst();for(const r of this.Qet)r.H9(s),0===this.est&&1===r.Bst()&&(this.est=1),0===this.e9&&1===r.j9()&&(this.e9=1);this.sst=0;const i=this.Qet.some(t=>t.det());i&&(this.sst=1),this.Ket=this.$st(s),this.Xet=!1,this.Yet=!1,this.zu(s),this.Wst(this.$st(s))}}uet(){if(this.ost(),this.ast()||!this.Itt()){this.gZ.Ltt();const t=this.gZ.GG()-this.yet();this.Ket=this.$st(t);for(const e of this.Qet)e.uet(t)}}met(){if(!this.hst().J9()&&(this.ost(),this.ast()||!this.Itt())&&!this.sb){const t=this.gZ.GG(),e=this.yet()+this.Mst();e<=t?this.zu(this.Mst(),!0,!1,!0,!1,!1,!0):t<=0&&this.zu(0,!0,!1,!0,!1,!1,!0)}}fet(){for(let t=0,e=this.Qet.length;t<e;t++){const s=this.Qet[t];s.fet(),0===this.est&&1===s.Bst()&&(this.est=1),0===this.e9&&1===s.j9()&&(this.e9=1)}}Cet(){const e=this.Qet.length;for(let t=0;t<e;t++)this.Qet[t].Cet()}zu(s,t=!1,i=!1,r=!1,e=!1,n=!1,h=!1){this.Vet||this.aU();const o=this.Vet&&!this.Vet.fV(),a=this.Bet.wf===INSTANCE_TRACK;if((o||!a)&&!(n&&a&&this.YB().UY()||(s-=this.yet())<0)){this.Ust(s,t),this.Vst(s,t,e);for(let t=0,e=this.Qet.length;t<e;t++)this.Qet[t].zu(s,i,r,h);this.Hst(s,t),0!==this.est&&(this.Het||(this.Het=this.Vet.BL()),this.Het)&&this.Het.o4()}}Tet(){const e=this.Qet.length;for(let t=0;t<e;t++)this.Qet[t].Tet()}Ust(t,e){if(e&&this.sb&&!this.Xet){const s=this.hst();if(s.Ltt()){if(t<0)return}else if(t>this.Mst())return;for(const i of this.Qet)i.H9();this.Xet=!0}}Hst(t,e){if(e&&this.sb&&!this.Yet){const s=this.hst();if(s.Ltt()){if(t>=this.Mst()){for(const i of this.Qet)i.zu(this.Mst(),!1,!0);this.Yet=!0}}else if(t<=0){for(const r of this.Qet)r.zu(0,!1,!0);this.Yet=!0}}}Vst(t,e,s){if(!s&&e&&C33.E7.Timeline){const i=this.hst(),r=this.Ket.IZ(),n=this.Ket.GG(),h=r?r.GG():i.HW();if(t<=n||h<=t)if(this.Ket=this.$et.jst(t,this.Bet),i.Ltt())r&&this.Wst(this.Ket);else{const o=this.Ket.IZ();o&&this.Wst(o)}}}$st(t){const e=this.$et.Xst(t,this.Bet);return e||this.$et.jst(t,this.Bet)}Wst(t){if(C33.E7.Timeline){const e=this.hst(),s=e.Ttt();C33.E7.Timeline.T7.PushTriggerTimeline(e),C33.E7.Timeline.T7.PushTriggerKeyframe(t),s.P$(C33.E7.Timeline.T7.OnAnyKeyframeReached),s.P$(C33.E7.Timeline.T7.Wst),C33.E7.Timeline.T7.PopTriggerTimeline(e),C33.E7.Timeline.T7.PopTriggerKeyframe(t)}}Yst(){const t=this.Bet.Zet(),e=t.qst();return e}Kst(){const t=this.Bet.rst(),e=t.zst(),s=C33.nst.CE(this,e);return this.Qet.push(s),s}Jst(t){const e=this.Bet.Zet();e.Zst(t)}Qst(t){for(const e of this.Qet)e.Qst(t)}tit(){for(const t of this.Qet)t.tit()}eit(){if(this.ost(),this.ast()||!this.Itt())for(const t of this.Qet)t.eit()}sit(){if(this.ost(),this.ast()||!this.Itt()){let t=!1;for(const e of this.Qet){const s=e.sit();!t&&s&&(t=!0)}if(t){const i=this.Yst();i.UW(this.hst().GG()),i.oU("noease"),i.xst(!0),i.Ntt("")}}}JJ(){isNaN(this.qet)||this.iit(this.qet),this.qet=NaN}v8(){const t=this.aU(),e=t?t.o$():this.lst();return{propertyTracksJson:this.rit(),lastKeyframeDataItemJson:this.nit(),initialStateOfNestedSet:this.Xet,endStateOfNestedSet:this.Yet,instanceUid:e,cleared:this.jet}}x8(t){if(t){this.hit(t.propertyTracksJson),this.oit(t.lastKeyframeDataItemJson),this.qet=t.instanceUid,this.Xet=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Xet=t.initialStateOfNestedSet),this.Yet=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Yet=t.endStateOfNestedSet),this.jet=!!t.hasOwnProperty("cleared")&&t.cleared;for(const e of this.Qet)0===this.est&&1===e.Bst()&&(this.est=1),0===this.e9&&1===e.j9()&&(this.e9=1);this.sst=0,this.Qet.some(t=>t.det())&&(this.sst=1)}}nit(){const t=this.Bet.Zet();return t.ait(this.Ket)}rit(){return this.Qet.map(t=>t.v8())}hit(t){t.forEach((t,e)=>{const s=this.Qet[e];s.x8(t)})}iit(t){if(C33.Ci(t)){const e=this.hN().DL(t);if(e){const s=this.hst();s.Ret(this.Bet.fU(),e,this.ust())}}}oit(t){const e=this.Bet.Zet();this.Ket=e.lit(t)}}}{const C33=self.Fe;C33.nst=class extends C33.pn{constructor(t,e){super(),this.cit=t,this.uit=e,this.dit=e.rst(),this.est=0,this.e9=0,this.sst=0,this.pit=this.Ett(),this.mit=this.uit.git().Cit(),this.Sit=null,this.yit=null}static CE(t,e){return C33.Cn(C33.nst,t,e)}gn(){this.cit=null,this.pit&&(this.pit.gn(),this.pit=null),this.mit=null,this.uit=null,this.dit=null}Bst(){return this.est}j9(){return this.e9}det(){return this.sst}Tit(){return!!this.yit}_it(t){this.yit=t}Eit(){return this.yit}Ait(){return this.cit}Iit(){return this.uit}rst(){return this.dit}hst(){return this.cit.hst()}hN(){return this.cit.hN()}aU(){return this.cit.aU()}Ett(){if(!this.pit){let t=this.uit.mst(),e;switch(t){case"behavior":e=new C33.nst.wit(this);break;case"effect":e=new C33.nst.Rit(this),this.e9=1;break;case"instance-variable":e=new C33.nst.Mit(this);break;case"plugin":e=new C33.nst.bit(this),this.e9=1;break;case"world-instance":e=new C33.nst.vit(this),this.e9=1,this.est=1;break;case"value":e=new C33.nst.xit(this);break;case"audio":e=new C33.nst.Git(this)}this.pit=e}return this.pit}mst(){return this.uit.mst()}Pit(t){this.uit.Pit(t)}Oit(){return this.uit.Dit()}Lit(t){this.uit.Nit(t)}dU(){return this.Ett().Fit()}Get(){return this.uit.kit()}Bit(t){this.uit.$it(t)}Wit(){return this.uit.SA()}Uit(t){this.uit.Vit(t)}Hit(){return this.rst().jit(this.uit).SA()}Xit(){return this.uit.Xit()}Yit(t){this.uit.Yit(t)}qit(){return this.uit.qit()}Kit(t){this.uit.Kit(t)}vst(){return this.uit.vst()}xst(t){this.uit.xst(t)}btt(){return this.uit.btt()}vtt(t){this.uit.vtt(t)}PZ(){return this.uit.PZ()}xtt(t){this.uit.xtt(t)}oU(t){for(const e of this.zit())e.oU(t)}Jit(){return this.uit.Jit()}zit(){return this.mit||(this.mit=this.uit.git().Cit()),this.mit}AZ(){return this.uit.git().AZ()}Zit(t){return this.dit.Zit(t,this.uit)}Qit(t){return this.dit.Qit(t,this.uit)}trt(t){let e=this.dit.Zit(t,this.uit),s;return s=e?this.dit.ert(t,this.uit):(e=this.dit.Qit(t,this.uit),this.dit.srt(t,this.uit)),{start:e,end:s}}*irt(){for(const t of this.zit())yield t.BZ()}*rrt(){for(const t of this.zit())yield t.GG()}Aet(){this.Ett().Aet()}tZ(){this.Ett().tZ()}nrt(){return this.Ett().nrt()}ret(){this.Ett().ret()}H9(t){this.Ett().H9(),this.Sit=this.hrt(t),this.fet()}uet(t){this.Ett().uet(),this.Sit=this.hrt(t)}fet(){const t=this.Ait();if(this.sst=0,t.Itt()){const e=this.hst(),s=t.aU(),i=this.Ett(),r=this.Get(),n=i.ort();if(n){const h=e._tt(s,i,r,this);h&&h.length&&(this.sst=1)}else this.sst=0}}hrt(t){const e=this.hst(),s=this.dit.Zit(t,this.uit);return s||(e.Ltt()?this.dit.Qit(t,this.uit):this.dit.srt(t,this.uit))}Cet(){this.pit.Cet()}zu(t,e=!1,s=!1,i=!1){let r,n,h=!1;if(e)r=this.dit.Qit(t,this.uit);else{if(this.Sit){const o=this.hst(),a=this.Sit.IZ(),l=this.Sit.GG(),c=a?a.GG():o.HW();(t<=l||c<=t)&&(this.Sit=this.dit.Qit(t,this.uit),h=!0)}else this.Sit=this.dit.Qit(t,this.uit),h=!0;r=this.Sit}r&&(n=r.IZ()),this.pit.zu(t,r,n,e,s,i,h)}art(t){if(this.Sit){const i=this.hst(),r=this.Sit.IZ(),n=this.Sit.GG(),h=r?r.GG():i.HW();(t<=n||h<=t)&&(this.Sit=this.dit.Qit(t,this.uit))}else this.Sit=this.dit.Qit(t,this.uit);const e=this.Sit,s=e.IZ();return this.pit.art(t,e,s)}lrt(t,e,s){return this.pit.art(t,e,s)}Tet(){this.pit.Tet()}static crt(t,e){const s=e.Iit(),i=e.dit;return i.Qit(t,s)}static urt(t,e){const s=e.Iit(),i=e.dit;return i.srt(t,s)}frt(){const t=this.uit.git(),e=t.drt();return this.Sit=null,e}Qst(t){this.Sit=null;const e=this.uit.git();e.prt(t)}tit(){this.Ett().tit()}eit(){const t=this.Ett().eit();if(t){const e=this.dit.jit(this.uit),s=this.Ett().nrt();e.mrt(s)}}sit(){const t=this.Ett().sit();return t&&this.Crt(),this.Ett().grt(),t}Crt(){const t=this.hst().GG(),e=this.Ett(),s=C33.nst.crt(t,this),i=this.frt();i.Vit(s.SA()),i.UW(t),i.oU(s.Srt()),i.xst(!0),i.yrt(e.Trt()),i.mrt(e.nrt())}v8(){return{sourceAdapterJson:this.Ett().v8()}}x8(t){t&&this.Ett().x8(t.sourceAdapterJson)}}}{const C33=self.Fe,NS=C33.nst;NS.vit=class{constructor(t){this._rt=t,this.Ert=null,this.Art()}gn(){this.Ert&&(this.Ert.gn(),this.Ert=null),this._rt=null}ort(){return this.Ert.ort()}pU(){return this._rt}Aet(){this.Ert&&this.Ert.Aet()}tZ(){this.Ert&&this.Ert.tZ()}Art(){return this.Ert||(this.Ert=this.Irt()),this.Ert}Cst(){}qO(){return this.Cst()}wrt(){}ret(){this.Art().ret()}H9(){this.Art().H9()}uet(){this.Art().uet()}Cet(){this.Ert.Rrt()}zu(t,e,s,i,r,n,h){let o=this._rt.Hit(),a;switch(o){case"numeric":a=NS.Mrt.zu(t,e,s,this._rt);break;case"angle":a=NS.brt.zu(t,e,s,this._rt);break;case"boolean":a=NS.vrt.zu(t,e,s,this._rt);break;case"color":a=NS.xrt.zu(t,e,s,this._rt);break;case"text":a=NS.Grt.zu(t,e,s,this._rt)}this.Ert.Prt(t,a,e,s,i,r,n,h)}art(t,e,s){switch(this._rt.Hit()){case"numeric":return NS.Mrt.zu(t,e,s,this._rt);case"angle":return NS.brt.zu(t,e,s,this._rt);case"boolean":return NS.vrt.zu(t,e,s,this._rt);case"color":return NS.xrt.zu(t,e,s,this._rt);case"text":return NS.Grt.zu(t,e,s,this._rt)}}Tet(){this.Ert.Ort()}tit(){this.Art().Drt()}grt(){this.Art().grt()}nrt(){return this.Art().nrt()}eit(){return this.Art().eit()}sit(){return this.Art().sit()}Trt(){const t=this._rt,e=t.Ait(),s=e.hst().GG(),i=NS.crt(s,t),r=i.IZ(),n=t.Hit();switch(n){case"numeric":return NS.Mrt.zu(s,i,r,t);case"angle":return NS.brt.zu(s,i,r,t);case"boolean":return NS.vrt.zu(s,i,r,t);case"color":return NS.xrt.zu(s,i,r,t);case"text":return NS.Grt.zu(s,i,r,t)}}Irt(){const t=this._rt,e=t.Jit()?t.Hit():"";switch(e){case"combo":case"boolean":case"text":case"string":return new NS.Nrt.Lrt(this);case"numeric":case"number":case"angle":return new("combo"===this._rt.Wit()?NS.Nrt.Lrt:NS.Nrt.Frt)(this);case"color":case"offsetColor":return new NS.Nrt.krt(this);default:return new NS.Nrt.Frt(this)}}v8(){return{propertyAdapterJson:this.Art().v8()}}x8(t){t&&this.Art().x8(t.propertyAdapterJson)}}}{const C33=self.Fe,INDEX=0;class InstanceVariableSourceAdapter extends C33.nst.vit{constructor(t){super(t),this.Brt=NaN}Cst(){return this._rt.Iit().Dit()[INDEX]}qO(){return this.Brt||super.qO()}wrt(){return this._rt.Ait().aU()}Tst(t){const e=this._rt.Iit().Dit()[INDEX];e!==t&&(this.Brt=t)}zu(t,e,s,i,r,n,h){this.Art().$rt(e.Fit())&&super.zu(t,e,s,i,r,n,h)}art(t,e,s){if(this.Art().$rt(e.Fit()))return super.art(t,e,s)}v8(){return Object.assign(super.v8(),{index:this.Brt})}x8(t){t&&(super.x8(t),this.Brt=t.index)}}C33.nst.Mit=InstanceVariableSourceAdapter}{const C33=self.Fe,SID=0,INDEX=1,NAME=2;class BehaviorSourceAdapter extends C33.nst.vit{constructor(t){super(t),this.x6=NaN}Cst(){const t=this._rt.Iit();return t.Dit()[INDEX]}wrt(){const t=this._rt.Iit(),e=this._rt.Ait(),s=this.x6||t.Dit()[SID],i=e.aU(),r=i.Wrt(s),n=i.Urt()[r];return n.P5()}V5(t){const e=this._rt.Iit(),s=e.Dit()[NAME];return t.Vrt(s)}Est(t){const e=this._rt.Iit();e.Dit()[SID]!==t&&(this.x6=t)}zu(t,e,s,i,r,n,h){const o=this._rt.Ait(),a=o.aU();this.V5(a.YB())&&super.zu(t,e,s,i,r,n,h)}art(t,e,s){const i=this._rt.Ait(),r=i.aU();if(this.V5(r.YB()))return super.art(t,e,s)}v8(){return Object.assign(super.v8(),{sid:this.x6})}x8(t){t&&(super.x8(t),this.x6=t.sid)}}C33.nst.wit=BehaviorSourceAdapter}{const C33=self.Fe,NAME=0,INDEX=1;class EffectSourceAdapter extends C33.nst.vit{constructor(t){super(t)}Cst(){return this._rt.Iit().Dit()[INDEX]}wrt(){const t=this._rt,e=t.Ait(),s=e.BL(),i=s.n4(),r=i.fk(),n=this.Ast(r),h=n.qO();return i.K5(h)?i.Hrt(h):null}Ast(t){const e=this._rt,s=e.Iit().Dit()[NAME];return t.jrt(s)}zu(t,e,s,i,r,n,h){this.Xrt()&&super.zu(t,e,s,i,r,n,h)}art(t,e,s){if(this.Xrt())return super.art(t,e,s)}Xrt(){const t=this._rt,e=t.Ait(),s=e.BL(),i=s.n4(),r=i.fk(),n=this.Ast(r);if(n){const h=n.qO();return i.K5(h)}}}C33.nst.Rit=EffectSourceAdapter}{const C33=self.Fe,INDEX=0;class PluginSourceAdapter extends C33.nst.vit{constructor(t){super(t)}Cst(){return this._rt.Iit().Dit()[INDEX]}wrt(){return this._rt.Ait().aU().P5()}zu(t,e,s,i,r,n,h){const o=this._rt.Ait(),a=o.YB().$F(),l=o.aU().YB().$F();a===l&&super.zu(t,e,s,i,r,n,h)}art(t,e,s){const i=this._rt.Ait(),r=i.YB().$F(),n=i.aU().YB().$F();if(r===n)return super.art(t,e,s)}Yrt(){const t=this._rt.Ait(),e=t.YB().$F();if(C33.E7.qrt&&e instanceof C33.E7.qrt&&("initial-frame"===this._rt.Get()||"initial-animation"===this._rt.Get()))switch(this._rt.PZ()){case"relative":case"absolute":return null}}}C33.nst.bit=PluginSourceAdapter}{const C33=self.Fe;class ValueSourceAdapter extends C33.nst.vit{constructor(t){super(t),this.Krt=0,this.zrt=!1}ort(){return!1}H9(){let t=this._rt.rst(),e=this._rt.Iit();e=t.jit(e),this.Krt=e.BZ()}uet(){}Fit(){return this.zrt||this._rt.zu(0),this.Krt}zu(t,e,s,i,r,n,h){this.Krt=C33.nst.Mrt.zu(t,e,s,this._rt),this.zrt=!0}tit(){}grt(){}nrt(){return this.Krt}eit(){return!1}sit(){return!1}v8(){return{value:this.Krt,init:this.zrt}}x8(t){t&&(this.Krt=t.value,this.zrt=!t.hasOwnProperty("init")||t.init)}}C33.nst.xit=ValueSourceAdapter}{const C33=self.Fe,PROJECT_FILE=0,PROJECT_FILE_NAME=0,PROJECT_FILE_TYPE=1,START_OFFSET=1,AUDIO_DURATION=2,AUDIO_TAG=3;class AudioSourceAdapter extends C33.nst.vit{constructor(t){super(t),this.Jrt=!1,this.Zrt=null,this.Qrt=null,this.tnt=null,this.gZ=this._rt.hst(),this.cit=this._rt.Ait(),this.ent=this._rt.Oit(),this.snt=this.ent[PROJECT_FILE],this.int=this.ent[START_OFFSET],this.ent[AUDIO_TAG]?this.rnt=this.ent[AUDIO_TAG]:this.rnt=Math.random().toString(36).slice(2),this.nnt=NaN,this.hnt=NaN,this.ont=NaN,this.ant=null,this.lnt()}gn(){super.gn(),this.Zrt=null,this.Qrt=null,this.tnt=null,this.gZ=null,this.cit=null,this.ent=null,this.snt=null,this.ant=null}lnt(){if(self.Fe.E7.Audio){const t=this._rt.hN(),e=t.cnt(self.Fe.E7.Audio);e&&(this.Zrt=e.FF().P5()),this.Qrt=self.Fe.E7.Audio.unt,this.tnt=self.Fe.E7.Audio.fnt}}dnt(){if(!this.ant){const t=this._rt.Ait(),e=t.pU("audioSource");e&&(this.ant=e.Ett())}}pnt(){const t=this._rt.Ait(),e=t.pU("volume");return(e?e.Ett():this).hnt}Aet(){super.Aet(),this.Jrt=!1,this.Zrt&&(this.tnt&&(this.nnt=this.tnt.mnt.call(this.Zrt,this.rnt),this.hnt=this.tnt.Cnt.call(this.Zrt,this.rnt)),this.Qrt)&&this.Qrt.BW.call(this.Zrt,this.rnt)}gnt(){return this.rnt}Snt(){return this.ont}ynt(t){this.ont=t}H9(){super.H9(),this.nnt=NaN,this.Jrt=!1}uet(){super.uet();const t=this._rt.hst(),e=t.GG();switch(this.nnt=e-this.int,this._rt.Get()){case"audioSource":break;case"volume":this.hnt=this._rt.art(e)}this.Jrt=!1}zu(t,e,s,i,r,n,h){if(this.Zrt)switch(this._rt.Get()){case"audioSource":{if(!this.gZ.Ltt())return;if(i)return void(this.Qrt&&this.Qrt.BW.call(this.Zrt,this.rnt));if(t<this.int)return void(this.Jrt=!1);const o=this.tnt.Tnt.call(this.Zrt,this.rnt),a=this.gZ.zW();if(a!==o&&this.Qrt.KW.call(this.Zrt,this.rnt,a),this.Jrt)return;if(!this._rt.hst().IsPlaying())return;if(this.Jrt=!0,isNaN(this.nnt)){const l=self.performance.now(),c=t-this.int,u=this.Zrt._nt();if("suspended"===u)return void(this.Jrt=!1);const f=self.performance.now(),d=(f-l)/1e3,p=c+d;if(this.Qrt){let t=this.Snt();isNaN(t)?(this.ynt(0),t=0):this.ynt(t),this.Qrt.Ent.call(this.Zrt,this.snt,t,this.rnt,p)}}else{const m=this.nnt,C=(this.nnt=NaN,this.pnt()),g=(this.hnt=NaN,this.Zrt._nt());if("suspended"===g)return void(this.Jrt=!1);this.Qrt&&(this.ynt(C),this.Qrt.Ent.call(this.Zrt,this.snt,C,this.rnt,m))}break}case"volume":this.dnt(),super.zu(t,e,s,i,r,n,h)}}art(t,e,s){if(this.Zrt)switch(this._rt.Get()){case"audioSource":return;case"volume":return this.dnt(),super.art(t,e,s)}}Ant(t,e){return this.ant?this.ant.Snt():0}Int(t,e,s,i){this.ant&&this.ant.ynt(this.Ant()+e),this.Qrt&&this.ant&&this.Qrt.ynt.call(this.Zrt,this.ant.gnt(),this.ant.Snt())}wnt(t,e,s){this.ant&&this.ant.ynt(e),this.Qrt&&this.ant&&this.Qrt.ynt.call(this.Zrt,this.ant.gnt(),this.ant.Snt())}Rnt(){return!0}v8(){return{audioPlaybackStarted:this.Jrt,audioTag:this.rnt,pauseTime:this.nnt,pauseVolume:this.hnt,volume:this.ont}}x8(t){t&&(this.Jrt=t.audioPlaybackStarted,this.rnt=t.audioTag,this.nnt=t.pauseTime,this.hnt=t.pauseVolume,this.ont=t.volume,this.lnt())}}C33.nst.Git=AudioSourceAdapter}{const C33=self.Fe;C33.nst.Nrt=class{constructor(t){this.pit=t,this._rt=t.pU(),this.Het=this._rt.Ait().BL(),this.Mnt=this._rt.Get(),this.bnt=!1,this.vnt=null,this.xnt=null}gn(){this.pit=null,this._rt=null,this.Het=null,this.vnt=null,this.xnt=null}ort(){return!1}Aet(){}tZ(){this.Het=null,this.vnt=null,this.xnt=null}Ett(){return this.pit}pU(){return this._rt}BL(){return this.Het||(this.Het=this._rt.Ait().BL()),this.Het}Gnt(t){this.bnt=!!t}Pnt(){return this.bnt}ret(){}H9(){}uet(){}Drt(){this.vnt=this.nrt()}grt(){this.vnt=null}nrt(){}eit(){}sit(){}$rt(t){const e=typeof this.Ont(),s=typeof t;return e==s}Rrt(){}Prt(t,e,s,i,r,n,h,o){}Ort(){}Dnt(){const t=this.Lnt(()=>{const t=this._rt.Iit(),e=this._rt.rst();return e.jit(t)},()=>{const t=this._rt.Iit(),e=this._rt.rst();return e.Nnt(t)});return t.Fnt()}knt(){const t=this._rt.hst(),i=t.GG()-this._rt.Ait().yet(),e=this.Lnt(()=>{const t=this._rt.Iit(),e=this._rt.rst();return e.Qit(i,t)},()=>{const t=this._rt.Iit(),e=this._rt.rst(),s=e.srt(i,t);return s||e.Nnt(t)});return e.Fnt()}Lnt(t,e){const s=this._rt.hst();return(s.Ltt()?t:e)()}Bnt(t,e){const s=this._rt.PZ();return("relative"===s?t:e)()}$nt(t,e){return(this.Pnt()?(this.Gnt(!1),t):e)()}Wnt(t){}Unt(){return this.pit.qO()}Vnt(){return this.xnt||(this.xnt=this.pit.wrt()),this.xnt}Hnt(t,e,s,i,r,n){const h=this._rt.mst();switch(h){case"behavior":return t();case"effect":return e();case"instance-variable":return s();case"plugin":return i();case"world-instance":return r();case"audio":return n()}}v8(){return{firstAbsoluteUpdate:this.bnt,saveState:this.vnt}}x8(t){t&&(this.bnt=t.firstAbsoluteUpdate,this.vnt=t.saveState)}jnt(t,e=!1){const s=[];for(const i of t){const r=i.Ait().yet();for(const n of i.zit())(e&&0===n.GG()||!e)&&s.push({time:r+n.GG(),value:n.Fnt()})}return s.sort((t,e)=>t.time-e.time)}Xnt(t,e,s){return this.Ynt(e,s)}Ynt(e,s){for(let t=s.length-1;0<=t;t--){const i=s[t].time;if(i<=e)return s[t]}return null}}}{const C33=self.Fe,TMP_COLORS_MAP=new Map,TMP_COLOR=[0,0,0];class ColorInterpolationAdapter extends C33.nst.Nrt{constructor(t){super(t)}ret(){}H9(){}uet(){}nrt(){const t=this._rt.mst(),e=this.Vnt(),s=this.Unt();switch(t){case"behavior":return this.qnt(e.Knt(s));case"effect":return this.qnt(e[s]);case"plugin":return this.qnt(e.Knt(s));case"world-instance":return this.qnt(this.Ont())}}eit(){const t=this.Dnt();return!this.znt(t,this.Ont())}sit(){return!C33.yi(this.vnt)&&!this.znt(this.vnt,this.Ont())}znt(t,e){return t=this.Jnt(t),e=this.Jnt(e),t.Ea(e)}Dnt(){const t=super.Dnt();return this.Jnt(t)}knt(){const t=super.knt();return this.Jnt(t)}Wnt(t){}qnt(t){return(C33.ir(t,C33.Ko)?t.toArray():t).slice(0,3)}Jnt(t){return C33.ir(t,C33.Ko)?t:new C33.Ko(t[0],t[1],t[2],1)}$rt(t){return!0}ort(){return!0}Rrt(){const t=this._rt.hst(),e=this._rt.aU(),s=this._rt.Ett(),i=t._tt(e,s,this.Mnt,this._rt);if(i&&1<i.length){TMP_COLORS_MAP.has(e)||TMP_COLORS_MAP.set(e,new Map);const r=TMP_COLORS_MAP.get(e),n=this._rt.mst(),h=(r.has(n)||r.set(n,new Map),r.get(n));h.has(this.Mnt)||h.set(this.Mnt,{Znt:!1,color:new C33.Ko(0,0,0,1)})}}Qnt(t,e,s){const i=TMP_COLORS_MAP.get(t).get(e).get(s);return i.Znt=!0,i.color}Prt(t,e,s,i,r,n,h,o){const a=this._rt.hst(),l=this._rt.Ait(),c=this._rt.aU(),u=this._rt.Ett(),f=this._rt.mst(),d=this.Mnt,p=a._tt(c,u,d,this._rt);if(p&&1<p.length){const m=this.jnt(p,!0),C=this.Xnt(a,a.GG(),m);if(C){const g=l.yet(),S=C.time-g;if(0==S)this.Qnt(c,f,this.Mnt).ra(e[0],e[1],e[2]);else if(!(S<0)){const y=e[0],T=e[1],_=e[2],E=this._rt.zu(S,!1,!0),A=C33.Ko.el(y,E[0]),I=C33.Ko.el(T,E[1]),w=C33.Ko.el(_,E[2]);this.Qnt(c,f,this.Mnt).ra(A,I,w)}}}else this.tht(e[0],e[1],e[2])}Ort(){const t=this._rt.aU();if(TMP_COLORS_MAP.has(t)){const e=TMP_COLORS_MAP.get(t),s=this._rt.mst();if(e.has(s)){const i=e.get(s);if(i.has(this.Mnt)){const r=i.get(this.Mnt),n=r.Znt,h=r.color;n&&this.tht(h.ma(),h.Ca(),h.ga()),0===i.size&&e.delete(s),0===e.size&&TMP_COLORS_MAP.delete(t)}}}}Ont(){const t=this._rt.mst(),e=this.Vnt(),s=this.Unt();switch(t){case"behavior":return this.Jnt(e.Knt(s));case"effect":return e[s].clone();case"plugin":return this.Jnt(e.Knt(s));case"world-instance":return this.BL().E4().clone()}}tht(t,e,s){const i=this._rt.mst(),r=this.Vnt(),n=this.Unt();switch(i){case"behavior":TMP_COLOR[0]=t,TMP_COLOR[1]=e,TMP_COLOR[2]=s,r.eht(n,TMP_COLOR);break;case"effect":r[n].ea(t,e,s);break;case"plugin":TMP_COLOR[0]=t,TMP_COLOR[1]=e,TMP_COLOR[2]=s,r.eht(n,TMP_COLOR);break;case"world-instance":this.BL().sht(t,e,s)}}v8(){}x8(t){}}C33.nst.Nrt.krt=ColorInterpolationAdapter}{const C33=self.Fe,NS=C33.nst;class NoInterpolationAdapter extends C33.nst.Nrt{constructor(t){super(t)}ret(){}H9(){}uet(){}nrt(){return this.Ont()}eit(){const t=this.Dnt();return t!==this.nrt()}sit(){return!C33.yi(this.vnt)&&this.vnt!==this.nrt()}ort(){return!1}Prt(t,e,s,i,r,n,h,o){const a=this._rt,l=a.Ait(),c=a.mst(),u=a.hst(),f=l.aU(),d=a.Ett(),p=this.Mnt,m=u._tt(f,d,p,a);if(m&&1<m.length){const g=this.jnt(m),S=t+l.yet(),y=this.Xnt(u,S,g);y&&(e=y.value)}const C=a.Hit();switch(C){case"numeric":if(NS.Mrt.iht(this.Unt(),this.Vnt(),e,c))break;return;case"angle":if(NS.brt.iht(this.Unt(),this.Vnt(),e,c))break;return;case"boolean":if(NS.vrt.iht(this.Unt(),this.Vnt(),e,c))break;return;case"color":if(NS.xrt.iht(this.Unt(),this.Vnt(),e,c))break;return;case"text":if(!NS.Grt.iht(this.Unt(),this.Vnt(),e,c))return}this.tht(e)}Ont(){const t=this._rt.mst(),e=this.Vnt(),s=this.Unt();switch(t){case"behavior":return e.Knt(s);case"effect":return e[s];case"instance-variable":return e.rht(s);case"plugin":return e.Knt(s)}}tht(t){const e=this._rt.mst(),s=this.Vnt(),i=this.Unt();switch(e){case"behavior":s.eht(i,t);break;case"effect":s[i]=t;break;case"instance-variable":s.nht(i,t);break;case"plugin":s.eht(i,t)}}}C33.nst.Nrt.Lrt=NoInterpolationAdapter}{const C33=self.Fe,NS=C33.nst.Nrt,INSTANCE_FUNC_MAP=new Map,add2=(t,e,s,i,r,n=!1,h=null,o=null)=>{INSTANCE_FUNC_MAP.set(t,{hht:e,oht:s,aht:i,round:r,lht:n,init:h,reset:o})};add2("offsetX",(t,e,s,i)=>{"relative"===i._rt.PZ()?t.cht(e,s.hst().Ptt()):t.cht(e)},(t,e)=>t.ky(e),t=>t.Fy(),!0),add2("offsetY",(t,e,s,i)=>{"relative"===i._rt.PZ()?t.uht(e,s.hst().Ptt()):t.uht(e)},(t,e)=>t.Wy(e),t=>t.$y(),!0),add2("offsetWidth",(e,t,o,s,i)=>{if(0!==t){const r="relative"===s._rt.PZ(),l=1===s.fht.SA();if((r||l)&&e.J4()&&e.r5()){if(isNaN(s.dht)){let i=[],t=e.N4();for(;t;)i.push(t),t=t.N4();i.reverse();let a=(t,e)=>e.hst().Pet(t.aU()),r=(t,e)=>{const s=a(t,e);if(s)return s.Ost();const i=t.aU().P5();return i.Dst()?i.Ost():t.mht().pht()},n=(t,e,s,i=0)=>{const r=a(t,e);if(!r)return i;const n=r.pU(s);if(!n)return i;const h=n.Iit().git();if(!h)return i;const o=h.Nnt();return o?o.Fit():i},h;if(l){let t=i[i.length-1];h=t.Sm()}else{let e=i[0],t=e.mht().pht(),s=e.mht().Cht();h=t*s,h=(h+=n(e,o,"offsetWidth"))+r(e,o)*n(e,o,"offsetScaleX");for(let t=1;t<i.length;t++){const c=(e=i[t]).mht().Cht();h=(h=(h*=c)+n(e,o,"offsetWidth"))+r(e,o)*n(e,o,"offsetScaleX")}}s.dht=0===h?Number.EPSILON:h}i||e.Jm(t/s.dht,!0)}else e.Jm(t)}},(t,e)=>t.wm(e),t=>t.Sm(),!0),add2("offsetHeight",(e,t,o,s,i)=>{if(0!==t){const r="relative"===s._rt.PZ(),a=1===s.fht.SA();if((r||a)&&e.J4()&&e.h5()){if(isNaN(s.dht)){let i=[],t=e.N4();for(;t;)i.push(t),t=t.N4();i.reverse();let r=(t,e)=>{i=t;const s=e.hst().Pet(i.aU());var i;if(s)return s.Nst();const r=t.aU().P5();return r.Dst()?r.Nst():t.mht().ght()},n=(t,e,s,i=0)=>{const r=e.hst().Pet(t.aU());if(!r)return i;const n=r.pU(s);if(!n)return i;const h=n.Iit().git();if(!h)return i;const o=h.Nnt();return o?o.Fit():i},h;if(a){let t=i[i.length-1];h=t.vm()}else{let e=i[0],t=e.mht().ght(),s=e.mht().Sht();h=t*s,h=(h+=n(e,o,"offsetHeight"))+r(e,o)*n(e,o,"offsetScaleY");for(let t=1;t<i.length;t++){const l=(e=i[t]).mht().Sht();h=(h=(h*=l)+n(e,o))+r(e,o)*n(e,o,"offsetScaleY")}}s.dht=0===h?Number.EPSILON:h}i||e.yht(t/s.dht,!0)}else e.yht(t)}},(t,e)=>t.ym(e),t=>t.vm(),!0),add2("offsetAngle",(t,e,s,i,r)=>{t.Tht(e)},(t,e)=>t.Sk(e),t=>t.yk(),!1,!0),add2("offsetOpacity",(t,e,s,i,r)=>{const n=i._ht||1,h=(e/=n,t.jv()),o=h+e;if(0===i.Eht)1<o?i.Eht+=o-1:o<0&&(i.Eht+=o),t.Aht(e);else{const a=t.jv()+e;0<e&&0<i.Eht?1<a&&(i.Eht+=a-1):0<e&&i.Eht<0?(i.Eht+=e,0<i.Eht&&(t.Aht(i.Eht),i.Eht=0)):e<0&&0<i.Eht?(i.Eht+=e,i.Eht<0&&(t.Aht(i.Eht),i.Eht=0)):e<0&&i.Eht<0&&a<0&&(i.Eht+=a)}},(t,e)=>{t.Yv(e)},t=>t.jv(),!1,!0,(n,r,h)=>{switch(n.Eht=0,n._rt.PZ()){case"relative":{n._rt.rst();let t=n._rt.Iit(),e=t.git(),s=e.Cit(),i=n.BL().jv(),r=i;for(const o of s){const a=o.GG(),l=n._rt.art(a);r=i+l,r=C33.En(r,0,1)}n.Iht=i-r,n.Iht=Math.round(100*(n.Iht+Number.EPSILON))/100,r=i;for(let t=s.length-1;0<=t;t--){const c=s[t].GG(),u=n._rt.art(c);r-=u,r=C33.En(r,0,1)}n.wht=r,n.wht=Math.round(100*(n.wht+Number.EPSILON))/100;break}}const t="relative"===n._rt.PZ(),e=1===n.fht.SA();if((t||e)&&r.J4()&&r.f5()){let e=[],t=r.N4();for(;t;)e.push(t),t=t.N4();e.reverse();let s=(t,e,s)=>{const i=e.hst().Pet(t.aU());if(!i)return 0;const r=i.pU(s);if(!r)return 0;const n=r.Iit().git();if(!n)return 0;const h=n.Nnt();return h?h.Fit():0},i=e[0].mht().Rht();i+=s(e[0],h,"offsetOpacity");for(let t=1;t<e.length;t++)i+=s(e[t],h,"offsetOpacity");n._ht=0===i?1:i}},s=>{switch(s._rt.PZ()){case"relative":{s.Eht=0;let t=s.BL(),e=t.jv();e=Math.round(100*(e+Number.EPSILON))/100,s._rt.hst().Ltt()?(t.Yv(e+s.Iht),s.hI=0):(t.Yv(e-s.wht),s.hI=s.Ett().Trt());break}}}),add2("offsetOriginX",(t,e)=>t.Mht(e),(t,e)=>t.bht(e),t=>t.TW(),!1),add2("offsetOriginY",(t,e)=>t.vht(e),(t,e)=>t.xht(e),t=>t.EW(),!1),add2("offsetZElevation",(t,e)=>t.Ght(e),(t,e)=>t.Vy(e),t=>t.Uy(),!0),add2("offsetScaleX",(t,e,s,i)=>{if(0!==e){const r=t.Sm()<0?-1:1;if("relative"===i._rt.PZ()&&t.J4()&&t.r5()){const n=s.Ost()*r*e;isNaN(i.dht)&&INSTANCE_FUNC_MAP.get("offsetWidth").hht(t,1,s,i,!0),t.Jm(n/i.dht,!0)}else t.Jm(s.Ost()*r*e)}},(t,e,s)=>{t.wm(s.Ost()*e)},(i,r)=>{const n=i.Sm()<0?-1:1;if(i.r5()){let t=i.N4(),e=r.hst().Pet(t.aU()),s=NaN;if(e)s=t.Sm()/e.Ost();else{const h=t.aU().P5();s=h.Dst()?t.Sm()/h.Ost():1}return i.Sm()*n/(r.Ost()*s)}return i.Sm()*n/r.Ost()},!1),add2("offsetScaleY",(t,e,s,i)=>{if(0!==e){const r=t.vm()<0?-1:1;if("relative"===i._rt.PZ()&&t.J4()&&t.h5()){const n=s.Nst()*r*e;isNaN(i.dht)&&INSTANCE_FUNC_MAP.get("offsetHeight").hht(t,1,s,i,!0),t.yht(n/i.dht,!0)}else t.yht(s.Nst()*r*e)}},(t,e,s)=>{t.ym(s.Nst()*e)},(i,r)=>{const n=i.vm()<0?-1:1;if(i.h5()){let t=i.N4(),e=r.hst().Pet(t.aU()),s=NaN;if(e)s=t.vm()/e.Nst();else{const h=t.aU().P5();s=h.Dst()?t.vm()/h.Nst():1}return i.vm()*n/(r.Nst()*s)}return i.vm()*n/r.Nst()},!1);class NumericInterpolationAdapter extends C33.nst.Nrt{constructor(t){super(t),this.hI=0,this.Eht=0,this.Iht=0,this.wht=0,this._ht=NaN,this.dht=NaN,this.Pht=void 0,this.Oht=void 0,this.Dht=null,this.Lht=null,this.Nht=null,this.Fht=null,this.kht=null,this.Bht=null,this.$ht=null,this.Wht=null,this.Uht=!1,this.Vht=!1,C33.ir(this._rt.hst(),C33.Hht)?this.fht=new C33.nst.Nrt.jht(this):this.fht=new C33.nst.Nrt.Xht(this);const e=this._rt.Get();switch(this._rt.mst()){case"world-instance":{const s=INSTANCE_FUNC_MAP.get(e);this.Dht=s.aht,this.Lht=s.hht,this.Nht=s.oht,this.Uht=s.round,this.Vht=s.lht,this.kht=s.init,this.Fht=s.reset;break}case"audio":this.Bht=t.Ant,this.$ht=t.Int,this.Wht=t.wnt,this.Uht=!!t.Rnt(),this.Vht=!1}}gn(){this.fht=null,this.Dht=null,this.Lht=null,this.Nht=null,this.Fht=null,this.kht=null,this.Bht=null,this.$ht=null,this.Wht=null,super.gn()}ort(){return this.fht.ort()}Yht(){return this.hI}qht(t){this.hI=t}ret(){this.Fht&&this.Fht(this)}H9(){const t=this.fht.H9();if("number"==typeof t&&(this.hI=t),this.kht){const e=this.BL(),s=this._rt.Ait();this.kht(this,e,s)}}uet(){const t=this.fht.uet();"number"==typeof t&&(this.hI=t)}nrt(){return this.Ont()}eit(){const t=this.Dnt();return t!==this.nrt()}sit(){return!C33.yi(this.vnt)&&this.vnt!==this.nrt()}Rrt(){this.fht.Rrt()}Prt(t,e,s,i,r,n,h,o){return this.fht.Prt(t,e,s,i,r,n,h,o)}Ort(){this.fht.Ort()}Ont(){const t=this.Vnt(),e=this.Unt(),s=this.BL(),i=this._rt.Ait(),r=this._rt.mst();switch(r){case"behavior":return t.Knt(e);case"effect":return t[e];case"instance-variable":return t.rht(e);case"plugin":return t.Knt(e);case"world-instance":return this.Dht(s,i);case"audio":return this.Bht.call(this.Ett(),s,i)}}tht(t,e,s){const i=this.Vnt(),r=this.Unt(),n=this.BL(),h=this._rt.Ait(),o=this._rt.mst();switch(o){case"behavior":i.Kht(r,t);break;case"effect":i[r]+=t;break;case"instance-variable":i.zht(r,t);break;case"plugin":i.Kht(r,t,this.Ett().Yrt());break;case"world-instance":this.Lht(n,t,h,this);break;case"audio":this.$ht.call(this.Ett(),n,t,h,this)}}Jht(t,e,s){let i=this._rt.btt();if("discrete"!==(i="default"===i?"continuous":i)||e){if("discrete"===i&&s){const l=this._rt.hst(),c=l.GG(),u=this._rt.Zit(c);if(!u)return}const r=this.Vnt(),n=this.Unt(),h=this.BL(),o=this._rt.Ait(),a=this._rt.mst();switch(a){case"behavior":r.eht(n,t);break;case"effect":r[n]=t;break;case"instance-variable":r.nht(n,t);break;case"plugin":r.eht(n,t,this.Ett().Yrt());break;case"world-instance":this.Nht(h,t,o);break;case"audio":this.Wht.call(this.Ett(),h,t,o)}}}Zht(t,e,s,i,r,n,h,o){this.fht.Zht(t,e,s,i,r,n,h,o)}Qht(t,e,s,i,r){let n=(t="angle"===this._rt.Wit()?C33.wn(t):t).toString(),h=n.split(".")[1]||"",o=h.length,a=this.Ont(),l;switch(l=0===o?this.Uht?Math.round(a):this.Vht?"angle"===this._rt.Wit()?C33.In(Math.round(C33.wn(a))):Number(C33.toFixed(a,2)):a:this.Uht?Number(C33.toFixed(a,o)):(this.Vht,a),this.tht(l-a,e,s),this._rt.Get()){case"offsetWidth":case"offsetScaleX":{const c=this.BL(),u=c.Sm(),f=Number(C33.toFixed(u,2));c.Jm(f-u);break}case"offsetHeight":case"offsetScaleY":{const d=this.BL(),p=d.vm(),m=Number(C33.toFixed(p,2));d.yht(m-p);break}}}v8(){return Object.assign(super.v8(),{v:this.hI,a:this.Eht,fod:this.Iht,bod:this.wht,of:this._ht,sf:this.dht,armorf:this.Pht,armandf:this.Oht})}x8(t){t&&(super.x8(t),this.hI=t.v,this.Eht=t.a,this.Iht=C33.Ci(t.fod)?t.fod:0,this.wht=C33.Ci(t.bod)?t.bod:0,this._ht=C33.Ci(t.of)?t.of:NaN,this.dht=C33.Ci(t.sf)?t.sf:NaN,this.Pht=C33.Ci(t.armorf)?t.armorf:void 0,this.Oht=C33.Ci(t.armandf)?t.armandf:void 0)}}C33.nst.Nrt.Frt=NumericInterpolationAdapter}{const C33=self.Fe;class AbsoluteValueObject{constructor(t){this.tot=!1,this.Krt=0,this.eot=!1,this.sot=!1,this.Qet=t;for(let t=0,e=this.Qet.length;t<e;t++)this.Qet[t]._it(this)}xet(){return this.Qet}iot(){this.tot=!0}rot(){return this.tot}yrt(t){this.Krt=t}Fit(){return this.Krt}not(t){this.eot=t}hot(){return this.eot}met(t){this.sot=t}oot(){return this.sot}g0(){this.tot=!1,this.Krt=0,this.eot=!1,this.sot=!1}}class NumericInterpolationAdapterForTimeline{constructor(t){this.aot=t}gn(){this.aot=null}SA(){return 0}H9(){const t=this.aot;return this.aot.pU(),t.Bnt(()=>t.Lnt(()=>0,()=>t.Ett().Trt()),()=>{})}uet(){}ort(){this.aot;const t=this.aot.pU();switch(t.PZ()){case"relative":return!1;case"absolute":return!0}}Rrt(){this.aot;const t=this.aot.pU(),e=t.Get();switch(t.PZ()){case"relative":break;case"absolute":if(t.Tit()){const s=t.Eit();s.g0()}else{const i=t.hst(),r=t.aU(),n=t.Ett(),h=i._tt(r,n,e,t);h&&1<h.length&&new AbsoluteValueObject(h)}}}Prt(t,e,s,i,r,n,h,o){const a=this.aot,l=this.aot.pU();switch(l.PZ()){case"relative":{const c=a.Yht();a.tht(e-c,s,i),n&&this.Zht(t,s,i,r,c,e),a.qht(e);break}case"absolute":{const u=l.hst(),f=l.Ait();if(l.aU(),l.Ett(),l.Tit()){const d=l.Eit(),p=d.xet(),m=a.jnt(p,!0),C=a.Xnt(u,u.GG(),m);if(C){const g=f.yet(),S=C.time-g;if(0==S)d.met(h),d.not(o),d.iot(),d.yrt(d.Fit()+e);else{if(S<0)return;const y=l.art(S);d.met(h),d.not(o),d.iot(),d.yrt(d.Fit()+(e-y))}}}else a.Jht(e,o,h);break}}}Ort(){const t=this.aot,e=this.aot.pU();switch(e.PZ()){case"relative":break;case"absolute":if(e.Tit()){const s=e.Eit();s.rot()&&t.Jht(s.Fit(),s.hot(),s.oot())}}}Zht(t,e,s,i,r,n){const h=this.aot;i||(e&&t===e.GG()?h.Qht(e.BZ(),e,s):s&&t===s.GG()?h.Qht(s.BZ(),e,s):n-r==0&&h.Qht(e.BZ(),e,s))}}C33.nst.Nrt.Xht=NumericInterpolationAdapterForTimeline}{const C33=self.Fe;class NumericInterpolationAdapterForTween{constructor(t){this.aot=t}gn(){this.aot=null}SA(){return 1}H9(){const t=this.aot;return t.Gnt(!0),this.Wnt(t.Dnt())}uet(){const t=this.aot;if(t.Dnt()!==t.knt())return t.Gnt(!0),this.Wnt(t.knt())}ort(){return!1}Rrt(){}Prt(t,e,s,i,r,n,h,o){const a=this.aot,l=a.Yht();switch(a.pU().PZ()){case"relative":a.tht(e-l,s,i),n&&this.Zht(t,s,i,r,l,e,!1,h);break;case"absolute":a.Pnt()?(a.Gnt(!1),a.tht(l,s,i)):0===t&&0===a.pU().hst().HW()?a.Jht(e,!0,!1):(a.tht(e-l,s,i),n&&this.Zht(t,s,i,r,l,e,this.lot(),h))}a.qht(e)}Ort(){}Wnt(t){const e=this.aot;return t-e.nrt()}lot(){let t=this.aot,e=t.BL().aU(),s=t.pU().hN(),i=s.Ttt(),r=0;for(const n of i.S9())0===n.SA()?n.A9(e)&&r++:1===n.SA()&&n.aU()===e&&r++;return r<=1}Zht(t,e,s,i,r,n,h,o){const a=this.aot;i?e&&t===e.GG()?a.Qht(e.BZ(),e,s,h,o):s&&t===s.GG()?a.Qht(s.BZ(),e,s,h,o):s||a.Qht(e.BZ(),e,s,h,o):e&&t===e.GG()?a.Qht(e.BZ(),e,s,h,o):s&&t===s.GG()?a.Qht(s.BZ(),e,s,h,o):n-r==0&&a.Qht(e.BZ(),e,s,h,o)}}C33.nst.Nrt.jht=NumericInterpolationAdapterForTween}{const C33=self.Fe,Ease=self.wu;C33.nst.Mrt=class{constructor(){}static iht(t,e,s,i){let r;switch(i){case"behavior":r=e.Knt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.rht(t);break;case"plugin":r=e.Knt(t)}return r!==s}static zu(n,h,o,a){if(!o){let t=a.Iit(),e=a.rst();return(t=e.Nnt(t)).BZ()}let l=a.btt();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.Wit()?"discrete":l))return h.BZ();if("continuous"===l||"step"===l){const c=a.hst().Rtt();if("step"===l&&0!==c){const C=1/c;n=Math.floor(n*C)/C}const u=h.BZ(),f=o.BZ(),d=h.FZ("cubic-bezier"),p=o.FZ("cubic-bezier"),m=d&&d.cot()&&p&&p.uot();if(!m&&u===f)return u;let t=h.GG(),e=o.GG(),s=("step"===l&&0!==c&&(n=C33.En(n,t,e)),C33.normalize(n,t,e)),i=h.Srt(),r;if(m){const g=e-t;r=Ease.$u(i)(g*s,0,1,g),r=Ease.$u("cubicbezier")(r,u,u+d.UZ(),f+p.jZ(),f)}else r=Ease.$u(i)((e-t)*s,u,f-u,e-t);return"integer"===a.Wit()?Math.floor(r):r}}}}{const C33=self.Fe;C33.nst.brt=class{constructor(){}static iht(t,e,s,i){let r;switch(i){case"behavior":r=e.Knt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.rht(t);break;case"plugin":r=e.Knt(t)}return r!==s}static zu(t,e,s,i){if(!s){let t=i.Iit(),e=i.rst();return(t=e.Nnt(t)).BZ()}let r=i.btt();if("default"===r&&(r="continuous"),"discrete"===(r="combo"===i.Wit()?"discrete":r))return e.BZ();if("continuous"===r||"step"===r){const n=i.hst().Rtt();if("step"===r&&0!==n){const u=1/n;t=Math.floor(t*u)/u}const h=e.GG(),o=s.GG(),a=e.BZ(),l=s.BZ(),c=("step"===r&&0!==n&&(t=C33.En(t,h,o)),e.FZ("angle"));if(!c){if(a===l)return a;const f=C33.normalize(t,h,o),d=self.wu.$u(e.Srt());return C33.Pn(a,l,d(f,0,1,1))}{const p=c.dot();if(a===l&&0===p)return a;const m=C33.normalize(t,h,o),C=self.wu.$u(e.Srt()),g=C(m,0,1,1);switch(c.pot()){case"closest":return C33.Pn(a,l,g,p);case"clockwise":return C33.On(a,l,g,p);case"anti-clockwise":return C33.Dn(a,l,g,p)}}}}}}{const C33=self.Fe;C33.nst.vrt=class{constructor(){}static iht(t,e,s,i){let r;switch(i){case"behavior":r=e.Knt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.rht(t);break;case"plugin":r=e.Knt(t)}return!!r!=!!s}static zu(t,e,s,i){if(s)return e.BZ()?1:0;{let t=i.Iit(),e=i.rst();return(t=e.Nnt(t)).BZ()?1:0}}}}{const C33=self.Fe,TEMP_COLOR_ARRAY=[0,0,0],TEMP_COLOR_ARRAY_2=[0,0,0],TEMP_COLOR_ARRAY_3=[0,0,0];C33.nst.xrt=class{constructor(){}static iht(t,e,s,i){let r;switch(i){case"behavior":r=e.Knt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.rht(t);break;case"plugin":r=e.Knt(t)}return Array.isArray(s)?(TEMP_COLOR_ARRAY[0]=s[0],TEMP_COLOR_ARRAY[1]=s[1],TEMP_COLOR_ARRAY[2]=s[2]):(TEMP_COLOR_ARRAY_3.ka(s),TEMP_COLOR_ARRAY[0]=Math.floor(255*TEMP_COLOR_ARRAY_3.ma()),TEMP_COLOR_ARRAY[1]=Math.floor(255*TEMP_COLOR_ARRAY_3.Ca()),TEMP_COLOR_ARRAY[2]=Math.floor(255*TEMP_COLOR_ARRAY_3.ga())),Array.isArray(r)?(TEMP_COLOR_ARRAY_2[0]=r[0],TEMP_COLOR_ARRAY_2[1]=r[1],TEMP_COLOR_ARRAY_2[2]=r[2]):(TEMP_COLOR_ARRAY_3.ka(r),TEMP_COLOR_ARRAY_2[0]=Math.floor(255*TEMP_COLOR_ARRAY_3.ma()),TEMP_COLOR_ARRAY_2[1]=Math.floor(255*TEMP_COLOR_ARRAY_3.Ca()),TEMP_COLOR_ARRAY_2[2]=Math.floor(255*TEMP_COLOR_ARRAY_3.ga())),TEMP_COLOR_ARRAY[0]!==TEMP_COLOR_ARRAY_2[0]||TEMP_COLOR_ARRAY[1]!==TEMP_COLOR_ARRAY_2[1]||TEMP_COLOR_ARRAY[2]!==TEMP_COLOR_ARRAY_2[2]}static zu(t,e,s,i){if(!s){let t=i.Iit(),e=i.rst(),s=(t=e.Nnt(t)).BZ();return TEMP_COLOR_ARRAY[0]=s[0],TEMP_COLOR_ARRAY[1]=s[1],TEMP_COLOR_ARRAY[2]=s[2],TEMP_COLOR_ARRAY}let r=i.btt();if("discrete"===(r="default"===r?"continuous":r)){const n=e.BZ();return TEMP_COLOR_ARRAY[0]=n[0],TEMP_COLOR_ARRAY[1]=n[1],TEMP_COLOR_ARRAY[2]=n[2],TEMP_COLOR_ARRAY}if("continuous"===r||"step"===r){const h=i.hst().Rtt();if("step"===r&&0!==h){const E=1/h;t=Math.floor(t*E)/E}const o=e.GG(),a=s.GG(),l=e.BZ(),c=s.BZ(),u=("step"===r&&0!==h&&(t=C33.En(t,o,a)),C33.normalize(t,o,a)),f=e.Srt(),d=l[0],p=l[1],m=l[2],C=c[0],g=c[1],S=c[2],y=self.wu.$u(f),T=a-o,_=T*u;return TEMP_COLOR_ARRAY[0]=d===C?d:y(_,d,C-d,T),TEMP_COLOR_ARRAY[1]=p===g?p:y(_,p,g-p,T),TEMP_COLOR_ARRAY[2]=m===S?m:y(_,m,S-m,T),TEMP_COLOR_ARRAY}}}}{const C33=self.Fe;C33.nst.Grt=class{constructor(){}static iht(t,e,s,i){let r;switch(i){case"behavior":r=e.Knt(t);break;case"effect":r=e[t];break;case"instance-variable":r=e.rht(t);break;case"plugin":r=e.Knt(t)}return r!==s}static zu(t,e,s,i){if(s)return e.BZ();{let t=i.Iit(),e=i.rst();return(t=e.Nnt(t)).BZ()}}}}{const C33=self.Fe;C33.RJ=class{constructor(){this.mot=new Map}gn(){for(const t of this.mot.values())t.gn();this.mot.clear(),this.mot=null}Eu(t){const e=new C33.Cot(t),s=e.lf();this.mot.set(s,e)}rs(t){return this.mot.get(t)}dtt(){return 0}static got(t,e,s,i){if(e)for(const r of e)C33.RJ.Sot("create",r,t,s,i)}static yot(t,e,s,i){if(e)for(const r of e)C33.RJ.Sot("create-including-disabled",r,t,s,i)}static Tot(s,t,e,i){s.length?t.forEach((t,e)=>{s[e].x8(t)}):t.forEach(t=>{C33.RJ.Sot("load",t,s,e,i)})}static Sot(t,e,s,i,r){let n;if("function"==typeof i)switch(t){case"load":n=new i(null,r);break;case"create":case"create-including-disabled":n=new i(e,r)}else if("object"==typeof i){const h=i.prop,o=e[h],a=i.map.get(o);switch(t){case"load":n=new a(null,r);break;case"create":case"create-including-disabled":n=new a(e,r)}}switch(t){case"load":n.x8(e),s.push(n);break;case"create":if("function"==typeof n.vst&&!n.vst())return n.gn();s.push(n);break;case"create-including-disabled":s.push(n)}}}}{const C33=self.Fe,NAME=0,TOTAL_TIME=1,STEP=2,INTERPOLATION_MODE=3,RESULT_MODE=4,TRACKS=5,LOOP=6,PING_PONG=7,REPEAT_COUNT=8,START_ON_LAYOUT=9,TRANSFORM_WITH_SCENE_GRAPH=10,USE_SYSTEM_TIMESCALE=11;C33.Cot=class{constructor(t){this.Tn="",this.pet=NaN,this._ot=0,this.Eot="default",this.Aot="default",this.Iot=!1,this.wot=!1,this.Rot=1,this.$et=null,this.Mot="",this.bot=!1,this.vot=!0,t&&(this.Tn=t[NAME],this.pet=t[TOTAL_TIME],this._ot=t[STEP],this.Eot=t[INTERPOLATION_MODE],this.Aot=t[RESULT_MODE],this.Iot=!!t[LOOP],this.wot=!!t[PING_PONG],this.Rot=t[REPEAT_COUNT],this.Mot=t[START_ON_LAYOUT],this.bot=!!t[TRANSFORM_WITH_SCENE_GRAPH],this.vot=!!t[USE_SYSTEM_TIMESCALE],this.$et=new C33.xot(t[TRACKS],this))}gn(){this.$et.gn(),this.$et=null}Stt(){return this.$et||(this.$et=new C33.xot(null,this)),this.$et}lf(){return this.Tn}iH(t){this.Tn=t}HW(){return this.pet}VW(t){this.pet=t}Rtt(){return this._ot}Mtt(t){this._ot=t}btt(){return this.Eot}vtt(t){this.Eot=t}PZ(){return this.Aot}xtt(t){this.Aot=t}XW(){return this.Iot}jW(t){this.Iot=t}qW(){return this.wot}YW(t){this.wot=t}iW(){return this.Rot}Gtt(t){this.Rot=t}eZ(){return this.Mot}Ptt(){return this.bot}Ott(){return this.vot}v8(){return{trackDataJson:this.$et.v8(),name:this.Tn,totalTime:this.pet,step:this._ot,interpolationMode:this.Eot,resultMode:this.Aot,loop:this.Iot,pingPong:this.wot,repeatCount:this.Rot,startOnLayout:this.Mot,transformWithSceneGraph:!!this.bot,useSystemTimescale:this.vot}}x8(t){t&&(this.Stt().x8(t.trackDataJson),this.Tn=t.name,this.pet=t.totalTime,this._ot=t.step,this.Eot=t.interpolationMode,this.Aot=t.resultMode,this.Iot=t.loop,this.wot=t.pingPong,this.Rot=t.repeatCount,this.Mot=t.startOnLayout,this.bot=!!t.transformWithSceneGraph,this.vot=!!t.useSystemTimescale)}}}{const C33=self.Fe,WI_DATA=0,OC_INDEX=1,WI_UID=2,INTERPOLATION_MODE=1,RESULT_MODE=2,ENABLED=3,KEYFRAMES=4,PROPERTY_TRACKS=5,ID=6,NESTED_DATA=7,START_OFFSET=0,LOCAL_TOTAL_TIME=1,WI_ADDITIONAL_DATA=8,ORIGINAL_WIDTH=0,ORIGINAL_HEIGHT=1,TRACK_TYPE=9,TRACK_NAME=10;class TrackDataItem{constructor(t,e){this.$et=e,this.Got=null,this.Pot=null,this.Wet=NaN,this.Uet=NaN,this.Eot="default",this.Aot="default",this.Kc=!1,this.Oot=null,this.dit=null,this.yf="",this.Dot=null,this.Lot=0,this.Not=this.$et.wtt().HW(),this.wf=0,this.Tn="",t&&(t[WI_DATA]&&(this.Got=t[WI_DATA],this.Wet=t[WI_DATA][WI_UID],this.Uet=t[WI_DATA][OC_INDEX]),this.Eot=t[INTERPOLATION_MODE],this.Aot=t[RESULT_MODE],this.Kc=!!t[ENABLED],t[ID]&&(this.yf=t[ID]),t[NESTED_DATA]&&(this.Dot=t[NESTED_DATA],this.Lot=t[NESTED_DATA][START_OFFSET],this.Not=t[NESTED_DATA][LOCAL_TOTAL_TIME]),t[WI_ADDITIONAL_DATA]&&(this.Pot=t[WI_ADDITIONAL_DATA]),t[WI_ADDITIONAL_DATA]&&(this.Pot=t[WI_ADDITIONAL_DATA]),t[TRACK_TYPE]&&(this.wf=t[TRACK_TYPE]),t[TRACK_NAME]&&(this.Tn=t[TRACK_NAME]),this.Oot=new C33.Fot(t[KEYFRAMES],this),this.dit=new C33.kot(t[PROPERTY_TRACKS],this))}gn(){this.Got=null,this.$et=null,this.Oot&&(this.Oot.gn(),this.Oot=null),this.dit&&(this.dit.gn(),this.dit=null),this.Dot=null}Stt(){return this.$et}Zet(){return this.Oot||(this.Oot=new C33.Fot(null,this)),this.Oot}rst(){return this.dit||(this.dit=new C33.kot(null,this)),this.dit}Bot(){return this.Got}cst(){return this.Uet}Gst(t){this.Uet=t}lst(){return this.Wet}Rst(t){this.Wet=t}btt(){return this.Eot}vtt(t){this.Eot=t}PZ(){return this.Aot}xtt(t){this.Aot=t}vst(){return this.Kc}xst(t){this.Kc=!!t}fU(){return this.yf}yet(){return this.Lot}Mst(){return this.Not}bst(t){this.Not=t}Ost(){return this.Pot[ORIGINAL_WIDTH]}Pst(t){this.Pot||(this.Pot=[]),this.Pot[ORIGINAL_WIDTH]=t}Nst(){return this.Pot||(this.Pot=[]),this.Pot[ORIGINAL_HEIGHT]}Lst(t){this.Pot||(this.Pot=[]),this.Pot[ORIGINAL_HEIGHT]=t}SA(){return this.wf}lf(){return this.Tn}v8(){return{keyframeDataJson:this.Oot.v8(),propertyTrackDataJson:this.dit.v8(),instanceData:this.Got,additionalInstanceData:this.Pot,instanceUid:this.Wet,objectClassIndex:this.Uet,interpolationMode:this.Eot,resultMode:this.Aot,enabled:this.Kc,id:this.yf,nestedData:this.Dot,type:this.wf,name:this.Tn}}x8(t){t&&(this.Got=t.instanceData,this.Wet=t.instanceUid,this.Uet=t.objectClassIndex,this.Eot=t.interpolationMode,this.Aot=t.resultMode,this.Kc=t.enabled,this.yf=t.id,this.wf=t.type||0,this.Tn=t.name||"",this.Not=this.$et.wtt().HW(),t.nestedData&&(this.Dot=t.nestedData,this.Lot=this.Dot[START_OFFSET],this.Not=this.Dot[LOCAL_TOTAL_TIME]),t.additionalInstanceData&&(this.Pot=t.additionalInstanceData),this.Zet().x8(t.keyframeDataJson),this.rst().x8(t.propertyTrackDataJson))}}C33.xot=class{constructor(t,e){this.NQ=e,this.$ot=[],C33.RJ.got(this.$ot,t,TrackDataItem,this)}gn(){this.NQ=null;for(const t of this.$ot)t.gn();C33.Vh(this.$ot),this.$ot=null}wtt(){return this.NQ}Eet(){const t=new TrackDataItem(null,this);return this.$ot.push(t),t}Wot(t){return t.Zet().Jet()[0]}Uot(t){const e=t.Zet().Jet();return e.at(-1)}Xst(e,t){const s=t.Zet().Jet(),i=s.length;for(let t=0;t<i;t++){const r=s[t];if(r.GG()===e)return r}}Vot(e,t){const s=t.Zet().Jet(),i=s.length;for(let t=0;t<i;t++){const r=s[t];if(r.GG()>e)return r}}Hot(e,t){const s=t.Zet().Jet(),i=s.length;for(let t=0;t<i;t++){const r=s[t];if(r.GG()>=e)return r}}jst(e,t){const s=t.Zet().Jet();for(let t=s.length-1;0<=t;t--){const i=s[t];if(i.GG()<=e)return i}}*gtt(){for(const t of this.$ot)yield t}v8(){return{trackDataItemsJson:this.$ot.map(t=>t.v8())}}x8(t){t&&C33.RJ.Tot(this.$ot,t.trackDataItemsJson,TrackDataItem,this)}}}{const C33=self.Fe,SOURCE_DATA=0,SOURCE=0,PROPERTY=1,TYPE=2,MIN=3,MAX=4,INTERPOLATION_MODE=5,RESULT_MODE=6,ENABLED=7,PROPERTY_KEYFRAMES=8,CAN_HAVE_PROPERTY_KEYFRAMES=9;class PropertyTrackDataItem{constructor(t,e){this.dit=e,this.jot="",this.Xot=null,this.Mnt=null,this.wf=null,this.Yot=NaN,this.qot=NaN,this.Eot="default",this.Aot="default",this.Kc=!1,this.Kot=null,this.zot=!0,t&&(this.jot=t[SOURCE_DATA][SOURCE],this.Xot=t[SOURCE_DATA].slice(1),this.Mnt=t[PROPERTY],this.wf=t[TYPE],this.Yot=t[MIN],this.qot=t[MAX],this.Eot=t[INTERPOLATION_MODE],this.Aot=t[RESULT_MODE],this.Kc=!!t[ENABLED],this.Kot=new C33.Jot(t[PROPERTY_KEYFRAMES],this),this.zot=t[CAN_HAVE_PROPERTY_KEYFRAMES])}gn(){this.Kot.gn(),this.Kot=null,this.dit=null,this.Xot=null}rst(){return this.dit}git(){return this.Kot||(this.Kot=new C33.Jot(null,this)),this.Kot}mst(){return this.jot}Pit(t){this.jot=t}Dit(){return this.Xot}Nit(t){this.Xot=t}kit(){return this.Mnt}$it(t){this.Mnt=t}SA(){return this.wf}Vit(t){this.wf=t}Xit(){return this.Yot}Yit(t){this.Yot=t}qit(){return this.qot}Kit(t){this.qot=t}btt(){return this.Eot}vtt(t){this.Eot=t}PZ(){return this.Aot}xtt(t){this.Aot=t}vst(){return this.Kc}xst(t){this.Kc=!!t}Jit(){return!!this.zot}v8(){return{propertyKeyframeDataJson:this.Kot.v8(),sourceAdapterId:this.jot,sourceAdapterArguments:this.Xot,property:this.Mnt,type:this.wf,min:this.Yot,max:this.qot,interpolationMode:this.Eot,resultMode:this.Aot,enabled:this.Kc,canHavePropertyKeyframes:this.zot}}x8(t){t&&(this.jot=t.sourceAdapterId,this.Xot=t.sourceAdapterArguments,this.Mnt=t.property,this.wf=t.type,this.Yot=t.min,this.qot=t.max,this.Eot=t.interpolationMode,this.Aot=t.resultMode,this.Kc=t.enabled,this.zot=t.canHavePropertyKeyframes,this.git().x8(t.propertyKeyframeDataJson))}}C33.kot=class{constructor(t,e){this.Bet=e,this.Zot=[],C33.RJ.got(this.Zot,t,PropertyTrackDataItem,this)}gn(){this.Bet=null;for(const t of this.Zot)t.gn();C33.Vh(this.Zot),this.Zot=null}wst(){return this.Bet}zst(){const t=new PropertyTrackDataItem(null,this);return this.Zot.push(t),t}jit(t){const e=t.git();return e.Cit()[0]}Nnt(t){const e=t.git(),s=e.Cit();return s.at(-1)}Zit(e,t){const s=t.git(),i=s.Cit(),r=i.length;for(let t=0;t<r;t++){const n=i[t];if(n.GG()===e)return n}}ert(e,t){const s=t.git(),i=s.Cit(),r=i.length;for(let t=0;t<r;t++){const n=i[t];if(n.GG()>e)return n}}srt(e,t){const s=t.git(),i=s.Cit(),r=i.length;for(let t=0;t<r;t++){const n=i[t];if(n.GG()>=e)return n}}Qit(e,t){const s=t.git(),i=s.Cit();for(let t=i.length-1;0<=t;t--){const r=i[t];if(r.GG()<=e)return r}}*ist(){for(const t of this.Zot)yield t}v8(){return{propertyTrackDataItemsJson:this.Zot.map(t=>t.v8())}}x8(t){t&&C33.RJ.Tot(this.Zot,t.propertyTrackDataItemsJson,PropertyTrackDataItem,this)}}}{const C33=self.Fe,TIME=0,EASE=1,ENABLE=2,TAGS=3;class KeyframeDataItem{constructor(t,e){if(this.Oot=e,this.MP=-1,this.Qot="noease",this.tat=!1,this.att=null,this.eat=null,t){this.MP=t[TIME],this.Qot=t[EASE],this.tat=!!t[ENABLE];const s=t[TAGS];this.att=s?s.split(" "):[],this.eat=new Set(this.att.map(t=>t.toLowerCase())),this.sat=null}}gn(){this.Oot=null,C33.Vh(this.att),this.att=null,this.eat.clear(),this.eat=null,this.sat=null}Zet(){return this.Oot}IZ(){return this.sat}iat(t){this.sat=t}GG(){return this.MP}UW(t){this.MP=t,this.Oot.rat()}Srt(){return this.Qot}oU(t){this.Qot=t}vst(){return this.tat}xst(t){this.tat=!!t}JW(){return this.att}Ntt(t){this.att=t?t.split(" "):[],this.eat=new Set(this.att.map(t=>t.toLowerCase()))}nat(){return this.eat}Let(t){return this.eat.has(t.toLowerCase())}v8(){return{time:this.MP,ease:this.Qot,enable:this.tat,tags:this.att}}x8(t){t&&(this.MP=t.time,this.Qot=t.ease,this.tat=t.enable,this.att=t.tags,this.eat=new Set(this.att.map(t=>t.toLowerCase())))}}C33.Fot=class{constructor(t,e){this.Bet=e,this.zet=[],C33.RJ.got(this.zet,t,KeyframeDataItem,this),this.rat()}gn(){this.Bet=null;for(const t of this.zet)t.gn();C33.Vh(this.zet),this.zet=null}rat(){this.zet.sort((t,e)=>t.GG()-e.GG());for(let t=0;t<this.zet.length;t++){const e=this.zet[t];e.iat(this.zet[t+1])}}wst(){return this.Bet}hat(){return this.zet.length}Jet(){return this.zet}qst(){const t=new KeyframeDataItem(null,this);return this.zet.push(t),this.rat(),t}Zst(t){for(const e of this.zet)if(t(e)){const s=this.zet.indexOf(e);-1!==s&&(e.gn(),this.zet.splice(s,1))}this.oat(),this.rat()}oat(){this.zet.sort((t,e)=>t.GG()-e.GG())}ait(t){return this.zet.indexOf(t)}lit(t){return this.zet[t]}*aat(){for(const t of this.zet)yield t}*lat(){for(let t=this.zet.length-1;0<=t;t--)yield this.zet[t]}v8(){return{keyframeDataItemsJson:this.zet.map(t=>t.v8())}}x8(t){t&&(C33.RJ.Tot(this.zet,t.keyframeDataItemsJson,KeyframeDataItem,this),this.rat())}}}{const C33=self.Fe,VALUE_DATA=0,VALUE_DATA_VALUE=0,VALUE_DATA_ABSOLUTE_VALUE=1,VALUE_DATA_TYPE=2,TIME=1,EASE=2,ENABLE=3,ADDONS=4,PATH_MODE=5;class PropertyKeyframeDataItem{constructor(t,e){this.Kot=e,this.Krt=null,this.cat=null,this.wf="",this.MP=NaN,this.Qot="noease",this.tat=!1,this.uat=null,this.fat=void 0,this.dat="line",t&&(this.Krt=t[VALUE_DATA][VALUE_DATA_VALUE],this.cat=t[VALUE_DATA][VALUE_DATA_ABSOLUTE_VALUE],this.wf=t[VALUE_DATA][VALUE_DATA_TYPE],this.MP=t[TIME],this.Qot=t[EASE],this.tat=!!t[ENABLE],this.dat=t[PATH_MODE],this.uat=null,t[ADDONS]&&(this.uat=new C33.pat(t[ADDONS],this)),this.sat=null,this.mat=null)}gn(){this.Kot=null,this.uat&&(this.uat.gn(),this.uat=null),this.sat=null,this.mat=null}Cat(){return this.uat}iat(t){this.sat=t}IZ(){return this.sat}gat(t){this.mat=t}wZ(){return this.mat}Fit(){return this.Krt}yrt(t){"color"===this.wf&&C33.Ci(t)?(this.Krt[0]=C33.zn(t),this.Krt[1]=C33.Jn(t),this.Krt[2]=C33.Zn(t)):this.Krt=t}Fnt(){return this.cat}mrt(t){"color"===this.wf&&C33.Ci(t)?(this.cat[0]=C33.zn(t),this.cat[1]=C33.Jn(t),this.cat[2]=C33.Zn(t)):this.cat=t}BZ(){const t=this.Kot.Iit().PZ();return"relative"===t?this.Fit():"absolute"===t?this.Fnt():void 0}SA(){return this.wf}Vit(t){this.wf=t}GG(){return this.MP}UW(t){this.MP=t,this.Kot.Sat()}Srt(){return this.Qot}oU(t){this.Qot=t}vst(){return this.tat}xst(t){this.tat=!!t}RZ(){return this.dat}FZ(e){if(this.uat){if(!this.fat&&null!==this.fat){const s=this.uat.yat();if(s){const i=s.length;for(let t=0;t<i;t++){const r=s[t];if(r.fU()===e)return this.fat=r,this.fat}}this.fat=null}return this.fat}}v8(){const t=this.uat;return{addonDataJson:t&&t.v8(),value:this.Krt,aValue:this.cat,type:this.wf,time:this.MP,ease:this.Qot,enable:this.tat}}x8(t){t&&(t.addonDataJson&&this.uat._SetFromJson(t.addonDataJson),this.Krt=t.value,this.cat=t.aValue,this.wf=t.type,this.MP=t.time,this.Qot=t.ease,this.tat=t.enable)}}C33.Jot=class{constructor(t,e){this.uit=e,this.mit=[],this.Tat=[],C33.RJ.got(this.mit,t,PropertyKeyframeDataItem,this),C33.RJ.yot(this.Tat,t,PropertyKeyframeDataItem,this),this.Sat()}gn(){this.uit=null;for(const t of this.mit)t.gn();C33.Vh(this.mit),this.mit=null;for(const e of this.Tat)e.gn();C33.Vh(this.Tat),this.Tat=null}Sat(){let e=this.mit;e.sort((t,e)=>t.GG()-e.GG());for(let t=0;t<e.length;t++){const s=e[t];t+1<e.length&&s.iat(e[t+1]),0<=t-1&&s.gat(e[t-1])}(e=this.Tat).sort((t,e)=>t.GG()-e.GG());for(let t=0;t<e.length;t++){const i=e[t];t+1<e.length&&i.iat(e[t+1]),0<=t-1&&i.gat(e[t-1])}}drt(){const t=new PropertyKeyframeDataItem(null,this);return this.mit.push(t),this.Sat(),t}prt(t){for(const e of this.mit)if(t(e)){const s=this.mit.indexOf(e);-1!==s&&(e.gn(),this.mit.splice(s,1))}this._at(),this.Sat()}_at(){this.mit.sort((t,e)=>t.GG()-e.GG())}Iit(){return this.uit}Eat(){return this.mit.length}Nnt(){return this.mit[this.mit.length-1]}Cit(){return this.mit}AZ(){return this.Tat}*Aat(){for(const t of this.mit)yield t}*Iat(){for(let t=this.mit.length-1;0<=t;t--)yield this.mit[t]}v8(){const t=this.mit,e=this.Tat;return{propertyKeyframeDataItemsJson:t.map(t=>t.v8()),propertyKeyframeDataItemsIncludingDisabledJson:e.map(t=>t.v8())}}x8(t){t&&(C33.RJ.Tot(this.mit,t.propertyKeyframeDataItemsJson,PropertyKeyframeDataItem,this),C33.RJ.Tot(this.Tat,t.propertyKeyframeDataItemsIncludingDisabledJson,PropertyKeyframeDataItem,this),this.Sat())}}}{const C33=self.Fe,ADDON_ID=0,ADDON_DATA=1;class AddonDataItem{constructor(t,e){this.uat=e,this.yf=t[ADDON_ID],this.wat=t[ADDON_DATA]}gn(){this.uat=null,this.wat=null}Cat(){return this.uat}fU(){return this.yf}v8(){return{id:this.yf,data:this.wat}}x8(t){t&&(this.yf=t.id,this.wat=t.data)}}const START_ANCHOR=0,START_ENABLE=1,END_ANCHOR=2,END_ENABLE=3;class AddonDataCubicBezierItem extends AddonDataItem{constructor(t,e){super(t,e),this.Rat=this.wat[START_ANCHOR],this.Mat=!!this.wat[START_ENABLE],this.bat=this.wat[END_ANCHOR],this.vat=!!this.wat[END_ENABLE]}gn(){super.gn()}UZ(){return this.Rat}cot(){return this.Mat}jZ(){return this.bat}uot(){return this.vat}v8(){return Object.assign(super.v8(),{startAnchor:this.Rat,startEnable:!!this.Mat,endAnchor:this.bat,endEnable:!!this.vat})}x8(t){t&&(super.x8(t),this.Rat=t.startAnchor,this.Mat=!!t.startEnable,this.bat=t.endAnchor,this.vat=!!t.endEnable)}}const DIRECTION=0,REVOLUTIONS=1;class AddonDataAngleItem extends AddonDataItem{constructor(t,e){super(t,e),this.xat=this.wat[DIRECTION],this.Gat=this.wat[REVOLUTIONS]}gn(){super.gn()}pot(){return this.xat}dot(){return this.Gat}v8(){return Object.assign(super.v8(),{direction:this.xat,revolutions:this.Gat})}x8(t){t&&(super.x8(t),this.xat=t.direction,this.Gat=t.revolutions)}}C33.pat=class{constructor(t,e){this.Pat=e,this.Oat=[],C33.RJ.got(this.Oat,t,{prop:0,map:new Map([["cubic-bezier",AddonDataCubicBezierItem],["angle",AddonDataAngleItem]])},this)}gn(){this.Pat=null;for(const t of this.Oat)t.gn();C33.Vh(this.Oat),this.Oat=null}Dat(){return this.Pat}yat(){return this.Oat}*Lat(){for(const t of this.Oat)yield t}v8(){return{addonDataItemsJson:this.Oat.map(t=>t.v8())}}x8(t){t&&C33.RJ.Tot(this.Oat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",AddonDataCubicBezierItem],["angle",AddonDataAngleItem]])},this)}}}{let C33=self.Fe,INITIAL_VALUE_MODE_START_VALUE="start-value",INITIAL_VALUE_MODE_CURRENT_STATE="current-state",PING_PONG_BEGIN=0,PING_PONG_END=1,createdTweens=0;C33.Hht=class extends C33.n9{constructor(t,e){super("tween-"+createdTweens++,t,e),this.yf="",this.Nat=!1,this.Fat=INITIAL_VALUE_MODE_START_VALUE,this.Vet=null,this.kat=null,this.Bat=null,this.cit=null,this.$at=null}mtt(t){const e=C33.Cn(C33.Event,"tweenstatereleased");e.Wat=this,t.dispatchEvent(e)}SA(){return 1}WQ(){for(const t of this.NQ.Stt().gtt())this.FQ.push(C33.Uat.CE(this,t));this.cit=this.FQ[0]}_et(){const t=this.NQ.Stt().Eet(),e=C33.Uat.CE(this,t);return this.FQ.push(e),this.Vat(),e}Vat(){this.cit=this.FQ[0]}pU(t){return this.cit.xet()[0]}Uit(t){this.Hat=t}aU(){const t=this.TZ();if(t&&t.length){const e=t[0];if(this.cit=e){const s=e.aU();return e.ast()?s:void 0}}}jat(t){this.Bat||(this.Bat=[]),this.Bat.push(t)}Xat(t){this.kat||(this.kat=[]),this.kat.push(t)}Yat(t){if(this.Bat){const e=this.Bat.indexOf(t);-1!==e&&this.Bat.splice(e,1)}}qat(t){if(this.kat){const e=this.kat.indexOf(t);-1!==e&&this.kat.splice(e,1)}}Kat(t,e){for(const s of this.FQ)for(const i of s.Qet)if(i.Get()===e){const r=i.rst(),n=i.Iit(),h=r.jit(n);h.yrt(t),h.mrt(t)}}zat(t){for(const e of this.FQ)for(const s of e.Qet)if(s.Get()===t)return s}Jat(t){for(const e of t){const s=this.zat(e);this.Kat(s.nrt(),e)}if(this.Ltt()){const i=this.HW()-this.GG();this.VW(i);for(const r of this.FQ)r.bst(i);this.ztt(0)}else{const n=this.GG();this.VW(n);for(const h of this.FQ)h.bst(n);this.ztt(n)}this.Jtt()}Zat(t,e){const s=this.zat(e),i=s.rst(),r=s.Iit(),n=i.Nnt(r);n.UW(this.HW()),n.yrt(t),n.mrt(t)}Qat(t){this.yf=t}fU(){return this.yf}tlt(t){this.Fat=t}elt(){return this.Fat}uU(t){this.Nat=t}cU(){return this.Nat}$tt(){if(this.Bat)for(const t of this.Bat)t(this);if(!this.J9())for(const e of this.FQ)e.sit()}Wtt(){this.ett=this.gf.Utt()}Q9(){if(!this.ntt&&(this.ntt=!0,this.kat))for(const t of this.kat)t(this)}UW(t){this.slt(),super.UW(t)}iet(t){(t=C33.Ci(t)?t:this.HW())<0?this.HQ=0:t>=this.HW()?this.HQ=this.HW():this.HQ=t,this.cit.ret()}H9(t){if(!this.Z9()&&this.elt()===INITIAL_VALUE_MODE_CURRENT_STATE)for(const e of this.FQ)e.eit();super.H9(t)}BW(t=!1){if(super.BW(t),!this.J9())for(const e of this.FQ)e.tit()}g0(t=!0,e=!1){this.slt(),super.g0(t,e)}slt(){for(const t of this.FQ){const e=t=>{const e=t.GG(),s=this.HW();return 0!==e&&e!==s};t.Jst(e),t.Qst(e)}}VJ(){if(!this.FW()){const t=this.aU();if(t&&t.YB().UY())return!1;this.LQ.B9(this),this.let()}return!0}q9(r,t,e){if(this.Vet||(this.Vet=this.aU()),!this.Vet||this.Vet.fV())this.BW(!0),this.Wtt();else{const s=this.Vet.ZD();if(0!==(r=-1!==s?e*s:r)||0!==this.ott){this.ott=r;const n=this.HQ+this.jQ,h=r*this.XQ,o=n+h,a=this.NQ.pet;o<0?(this.HQ=0,this.jQ=-o):a<=o?(this.HQ=a,this.jQ=this.HQ-o):(this.HQ=o,this.jQ=0);let t=!1,e=!1,s=this.XW(),i=this.qW();s||i?s&&!i?0<this.XQ?this.HQ>=a&&(this.iet(0),this.ilt(C33.hlt.nlt.T7.rlt),this.ilt(C33.hlt.nlt.T7.olt),e=!0):this.HQ<=0&&(this.iet(a),this.ilt(C33.hlt.nlt.T7.rlt),this.ilt(C33.hlt.nlt.T7.olt),e=!0):!s&&i?0<this.XQ?this.HQ>=a&&(this.ztt(a),this.KW(-1*this.zW()),e=!0,this.YQ===PING_PONG_END?this.qQ<this.iW()?(this.qQ++,this.ilt(C33.hlt.nlt.T7.rlt),this.ilt(C33.hlt.nlt.T7.olt),this.ilt(C33.hlt.nlt.T7.llt),this.ilt(C33.hlt.nlt.T7.clt),this.YQ=PING_PONG_BEGIN):(this.ilt(C33.hlt.nlt.T7.llt),this.ilt(C33.hlt.nlt.T7.clt),t=!0):this.YQ===PING_PONG_BEGIN&&(this.ilt(C33.hlt.nlt.T7.llt),this.ilt(C33.hlt.nlt.T7.clt),this.YQ=PING_PONG_END)):this.HQ<=0&&(this.ztt(0),this.KW(-1*this.zW()),e=!0,this.YQ===PING_PONG_END?this.qQ<this.iW()?(this.qQ++,this.ilt(C33.hlt.nlt.T7.rlt),this.ilt(C33.hlt.nlt.T7.olt),this.ilt(C33.hlt.nlt.T7.llt),this.ilt(C33.hlt.nlt.T7.clt),this.YQ=PING_PONG_BEGIN):(t=!0,this.ilt(C33.hlt.nlt.T7.llt),this.ilt(C33.hlt.nlt.T7.clt)):this.YQ===PING_PONG_BEGIN&&(this.ilt(C33.hlt.nlt.T7.llt),this.ilt(C33.hlt.nlt.T7.clt),this.YQ=PING_PONG_END)):s&&i&&(0<this.XQ?this.HQ>=a&&(this.ztt(a),this.KW(-1*this.zW()),e=!0,this.YQ===PING_PONG_BEGIN&&(this.ilt(C33.hlt.nlt.T7.llt),this.ilt(C33.hlt.nlt.T7.clt)),this.YQ===PING_PONG_END&&(this.ilt(C33.hlt.nlt.T7.rlt),this.ilt(C33.hlt.nlt.T7.olt),this.ilt(C33.hlt.nlt.T7.llt),this.ilt(C33.hlt.nlt.T7.clt)),this.YQ++,this.YQ=C33.wrap(this.YQ,0,2)):this.HQ<=0&&(this.ztt(0),this.KW(-1*this.zW()),e=!0,this.YQ===PING_PONG_BEGIN&&(this.ilt(C33.hlt.nlt.T7.llt),this.ilt(C33.hlt.nlt.T7.clt)),this.YQ===PING_PONG_END&&(this.ilt(C33.hlt.nlt.T7.rlt),this.ilt(C33.hlt.nlt.T7.olt),this.ilt(C33.hlt.nlt.T7.llt),this.ilt(C33.hlt.nlt.T7.clt)),this.YQ++,this.YQ=C33.wrap(this.YQ,0,2))):0<this.XQ?this.HQ>=a&&(this.qQ<this.iW()?(this.qQ++,this.iet(0),this.ilt(C33.hlt.nlt.T7.rlt),this.ilt(C33.hlt.nlt.T7.olt),e=!0):(this.ztt(a),t=!0)):this.HQ<=0&&(this.qQ<this.iW()?(this.qQ++,this.iet(a),this.ilt(C33.hlt.nlt.T7.rlt),this.ilt(C33.hlt.nlt.T7.olt),e=!0):(this.ztt(0),t=!0)),t?(this.cit.met(),this.BW(!0),this.Wtt()):(this.cit.zu(this.HQ,!0,!1,e,this.htt,!1),this.htt&&(this.htt=!1))}}}ilt(t){const e=this.aU(),s=e.ult(C33.hlt.nlt);s.flt(this),this.gf.P$(t,e,s.V5()),s.dlt()}v8(){const t=super.v8(),e=this.wtt();return Object.assign(t,{tweenDataItemJson:e.v8(),id:this.yf,destroyInstanceOnComplete:this.Nat,initialValueMode:this.Fat})}x8(t){if(t){const e=this.wtt();e.x8(t.tweenDataItemJson),super.x8(t),this.yf=t.id,this.Nat=t.destroyInstanceOnComplete,this.Fat=t.initialValueMode,this.Vat()}}static IsPlaying(t){return t.IsPlaying()}static tU(t){return t.tU()}static plt(t){return!!t.qW()&&t.Dtt()===PING_PONG_BEGIN}static mlt(t){return!!t.qW()&&t.Dtt()===PING_PONG_END}static Clt(t){const e=t.runtime.Ttt(),s=new C33.Cot;if(t.json){s.x8(t.json.tweenDataItemJson);const i=new C33.Hht(s,e);return i.x8(t.json),i}{const r=new C33.Hht(s,e),n=(C33.$i(t.glt)||(t.glt=[t.glt]),r.Qat(t.id),r.Ntt(t.tags),r.tlt(t.initialValueMode),r.uU(t.Slt),r.jW(t.loop),r.YW(t.pingPong),r.VW(t.time),r.Mtt(0),r.vtt("default"),r.xtt(t.glt[0].resultMode),r.Gtt(t.repeatCount),r._et()),h=(n.Rst(t.H5.o$()),n.vtt("default"),n.xtt(t.glt[0].resultMode),n.xst(!0),n.Gst(t.H5.YB().qO()),t.H5.P5()),o=h.Dst()?h.Ost():t.H5.BL().Sm(),a=h.Dst()?h.Nst():t.H5.BL().vm(),l=(n.Pst(o),n.Lst(a),n.Yst()),c=(l.UW(0),l.oU("noease"),l.xst(!0),l.Ntt(""),n.Yst());c.UW(t.time),c.oU("noease"),c.xst(!0),c.Ntt("");for(const u of t.glt){const f=n.Kst(),d=(f.Pit(u.ylt),f.Lit(u.Tlt),f.Bit(u.property),f.Uit(u.type),f.Yit(NaN),f.Kit(NaN),f.vtt("default"),f.xtt(u.resultMode),f.xst(!0),f.frt()),p=(d.Vit(u.valueType),d.UW(0),d.oU(u.ease),d.xst(!0),d.yrt(u._lt),d.mrt(u._lt),f.frt());p.Vit(u.valueType),p.UW(t.time),p.oU(u.ease),p.xst(!0),p.yrt(u.Elt),p.mrt(u.Elt),f.Ett()}return r}}static Rst(t,e){if(!isNaN(e))for(const s of t.TZ())s.Rst(e)}Alt(t,e){return this.$at||(this.$at=C33.Cn(self.iU,this,t,e)),this.$at}}}{const C33=self.Fe;C33.Uat=class extends C33.ytt{constructor(t,e){super(t,e),this.Ilt=null,this.wlt=null}static CE(t,e){return C33.Cn(C33.Uat,t,e)}Rlt(){1===this.Qet.length?this.Ilt=this.Qet[0]:(this.Ilt=this.Qet[0],this.wlt=this.Qet[1])}tst(){for(const t of this.Bet.rst().ist())this.Qet.push(C33.Mlt.CE(this,t));this.Rlt()}Kst(){const t=this.Bet.rst(),e=t.zst(),s=C33.Mlt.CE(this,e);return this.Qet.push(s),this.Rlt(),s}H9(){if(this.ost(),this.ast()||!this.Itt()){const t=this.hst(),e=t.Ltt(),s=e?0:this.Mst();for(const r of this.Qet)r.H9(s),0===this.est&&1===r.Bst()&&(this.est=1),0===this.e9&&1===r.j9()&&(this.e9=1);this.sst=0;const i=this.Qet.some(t=>t.det());i&&(this.sst=1),this.Ket=this.$st(s),this.Xet=!1,this.Yet=!1,this.zu(s)}}Cet(){}zu(t,e=0,s=!1,i=!1,r,n=!1,h=!1){if(this.Vet||this.aU(),this.Vet){const o=!this.Vet.fV();return o&&(!n||!this.YB().UY())&&((this.wlt?(this.Ilt.zu(t,s,i,h),this.wlt):this.Ilt).zu(t,s,i,h),void(0!==this.Ilt.Bst()&&(this.Het||(this.Het=this.Vet.BL()),this.Het)&&this.Het.o4()))}}Tet(){}x8(t){super.x8(t),this.Rlt()}}}{const C33=self.Fe;C33.Mlt=class extends C33.nst{constructor(t,e){super(t,e),this.blt=!1}static CE(t,e){return C33.Cn(C33.Mlt,t,e)}zu(t,e=!1,s=!1,i=!1){let r,n;if(this.blt)r=this.mit[0],n=this.mit[1];else{if(e)r=this.dit.Qit(t,this.uit);else{if(this.Sit){const h=this.hst(),o=this.Sit.IZ(),a=this.Sit.GG(),l=o?o.GG():h.HW();(t<=a||l<=t)&&(this.Sit=this.dit.Qit(t,this.uit))}else this.Sit=this.dit.Qit(t,this.uit);r=this.Sit}n=r.IZ()}this.pit.zu(t,r,n,e,s,i)}frt(){const t=this.uit.git(),e=t.drt();return this.Sit=null,this.blt=this.zit().length<=2,e}Qst(t){this.Sit=null;const e=this.uit.git();e.prt(t),this.blt=this.zit().length<=2}v8(){return{sourceAdapterJson:this.Ett().v8(),basic:this.blt}}x8(t){t&&(this.Ett().x8(t.sourceAdapterJson),this.blt=t.basic)}}}{const C33=self.Fe,Ease=self.wu,NAME=0,TRANSITION_KEYFRAMES=1,LINEAR=2;C33.Ju=class extends C33.pn{constructor(t,e=!0){super(),this.Tn=t[NAME],this.vlt=t[LINEAR],this.xlt=[];for(const s of t[TRANSITION_KEYFRAMES]){const i=C33.Glt.CE(this,s);this.xlt.push(i)}for(let t=0;t<this.xlt.length;t++){const r=this.xlt[t],n=this.xlt[t+1],h=this.xlt[t-1];r.iat(n),r.gat(h)}this.Plt=new Map,this.Olt=new Map,this.Dlt(),e&&Ease.Qu(this.Tn,(t,e,s,i)=>this.zu(t,e,s,i),null,{transition:this})}static CE(t){return C33.Cn(C33.Ju,t)}gn(){for(const t of this.xlt)t.gn();C33.Vh(this.xlt),this.xlt=null,this.Plt.clear(),this.Plt=null,this.Olt.clear(),this.Olt=null}Zu(t){this.vlt=!!t}Llt(t){const e=this.Olt.get(t);if(e)return e;for(const s of this.xlt)if(s.Nlt()===t)return this.Olt.set(t,s),s}Flt(e){for(let t=this.xlt.length-1;0<=t;t--){const s=this.xlt[t],i=s.Nlt();if(i<=e){let t=s;if(i<e)return t;if(i===e){for(;t;){const r=t.wZ();if(!r)break;if(r.Nlt()!==t.Nlt())break;t=r}return t}}}}zu(t,e,s,i){let r=t/i;if(this.vlt){const S=this.Llt(0),y=this.Llt(1),T=e+(e+s)*S.klt(),_=(e+s)*y.klt(),E=_-T;return 0===i?T+E:Ease.ef(t,T,E,i)}0===i&&(r=1);let n=this.Flt(r),h=n.IZ();if(!h){const A=n.wZ(),I=n;n=A,h=I}const o=h.Nlt()-n.Nlt(),a=C33._n(r,n.Nlt(),h.Nlt(),0,o);if(n.Blt()||0==o){const w=e+(e+s)*n.klt(),R=(e+s)*h.klt(),M=R-w;return 0==o?1===a?w+M:w:Ease.ef(a,w,M,o)}let l=n.Nlt(),c=n.klt(),u=n.Nlt()+n.$lt(),f=n.klt()+n.Wlt(),d=h.Nlt()+h.Ult(),p=h.klt()+h.Vlt(),m=h.Nlt(),C=h.klt(),g=Ease.$u("spline")(a,l,c,u,f,d,p,m,C,this.Plt.get(n));return(1-(g+=n.klt()))*e+g*(e+s)}Dlt(){this.Plt.clear();for(let t=0;t<this.xlt.length-1;t++){const e=this.xlt[t];if(e.cot()){const s=e,i=this.xlt[t+1];if(i.uot()){const r=s.Nlt(),n=s.Nlt()+s.$lt(),h=i.Nlt()+i.Ult(),o=i.Nlt();this.Plt.set(s,Ease.if(r,n,h,o))}}}}}}{const C33=self.Fe,VALUE_X=0,VALUE_Y=1,START_ANCHOR_X=2,START_ANCHOR_Y=3,END_ANCHOR_X=4,END_ANCHOR_Y=5,START_ENABLE=6,END_ENABLE=7,SEGMENT_MODE=8;C33.Glt=class extends C33.pn{constructor(t,e){super(),this.Hlt=t,this.jlt=e[VALUE_X],this.Xlt=e[VALUE_Y],this.Ylt=e[START_ANCHOR_X],this.qlt=e[START_ANCHOR_Y],this.Klt=e[END_ANCHOR_X],this.zlt=e[END_ANCHOR_Y],this.Mat=e[START_ENABLE],this.vat=e[END_ENABLE],this.Jlt=e[SEGMENT_MODE],this.sat=null,this.mat=null}gn(){this.Hlt=null}static CE(t,e){return C33.Cn(C33.Glt,t,e)}iat(t){this.sat=t}IZ(){return this.sat}gat(t){this.mat=t}wZ(){return this.mat}Nlt(){return this.jlt}klt(){return this.Xlt}$lt(){return this.Ylt}Wlt(){return this.qlt}Ult(){return this.Klt}Vlt(){return this.zlt}cot(){return this.Mat}uot(){return this.vat}Blt(){return"linear"===this.Jlt}Zlt(){return"cubic"===this.Jlt}}}{const C33=self.Fe;C33.Qlt=class extends C33.pn{constructor(t){super(),this.gf=t,this.tct=[]}gn(){for(const t of this.tct)t.gn();C33.Vh(this.tct),this.tct=null}CE(t){this.tct.push(C33.Ju.CE(t))}}}{const C33=self.Fe;C33.ect=class extends C33.pn{constructor(t){super(),this.gf=t,this.sct=null,this.ict=null,this.XJ=t=>this.YJ(t.H5)}gn(){if(this.s9(),this.sct){for(const t of this.sct.values())t.clear();this.sct.clear()}this.sct=null,this.gf=null}CE(t){if(this.sct||(this.sct=new Map),t){const e=t[0][16],s=e[0],i=t[1],r=(this.sct.has(i)||this.sct.set(i,new Map),this.sct.get(i));r.set(s,t)}}i9(){const t=this.gf.zf();t&&t.addEventListener("instancedestroy",this.XJ)}s9(){const t=this.gf.zf();t&&t.removeEventListener("instancedestroy",this.XJ)}rct(){return!!this.sct&&0!==this.sct.size}nct(t,e){let s;if(s=t instanceof C33.hct?t.qO():t,this.sct.has(s)){const i=this.sct.get(s).get(e);return i?JSON.parse(JSON.stringify(i)):void 0}}oct(t,e){this.ict||(this.ict=new WeakMap),this.ict.has(t)||this.ict.set(t,e)}lct(t){if(!this.ict)return"";const e=this.ict.get(t);return e||""}YJ(t){this.ict&&this.ict.has(t)&&this.ict.delete(t)}}}{const C33=self.Fe;C33.cct=class{constructor(t){this.gf=t,this.uct=new C33.fct}gn(){this.uct.gn(),this.uct=null,this.gf=null}hN(){return this.gf}CE(t){this.uct.Eu(t)}dct(t){return this.uct.rs(t)}pct(){return this.uct.pct()}}}{const C33=self.Fe;C33.mct=class{constructor(t,e,s,i,r,n,h){this.gf=r.hN(),this.Cct=r,this.gct=t,this.Sct=s,this.yct=i,this.e1=e,this.MJ=n,this.Tct=h??n.aU().o$(),this._ct(),this.Ect=this.Ict?.Act()??-1,this.wct=[],this.Rct=null,this.Mct=NaN,this.bct=null,this.vct=null,this.xct=null,this.Gct="",this.Pct=null,this.Oct="",this.Dct="",this.Lct=0,this.Nct=!1,this.QQ=!1}gn(){this.QQ||(C33.Vh(this.wct),this.wct=null,this.gf=null,this.Cct=null,this.yct=null,this.MJ=null,this.Rct=null,this.Mct=NaN,this.bct&&this.bct.clear(),this.bct=null,this.vct=null,this.xct=null,this.Gct="",this.Pct=null,this.Oct="",this.Dct="",this.QQ=!0)}Sn(){return this.QQ}Fct(){return this.Cct}hN(){return this.gf}lf(){return this.gct}kct(){return this.yct}NW(){return this.e1}C9(){return this.MJ||(this.MJ=this.gf.DL(this.Tct).P5()),this.MJ}Bct(){return this.$ct(this.Ect)}Wct(){const t=this.Bct();return t?t.NW():""}Uct(){const t=this.Bct();return t?t.JW():[]}Vct(t){const e=this.Uct();if(!e)return!1;if(!e.length)return!1;const s=C33.mct.Ftt(t);return!(!s||!s.length)&&s.every(C33.mct.Btt,e)}Hct(t,e){const s=this.Uct();if(!s)return!1;if(!s.length)return!1;const i=C33.mct.Ftt(t);return!(!i||!i.length)&&i.every(t=>C33.mct.jct.call(s,t,e))}static Btt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static Ftt(t){return t.trim().split(" ")}static jct(e,s){return""===e?1===this.length&&""===this[0]:this.some(t=>C33.compare(t.trim(),s,e.trim()))}Xct(t){const e=this.Bct();if(e){if(C33.Ci(t)){const s=e.Yct(),i=s?s[t]:void 0;if(C33.Ci(i))return this.$ct(i)}if("string"==typeof t)for(const r of e.Yct()){const n=this.$ct(r);if(n.WW(t))return this.$ct(n.Act())}}}qct(t){const e=this.Xct(t);return e?e.NW():""}Kct(t){const e=this.Xct(t);return e?e.JW():""}zct(t){const e=this.Bct();if(!e)return-1;const s=e.Yct();if(!s)return-1;const i=this.Xct(t);return i?s.indexOf(i.Act()):-1}Jct(){const t=this.Bct();if(!t)return 0;const e=t.Yct();return e?e.length:0}$ct(t){return this.yct.$ct(t)}g0(){const t=this.Zct();t.Qct(!0)}Qct(t){if(this.tut()){for(const[e,s]of this.tut().entries())s.Qct(!1);this.tut().clear()}if(this.bct=null,this.Rct=null,this.eut=null,this.vct=null,this.Gct="",this.Pct=null,this.Oct="",this.Dct="",this.wct=[],t){this.Cct.sut(this);const i=this.Ict.Act();i!==this.Ect&&this.iut(i)}else this.Ect=this.Ict.Act()}rut(){const t=this.yct.$ct(this.Ect);return t?t.hut().nut():0}out(t){const e=this.aut(t);return e?e.lf():""}lut(t){let e;return C33.Ci(t)&&(e=this.aut(t)),"string"==typeof t&&(e=this.cut(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),e?e.Fit():""}uut(t){let e;if(C33.Ci(t)&&(e=this.aut(t)),e="string"==typeof t?this.cut(t):e){const s=e.fut();C33.Ci(s)&&(this.wct.push(this.Ect),this.iut(s))}}dut(t){const e=this.yct.mut(t);if(e){const s=this.yct.$ct(e.Act());s&&(this.wct.push(this.Ect),this.iut(s.Act()))}}Cut(){const t=this.wct.pop();C33.Ci(t)?this.iut(t):this.gut()&&(this.Cct.sut(this.gut(),!0,!1,!1),this.gut().iut(this.Sut()),this.Zct().yut(this.gut()))}Tut(t){const e=this.Bct();if(e){e.Act();const s=this.Xct(t);s&&(this.wct.push(this.Ect),this.iut(s.Act()))}}_ut(e){if(C33.Ci(e)){const t=this.yct.$ct(this.Ect),s=t.hut().Eut();return!!s[e]}if("string"==typeof e){const i=this.yct.$ct(this.Ect),r=i.hut().Eut();for(let t=0;t<r.length;t++)if(r[t].lf()===e)return!0}return!1}Aut(){this.Nct=!0}Iut(){return 0<this.Lct}wut(){this.Lct++}Rut(){this.Lct--,0===this.Lct&&this.Nct&&this.Cct.Mut(this)}iut(t){const s=this.Ect,e=this.C9().aU();if(this.wut(),this.Cct.but(this),this.gf.P$(C33.E7.Flowchart.T7.OnBeforeAnyNodeChange,e),this.gf.P$(C33.E7.Flowchart.T7.OnBeforeTaggedNodeChange,e),this.gf.P$(C33.E7.Flowchart.T7.OnBeforeAnyNodeChangeInFlowchart,e),this.gf.P$(C33.E7.Flowchart.T7.OnBeforeTaggedNodeChangeInFlowchart,e),this.Ect=t,this.gf.P$(C33.E7.Flowchart.T7.OnAnyNodeChange,e),this.gf.P$(C33.E7.Flowchart.T7.OnTaggedNodeChange,e),this.gf.P$(C33.E7.Flowchart.T7.OnAnyNodeChangeInFlowchart,e),this.gf.P$(C33.E7.Flowchart.T7.OnTaggedNodeChangeInFlowchart,e),this.Cct.vut(),this.Rut(),!this.Sn()){const i=this.$ct(this.Ect);if("reference"===i.SA()){const r=i.xut();if(this.Gut(i)){this.wct.pop();const n=this.Put(i),h=(this.Cct.sut(n,!0,!0,!1),n.Out(this,s),this.Zct());h.yut(n)}else{const o=i.Dut();if(r){this.wct.pop();let e=i.Lut();if(e){let t=this.Cct.Nut(e);for(;t;)e=C33.rp(e),t=this.Cct.Nut(e)}else{e=r+"-ref";let t=this.Cct.Nut(e);for(;t;)e=C33.rp(e),t=this.Cct.Nut(e)}const a=this.Cct.Fut(r,o,e,this.MJ,!0),l=(a.Out(this,s),this.kut(i,a),this.Zct());a.But(l),l.yut(a)}}}}}aut(t){const e=this.yct.$ct(this.Ect);if(!e)return null;const s=e.hut().Eut();if(!s)return null;const i=s[t];return i||null}cut(t){const e=this.yct.$ct(this.Ect);if(!e)return null;const s=e.hut().$ut(t);return s||null}_ct(e){if("number"==typeof e){let t=this.$ct(e);t=t||this.yct.Wut(),this.Ict=t}else{let t=this.yct.mut(this.Sct);t=t||this.yct.Wut(),this.Ict=t}}v8(){return this.Nct?null:{flowchartName:this.gct,flowchartTag:this.e1,startNodeTag:this.Sct,currentNodeId:this.Ect,previousNodeIds:this.wct,pluginUID:this.MJ.aU().o$(),reference:{previousFlowchartTag:this.gut()?this.gut().NW():"",previousStartNodeId:C33.Ci(this.Sut())?this.Sut():NaN,referencesJson:this.Uut(),currentReferenceFlowchartTag:this.Vut()?this.Vut().NW():"",rootFlowchartTag:this.Zct()?this.Zct().NW():""}}}Uut(){if(!this.Hut())return null;const t=[];for(const[e,s]of this.tut().entries())t.push({flowchartElementId:e.Act(),flowchartStateTag:s.NW()});return t.length?t:null}x8(t){if(t){if(this.gct=t.flowchartName,this.e1=t.flowchartTag,this.Sct=t.startNodeTag,this.Ect=t.currentNodeId,this.wct=t.previousNodeIds,this.Tct=t.pluginUID,t.hasOwnProperty("reference")){const e=t.reference;this.Gct=e.previousFlowchartTag,this.Mct=e.previousStartNodeId,this.Pct=e.referencesJson,this.Oct=e.currentReferenceFlowchartTag,this.Dct=e.rootFlowchartTag}this._ct()}}gut(){return"string"==typeof this.Gct&&this.Gct&&(this.Rct=this.Cct.Nut(this.Gct),this.Gct=""),this.Rct}Sut(){return this.Mct}Out(t,e){this.Rct=t,this.Mct=e}Vut(){return"string"==typeof this.Oct&&this.Oct&&(this.vct=this.Cct.Nut(this.Oct),this.Oct=""),this.vct}yut(t){this.vct=t,this.vct===this&&(this.vct=null)}Zct(){return"string"==typeof this.Dct&&this.Dct&&(this.xct=this.Cct.Nut(this.Dct),this.Dct=""),this.xct||this}But(t){this.xct=t}Hut(){return this.jut(),!!this.bct}Gut(t){return this.jut(),this.bct&&this.bct.has(t)}jut(){if(this.Pct){this.bct&&this.bct.clear(),this.bct||(this.bct=new Map);for(const t of this.Pct){const e=this.Cct.Nut(t.flowchartStateTag),s=e.$ct(t.flowchartElementId);this.bct.set(s,e)}this.Pct=null}}tut(){return this.jut(),this.bct}Put(t){return this.jut(),this.bct.get(t)}kut(t,e){this.bct||(this.bct=new Map),this.bct.set(t,e)}}}{const C33=self.Fe;C33.Xut=class{constructor(t){this.gf=t,this.Yut=new Map,this.qut=null,this.Kut=[],this.zut=()=>this.JJ(),this.Jut=null}gn(){C33.Vh(this.Kut),this.Kut=null,this.Yut.clear(),this.Yut=null,this.qut=null,this.gf=null,this.Jut=null}hN(){return this.gf}Fut(t,e,s,i,r,n){const h=this.gf.Fct().dct(t);if(h){if(!this.Yut.has(s)){const o=new C33.mct(t,s,e,h,this,i,n);return this.Yut.set(s,o),r&&this.sut(o,!0),o}{const a=this.Yut.get(s);a&&this.Mut(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}Mut(t){if(t.Aut(),!t.Iut()){const e=t.NW();this.Yut.delete(e),t.gn(),this.qut===t&&(this.qut=null)}}Zut(t){t.g0()}Nut(t){return this.Yut.get(t)}but(t){this.Kut.push(t)}vut(){this.Kut.pop()}sut(t,e=!1,s=!1,i=!0){if(i){const r=t.Vut();t=r||t}t!==this.qut&&(this.Qut(),this.tft(t,e,s))}eft(t){return"string"==typeof t?this.Nut(t):this.Kut.length?this.Kut[this.Kut.length-1]:this.qut}Qut(){if(this.qut&&!this.qut.Sn()){const t=this.qut.C9().aU();this.qut.wut(),this.but(this.qut),this.gf.P$(C33.E7.Flowchart.T7.OnBeforeFlowchartChange,t),this.vut(),this.qut.Rut()}}tft(t,e=!1,s=!1){if(this.qut=t,this.qut&&!this.qut.Sn()){const i=this.qut.C9().aU();this.qut.wut(),this.but(this.qut),this.gf.P$(C33.E7.Flowchart.T7.OnFlowchartChange,i),!0!==s&&"number"!=typeof s||this.qut._ct(s),e&&(this.gf.P$(C33.E7.Flowchart.T7.OnAnyNodeChange,i),this.gf.P$(C33.E7.Flowchart.T7.OnTaggedNodeChange,i)),this.vut(),this.qut.Rut()}}v8(){return{flowchartJsonObjects:[...this.Yut.values()].map(t=>t.v8()),currentFlowchartTag:this.qut?this.qut.NW():null}}x8(t){if(t){this.Jut=t;const e=new Map;for(const s of this.Jut.flowchartJsonObjects){const i=s.flowchartTag;if(this.Yut.has(i)){const r=this.Yut.get(i);r.x8(s),e.set(i,r)}else{const n=this.Fut(s.flowchartName,s.startNodeTag,s.flowchartTag,null,!1,s.pluginUID);n.x8(s),e.set(s.flowchartTag,n)}}for(const[h,o]of this.Yut.entries())e.has(h)||o.gn();this.Yut.clear(),this.Yut=e,this.gf.f7()?this.gf.zf().addEventListener("afterload",this.zut):this.JJ()}}JJ(){this.gf.zf().removeEventListener("afterload",this.zut);const t=this.Yut.get(this.Jut.currentFlowchartTag);t&&this.sut(t,!0),this.Jut=null}}}{const C33=self.Fe;C33.fct=class{constructor(){this.ift=new Map}gn(){for(const t of this.ift.values())t.gn();this.ift.clear(),this.ift=null}Eu(t){const e=new C33.rft(t),s=e.lf();this.ift.set(s,e)}rs(t){return this.ift.get(t)}pct(){return!!this.ift.size}static nft(t,e,s,i){if(e)for(const r of e){const n=new s(r,i);t.push(n)}}}}{const C33=self.Fe,NAME=0,NODES=1;C33.rft=class{constructor(t){this.Tn=t[NAME],this.hft=new C33.oft(t[NODES],this)}gn(){this.hft.gn(),this.hft=null}aft(){return this.hft}$ct(t){return this.hft.$ct(t)}mut(t){return this.hft.mut(t)}Wut(){return this.hft.Wut()}lf(){return this.Tn}}}{const C33=self.Fe,FLOWCHART_ID=0,TAG=1,PARENT_FLOWCHART_IDS=2,PARENT_OUTPUT_FLOWCHART_IDS=3,CHILDREN_FLOWCHART_IDS=4,OUTPUTS=5,IS_START=6,TYPE=7,REFERENCE_FLOWCHART=8,REFERENCE_FLOWCHART_START_NODE=9,REFERENCE_FLOWCHART_TAG=10;class FlowchartNodeDataItem{constructor(t,e){this.hft=e,this.wf=t[TYPE],this.lft=t[FLOWCHART_ID],this.e1=t[TAG],this.e1?this.att=this.e1.trim().split(" ").map(t=>t.trim()):this.att=[],this.cft=t[PARENT_FLOWCHART_IDS],this.uft=null,this.fft=null,"dictionary"===this.wf&&(this.uft=t[PARENT_OUTPUT_FLOWCHART_IDS],this.fft=t[CHILDREN_FLOWCHART_IDS]),this.dft=t[IS_START],this.pft=null,this.mft=null,this.Cft=null,"reference"===this.wf&&(this.pft=t[REFERENCE_FLOWCHART],this.mft=t[REFERENCE_FLOWCHART_START_NODE],this.Cft=t[REFERENCE_FLOWCHART_TAG]),this.gft=new C33.Sft(t[OUTPUTS],this)}gn(){this.hft=null}aft(){return this.hft}hut(){return this.gft}Act(){return this.lft}NW(){return this.e1}JW(){return this.att}WW(t){if(!this.att)return!1;if(!this.att.length)return!1;const e=C33.mct.Ftt(t);return!(!e||!e.length)&&e.every(C33.mct.Btt,this.att)}yft(){return this.dft}Yct(){return this.cft}Tft(){return this.uft}_ft(){return this.fft}SA(){return this.wf}xut(){return this.pft}Dut(){return this.mft}Lut(){return this.Cft}}C33.oft=class{constructor(t,e){this.yct=e,this.Eft=[],this.Aft=new Map,this.Ift=new Map,this.wft=null,C33.fct.nft(this.Eft,t,FlowchartNodeDataItem,this);for(const s of this.Eft){const i=s.Act(),r=s.NW(),n=s.JW(),h=s.yft();if(this.Aft.set(i,s),r)for(const a of n)this.Ift.has(a)||this.Ift.set(a,new Set),this.Ift.get(a).add(s);h&&(this.wft=s);const o=s.hut();for(const l of o.Rft()){const c=l.Act();this.Aft.set(c,l)}}}gn(){this.yct=null;for(const t of this.Eft)t.gn();C33.Vh(this.Eft),this.Eft=null}kct(){return this.yct}$ct(t){return this.Aft.get(t)}mut(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.Ift.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}const e=s.reduce((t,e)=>e.size<t.size?e:t);return[...e].filter(e=>s.every(t=>t.has(e)))[0]}Wut(){return this.wft}*Mft(){for(const t of this.Eft)yield t}}}{const C33=self.Fe,FLOWCHART_ID=0,NAME=1,VALUE=2,CONNECTED_FLOWCHART_NODE_FLOWCHART_ID=3;class FlowchartNodeDataOutputItem{constructor(t,e){this.gft=e,this.lft=t[FLOWCHART_ID],this.Tn=t[NAME],this.Krt=t[VALUE],this.bft=t[CONNECTED_FLOWCHART_NODE_FLOWCHART_ID]}gn(){this.gft=null}hut(){return this.gft}Act(){return this.lft}lf(){return this.Tn}Fit(){return this.Krt}fut(){return this.bft}}C33.Sft=class{constructor(t,e){this.vft=e,this.xft=[],this.Gft=new Map,C33.fct.nft(this.xft,t,FlowchartNodeDataOutputItem,this);for(const s of this.xft)this.Gft.set(s.lf(),s)}gn(){this.vft=null;for(const t of this.xft)t.gn();C33.Vh(this.xft),this.xft=null}Pft(){return this.vft}nut(){return this.xft.length}Eut(){return this.xft}$ut(t){return this.Gft.get(t)}*Rft(){for(const t of this.xft)yield t}}}{const C33=self.Fe;C33.Oft=class extends C33.pn{constructor(t){super(),this.Dft=t,this.Lft=[],this.Lft.push(C33.Cn(C33.Nft,this)),this.t1=0,this.Fft=this.Lft[0]}gn(){for(const t of this.Lft)t.gn();C33.Vh(this.Lft),this.Fft=null,this.Dft=null}YB(){return this.Dft}ZF(){return this.Fft}kft(){return this.Lft[this.t1-1]}fu(){this.ZF().fu()}Bft(){const t=this.Lft,e=++this.t1;if(e===t.length){const s=C33.Cn(C33.Nft,this);t.push(s),this.Fft=s}else{const i=t[e];i.g0(),this.Fft=i}}$ft(){const t=this.Lft,e=++this.t1,s=(e===t.length&&t.push(C33.Cn(C33.Nft,this)),t[e]);s.N0(t[e-1]),this.Fft=s}fH(){this.Fft=this.Lft[--this.t1]}Wft(s){const i=this.Lft;for(let t=0,e=i.length;t<e;++t)i[t].Wft(s)}}}{const C33=self.Fe;C33.Nft=class extends C33.pn{constructor(t){super(),this.Lft=t,this.Dft=this.Lft.YB(),this.Uft=this.Dft.hN().kD(),this.Vft=!0,this.ZX=[],this.Hft=[]}gn(){this.jft(),this.Lft=null,this.Dft=null,this.Uft=null}jft(){C33.Vh(this.ZX),C33.Vh(this.Hft)}YB(){return this.Dft}Xft(){return this.Vft}Yft(){return this.Vft?!!this.Dft.ek():!!this.ZX.length}JF(){return this.Vft?this.Dft.JF():this.ZX}qft(){return!!this.Hft.length}Kft(){return this.Hft}zft(){const t=this.JF();return t.length?t:this.Hft}g0(){this.Vft=!0,C33.Vh(this.Hft)}fu(){this.Vft=!0}N0(t){t.Xft()?this.g0():(this.Vft=!1,C33.Yh(this.ZX,t.ZX),C33.Vh(this.Hft))}Jft(t){this.ZX.push(t)}Zft(t){this.Hft.push(t)}Qft(t){this.Vft=!!t}t0t(){return this.ZX}e0t(){return this.Hft}s0t(t){this.Vft=!1,C33.Vh(this.ZX),this.ZX.push(t)}i0t(t){this.Vft=!1,C33.Yh(this.ZX,t)}r0t(t){this.Vft=!1,C33.Vh(this.ZX);for(const e of t)this.ZX.push(e)}n0t(t,e){for(const s of e)t.has(s)||this.Hft.push(s)}h0t(t){for(const e of t)this.ZX.push(e);C33.Zh(this.Hft,t)}o0t(){C33.Vh(this.Hft)}a0t(t){if(t)if(this.Uft.tH().GD().l0t()){this.Xft()&&(C33.Vh(this.ZX),C33.Yh(this.Hft,t.YB().JF()),this.Vft=!1);const e=this.Hft.indexOf(t);-1!==e&&(this.ZX.push(this.Hft[e]),this.Hft.splice(e,1))}else this.s0t(t)}Wft(t){C33.Zh(this.ZX,t),C33.Zh(this.Hft,t)}}}{const C33=self.Fe;C33.c0t=class extends C33.pn{constructor(t){super(),this.u0t=t,this.gf=this.u0t.hN(),this.Lft=[],this.Lft.push(C33.Cn(C33.f0t,this,null)),this.t1=0,this.d0t=[]}gn(){for(const t of this.Lft)t.gn();C33.Vh(this.Lft),C33.Vh(this.d0t),this.u0t=null,this.gf=null}wD(){return this.u0t}hN(){return this.gf}tH(){return this.Lft[this.t1]}p0t(){return this.Lft}m0t(){return this.t1}eH(t){const e=this.Lft,s=++this.t1;if(s===e.length){const i=C33.Cn(C33.f0t,this,t);return e.push(i),i}{const r=e[s];return r.g0(t),r}}fH(){--this.t1}C0t(t){this.d0t.push(t)}g0t(){this.d0t.pop()}FD(){const t=this.d0t;return 0===t.length?null:t.at(-1)}}}{const C33=self.Fe;C33.f0t=class extends C33.pn{constructor(t,e){super(),this.Lft=t,this.gf=this.Lft.hN(),this.S0t=e,this.y0t=0,this.T0t=0,this._0t=!1,this.E0t=!1,this.A0t=null,this.I0t=0,this.w0t=0,this.R0t=null}gn(){this.g0(null),this.Lft=null,this.gf=null}g0(t){this.S0t=t,this.y0t=0,this.T0t=0,this._0t=!1,this.E0t=!1,this.R0t=null}M0t(t,e){this.S0t=t,this.y0t=0,this.T0t=e}b0t(){this.y0t=0,this.T0t=0}GD(){return this.S0t}v0t(t){this.S0t=t}x0t(){return this.y0t}G0t(t){this.y0t=t}P0t(){return this.T0t}O0t(t){this.T0t=t}D0t(t){this._0t=!!t}L0t(){return this._0t}N0t(t){this.E0t=!!t}F0t(){return this.E0t}k0t(t){this.A0t=t}B0t(){return this.A0t}$0t(t,e){this.I0t=t,this.w0t=e}BD(){return this.I0t}$D(t){this.w0t=t}W0t(){return this.w0t}U0t(){const t=this.S0t;return!!t.V0t()||this.y0t<t.H0t()-1&&!!t.QV().length}j0t(t){this.R0t=t}X0t(){return this.R0t}}}{const C33=self.Fe;C33.Y0t=class extends C33.pn{constructor(t){super(),this.u0t=t,this.gf=this.u0t.hN(),this.Lft=[],this.t1=-1,this.Fft=null,this.q0t=[]}gn(){C33.Vh(this.Lft),this.u0t=null,this.gf=null}K0t(t){this.q0t=t;const e=this.q0t.slice(0);this.Lft.push(e),this.t1=0,this.Fft=e}wD(){return this.u0t}hN(){return this.gf}z0t(){return this.Fft}eH(){const t=++this.t1,e=this.Lft;t===e.length?e.push(this.q0t.slice(0)):C33.Yh(e[t],this.q0t),this.Fft=e[t]}fH(){this.Fft=this.Lft[--this.t1]}}}{const C33=self.Fe;C33.J0t=class extends C33.pn{constructor(t){super(),this.u0t=t,this.gf=this.u0t.hN(),this.Lft=[],this.t1=-1}gn(){C33.Vh(this.Lft),this.u0t=null,this.gf=null}wD(){return this.u0t}hN(){return this.gf}Z0t(){return 0<=this.t1}z0t(){return this.Lft[this.t1]}eH(){if(++this.t1,this.t1===this.Lft.length){const t=C33.Cn(C33.Q0t,this);return this.Lft.push(t),t}{const e=this.Lft[this.t1];return e.g0(),e}}fH(){--this.t1}tdt(e){const s=this.Lft;for(let t=this.t1;0<=t;--t){const i=s[t];if(i.lf()===e)return i}return null}edt(){return this.Lft.slice(0,this.t1+1)}}}{const C33=self.Fe;C33.Q0t=class extends C33.pn{constructor(t){super(),this.sdt=t,this.Tn="",this.t1=0,this.idt=!1,this.rdt=NaN}g0(){this.Tn="",this.t1=0,this.idt=!1,this.rdt=NaN}iH(t){this.Tn=t}lf(){return this.Tn}lH(t){this.t1=t}qO(){return this.t1}BW(){this.idt=!0}uH(){return this.idt}ndt(t){this.rdt=t}hdt(){return this.rdt}}}{const C33=self.Fe;C33.odt=class extends C33.pn{constructor(){super(),this.Lft=[],this.t1=-1}gn(){C33.Vh(this.Lft)}z0t(){return this.Lft[this.t1]}eH(){if(++this.t1,this.t1!==this.Lft.length)return this.Lft[this.t1];{const t=[];return this.Lft.push(t),t}}fH(){--this.t1}}}{let SortSolArray2=function(t,e){return t.qO()-e.qO()},IsSolArrayIdentical2=function(s,i){for(let t=0,e=s.length;t<e;++t)if(s[t]!==i[t])return!1;return!0};SortSolArray=SortSolArray2,IsSolArrayIdentical=IsSolArrayIdentical2;const C33=self.Fe,assert=self.assert;C33.adt=class extends C33.pn{constructor(t){super(),this.gf=t,this.ldt=[],this.cdt=new Map,this.udt=[],this.fdt=new Map,this.ddt=new Map,this.pdt=new Map,this.mdt=new Map,this.Cdt=new Map,this.gdt=new Map,this.Sdt=0,this.ydt=[],this.Tdt=[],this._dt=[],this.Edt=new Map,this.Adt=new Map,this.Uft=C33.Cn(C33.c0t,this),this.Idt=C33.Cn(C33.Y0t,this),this.sdt=C33.Cn(C33.J0t,this),this.wdt=[],this.Rdt=[],this.Mdt=[],this.bdt=0,this.vdt=0,this.xdt=0,this.Gdt=[],this.Pdt=[],this.Odt=[],this.Ddt=new Map,this.Ldt=new Map,self.c3_callFunction=(t,e)=>this.Ndt(t,e)}gn(){this.D7(),this.Uft.gn(),this.Uft=null,this.Idt.gn(),this.Idt=null,C33.Vh(this.Rdt),C33.Vh(this.Mdt),this.gf=null,C33.Vh(this.ldt),this.cdt.clear()}CE(t){const e=C33.Cn(C33.Fdt,this,t);this.ldt.push(e),this.cdt.set(e.lf().toLowerCase(),e)}kdt(t){this.wdt.push(t)}Bdt(){for(const t of this.Adt.values())t.$dt();for(const e of this.Edt.values())e.Bdt();for(const s of this.Adt.values())s.Bdt();for(const i of this.ldt)i.Bdt();for(const r of this.ldt)r.e7();for(const n of this.wdt)n.Bdt(!1);C33.Vh(this.wdt),this.Idt.K0t(this._dt)}hN(){return this.gf}t7(t){return this.cdt.get(t.toLowerCase())||null}Wdt(t){this.udt.push(t),this.fdt.set(t.Udt(),t)}Vdt(t){this.ddt.set(t.cq(),t)}Hdt(t){this.pdt.set(t.cq(),t)}jdt(t){this.mdt.set(t.cq(),t)}Xdt(t){switch(t.Ydt()){case 0:this.Edt.set(t.qdt().toLowerCase(),t);break;case 1:this.Adt.set(t.qdt().toLowerCase(),t)}}Kdt(t){this.gdt.set(t.cq(),t),(t.UY()?this.ydt:this.Tdt).push(t)}zdt(s){2<=s.length&&s.sort(SortSolArray2);let i=this.Cdt.get(s.length);i||(i=[],this.Cdt.set(s.length,i));for(let t=0,e=i.length;t<e;++t){const r=i[t];if(IsSolArrayIdentical2(s,r))return r}return i.push(s),s}Jdt(t){return this._dt.push(t.Zdt()),this.Sdt++}kD(){return this.Uft}Qdt(){return this.kD().tH()}GD(){return this.Qdt().GD()}t3t(){const t=this.Qdt(),e=t.GD();return e.e3t(t.x0t())}s3t(){const t=this.Qdt(),e=t.GD();return e.i3t(t.P0t())}r3t(){return this.Idt}sH(){return this.sdt}n3t(t){const e=[];for(t=t.h3t();t;)C33.sn(e,t.o3t()),t=t.h3t();return e}a3t(t){const e={};for(const s of this.n3t(t))e[s.l3t()]=s.c3t();return Object.create(Object.prototype,e)}u3t(t){return this.gdt.get(t)||null}f3t(t){return this.ddt.get(t)||null}d3t(t){return this.pdt.get(t)||null}p3t(t){return this.mdt.get(t)||null}RD(t){return this.Edt.get(t.toLowerCase())||null}m3t(t,e){let s=this.Adt.get((t.lf()+"."+e).toLowerCase());if(s)return s;if(!t.sq())for(const i of t.C3t())if(s=this.Adt.get((i.lf()+"."+e).toLowerCase()))return s;return null}g3t(){return this.ydt}S3t(){return this.Tdt}y3t(t){for(const e of this.ydt)e.T3t();if(t)for(const s of this.Tdt)s.S_()&&s.T3t()}_3t(t){return this.fdt.get(t.toLowerCase())||null}E3t(t){const e=this.ddt.get(t);return e&&e.A3t()?e:null}I3t(){return this.udt}w3t(){for(const t of this.udt)t.R3t()}M3t(){for(const t of this.ldt)t.b3t()}v3t(t){this.M3t(),this.bdt++;for(const e of t.yJ()){const s=e.Mz();s&&(this.gf.x3t(e),s.Ww(),this.gf.G3t())}this.bdt--}async P3t(t){this.M3t(),this.bdt++;for(const e of this.O3t(t))await this.gf.D3t(e);this.bdt--}*O3t(t){for(const e of t.yJ()){const s=e.Mz();s&&(this.gf.x3t(e),yield*s.L3t(),this.gf.G3t())}}N3t(t,e,s,i){let r=!1;if(!t.gL())return this.F3t(e,s,i);this.vdt++;for(const n of t.yJ()){const h=n.Mz();if(h){this.gf.x3t(n);for(const a of h.k3t()){const l=a.N3t(e,s,i);r=r||l}const o=h.N3t(e,s,i);r=r||o,this.gf.G3t()}}return this.vdt--,r}*B3t(t,e,s,i){let r=!1;if(!t.gL())return this.F3t(e,s,i);this.vdt++;for(const n of t.yJ()){const h=n.Mz();if(h){this.gf.x3t(n);for(const a of h.k3t()){const l=yield*a.B3t(e,s,i);r=r||l}const o=yield*h.B3t(e,s,i);r=r||o,this.gf.G3t()}}return this.vdt--,r}F3t(t,e,s){return this.Rdt.push([t,e,s]),!1}$3t(t,e,s){let i=null,r=new Promise(t=>i=t);return this.Mdt.push([t,e,s,i]),r}*W3t(){if(this.gf.U3t())throw new Error("should not be in breakpoint");const t=this.gf.TL();for(;this.Mdt.length;){const[e,s,i,r]=this.Mdt.shift(),n=yield*this.B3t(t,e,s,i);r(n)}}async V3t(){for(const t of this.W3t())await this.gf.D3t(t)}H3t(t,s,i,r){let n=!1,e=t.gL(),h=e.Mz();if(h){this.vdt++,this.gf.x3t(e);const o=h.k3t();for(let t=0,e=o.length;t<e;++t){const l=o[t].H3t(s,i,r);n=n||l}const a=h.H3t(s,i,r);return n=n||a,this.gf.G3t(),this.vdt--,n}}*j3t(t,s,i,r){let n=!1,e=t.gL(),h=e.Mz();if(h){this.vdt++,this.gf.x3t(e);const o=h.k3t();for(let t=0,e=o.length;t<e;++t){const l=yield*o[t].j3t(s,i,r);n=n||l}const a=yield*h.j3t(s,i,r);return n=n||a,this.gf.G3t(),this.vdt--,n}}X3t(){return this.vdt}Y3t(){return 0<this.X3t()}q3t(){return++this.vdt}K3t(){--this.vdt}z3t(){return 0<this.bdt}ak(){return this.z3t()||this.Y3t()}A7(t){for(const[e,s,i]of this.Rdt)this.N3t(t,e,s,i);C33.Vh(this.Rdt)}nk(t){t?this.xdt++:this.xdt--}e$(){return 0<this.xdt}J3t(s){for(let t=0,e=s.length;t<e;++t)s[t].Z3t().fu()}Q3t(s){for(let t=0,e=s.length;t<e;++t)s[t].Z3t().Bft()}hH(s){for(let t=0,e=s.length;t<e;++t)s[t].Z3t().$ft()}aH(s){for(let t=0,e=s.length;t<e;++t)s[t].Z3t().fH()}PD(e){const s=new Set,i=this.Uft.p0t(),r=this.Uft.m0t();for(let t=0;t<=r;++t){const n=i[t].X0t();if(n)for(const h of n)e&&e.has(h)||s.add(h)}return s}tpt(t){const e=new Set([...t]),s=this.PD(e);if(0<s.size){for(const i of s)i.Z3t().Bft();return[...s]}return null}ept(){const t=C33.Cn(C33.spt,this);return this.Gdt.push(t),t}ipt(){return this.Gdt}rpt(){if(this.Gdt.length){let s=this.Qdt(),i=!1;this.bdt++;for(let t=0,e=this.Gdt.length;t<e;++t){const r=this.Gdt[t];r.npt()&&r.hpt(s),r.opt()&&(i=!0)}i&&(this.apt(),s.g0(null)),this.bdt--}}async lpt(){if(this.Gdt.length){let s=this.Qdt(),i=!1;this.bdt++;for(let t=0,e=this.Gdt.length;t<e;++t){const r=this.Gdt[t];r.npt()&&await r.cpt(s),r.opt()&&(i=!0)}i&&(this.apt(),s.g0(null)),this.bdt--}}apt(){const t=C33.Jh(this.Gdt,t=>t.opt());for(const e of t)e.gn()}D7(){for(const t of this.Gdt)t.gn();C33.Vh(this.Gdt)}upt(t){for(const e of this.Gdt)e.Wft(t);for(const s of t){const i=this.Ldt.get(s);if(this.Ldt.delete(s),i)for(const{resolve:r}of i.fpt.values())r(!0)}}dpt(t){this.Pdt.push({promise:t,ppt:this.X3t()})}mpt(){C33.Vh(this.Pdt)}Cpt(){const e=this.X3t();this.Pdt=this.Pdt.filter(t=>t.ppt<=e)}gpt(){const t=Promise.all(this.Pdt.map(t=>t.promise));return this.Pdt=[],t}WD(t){const e=t.toLowerCase();this.Odt.push(e),this.gf.P$(C33.E7._7.T7.Spt,null),this.Odt.pop();for(const i of this.gf.wD().ipt())i.ypt()&&i.Tpt()===e&&i._pt();const s=this.Ddt.get(e);s&&(s.resolve(),this.Ddt.delete(e))}VD(t){const s=t.toLowerCase(),e=this.Ddt.get(s);if(e)return e.promise;{let e=null,t=new Promise(t=>e=t);return this.Ddt.set(s,{promise:t,resolve:e}),t}}Ept(){if(0===this.Odt.length)throw new Error("not in a signal");return this.Odt.at(-1)}Apt(t){let e=this.Ldt.get(t);return e||(e={Ipt:[],fpt:new Map},this.Ldt.set(t,e)),e}S$(t,e){const s=this.Apt(t),i=e.toLowerCase();s.Ipt.push(i),this.gf.P$(t.$F().Rpt().T7.wpt,t),s.Ipt.pop();for(const n of this.gf.wD().ipt())n.Mpt()&&n.Tpt()===i&&n.bpt(t);const r=s.fpt.get(i);r&&(r.resolve(!1),s.fpt.delete(i)),0===s.Ipt.length&&0===s.fpt.size&&this.Ldt.delete(t)}y$(t,e){const s=this.Apt(t),i=e.toLowerCase(),r=s.fpt.get(i);if(r)return r.promise;{let e=null,t=new Promise(t=>e=t);return s.fpt.set(i,{promise:t,resolve:e}),t}}vpt(t){const e=this.Apt(t);if(e&&0!==e.Ipt.length)return e.Ipt.at(-1);throw new Error("not in a signal")}v8(){return{groups:this.xpt(),cnds:this.Gpt(),acts:this.Ppt(),vars:this.Opt(),waits:this.Dpt()}}x8(t){this.Lpt(t.groups),this.Npt(t.cnds),this.Fpt(t.acts),this.kpt(t.vars),this.Bpt(t.waits)}xpt(){const t={};for(const e of this.I3t())t[e.cq().toString()]=e.$pt();return t}Lpt(t){for(const[e,s]of Object.entries(t)){const i=parseInt(e,10),r=this.E3t(i);r&&r.Wpt(s)}}Gpt(){const t={};for(const[e,s]of this.pdt){const i=s.v8();i&&(t[e.toString()]=i)}return t}Npt(t){const e=new Map;for(const[s,i]of Object.entries(t))e.set(parseInt(s,10),i);for(const[r,n]of this.pdt)n.x8(e.get(r)||null)}Ppt(){const t={};for(const[e,s]of this.mdt){const i=s.v8();i&&(t[e.toString()]=i)}return t}Fpt(t){const e=new Map;for(const[s,i]of Object.entries(t))e.set(parseInt(s,10),i);for(const[r,n]of this.mdt)n.x8(e.get(r)||null)}Opt(){const t={};for(const[e,s]of this.gdt)s.Upt()||!s.UY()&&!s.S_()||(t[e.toString()]=s.Fit());return t}kpt(t){for(const[e,s]of Object.entries(t)){const i=parseInt(e,10),r=this.u3t(i);r&&r.yrt(s)}}Dpt(){return this.Gdt.filter(t=>!t.Vpt()).map(t=>t.v8())}Bpt(t){this.D7();for(const e of t){const s=C33.spt.Hpt(this,e);s&&this.Gdt.push(s)}}jpt(){return[...this.gf.TL().yJ()].map(t=>t.Mz()).filter(t=>t).map(t=>t.Xpt())}Ypt(t){for(;t;){const e=t.h3t();if(e instanceof C33.qpt)return e;t=e}return null}Ndt(t,e){Array.isArray(e)||(e=[]);const s=this.RD(t.toLowerCase());if(!s)return null;if(!s.lu())return s.MD();const i=s.Kpt();if(e.length<i.length)for(e=e.slice(0);e.push(i[e.length].Zdt()),e.length<i.length;);const r=s.vD();return r.OD(r.xD(),!1,s.LD(),s.MD(),...e)}}}{const C33=self.Fe;C33.Fdt=class extends C33.pn{constructor(t,e){super(),this.u0t=t,this.gf=t.hN(),this.Tn=e[0],this.zpt=[],this.Jpt=new Map,this.Zpt=new Map,this.Qpt=new Map,this.tmt=!1,this.emt=[],this.smt=[],this.imt=new Set;for(const s of e[1])this.rmt(s,null,this.zpt);this.nmt=this.gf.tJ()?{type:"sheet",name:this.Tn,hmt:0,children:[]}:null}gn(){this.u0t=null,this.gf=null}rmt(t,e,s){switch(t[0]){case 0:case 3:this.omt(t,e,s);break;case 1:this.amt(t,e,s);break;case 2:this.lmt(t,e,s);break;case 4:this.cmt(t,e);break;case 5:this.umt(t,e,s);break;case 6:this.fmt(t,e);break;default:throw new Error("invalid event type")}}omt(t,e,s){const i=C33.dmt.CE(this,e,t);if(i.l0t()){s.push(i);const r=i.pmt();for(let t=0,e=r.length;t<e;++t)r[t].mmt()&&this.Cmt(i,t)}else i.mmt()?this.Cmt(i,0):s.push(i)}cmt(t,e){const s=C33.qpt.gmt(this,e,t);this.u0t.Xdt(s)}fmt(t,e){const s=C33.qpt.Smt(this,e,t);this.u0t.Xdt(s)}amt(t,e,s){const i=C33.ymt.CE(this,e,t);s.push(i)}lmt(t,e,s){const i=C33.Tmt.CE(this,e,t);s.push(i)}umt(t,e,s){const i=C33._mt.CE(this,e,t);s.push(i)}Cmt(r,n){r.l0t()||this.u0t.kdt(r);const h=r.e3t(n),o=h.Emt(),a=h.YB();if(h.Amt()){let t=this.Zpt.get(a),e=(t||(t=new Map,this.Zpt.set(a,t)),h.Imt().toLowerCase()),s=t.get(o),i=(s||(s=new Map,t.set(o,s)),s.get(e));i||(i=[],s.set(e,i)),i.push([r,n])}else{let t=this.Jpt.get(a),e=(t||(t={wmt:new Map,Rmt:new Map},this.Jpt.set(a,t)),h.V5()),s,i=(e?(s=t.Rmt.get(e))||(s=new Map,t.Rmt.set(e,s)):s=t.wmt,s.get(o));i||(i=[],s.set(o,i)),i.push([r,n])}}Bdt(){const s=this.zpt;for(let t=0,e=s.length;t<e;++t){const i=t<e-1&&s[t+1]instanceof C33.dmt&&s[t+1].Mmt();s[t].Bdt(i)}}bmt(t){this.emt.push(t)}e7(){C33.Vh(this.smt),this.vmt(this),this.imt.clear()}vmt(t){const e=t.smt,s=t.imt;for(const i of this.emt){const r=i.xmt();i.Gmt()&&t!==r&&!s.has(r)&&(s.add(r),r.vmt(t),e.push(r))}}k3t(){return this.smt}wD(){return this.u0t}hN(){return this.gf}lf(){return this.Tn}Pmt(t,e){this.Qpt.set(e,t)}Omt(t){return this.Qpt.get(t)||null}b3t(){this.tmt=!1}Ww(){if(!this.tmt){const t=this.gf,e=t.Dmt(),s=e?performance.now():0,i=(this.tmt=!0,this.wD()),r=i.Qdt();for(const n of this.zpt)n.Ww(r),i.J3t(n.QV()),i.mpt(),t.ck();r.g0(null),e&&(this.nmt.hmt+=performance.now()-s)}}*L3t(){if(!this.tmt){this.tmt=!0;const t=this.gf,e=this.wD(),s=e.Qdt();for(const i of this.zpt)yield*i.L3t(s),e.J3t(i.QV()),e.mpt(),t.ck();s.g0(null)}}N3t(i,r,n){if(!r)return this.Lmt(i,r,null,null);{let t=r.YB(),e=!1,s=this.Lmt(i,r,t,n);e=e||s;for(const h of t.C3t())s=this.Lmt(i,r,h,n),e=e||s}}Lmt(t,e,s,i){const r=this.Jpt.get(s);if(!r)return!1;const n=i?r.Rmt.get(i):r.wmt;if(!n)return!1;const h=n.get(t);if(!h)return!1;let o=!1;for(const[a,l]of h){const c=this.Nmt(e,a,l);o=o||c}return o}*B3t(i,r,n){if(!r)return yield*this.Fmt(i,r,null,null);{let t=r.YB(),e=!1,s=yield*this.Fmt(i,r,t,n);e=e||s;for(const h of t.C3t())s=yield*this.Fmt(i,r,h,n),e=e||s}}*Fmt(t,e,s,i){const r=this.Jpt.get(s);if(!r)return!1;const n=i?r.Rmt.get(i):r.wmt;if(!n)return!1;const h=n.get(t);if(!h)return!1;let o=!1;for(const[a,l]of h){let t;t=a.kmt()?this.Nmt(e,a,l):yield*this.Bmt(e,a,l),o=o||t}return o}H3t(t,e,s){const i=e.YB(),r=this.Zpt.get(i);if(!r)return!1;const n=r.get(t);if(!n)return!1;const h=n.get(s);if(!h)return!1;let o=!1;for(let t=0,e=h.length;t<e;++t){const a=h[t],l=this.Nmt(null,a[0],a[1]);o=o||l}return o}*j3t(t,e,s){const i=e.YB(),r=this.Zpt.get(i);if(!r)return!1;const n=r.get(t);if(!n)return!1;const h=n.get(s);if(!h)return!1;let o=!1;for(let r=0,t=h.length;r<t;++r){let t=h[r],e=t[0],s=t[1],i;i=e.kmt()?this.Nmt(null,e,s):yield*this.Bmt(null,e,s),o=o||i}return o}Nmt(t,e,s){let i=this.gf,r=this.u0t,n=r.GD(),h=r.kD(),o=r.X3t(),a=!1;n&&r.Q3t(n.xD()),r.Q3t(e.xD());const l=1<o,c=(l&&r.r3t().eH(),h.eH(e));if(t){const f=e.pmt()[s].YB(),d=f.ZF();d.s0t(t),t.n$()&&t.$mt()}let u=!0;if(e.N4()){const p=e.Wmt();for(let t=0,e=p.length;t<e;++t)if(!p[t].Umt(c)){u=!1;break}}return u&&(e.l0t()?e.Vmt(c,s):e.Ww(c),a=c.L0t()),h.fH(),l&&r.r3t().fH(),r.aH(e.xD()),n&&r.aH(n.xD()),n||1!==o||(r.mpt(),r.e$())||i.ck(),a}*Bmt(t,e,s){let i=this.gf,r=this.u0t,n=r.GD(),h=r.kD(),o=r.X3t(),a=!1;n&&r.Q3t(n.xD()),r.Q3t(e.xD());const l=1<o,c=(l&&r.r3t().eH(),h.eH(e));if(t){const f=e.pmt()[s].YB(),d=f.ZF();d.s0t(t),t.n$()&&t.$mt()}let u=!0;if(e.N4()){const p=e.Wmt();for(let t=0,e=p.length;t<e;++t)if(!(yield*p[t].Hmt(c))){u=!1;break}}return u&&(e.l0t()?yield*e.jmt(c,s):yield*e.L3t(c),a=c.L0t()),h.fH(),l&&r.r3t().fH(),r.aH(e.xD()),n&&r.aH(n.xD()),n||1!==o||(r.mpt(),r.e$())||i.ck(),a}Xpt(){return this.nmt}}}{let NoActions2=function(t,e){return!0};NoActions=NoActions2;const C33=self.Fe,EMPTY_ARRAY=[];function*DebugNoActions(t,e){return!0}C33.dmt=class extends C33.pn{constructor(t,e,s){super(),this.H8=t,this.gf=t.hN(),this.Xmt=e,this.Ymt=null,this.Uft=this.gf.wD().kD(),this.qmt=[],this.Kmt=[],this.zmt=!1,this.Jmt=!1,this.Zmt=!1,this.Qmt=!1,this.tCt=!!s[2],this.eCt=!1,this.sCt=null,this.iCt=[],this.Qrt=[],this.rCt=[],this.nCt=NoActions2,this.hCt=DebugNoActions,this.oCt=!1,this.aCt=!1,this.lCt="",this.cCt=!1,this.uCt=null,this.nmt=null,this.x6=s[4],this.fCt=s[5],this.H8.Pmt(this,this.fCt),this.dCt=this.gf.tJ()?{pCt:s[3][0],mCt:s[3][1],CCt:!1,gCt:!1,SCt:!1,yCt:!1}:null,this.wD().Vdt(this),3===s[0]&&this.TCt(s[1]);let i=0;for(const r of s[6]){const n=C33._Ct.CE(this,r,i++);this.iCt.push(n),this.ECt(n.YB())}i=0;for(const h of s[7]){const o=C33.ACt.CE(this,h,i++);this.Qrt.push(o)}if(9===s.length){const a=s[8];for(const l of a)this.H8.rmt(l,this,this.rCt)}this.iCt.length&&(this.eCt=null===this.iCt[0].YB()&&this.iCt[0].Emt()===C33.E7._7.T7.ICt),0===this.iCt.length&&(this.iCt=EMPTY_ARRAY),0===this.Qrt.length&&(this.Qrt=EMPTY_ARRAY),0===this.rCt.length&&(this.rCt=EMPTY_ARRAY)}static CE(t,e,s){return C33.Cn(C33.dmt,t,e,s)}TCt(t){this.oCt=!0,this.aCt=!!t[0],this.cCt=this.aCt,this.lCt=t[1].toLowerCase(),this.uCt=[],this.wD().Wdt(this),this.gf.tJ()&&(this.nmt={type:"group",name:t[1],hmt:0,children:[]})}wCt(t){this.uCt.push(t)}RCt(t,e){for(const s of t.$z().R7())e.includes(s)||e.push(s)}MCt(t,e){if(t)if(e.includes(t)||e.push(t),t.sq())for(const s of t.bCt())s.n$()&&this.RCt(s,e);else t.n$()&&this.RCt(t,e)}ECt(t){this.MCt(t,this.qmt)}vCt(t){this.MCt(t,this.Kmt)}xCt(){this.qmt=this.gf.eq()}Bdt(t){this.Qmt=!!t,this.GCt(),this.PCt();for(const e of this.iCt)e.Bdt();if(0<this.Qrt.length){let t=!1;for(const i of this.Qrt)i.Bdt(),i.OCt()&&(t=!0);t?(this.nCt=this.DCt,this.hCt=this.LCt):(this.nCt=this.NCt,this.hCt=this.FCt)}const s=this.rCt;for(let t=0,e=s.length;t<e;++t){const r=t<e-1&&s[t+1]instanceof C33.dmt&&s[t+1].Mmt();s[t].Bdt(r)}this.dCt&&this.kCt(),this.nmt&&this.BCt().Xpt().children.push(this.nmt)}Xpt(){return this.nmt}BCt(){let t=this.N4();for(;t;){if(t.A3t())return t;t=t.N4()}return this.H8}kCt(){const t=this.dCt;t.CCt=this.iCt.every(t=>t.kmt()),t.gCt=this.Qrt.every(t=>t.kmt()),t.SCt=this.rCt.every(t=>t.kmt()),t.yCt=t.CCt&&t.gCt&&t.SCt}$Ct(){let t=this;for(;t.kCt(),t=t.N4(););}GCt(){if(this.A3t()){let t=this.N4();for(this.Zmt=!0;t;){if(!t.A3t()){this.Zmt=!1;break}t=t.N4()}}}WCt(){const t=this.gf.eq();if(this.qmt===t)this.Kmt=t;else{this.Kmt=C33.ro(this.qmt);let t=this.N4();for(;t;){for(const s of t.qmt)this.vCt(s);t=t.N4()}const e=this.wD();this.qmt=e.zdt(this.qmt),this.Kmt=e.zdt(this.Kmt)}}PCt(){if(this.UCt()){this.sCt=[];let t=this.N4();for(;t;)this.sCt.push(t),t=t.N4();this.sCt.reverse()}}VCt(){this.Jmt=!0,this.Xmt&&this.Xmt.VCt()}V0t(){return this.Jmt}QV(){return this.qmt}xD(){return this.zmt||(this.zmt=!0,this.WCt()),this.Kmt}HCt(t){return this.qmt.includes(t)}Wmt(){return this.sCt}Mz(){return this.H8}wD(){return this.H8.wD()}hN(){return this.gf}N4(){return this.Xmt}jCt(t){this.Ymt=t}h3t(){return this.Ymt||this.Xmt}XCt(){return this.fCt}YCt(){return this.dCt&&this.dCt.mCt}qCt(){return this.YCt()&&this.dCt.pCt}KCt(t){this.dCt.pCt=!!t,this.$Ct()}A3t(){return this.oCt}zCt(){return this.Zmt}Mmt(){return this.eCt}JCt(){return this.Qmt}Udt(){return this.lCt}$pt(){return this.cCt}R3t(){this.Wpt(this.aCt)}Wpt(t){if(t=!!t,!this.oCt)throw new Error("not a group");if(this.cCt!==t){this.cCt=t;for(const e of this.uCt)e.ZCt();if(this.uCt.length){const s=this.gf.FL(),i=s.Mz();i&&i.e7()}}}cq(){return this.x6}l0t(){return this.tCt}mmt(){return this.iCt.length&&this.iCt[0].mmt()}QCt(){return this.Ymt&&this.Ymt instanceof C33.qpt}UCt(){return this.QCt()||this.iCt.some(t=>t.mmt())}pmt(){return this.iCt}H0t(){return this.iCt.length}e3t(t){if((t=Math.floor(t))<0||t>=this.iCt.length)throw new RangeError("invalid condition index");return this.iCt[t]}t1t(t){return this.e3t(t)}e1t(t){let e=t.qO();if(0!==e){--e;const s=t.s1t()?t.i1t():t.YB();for(;0<=e;--e){const i=this.iCt[e];if(s===i.YB()||i.s1t()&&i.i1t()===s)return!1}}return!0}r1t(){return this.Qrt}n1t(){return this.Qrt.length}i3t(t){if((t=Math.floor(t))<0||t>=this.Qrt.length)throw new RangeError("invalid action index");return this.Qrt[t]}h1t(e){e=Math.floor(e);const t=this.Qrt.find(t=>t.o1t()===e);if(t)return t;throw new RangeError("invalid action debug index")}a1t(t){return 0<=(t=Math.floor(t))&&t<this.Qrt.length}l1t(){return this.rCt}o3t(){return this.rCt.filter(t=>t instanceof C33.ymt)}Umt(s){s.v0t(this);let i=this.iCt,r=0===i.length;for(let t=0,e=i.length;t<e;++t){const n=i[t];if(s.G0t(t),n.sW())throw new Error("trigger cannot be used as sub-event to a loop");if(n.Ww())r=!0;else if(!this.tCt)return!1}return!this.tCt||r}Vmt(t,e){t.v0t(this),t.G0t(e),this.iCt[e].Ww()&&(this.nCt(t,0)&&this.c1t(t),t.D0t(!0))}*Hmt(s){s.v0t(this);let i=this.iCt,r=0===i.length;for(let t=0,e=i.length;t<e;++t){const n=i[t];if(s.G0t(t),n.sW())throw new Error("trigger cannot be used as sub-event to a loop");if(n.kmt()?n.Ww():yield*n.L3t())r=!0;else if(!this.tCt)return!1}return!this.tCt||r}*jmt(t,e){t.v0t(this),t.G0t(e);let s=this.iCt[e];if(s.kmt()?s.Ww():yield*s.L3t())(this.u1t()?this.nCt(t,0):yield*this.hCt(t,0))&&(this.f1t()?this.c1t():yield*this.d1t()),t.D0t(!0)}Ww(t){t.v0t(this),this.eCt||t.N0t(!1),this.tCt?this.p1t(t):this.m1t(t)}*L3t(t){(this.qCt()||this.gf.C1t())&&(yield this),t.v0t(this),this.eCt||t.N0t(!1),this.tCt?yield*this.g1t(t):yield*this.S1t(t)}p1t(s){let i=this.iCt,r=0===i.length;for(let t=0,e=i.length;t<e;++t){const n=i[t];if(!n.mmt()){s.G0t(t);const h=n.Ww();r=r||h}}s.D0t(r),r&&(this.nCt(s,0)&&this.c1t(s),this.Qmt)&&s.N0t(!0)}*g1t(s){let i=this.iCt,r=0===i.length;for(let e=0,t=i.length;e<t;++e){const n=i[e];if(!n.mmt()){s.G0t(e);let t;t=n.kmt()?n.Ww():yield*n.L3t(),r=r||t}}if(s.D0t(r),r)(this.u1t()?this.nCt(s,0):yield*this.hCt(s,0))&&(this.f1t()?this.c1t():yield*this.d1t()),this.Qmt&&s.N0t(!0)}m1t(s){const i=this.iCt;for(let t=0,e=i.length;t<e;++t){const r=i[t],n=(s.G0t(t),r.Ww());if(!n)return void s.D0t(!1)}s.D0t(!0),this.nCt(s,0)&&this.c1t(s),s.L0t()&&this.Qmt&&s.N0t(!0)}*S1t(s){const i=this.iCt;for(let t=0,e=i.length;t<e;++t){const r=i[t];s.G0t(t);if(!(r.kmt()?r.Ww():yield*r.L3t()))return void s.D0t(!1)}s.D0t(!0);(this.u1t()?this.nCt(s,0):yield*this.hCt(s,0))&&(this.f1t()?this.c1t():yield*this.d1t()),s.L0t()&&this.Qmt&&s.N0t(!0)}NCt(s,i){const r=this.Qrt;for(let t=i,e=r.length;t<e;++t){const n=r[t];s.O0t(t),n.Ww()}return!0}*FCt(s,i){const r=this.Qrt;for(let t=i,e=r.length;t<e;++t){const n=r[t];s.O0t(t),n.kmt()?n.Ww():yield*n.L3t()}return!0}DCt(s,i){const r=this.wD(),n=this.Qrt;for(let t=i,e=n.length;t<e;++t){const h=n[t],o=(s.O0t(t),h.Ww());if(h.y1t()&&!0===o)return!1;h.T1t()&&o instanceof Promise&&r.dpt(o)}return!0}*LCt(s,i){const r=this.wD(),n=this.Qrt;for(let e=i,t=n.length;e<t;++e){const h=n[e];s.O0t(e);let t;if(t=h.kmt()?h.Ww():yield*h.L3t(),h.y1t()&&!0===t)return!1;h.T1t()&&t instanceof Promise&&r.dpt(t)}return!0}_1t(t){this.nCt(t,t.P0t())&&this.c1t()}*E1t(t){(yield*this.hCt(t,t.P0t()))&&(yield*this.d1t())}c1t(){if(this.rCt.length){const t=this.A3t()&&this.gf.Dmt(),e=t?performance.now():0,s=this.Uft,i=s.eH(this);this.Jmt?this.A1t(i):this.I1t(i),s.fH(),t&&(this.nmt.hmt+=performance.now()-e)}}A1t(i){const r=this.oCt,n=this.Zmt,h=this.wD(),o=this.rCt;for(let t=0,e=o.length,s=e-1;t<e;++t){const a=o[t],l=a.QV(),c=!n||!r&&t<s;c&&h.hH(l),a.Ww(i),c?h.aH(l):h.J3t(l)}}I1t(s){const i=this.rCt;for(let t=0,e=i.length;t<e;++t)i[t].Ww(s)}*d1t(){if(this.rCt.length){const t=this.Uft,e=t.eH(this);this.Jmt?yield*this.w1t(e):yield*this.R1t(e),t.fH()}}*w1t(i){const r=this.oCt,n=this.Zmt,h=this.wD(),o=this.rCt;for(let t=0,e=o.length,s=e-1;t<e;++t){const a=o[t],l=a.QV(),c=!n||!r&&t<s;c&&h.hH(l),yield*a.L3t(i),c?h.aH(l):h.J3t(l)}}*R1t(s){const i=this.rCt;for(let t=0,e=i.length;t<e;++t)yield*i[t].L3t(s)}oH(s,i){i.b0t();const r=this.iCt;if(!this.l0t())for(let t=s.x0t()+1,e=r.length;t<e;++t){const n=r[t],h=(i.G0t(t),n.Ww());if(!h)return!1}return this.nCt(i,0)&&this.c1t(i),!0}*M1t(s,i){i.b0t();const r=this.iCt;if(!this.l0t())for(let t=s.x0t()+1,e=r.length;t<e;++t){const n=r[t];i.G0t(t);if(!(n.kmt()?n.Ww():yield*n.L3t()))return!1}return(this.u1t()?this.nCt(i,0):yield*this.hCt(i,0))&&(this.f1t()?this.c1t():yield*this.d1t()),!0}kmt(){return!this.qCt()&&!this.gf.C1t()&&this.dCt.yCt}u1t(){return!this.gf.C1t()&&this.dCt.gCt}f1t(){return!this.gf.C1t()&&this.dCt.SCt}b1t(s){if(this.N4()){const i=this.Wmt();for(let t=0,e=i.length;t<e;++t)if(!i[t].Umt(s))return!1}return!0}*v1t(s){if(this.N4()){const i=this.Wmt();for(let t=0,e=i.length;t<e;++t)if(!(yield*i[t].Hmt(s)))return!1}return!0}x1t(t,e,s){if(0<e.length)if(s){const i=e.map(t=>t.rs(0));t.r3t().eH(),this.Ymt.G1t(i)}else this.Ymt.P1t(e);else s&&t.r3t().eH()}O1t(t,e,s,i){let r,n,h=0<t.length,o=null,a=this.gf,l=this.Uft,c=a.wD(),u=this.Ymt,f=u.T1t(),d=c.q3t(),p=1<d;if(this.x1t(c,e,p),h&&(s?c.hH(t):c.Q3t(t)),null!==i){if(i.D1t){const C=s?i.D1t.ZF():i.D1t.Z3t().kft(),g=i.L1t.ZF();g.i0t(C.JF()),g.o0t(),s||i.L1t.N1t()}else if(i.F1t){const S=i.F1t.ZF();S.i0t(i.k1t),S.o0t()}i.B1t&&(o=c.tpt(t))}const m=l.eH(this);return s&&m.j0t(t),this.b1t(m)&&(m.v0t(this),f&&([n,r]=u.$1t()),this.m1t(m),f)&&u.W1t(n),l.fH(),p&&c.r3t().fH(),null!==o&&c.aH(o),h&&c.aH(t),c.K3t(),f||c.Cpt(),r}*U1t(t,e,s,i){let r,n,h=((this.qCt()||this.gf.C1t())&&(yield this),0<t.length),o=null,a=this.gf,l=this.Uft,c=a.wD(),u=this.Ymt,f=u.T1t(),d=c.q3t(),p=1<d;if(this.x1t(c,e,p),h&&(s?c.hH(t):c.Q3t(t)),null!==i){if(i.D1t){const C=s?i.D1t.ZF():i.D1t.Z3t().kft(),g=i.L1t.ZF();g.i0t(C.JF()),g.o0t(),s||i.L1t.N1t()}else if(i.F1t){const S=i.F1t.ZF();S.i0t(i.k1t),S.o0t()}i.B1t&&(o=c.tpt(t))}const m=l.eH(this);return s&&m.j0t(t),(yield*this.v1t(m))&&(m.v0t(this),f&&([n,r]=u.$1t()),yield*this.S1t(m),f)&&u.W1t(n),l.fH(),p&&c.r3t().fH(),null!==o&&c.aH(o),h&&c.aH(t),c.K3t(),f||c.Cpt(),r}V1t(t,e){const s=this.xD(),i=0<s.length,r=this.gf,n=this.Uft,h=r.wD(),o=h.q3t(),a=1<o,l=(a&&h.r3t().eH(),this.Ymt.G1t(t),i&&(e?h.hH(s):h.Q3t(s)),n.eH(this));this.b1t(l)&&(l.v0t(this),this.m1t(l)),n.fH(),a&&h.r3t().fH(),i&&h.aH(s),h.K3t(),h.Cpt()}*H1t(t,e){(this.qCt()||this.gf.C1t())&&(yield this);const s=this.xD(),i=0<s.length,r=this.gf,n=this.Uft,h=r.wD(),o=h.q3t(),a=1<o,l=(a&&h.r3t().eH(),this.Ymt.G1t(t),i&&(e?h.hH(s):h.Q3t(s)),n.eH(this));(yield*this.v1t(l))&&(l.v0t(this),yield*this.S1t(l)),n.fH(),a&&h.r3t().fH(),i&&h.aH(s),h.K3t(),h.Cpt()}OD(t,e,s,i,...r){let n,h,o=0<t.length,a=this.gf,l=this.Uft,c=a.wD(),u=this.Ymt,f=u.T1t(),d=c.q3t(),p=1<d,m=(p&&c.r3t().eH(),0<r.length&&this.Ymt.G1t(r),o&&(e?c.hH(t):c.Q3t(t)),l.eH(this));return m.$0t(s,i),l.C0t(m),a.rH(!1),this.b1t(m)&&(m.v0t(this),f&&([h,n]=u.$1t()),this.m1t(m),f)&&u.W1t(h),a.rH(!0),l.fH(),l.g0t(),p&&c.r3t().fH(),o&&c.aH(t),c.K3t(),f||c.Cpt(),n||m.W0t()}}}{let C33=self.Fe,EMPTY_SOL_MODIFIERS=[],hadUserScriptException=!1;C33._mt=class extends C33.pn{constructor(t,e,s){super();const i=t.hN(),r=t.wD(),n=(this.H8=t,this.u0t=r,this.gf=t.hN(),this.Xmt=e,i.j1t(s[1]));this.X1t=n,this.fCt=s[2],this.H8.Pmt(this,this.fCt),this.dCt=i.tJ()?{pCt:s[3][0],mCt:s[3][1]}:null}static CE(t,e,s){return C33.Cn(C33._mt,t,e,s)}Bdt(){const t=this.X1t,e=this.gf.wD().a3t(this);this.X1t=t.bind(null,this.gf.dF(),e)}N4(){return this.Xmt}h3t(){return this.Xmt}Mz(){return this.H8}XCt(){return this.fCt}YCt(){return this.dCt&&this.dCt.mCt}qCt(){return this.YCt()&&this.dCt.pCt}KCt(t){this.dCt.pCt=!!t}Mmt(){return!1}QV(){return EMPTY_SOL_MODIFIERS}xD(){return this.Xmt?this.Xmt.xD():EMPTY_SOL_MODIFIERS}Ww(t){t.v0t(this),this.u0t.dpt(this.Y1t())}async Y1t(){try{await this.X1t()}catch(t){console.error(`Unhandled exception running script %c${this.Mz().lf()}, event ${this.XCt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),hadUserScriptException||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),hadUserScriptException=!0)}}*L3t(t){t.v0t(this),(this.qCt()||this.gf.C1t())&&(yield this),this.Ww(t)}kmt(){return!this.qCt()&&!this.gf.C1t()}static q1t(){return hadUserScriptException}static K1t(){hadUserScriptException=!0}}}{const C33=self.Fe,assert=self.assert;C33.qpt=class extends C33.pn{constructor(t,e,s){super(),this.H8=t,this.gf=t.hN(),this.Xmt=e,this.z1t=0,this.J1t="",this.Z1t=0,this.Q1t=[],this.tgt=!0,this.egt="",this.Dft=null,this.sgt=!1,this.igt=[],this.rgt=!1,this.ngt=!1,this.hgt=0,this.ogt=-1,this.agt=new Map,this.lgt=C33.dmt.CE(t,e,s),this.lgt.jCt(this)}cgt(t){this.z1t=0,this.J1t=t[0],this.Z1t=t[1],this.Q1t=t[2].map(t=>C33.ymt.CE(this.H8,this,t)),this.tgt=t[3],this.ngt=t[4],this.rgt=t[5]}ugt(t){this.z1t=1,this.egt=t[1],this.Dft=this.gf.PY(t[2]),this.lgt.ECt(this.Dft),this.J1t=this.Dft.lf()+"."+this.egt,this.Z1t=t[3],this.Q1t=t[4].map(t=>C33.ymt.CE(this.H8,this,t)),this.tgt=t[5],this.ngt=t[6],this.rgt=t[7],this.Dft.fgt(this)}static gmt(t,e,s){const i=C33.Cn(C33.qpt,t,e,s),r=s[1];return i.cgt(r),i}static Smt(t,e,s){const i=C33.Cn(C33.qpt,t,e,s),r=s[1];return i.ugt(r),i}$dt(){if(this.Dft&&this.Dft.sq())for(const t of this.Dft.bCt())if(t.dgt(this.egt)){this.sgt=!0;break}}Bdt(){for(const t of this.Q1t)t.Bdt();this.lgt.Bdt(!1)}Ydt(){return this.z1t}o3t(){return this.Q1t}Kpt(){return this.Q1t}bD(){return this.Q1t.length}pgt(t){this.igt.push(t)}mgt(){return this.igt}P1t(s){const i=this.Q1t;for(let t=0,e=i.length;t<e;++t)i[t].yrt(s[t].rs(0))}G1t(s){const i=this.Q1t;for(let t=0,e=i.length;t<e;++t)i[t].yrt(s[t])}Cgt(){return this.Q1t.map(t=>t.Fit())}N4(){return this.Xmt}h3t(){return this.Xmt}qdt(){return this.J1t}ggt(){return this.egt}Sgt(){return this.sgt}LD(){return this.Z1t}YB(){return this.Dft}lu(){return this.tgt}MD(){switch(this.Z1t){case 0:return null;case 2:return"";default:return 0}}vD(){return this.lgt}DD(){return this.rgt}T1t(){return this.ngt}$1t(){const t=this.hgt++;this.ogt=t;let e,s=new Promise(t=>e=t);return this.agt.set(t,{resolve:e,ygt:0}),[t,s]}W1t(t){const e=this.agt.get(t);0===e.ygt&&(e.resolve(),this.agt.delete(t)),this.ogt=-1}Tgt(){const t=this.agt.get(this.ogt);return t.ygt++,this.ogt}_gt(t){this.ogt=t;const e=this.agt.get(t);e.ygt--}Egt(t,e){const s=new Map,i=[];for(const r of this.Dft.ZF().JF()){const n=r.YB();if(n.dgt(this.egt)){const h=s.get(n);Array.isArray(h)?h.push(r):s.set(n,[r])}else i.push(r)}if(0<i.length&&this.lgt.O1t(t,e,this.rgt,{F1t:this.Dft,k1t:i}),0<s.size)for(const[o,a]of s){const l=o.Agt(this.egt).vD(),c=[...new Set([...t,...l.QV()])];l.O1t(c,e,this.rgt,{F1t:o,k1t:a})}}*Igt(t,e){const s=new Map,i=[];for(const r of this.Dft.ZF().JF()){const n=r.YB();if(n.dgt(this.egt)){const h=s.get(n);Array.isArray(h)?h.push(r):s.set(n,[r])}else i.push(r)}if(0<i.length&&(yield*this.lgt.U1t(t,e,this.rgt,{F1t:this.Dft,k1t:i})),0<s.size)for(const[o,a]of s){const l=o.Agt(this.egt).vD(),c=[...new Set([...t,...l.QV()])];yield*l.U1t(c,e,this.rgt,{F1t:o,k1t:a})}}}}{const C33=self.Fe,EMPTY_SOL_MODIFIERS=[];C33.ymt=class extends C33.pn{constructor(t,e,s){super();const i=t.wD();this.H8=t,this.u0t=i,this.gf=t.hN(),this.Xmt=e,this.Idt=i.r3t(),this.Tn=s[1],this.wf=s[2],this.wgt=s[3],this.HT=!!s[4],this.Rgt=!!s[5],this.Mgt=e instanceof C33.qpt,this.x6=s[6],this.bgt=this.gf.l3t(s[8]),this.vgt=t=>this.yrt(t),this.xgt=()=>this.Fit(),this.Ggt=!this.Xmt||this.HT||this.Rgt,this.Krt=this.wgt,this.Pgt=-1,this.Ogt()&&(this.Krt=this.Krt?1:0),!this.Dgt()||this.S_()||this.Upt()||(this.Pgt=i.Jdt(this)),i.Kdt(this)}static CE(t,e,s){return C33.Cn(C33.ymt,t,e,s)}Bdt(){if(this.Dgt()&&!this.S_()&&!this.Upt()&&!this.Lgt()){const t=this.u0t.Ypt(this);t&&t.pgt(this)}}lf(){return this.Tn}l3t(){return this.bgt}N4(){return this.Xmt}h3t(){return this.N4()}UY(){return!this.N4()}Dgt(){return!this.UY()}Lgt(){return this.Mgt}S_(){return this.HT}Upt(){return this.Rgt}mi(){return 0===this.wf}wi(){return 1===this.wf}Ogt(){return 2===this.wf}Mmt(){return!1}cq(){return this.x6}Zdt(){return this.wgt}QV(){return EMPTY_SOL_MODIFIERS}Ww(t){!this.Dgt()||this.S_()||this.Upt()||this.yrt(this.Zdt())}kmt(){return!0}*L3t(t){this.Ww(t)}yrt(t){this.mi()?"number"!=typeof t&&(t=parseFloat(t)):this.wi()?"string"!=typeof t&&(t=t.toString()):this.Ogt()&&(t=t?1:0),this.Ggt?this.Krt=t:this.Idt.z0t()[this.Pgt]=t}Fit(){return this.Ggt?this.Krt:this.Idt.z0t()[this.Pgt]}Ngt(){let t=this.Fit();return this.Ogt()?!!t:t}T3t(){this.Krt=this.wgt}c3t(){return{configurable:!1,enumerable:!0,get:this.xgt,set:this.vgt}}}}{const C33=self.Fe,assert=self.assert,EMPTY_SOL_MODIFIERS=[];C33.Tmt=class extends C33.pn{constructor(t,e,s){super();const i=t.wD();this.H8=t,this.u0t=i,this.gf=t.hN(),this.Xmt=e,this.Fgt=null,this.kgt=s[1],this.C0=!0}static CE(t,e,s){return C33.Cn(C33.Tmt,t,e,s)}Bdt(){this.Fgt=this.u0t.t7(this.kgt),this.H8.bmt(this);let t=this.N4();for(;t;)t instanceof C33.dmt&&t.A3t()&&t.wCt(this),t=t.N4();this.ZCt(),this.gf.tJ()&&this.H8.Xpt().children.push(this.Fgt.Xpt())}N4(){return this.Xmt}QV(){return EMPTY_SOL_MODIFIERS}xmt(){return this.Fgt}Ww(t){const e=!!this.N4(),s=this.gf.eq();e&&this.u0t.Q3t(s),this.Fgt.Ww(),e&&this.u0t.aH(s)}*L3t(t){const e=!!this.N4(),s=this.gf.eq();e&&this.u0t.Q3t(s),yield*this.Fgt.L3t(),e&&this.u0t.aH(s)}kmt(){return!1}Gmt(){return this.C0}ZCt(){let t=this.N4();for(;t;){if(t instanceof C33.dmt&&t.A3t()&&!t.$pt())return void(this.C0=!1);t=t.N4()}this.C0=!0}}}{let WrapIndex2=function(t,e){return e<=t?t%e:(t<0&&(t<=-e&&(t%=e),t<0)&&(t+=e),t)};WrapIndex=WrapIndex2;const C33=self.Fe,assert=self.assert;C33.Bgt=class extends C33.pn{constructor(t){super(),this.rT=t,this.gf=t.hN()}Bdt(){}static $gt(t,e){const s=e[0],i=[BehaviorExpressionNode,ObjectExpressionNode,InstVarExpressionNode,EventVarExpNode,SystemExpressionExpNode,CallFunctionExpressionExpNode];return C33.Cn(i[s],t,e)}};class SystemExpressionExpNode extends C33.Bgt{constructor(t,e){super(t),this.Wgt=this.gf.Ugt(),this.X1t=this.gf.j1t(e[1]),this.X1t!==C33.E7._7.fnt.random&&this.X1t!==C33.E7._7.fnt.Vgt||this.rT.Hgt()}jgt(){return this.Wgt.Xgt(this.X1t,this.Wgt)}}class CallFunctionExpressionExpNode extends C33.Bgt{constructor(t,e){super(t),this.Ygt=null,this.J1t=e[1],this.rT.Hgt()}Bdt(){const t=this.gf.wD(),e=(this.Ygt=t.RD(this.J1t),this.J1t=null,this.rT.vD()),s=this.Ygt.vD();this.qgt=[...new Set([...e.xD(),...s.xD()])],this.qgt=t.zdt(this.qgt)}jgt(){const t=this.Ygt;if(t.lu()){const e=t.vD();return C33.dmt.prototype.OD.bind(e,this.qgt,t.DD(),t.LD(),t.MD())}{const s=t.MD();return()=>s}}}class ObjectExpressionNode extends C33.Bgt{constructor(t,e){super(t),this.Dft=this.gf.PY(e[1]),this.X1t=this.gf.j1t(e[2]),this.Kgt=!!e[3],this.Uft=this.gf.wD().kD(),this.rT.zgt(this.Dft)}jgt(){return this.Dft.$F().Xgt(this.X1t,this.Dft.FF().P5())}Jgt(...t){const e=this.Dft,s=e.ZF().zft(),i=s.length;if(0===i)return this.Kgt?"":0;const r=WrapIndex2(this.rT.Zgt(),i);return this.Uft.tH().k0t(e),this.X1t.apply(s[r].P5(),t)}Qgt(t,...e){const s=this.Dft,i=s.JF(),r=i.length;if(0===r)return this.Kgt?"":0;const n=WrapIndex2(t,r);return this.Uft.tH().k0t(s),this.X1t.apply(i[n].P5(),e)}}class InstVarExpressionNode extends C33.Bgt{constructor(t,e){super(t),this.Dft=this.gf.PY(e[1]),this.t2t=e[3],this.Kgt=!!e[2],this.rT.zgt(this.Dft)}e2t(){const t=this.Dft.ZF().zft(),e=t.length;if(0===e)return this.Kgt?"":0;const s=WrapIndex2(this.rT.Zgt(),e);return t[s].s2t(this.t2t)}i2t(){const t=this.Dft,e=t.ZF().zft(),s=e.length;if(0===s)return this.Kgt?"":0;const i=WrapIndex2(this.rT.Zgt(),s),r=e[i],n=r.YB().r2t(t.n2t());return r.s2t(this.t2t+n)}h2t(t){const e=this.Dft,s=e.JF(),i=s.length;if(0===i)return this.Kgt?"":0;let r=WrapIndex2(t,i),n=s[r],h=0;return e.sq()&&(h=n.YB().r2t(e.n2t())),n.s2t(this.t2t+h)}}class BehaviorExpressionNode extends C33.Bgt{constructor(t,e){super(t),this.Dft=this.gf.PY(e[1]),this.o2t=this.Dft.Vrt(e[2]),this.a2t=this.Dft._st(e[2]),this.X1t=this.gf.j1t(e[3]),this.Kgt=!!e[4],this.Uft=this.gf.wD().kD(),this.rT.zgt(this.Dft)}l2t(...t){const e=this.Dft,s=e.ZF().zft(),i=s.length;if(0===i)return this.Kgt?"":0;let r=WrapIndex2(this.rT.Zgt(),i),n=(this.Uft.tH().k0t(e),s[r]),h=0;return e.sq()&&(h=n.YB().c2t(e.n2t())),this.X1t.apply(n.Urt()[this.a2t+h].P5(),t)}u2t(t,...e){const s=this.Dft,i=s.JF(),r=i.length;if(0===r)return this.Kgt?"":0;let n=WrapIndex2(t,r),h=(this.Uft.tH().k0t(s),i[n]),o=0;return s.sq()&&(o=h.YB().c2t(s.n2t())),this.X1t.apply(h.Urt()[this.a2t+o].P5(),e)}}class EventVarExpNode extends C33.Bgt{constructor(t,e){super(t),this.f2t=null,this.d2t=e[1]}Bdt(){this.f2t=this.gf.wD().u3t(this.d2t)}p2t(){return this.f2t}}}{let GetExpressionFunc2=function(t){const e=self.m2t[t];if(e)return e;throw new Error("invalid expression number")};GetExpressionFunc=GetExpressionFunc2;const C33=self.Fe,assert=self.assert;C33.C2t=class extends C33.pn{constructor(t,e,s){super(),this.rT=t,this.t1=s,this.wf=e,this.rs=null,this.g2t=!1,this.Rgt=!1}static CE(t,e,s){const i=e[0],r=[ExpressionParameter,StringExpressionParameter,FileParameter,ComboParameter,ObjectParameter,LayerExpressionParameter,LayoutParameter,ExpressionParameter,ComboParameter,ComboParameter,InstVarParameter,EventVarParameter,FileParameter,VariadicParameter,StringExpressionParameter,TimelineParameter,BooleanParameter,FunctionParameter,EaseParameter,TilemapBrushParameter,TemplateExpressionParameter,FlowchartParameter];return C33.Cn(r[i],t,i,s,e)}Bdt(){}Hgt(){this.g2t=!0}zgt(t){this.g2t||!t||t.$F().mF()||(this.g2t=!0)}S2t(){return this.g2t}qO(){return this.t1}hN(){return this.rT.hN()}vD(){return this.rT.vD()}Upt(){return this.Rgt}y2t(){return 4===this.wf}};class ExpressionParameter extends C33.C2t{constructor(t,e,s,i){super(t,e,s),this.T2t=0;const r=i[1];this._2t=r[0],this.E2t=[],this.A2t=null;for(let t=1,e=r.length;t<e;++t)this.E2t.push(C33.Bgt.$gt(this,r[t]));this.E2t.length?this.rs=this.I2t:(this.rs=GetExpressionFunc2(this._2t),this.Rgt=!0)}w2t(t){if(t<0||t>=this.E2t.length)throw new RangeError("invalid numbered node");return this.E2t[t]}Bdt(){for(const e of this.E2t)e.Bdt();const t=GetExpressionFunc2(this._2t);this.E2t.length?this.A2t=t(this):this.A2t=t}Zgt(){return this.T2t}I2t(t){return this.T2t=t,this.A2t()}}class StringExpressionParameter extends ExpressionParameter{constructor(t,e,s,i){super(t,e,s,i),this.rs=this.R2t,14===e&&(this.vD().xCt(),this.rT instanceof C33.ACt)&&this.vD().VCt()}R2t(t){this.T2t=t;const e=this.A2t();return"string"==typeof e?e:""}M2t(){return GetExpressionFunc2(this._2t)()}}class LayerExpressionParameter extends ExpressionParameter{constructor(t,e,s,i){super(t,e,s,i),2<=t.b2t()?this.rs=this.Rk:this.rs=this.$L,this.Rgt=!1}$L(t){this.T2t=t;const e=this.A2t(),s=this.hN().FL();return s.$L(e)}Rk(t){const e=this.$L(t);return e?e.Rk():null}}class ComboParameter extends C33.C2t{constructor(t,e,s,i){super(t,e,s),this.v2t=i[1],this.rs=this.x2t,this.Rgt=!0}x2t(){return this.v2t}}class BooleanParameter extends C33.C2t{constructor(t,e,s,i){super(t,e,s),this.G2t=i[1],this.rs=this.P2t,this.Rgt=!0}P2t(){return this.G2t}}class ObjectParameter extends C33.C2t{constructor(t,e,s,i){super(t,e,s),this.Dft=this.hN().PY(i[1]),2<=t.b2t()?this.rs=this.DF:this.rs=this.YB;const r=this.vD();r.ECt(this.Dft),this.rT instanceof C33.ACt?r.VCt():r.N4()&&r.N4().VCt(),this.Rgt=!0}YB(){return this.Dft}DF(){return this.Dft?this.Dft.DF():null}}class LayoutParameter extends C33.C2t{constructor(t,e,s,i){super(t,e,s),this.R6=this.hN().TL().pJ(i[1]),2<=t.b2t()?this.rs=this.SL:this.rs=this._L,this.Rgt=!0}_L(){return this.R6}SL(){return this.R6?this.R6.SL():null}}class TimelineParameter extends C33.C2t{constructor(t,e,s,i){super(t,e,s),this.gZ=this.hN().Ttt().I9(i[1]),2<=t.b2t()?this.rs=this.ket:this.rs=this.hst,this.Rgt=!0}hst(){return this.gZ}ket(){return this.gZ?this.gZ.ket():null}}class FileParameter extends C33.C2t{constructor(t,e,s,i){super(t,e,s),this.O2t=i[1],this.rs=this.D2t,this.Rgt=!0}D2t(){return this.O2t}}class InstVarParameter extends C33.C2t{constructor(t,e,s,i){super(t,e,s),this.L2t=i[1];const r=this.rT.YB();this.rT instanceof C33._Ct&&this.rT.S_()||!r||!r.sq()?(this.rs=this.N2t,this.Rgt=!0):(this.rs=this.F2t,this.Hgt())}N2t(){return this.L2t}F2t(t){t=t||0;let e=this.rT.YB(),s=e.ZF(),i=s.JF(),r=null;if(i.length)r=i[t%i.length].YB();else if(s.qft()){const n=s.Kft();r=n[t%n.length].YB()}else{if(!(0<e.ek()))return 0;{const h=e.JF();r=h[t%h.length].YB()}}return this.L2t+r.r2t(e.n2t())}}class EventVarParameter extends C33.C2t{constructor(t,e,s,i){super(t,e,s),this.d2t=i[1],this.f2t=null,2<=t.b2t()?this.rs=this.k2t:this.rs=this.B2t,this.Rgt=!0}Bdt(){this.f2t=this.hN().wD().u3t(this.d2t)}B2t(){return this.f2t}k2t(){return null}}class FunctionParameter extends C33.C2t{constructor(t,e,s,i){super(t,e,s),this.$2t=i[1],this.Ygt=null,2<=t.b2t()?this.rs=this.W2t:this.rs=this.U2t,this.Rgt=!0}Bdt(){this.Ygt=this.hN().wD().RD(this.$2t),this.$2t=null}U2t(){return this.Ygt}W2t(){return null}}class VariadicParameter extends C33.C2t{constructor(t,e,s,i){super(t,e,s),this.V2t=[],this.H2t=[],this.Rgt=!0;for(let t=1,e=i.length;t<e;++t){const r=C33.C2t.CE(this.rT,i[t],0);this.V2t.push(r),this.H2t.push(0),r.Upt()||(this.Rgt=!1)}this.rs=this.j2t}Bdt(){for(const t of this.V2t)t.Bdt()}j2t(){const s=this.V2t,i=this.H2t;for(let t=0,e=s.length;t<e;++t)i[t]=s[t].rs(0);return i}}class EaseParameter extends C33.C2t{constructor(t,e,s,i){super(t,e,s),this.X2t=i[1],this.rs=this.Srt,this.Rgt=!0}Srt(){return this.X2t}}class TilemapBrushParameter extends C33.C2t{constructor(t,e,s,i){super(t,e,s),this.Y2t=i[1],this.rs=this.q2t,this.Rgt=!0}q2t(){return this.Y2t}}class TemplateExpressionParameter extends ExpressionParameter{constructor(t,e,s,i){super(t,e,s,i),this.rs=this.l$,this.Rgt=!1}l$(){return this.A2t()}}class FlowchartParameter extends C33.C2t{constructor(t,e,s,i){super(t,e,s),this.yct=this.hN().Fct().dct(i[1]),this.rs=this.K2t,this.Rgt=!0}K2t(){return this.yct.lf()}}}{let EvalParams2=function(s,i){for(let t=0,e=s.length;t<e;++t)i[t]=s[t].rs(0)};EvalParams=EvalParams2;const C33=self.Fe,assert=self.assert,EMPTY_PARAMS_ARRAY=[],noop=function(){};C33._Ct=class extends C33.pn{constructor(t,s,e){if(super(),this.lgt=t,this.gf=t.hN(),this.t1=e,this.X1t=this.gf.j1t(s[1]),this.z2t=0<s[3],this.J2t=2===s[3],this.Z2t=!!s[4],this.Q2t=!!s[5],this.HT=!!s[6],this.x6=s[7],this.tSt=this.lgt.l0t(),this.Dft=null,this.o2t=null,this.a2t=-1,this.Wgt=null,this.Ww=noop,this.L3t=noop,this.Je=[],this.eSt=[],this.sSt=!1,this.iSt=null,this.rSt=null,this.dCt=this.gf.tJ()?{pCt:s[8][0],nSt:s[8][1]}:null,-1===s[0]?this.Wgt=this.gf.Ugt():(this.Dft=this.gf.PY(s[0]),s[2]&&(this.o2t=this.Dft.Vrt(s[2]),this.a2t=this.Dft._st(s[2])),this.lgt.N4()&&this.lgt.N4().VCt()),10===s.length){let e=s[9];for(let t of e)this.Je.push(C33.C2t.CE(this,t,this.Je.length)),this.eSt.push(0)}0===this.Je.length&&(this.Je=EMPTY_PARAMS_ARRAY,this.eSt=EMPTY_PARAMS_ARRAY),this.lgt.wD().Hdt(this)}static CE(t,e,s){return C33.Cn(C33._Ct,t,e,s)}Bdt(){for(const t of this.Je)t.Bdt(),t.S2t()&&(this.sSt=!0);this.J2t?(this.Ww=this.hSt,this.L3t=this.oSt):this.Wgt?(this.aSt(),this.L3t=this.lSt):this.Dft.$F().mF()?(this.cSt(),this.L3t=this.uSt):this.HT?(this.Ww=this.fSt,this.L3t=this.dSt):(this.Ww=this.pSt,this.L3t=this.mSt)}aSt(){const t=this.Wgt,e=this.Wgt;this.CSt(t,e,this.gSt)}cSt(){const t=this.Dft.$F(),e=this.Dft.FF().P5();this.CSt(t,e,this.SSt)}CSt(t,e,s){const i=this.X1t,r=this.Q2t,n=this.Je;if(0===n.length){const h=t.Xgt(i,e);r?this.Ww=function(){return C33.xor(h(),r)}:this.Ww=h}else if(1===n.length){const o=n[0];if(!r&&o.Upt())this.Ww=t.ySt(i,e,o.rs(0));else{const a=t.Xgt(i,e);this.Ww=function(){return C33.xor(a(o.rs(0)),r)}}}else if(2===n.length){const l=n[0],c=n[1];if(!r&&l.Upt()&&c.Upt())this.Ww=t.TSt(i,e,l.rs(0),c.rs(0));else{const u=t.Xgt(i,e);this.Ww=function(){return C33.xor(u(l.rs(0),c.rs(0)),r)}}}else if(3===n.length){const f=n[0],d=n[1],p=n[2];if(!r&&f.Upt()&&d.Upt()&&p.Upt())this.Ww=t._St(i,e,f.rs(0),d.rs(0),p.rs(0));else{const m=t.Xgt(i,e);this.Ww=function(){return C33.xor(m(f.rs(0),d.rs(0),p.rs(0)),r)}}}else this.Ww=s}cq(){return this.x6}Emt(){return this.X1t}YB(){return this.Dft}V5(){return this.o2t}ESt(){return this.o2t?this.o2t.B5():this.Dft?this.Dft.$F():null}b2t(){const t=this.ESt();return t?t.ASt():1}vD(){return this.lgt}hN(){return this.gf}qO(){return this.t1}o1t(){return this.qO()}mmt(){return this.z2t}Amt(){return this.J2t}ISt(){return this.Q2t}sW(){return this.Z2t}S_(){return this.HT}wSt(){return this.dCt.pCt}RSt(){return!!this.Wgt}s1t(){return this.RSt()||this.Dft.$F().mF()}i1t(){for(const t of this.Je)if(t.y2t())return t.YB();return null}MSt(t){this.dCt.pCt=!!t,this.lgt.$Ct()}bSt(){return this.dCt.nSt}kmt(){return!this.wSt()&&!this.gf.C1t()&&!this.bSt()}vSt(){return this.iSt||(this.iSt=new Map),this.iSt}xSt(){return this.rSt||(this.rSt=new Map),this.rSt}gSt(){const t=this.eSt;return EvalParams2(this.Je,t),C33.xor(this.X1t.apply(this.Wgt,t),this.Q2t)}*lSt(){if((this.wSt()||this.gf.C1t())&&(yield this),this.bSt()){const e=this.eSt;EvalParams2(this.Je,e);let t=this.X1t.apply(this.Wgt,e);return C33.Yo(t)&&(t=yield*t),C33.xor(t,this.Q2t)}return this.Ww()}SSt(){const t=this.eSt,e=(EvalParams2(this.Je,t),this.Dft.FF().P5());return C33.xor(this.X1t.apply(e,t),this.Q2t)}*uSt(){if((this.wSt()||this.gf.C1t())&&(yield this),this.bSt()){let t=this.eSt,e=(EvalParams2(this.Je,t),this.Dft.FF().P5()),s=this.X1t.apply(e,t);return C33.Yo(s)&&(s=yield*s),C33.xor(s,this.Q2t)}return this.Ww()}hSt(){return!0}*oSt(){return(this.wSt()||this.gf.C1t())&&(yield this),!0}GSt(){if(this.o2t){if(2<=this.o2t.B5().ASt())throw new Error("not yet implemented");return this.o2t}return 2<=this.Dft.$F().ASt()?this.Dft.DF():this.Dft}fSt(){const t=this.eSt,e=(EvalParams2(this.Je,t),this.X1t.apply(this.GSt(),t));return this.Dft.N1t(),e}*dSt(){if((this.wSt()||this.gf.C1t())&&(yield this),this.bSt()){const e=this.eSt;EvalParams2(this.Je,e);let t=this.X1t.apply(this.GSt(),e);return C33.Yo(t)&&(t=yield*t),this.Dft.N1t(),t}return this.Ww()}pSt(){const s=this.Je,i=this.eSt,t=this.Dft.ZF();for(let t=0,e=s.length;t<e;++t){const r=s[t];r.S2t()||(i[t]=r.rs(0))}return t.Xft()?this.PSt(t):this.OSt(t)}*mSt(){return(this.wSt()||this.gf.C1t())&&(yield this),this.pSt()}DSt(s){const i=this.Je,r=this.eSt;for(let t=0,e=i.length;t<e;++t){const n=i[t];n.S2t()&&(r[t]=n.rs(s))}}PSt(s){const t=this.Dft,i=t.sq(),r=t.n2t(),n=this.a2t,h=0<=n,o=t.JF(),a=this.sSt,l=this.eSt,c=this.X1t,u=this.Q2t,f=this.tSt&&!this.z2t;s.jft();for(let e=0,t=o.length;e<t;++e){const d=o[e];a&&this.DSt(e);let t;if(h){const p=i?d.YB().c2t(r):0;t=c.apply(d.Urt()[n+p].P5(),l)}else t=c.apply(d.P5(),l);C33.xor(t,u)?s.Jft(d):f&&s.Zft(d)}return t.LSt(!0),s.Qft(!1),t.N1t(),s.Yft()}OSt(t){let e=this.Dft,s=e.sq(),i=e.n2t(),r=e.n$(),n=this.a2t,h=0<=n,o=this.sSt,a=this.eSt,l=this.X1t,c=this.Q2t,u=this.tSt&&!this.z2t,f=t.t0t(),d=t.e0t(),p=u&&!this.lgt.e1t(this),m=p?d:f,C=0,g=!1;for(let e=0,t=m.length;e<t;++e){const y=m[e];o&&this.DSt(e);let t;if(h){const T=s?y.YB().c2t(i):0;t=l.apply(y.Urt()[n+T].P5(),a)}else t=l.apply(y.P5(),a);C33.xor(t,c)?(g=!0,p?(f.push(y),r&&y.NSt()):(m[C]=y,r&&y.FSt(C),++C)):p?(m[C]=y,r&&y.kSt(C),++C):u&&(d.push(y),r)&&y.BSt()}C33.Uh(m,C),r&&e.$St(p,C);const S=g;return p&&!g&&(g=this.WSt(f)),e.LSt(S||u),u?g:t.Yft()}WSt(s){const t=this.Dft,i=t.sq(),r=t.n2t(),n=this.sSt,h=this.a2t,o=0<=h,a=this.eSt,l=this.X1t,c=this.Q2t;for(let e=0,t=s.length;e<t;++e){const u=s[e];n&&this.DSt(e);let t;if(o){const f=i?u.YB().c2t(r):0;t=l.apply(u.Urt()[h+f].P5(),a)}else t=l.apply(u.P5(),a);if(C33.xor(t,c))return!0}return!1}USt(t,e){return this.Je[t].rs(e)}Imt(){const t=this.Je;if(t.length)return t[0].M2t();throw new Error("no parameters")}v8(){if(!this.iSt||!this.iSt.size)return null;const e={};for(const[s,i]of this.iSt.entries()){let t=i;"collmemory"===s&&(t=[...i.entries()].map(t=>[t[0].o$(),t[1].o$(),t[2]])),e[s]=t}return{ex:e}}x8(t){if(this.iSt&&(this.iSt.clear(),this.iSt=null),t){const e=this.gf,s=t.ex;if(s){const i=this.vSt();i.clear();for(const[r,n]of Object.entries(s)){let t=n;"collmemory"===r&&(t=C33.Cn(C33.cu,n.map(t=>[e.DL(t[0]),e.DL(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),i.set(r,t)}}}}}}{let EvalParams2=function(s,i){for(let t=0,e=s.length;t<e;++t)i[t]=s[t].rs(0)};EvalParams=EvalParams2;const C33=self.Fe,assert=self.assert,EMPTY_PARAMS_ARRAY=[],noop=function(){},noopGenerator=function*(){},FLAG_CANPICKANYOBJECTCLASS=1,FLAG_COPYPICKED=2,FLAG_CUSTOM_ACE=4,FLAG_IS_ASYNC=8,FLAG_CAN_BAIL_OUT=16;C33.ACt=class extends C33.pn{constructor(t,e,s){super();const i=(this.lgt=t).hN(),r=(this.gf=i,this.t1=s,this.x6=4<=e.length?e[3]:-1,this.VSt=5<=e.length?255&e[4]:0,this.HSt=5<=e.length?e[4]>>8:0,this.X1t=null,this.Dft=null,this.o2t=null,this.a2t=-1,this.Wgt=null,this.jSt="",this.XSt=null,this.YSt=null,this.Ww=noop,this.L3t=noop,this.Je=[],this.eSt=[],this.sSt=!1,this.iSt=null,this.rSt=null,-3===e[0]),n=r?e[2]:e[5];if(this.dCt=i.tJ()||r?{pCt:n[0],nSt:n[1],index:n[2]}:null,-1===e[0])this.Wgt=i.Ugt(),this.X1t=i.j1t(e[1]);else if(-2===e[0])this.jSt=e[1];else if(r){const h=i.j1t(e[1]);this.X1t=h,this.Ww=this.qSt,this.L3t=this.KSt,this.HSt|=FLAG_IS_ASYNC}else this.Dft=i.PY(e[0]),this.HSt&FLAG_CUSTOM_ACE?(this.jSt=e[1],this.XSt=i.PY(e[2])):(e[2]&&(this.o2t=this.Dft.Vrt(e[2]),this.a2t=this.Dft._st(e[2])),this.X1t=i.j1t(e[1]));if(7===e.length){const o=e[6];for(const a of o)this.Je.push(C33.C2t.CE(this,a,this.Je.length)),this.eSt.push(0)}0===this.Je.length&&(this.Je=EMPTY_PARAMS_ARRAY,this.eSt=EMPTY_PARAMS_ARRAY),this.zSt()&&(this.lgt.xCt(),this.lgt.VCt()),this.lgt.wD().jdt(this)}static CE(t,e,s){return C33.Cn(C33.ACt,t,e,s)}Bdt(){for(const t of this.Je)t.Bdt(),t.S2t()&&(this.sSt=!0);if(this.Wgt)this.aSt(),this.L3t=this.lSt;else if(this.jSt)this.HSt&FLAG_CUSTOM_ACE?this.JSt():this.ZSt(),this.jSt="",this.XSt=null;else if(this.Ww===this.qSt){const e=this.X1t,s=this.gf.wD().a3t(this.lgt);this.X1t=e.bind(null,this.gf.dF(),s)}else this.o2t?this.T1t()?(this.Ww=this.QSt,this.L3t=this.tyt):(this.Ww=this.eyt,this.L3t=this.syt):this.Dft.$F().mF()?(this.cSt(),this.L3t=this.uSt):this.S_()?(this.Ww=this.iyt,this.L3t=this.ryt):this.T1t()?(this.Ww=this.nyt,this.L3t=this.hyt):this.oyt()?(this.Ww=this.ayt,this.L3t=this.lyt):this.Je.length?this.Je.every(t=>t.S2t())?(this.Ww=this.cyt,this.L3t=this.uyt):this.sSt?(this.Ww=this.fyt,this.L3t=this.dyt):this.Je.every(t=>t.Upt())?(EvalParams2(this.Je,this.eSt),this.Ww=this.pyt,this.L3t=this.myt):(this.Ww=this.Cyt,this.L3t=this.gyt):(this.Ww=this.pyt,this.L3t=this.myt)}aSt(){const t=this.Wgt,e=this.Wgt;this.CSt(t,e,this.gSt)}cSt(){const t=this.Dft.$F(),e=this.Dft.FF().P5();this.CSt(t,e,this.SSt)}ZSt(){const t=this.lgt.wD(),s=t.RD(this.jSt);if(s.lu()){const i=0!=(this.HSt&FLAG_COPYPICKED);this.YSt=s.vD();let e=[...new Set([...this.lgt.xD(),...this.YSt.xD()])];e=t.zdt(e);const r=!s.DD()&&this.Syt()?{B1t:!0}:null;if(this.Ww=C33.dmt.prototype.O1t.bind(this.YSt,e,this.Je,i,r),this.gf.tJ()){const n=this;this.L3t=function*(){(n.wSt()||n.gf.C1t())&&(yield n);const t=yield*n.YSt.U1t(e,n.Je,i,r);return t}}else this.L3t=noopGenerator}else this.Ww=noop,this.L3t=noopGenerator}JSt(){const n=this.lgt.wD(),h=n.m3t(this.XSt,this.jSt);if(h.lu()){const o=0!=(this.HSt&FLAG_COPYPICKED);this.YSt=h.vD();let e=[...new Set([...this.lgt.xD(),...this.YSt.xD(),this.Dft,h.YB()])],t=(e=n.zdt(e),!this.Dft.sq()&&!h.YB().sq()),s=!this.Dft.sq()&&h.YB().sq(),i=this.Dft.sq(),r=null;if(!h.DD()&&this.Syt()&&((r=r||{}).B1t=!0),!s&&o||((r=r||{}).D1t=this.Dft,r.L1t=h.YB()),t||s||i&&!h.Sgt()?this.Ww=C33.dmt.prototype.O1t.bind(this.YSt,e,this.Je,o,r):i&&(this.Ww=C33.qpt.prototype.Egt.bind(h,e,this.Je)),this.gf.tJ()){const a=this;t||s||i&&!h.Sgt()?this.L3t=function*(){(a.wSt()||a.gf.C1t())&&(yield a);const t=yield*a.YSt.U1t(e,a.Je,o,r);return t}:i&&(this.L3t=function*(){(a.wSt()||a.gf.C1t())&&(yield a);const t=yield*h.Igt(e,a.Je);return t})}else this.L3t=noopGenerator}else this.Ww=noop,this.L3t=noopGenerator}CSt(t,e,s){const i=this.X1t,r=this.Je;if(0===r.length)this.Ww=t.Xgt(i,e);else if(1===r.length){const n=r[0];if(n.Upt())this.Ww=t.ySt(i,e,n.rs(0));else{const h=t.Xgt(i,e);this.Ww=function(){return h(n.rs(0))}}}else if(2===r.length){const o=r[0],a=r[1];if(o.Upt()&&a.Upt())this.Ww=t.TSt(i,e,o.rs(0),a.rs(0));else{const l=t.Xgt(i,e);this.Ww=function(){return l(o.rs(0),a.rs(0))}}}else if(3===r.length){const c=r[0],u=r[1],f=r[2];if(c.Upt()&&u.Upt()&&f.Upt())this.Ww=t._St(i,e,c.rs(0),u.rs(0),f.rs(0));else{const d=t.Xgt(i,e);this.Ww=function(){return d(c.rs(0),u.rs(0),f.rs(0))}}}else this.Ww=s}cq(){return this.x6}T1t(){return 0!=(this.HSt&FLAG_IS_ASYNC)}y1t(){return 0!=(this.HSt&FLAG_CAN_BAIL_OUT)}oyt(){return 1===this.VSt}S_(){return 2===this.VSt}zSt(){return 0!=(this.HSt&FLAG_CANPICKANYOBJECTCLASS)}OCt(){return this.T1t()||this.y1t()}YB(){return this.Dft}ESt(){return this.o2t?this.o2t.B5():this.Dft?this.Dft.$F():null}b2t(){const t=this.ESt();return t?t.ASt():1}vD(){return this.lgt}Syt(){let t=this.lgt;do{if(t instanceof C33.qpt&&t.DD())return!0}while(t=t.h3t());return!1}hN(){return this.gf}qO(){return this.t1}o1t(){return this.dCt.index}wSt(){return this.dCt.pCt}MSt(t){this.dCt.pCt=!!t,this.lgt.$Ct()}bSt(){return this.dCt.nSt}kmt(){return!this.wSt()&&!this.gf.C1t()&&!this.bSt()}vSt(){return this.iSt||(this.iSt=new Map),this.iSt}xSt(){return this.rSt||(this.rSt=new Map),this.rSt}gSt(){const t=this.eSt;return EvalParams2(this.Je,t),this.X1t.apply(this.Wgt,t)}*lSt(){if((this.wSt()||this.gf.C1t())&&(yield this),this.bSt()){const t=this.eSt,e=(EvalParams2(this.Je,t),yield*this.X1t.apply(this.Wgt,t));return e}return this.Ww()}SSt(){const t=this.eSt;return EvalParams2(this.Je,t),this.X1t.apply(this.Dft.FF().P5(),t)}*uSt(){if((this.wSt()||this.gf.C1t())&&(yield this),this.bSt()){const t=this.eSt,e=(EvalParams2(this.Je,t),yield*this.X1t.apply(this.Dft.FF().P5(),t));return e}return this.Ww()}pyt(){const s=this.eSt,i=this.Dft.ZF().JF();for(let t=0,e=i.length;t<e;++t)this.X1t.apply(i[t].P5(),s)}*myt(){if((this.wSt()||this.gf.C1t())&&(yield this),this.bSt()){const s=this.eSt,i=this.Dft.ZF().JF();for(let t=0,e=i.length;t<e;++t)yield*this.X1t.apply(i[t].P5(),s)}else this.pyt()}Cyt(){const s=this.eSt,i=(EvalParams2(this.Je,s),this.Dft.ZF().JF());for(let t=0,e=i.length;t<e;++t)this.X1t.apply(i[t].P5(),s)}*gyt(){if((this.wSt()||this.gf.C1t())&&(yield this),this.bSt()){const s=this.eSt,i=(EvalParams2(this.Je,s),this.Dft.ZF().JF());for(let t=0,e=i.length;t<e;++t)yield*this.X1t.apply(i[t].P5(),s)}else this.Cyt()}cyt(){const i=this.Je,r=this.eSt,e=this.X1t,n=this.Dft.ZF().JF();for(let s=0,t=n.length;s<t;++s){const h=n[s];for(let t=0,e=i.length;t<e;++t)r[t]=i[t].rs(s);e.apply(h.P5(),r)}}*uyt(){if((this.wSt()||this.gf.C1t())&&(yield this),this.bSt()){const i=this.Je,r=this.eSt,e=this.X1t,n=this.Dft.ZF().JF();for(let s=0,t=n.length;s<t;++s){const h=n[s];for(let t=0,e=i.length;t<e;++t)r[t]=i[t].rs(s);yield*e.apply(h.P5(),r)}}else this.cyt()}fyt(){const i=this.Je,r=this.eSt,e=this.X1t,n=this.Dft.ZF().JF();for(let t=0,e=i.length;t<e;++t){const s=i[t];s.S2t()||(r[t]=s.rs(0))}for(let s=0,t=n.length;s<t;++s){const h=n[s];for(let t=0,e=i.length;t<e;++t){const o=i[t];o.S2t()&&(r[t]=o.rs(s))}e.apply(h.P5(),r)}}*dyt(){if((this.wSt()||this.gf.C1t())&&(yield this),this.bSt()){const i=this.Je,r=this.eSt,e=this.X1t,n=this.Dft.ZF().JF();for(let t=0,e=i.length;t<e;++t){const s=i[t];s.S2t()||(r[t]=s.rs(0))}for(let s=0,t=n.length;s<t;++s){const h=n[s];for(let t=0,e=i.length;t<e;++t){const o=i[t];o.S2t()&&(r[t]=o.rs(s))}yield*e.apply(h.P5(),r)}}else this.fyt()}ayt(){const i=this.Je,r=this.eSt,e=this.X1t,t=this.Dft,s=t.yyt(),n=t.ZF().JF();s.Tyt(e);for(let s=0,t=n.length;s<t;++s){const h=n[s];for(let t=0,e=i.length;t<e;++t)r[t]=i[t].rs(s);e.apply(h.P5(),r)}s._yt(e)}*lyt(){if((this.wSt()||this.gf.C1t())&&(yield this),this.bSt()){const i=this.Je,r=this.eSt,e=this.X1t,t=this.Dft,s=t.yyt(),n=t.ZF().JF();s.Tyt(e);for(let s=0,t=n.length;s<t;++s){const h=n[s];for(let t=0,e=i.length;t<e;++t)r[t]=i[t].rs(s);yield*e.apply(h.P5(),r)}s._yt(e)}else this.ayt()}iyt(){const t=this.eSt;return EvalParams2(this.Je,t),this.X1t.apply(this.o2t||this.Dft,t)}*ryt(){if((this.wSt()||this.gf.C1t())&&(yield this),this.bSt()){const e=this.eSt;EvalParams2(this.Je,e);let t=this.X1t.apply(this.o2t||this.Dft,e);return C33.Yo(t)?yield*t:t}return this.iyt()}eyt(){const t=this.Dft,e=t.sq(),i=t.n2t(),r=this.Je,n=this.sSt,h=this.eSt,o=this.X1t,a=this.a2t,l=t.ZF().JF();for(let t=0,e=r.length;t<e;++t){const s=r[t];s.S2t()||(h[t]=s.rs(0))}for(let s=0,t=l.length;s<t;++s){const c=l[s];if(n)for(let t=0,e=r.length;t<e;++t){const f=r[t];f.S2t()&&(h[t]=f.rs(s))}const u=e?c.YB().c2t(i):0;o.apply(c.Urt()[a+u].P5(),h)}}*syt(){if((this.wSt()||this.gf.C1t())&&(yield this),this.bSt()){const t=this.Dft,e=t.sq(),i=t.n2t(),r=this.Je,n=this.sSt,h=this.eSt,o=this.X1t,a=this.a2t,l=t.ZF().JF();for(let t=0,e=r.length;t<e;++t){const s=r[t];s.S2t()||(h[t]=s.rs(0))}for(let s=0,t=l.length;s<t;++s){const c=l[s];if(n)for(let t=0,e=r.length;t<e;++t){const f=r[t];f.S2t()&&(h[t]=f.rs(s))}const u=e?c.YB().c2t(i):0;yield*o.apply(c.Urt()[a+u].P5(),h)}}else this.eyt()}nyt(){const i=this.Je,r=this.eSt,e=this.X1t,n=this.Dft.ZF().JF(),h=[];for(let s=0,t=n.length;s<t;++s){const o=n[s];for(let t=0,e=i.length;t<e;++t)r[t]=i[t].rs(s);h.push(e.apply(o.P5(),r))}return Promise.all(h)}*hyt(){if((this.wSt()||this.gf.C1t())&&(yield this),this.bSt()){const i=this.Je,r=this.eSt,e=this.X1t,n=this.Dft.ZF().JF(),h=[];for(let s=0,t=n.length;s<t;++s){const o=n[s];for(let t=0,e=i.length;t<e;++t)r[t]=i[t].rs(s);h.push(yield*e.apply(o.P5(),r))}return Promise.all(h)}return this.nyt()}QSt(){const t=this.Dft,e=t.sq(),i=t.n2t(),r=this.Je,n=this.eSt,h=this.X1t,o=this.a2t,a=t.ZF().JF(),l=[];for(let s=0,t=a.length;s<t;++s){const c=a[s];for(let t=0,e=r.length;t<e;++t)n[t]=r[t].rs(s);const u=e?c.YB().c2t(i):0;l.push(h.apply(c.Urt()[o+u].P5(),n))}return Promise.all(l)}*tyt(){if((this.wSt()||this.gf.C1t())&&(yield this),this.bSt()){const t=this.Dft,e=t.sq(),i=t.n2t(),r=this.Je,n=this.eSt,h=this.X1t,o=this.a2t,a=t.ZF().JF(),l=[];for(let s=0,t=a.length;s<t;++s){const c=a[s];for(let t=0,e=r.length;t<e;++t)n[t]=r[t].rs(s);const u=e?c.YB().c2t(i):0;l.push(yield*h.apply(c.Urt()[o+u].P5(),n))}return Promise.all(l)}return this.QSt()}async qSt(){try{await this.X1t()}catch(t){console.error(`Unhandled exception running script %c${this.lgt.Mz().lf()}, event ${this.lgt.XCt()}, action ${this.o1t()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),C33._mt.q1t()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),C33._mt.K1t())}}*KSt(){return(this.wSt()||this.gf.C1t())&&(yield this),this.qSt()}v8(){return this.iSt&&this.iSt.size?{ex:C33.Ho(this.iSt)}:null}x8(t){if(this.iSt&&(this.iSt.clear(),this.iSt=null),t){const e=t.ex;e&&(this.iSt=C33.jo(e))}}}}{let GetInst2=function(t){return t instanceof IInstance?runtime.Pk(t):t.aU()},GetWorldInfo2=function(t){return GetInst2(t).BL()},GetInst_SDKv22=function(t){return runtime.Pk(t)},GetWorldInfo_SDKv22=function(t){return GetInst_SDKv22(t).BL()},CollMemory_Add2=function(t,e,s,i){const r=e.o$(),n=s.o$();r<n?t.Set(e,s,i):t.Set(s,e,i)},CollMemory_Remove2=function(t,e,s){const i=e.o$(),r=s.o$();i<r?t.pu(e,s):t.pu(s,e)},CollMemory_RemoveInstance2=function(t,e){t.mu(e)},CollMemory_Get2=function(t,e,s){const i=e.o$(),r=s.o$();return i<r?t.rs(e,s):t.rs(s,e)},DoOverlapCondition2=function(t,e,s,i){if(!e)return!1;const r=0!==s||0!==i,n=t.BL(),h=runtime.eD(),o=runtime.t3t(),a=o.vD().l0t(),l=o.YB(),c=o.ISt(),u=e.ZF(),f=l!==e;rPickType=e,needsCollisionFinish=f&&!c;let d,p=0,m=0,C=rPickFromElseInstances=!1;u.Xft()?(tempRect.I(n.C4()),tempRect.offset(s,i),h.Eyt(n.$L(),e,tempRect,tempCandidates2),d=tempCandidates2):!a||runtime.Ayt()&&!u.e0t().length&&u.t0t().length?d=u.t0t():(d=u.e0t(),rPickFromElseInstances=!0),r&&(p=n.Fy(),m=n.$y(),n.u4(s,i),n.o4());for(const g of d)if(h.bN(t,g)){if(C=!0,c)break;f&&rToPick.add(g)}return r&&(n.a4(p,m),n.o4()),C33.Vh(tempCandidates2),C},FinishCollisionConditionPicking2=function(t){const e=runtime.GD().l0t(),s=rPickType.ZF(),i=s.t0t(),r=s.e0t();s.Xft()?(s.r0t(rToPick),e&&(C33.Vh(r),s.n0t(rToPick,rPickType.JF()))):e?rPickFromElseInstances?s.h0t(rToPick):(s.n0t(rToPick,i),s.r0t(rToPick)):s.r0t(rToPick),rPickType.N1t()},FinishCollisionCondition2=function(t,e){needsCollisionFinish&&(e&&FinishCollisionConditionPicking2(t),rToPick.clear(),rPickType=null,needsCollisionFinish=!1)},PickByUID_Normal2=function(t,e){const s=runtime.DL(e);if(s){const i=t.ZF();if(i.Xft()||i.t0t().includes(s))if(t.sq()){if(s.YB().Iyt(t))return i.a0t(s),t.N1t(),!0}else if(s.YB()===t)return i.a0t(s),t.N1t(),!0}return!1},PickByUID_Inverted2=function(t,r){const n=t.ZF();if(n.Xft()){n.Qft(!1),n.jft();const s=t.JF();for(let t=0,e=s.length;t<e;++t){const i=s[t];i.o$()===r?n.Zft(i):n.Jft(i)}return t.N1t(),!!n.t0t().length}{let s=n.t0t(),i=0;for(let t=0,e=s.length;t<e;++t){const h=s[t];(s[i]=h).o$()===r?n.Zft(h):++i}return C33.Uh(s,i),t.N1t(),!!s.length}},C33=(GetInst=GetInst2,GetWorldInfo=GetWorldInfo2,GetInst_SDKv2=GetInst_SDKv22,GetWorldInfo_SDKv2=GetWorldInfo_SDKv22,CollMemory_Add=CollMemory_Add2,CollMemory_Remove=CollMemory_Remove2,CollMemory_RemoveInstance=CollMemory_RemoveInstance2,CollMemory_Get=CollMemory_Get2,DoOverlapCondition=DoOverlapCondition2,FinishCollisionConditionPicking=FinishCollisionConditionPicking2,FinishCollisionCondition=FinishCollisionCondition2,PickByUID_Normal=PickByUID_Normal2,PickByUID_Inverted=PickByUID_Inverted2,self.Fe),tempColor=new C33.Ko,AnySDK={},SDKv1={},SDKv2={},runtime=null,IInstance=(C33.wyt=function(t){runtime=t},self.jB),tempRect=(SDKv1.Ryt=function(t,e){return C33.compare(this.BL().Fy(),t,e)},SDKv2.Ryt=function(t,e){return C33.compare(this.x,t,e)},SDKv1.Myt=function(t,e){return C33.compare(this.BL().$y(),t,e)},SDKv2.Myt=function(t,e){return C33.compare(this.y,t,e)},SDKv1.byt=function(){return this.BL().T4()},SDKv2.byt=function(){return this.y4()},AnySDK.vyt=function(){const t=GetWorldInfo2(this),e=t._L(),s=t.C4();return s.Ol()<0||s.Dl()<0||s.Gl()>e.Sm()||s.Pl()>e.vm()},AnySDK.xyt=function(s,i,r){const t=this.ZF(),n=t.JF();if(!n.length)return!1;let h=n[0],o=h.BL(),a=h,l=C33.Mn(o.Fy(),o.$y(),i,r);for(let t=1,e=n.length;t<e;++t){h=n[t],o=h.BL();const c=C33.Mn(o.Fy(),o.$y(),i,r);(0===s&&c<l||1===s&&c>l)&&(l=c,a=h)}return t.a0t(a),!0},SDKv1.ky=function(t){const e=this.BL();e.Fy()!==t&&(e.ky(t),e.o4())},SDKv2.ky=function(t){this.x=+t},SDKv1.Wy=function(t){const e=this.BL();e.$y()!==t&&(e.Wy(t),e.o4())},SDKv2.Wy=function(t){this.y=+t},SDKv1.Gyt=function(t,e){const s=this.BL();s.Pyt(t,e)||(s.a4(t,e),s.o4())},SDKv2.Gyt=function(t,e){this.setPosition(t,e)},AnySDK.Oyt=function(t,e){if(t){const s=GetInst2(this),i=t.KF(s);if(i){const[r,n]=i.Dyt(e),h=s.BL();h.Fy()===r&&h.$y()===n||(h.a4(r,n),h.o4())}}},AnySDK.Lyt=function(t){if(0!==t){const e=GetWorldInfo2(this);e.u4(e.Nyt()*t,e.Fyt()*t),e.o4()}},SDKv1.kyt=function(t,e){if(0!==e){const s=this.BL();t=C33.In(t),s.u4(Math.cos(t)*e,Math.sin(t)*e),s.o4()}},SDKv2.kyt=function(t,e){0!==e&&(t=C33.In(t),this.c4(Math.cos(t)*e,Math.sin(t)*e))},SDKv1.Fy=function(){return this.BL().Fy()},SDKv2.Fy=function(){return this.x},SDKv1.$y=function(){return this.BL().$y()},SDKv2.$y=function(){return this.y},AnySDK.XD=function(){return runtime.XD(GetInst2(this))},SDKv1.Byt=function(t,e){return C33.compare(this.BL().Sm(),t,e)},SDKv2.Byt=function(t,e){return C33.compare(this.width,t,e)},SDKv1.$yt=function(t,e){return C33.compare(this.BL().vm(),t,e)},SDKv2.$yt=function(t,e){return C33.compare(this.height,t,e)},SDKv1.wm=function(t){const e=this.BL();e.Sm()!==t&&(e.wm(t),e.o4())},SDKv2.wm=function(t){this.width=t},SDKv1.ym=function(t){const e=this.BL();e.vm()!==t&&(e.ym(t),e.o4())},SDKv2.ym=function(t){this.height=t},SDKv1.uM=function(t,e){const s=GetWorldInfo2(this);s.Sm()===t&&s.vm()===e||(s.uM(t,e),s.o4())},SDKv2.uM=function(t,e){this.mk(t,e)},SDKv1.Sm=function(){return this.BL().Sm()},SDKv2.Sm=function(){return this.width},SDKv1.vm=function(){return this.BL().vm()},SDKv2.vm=function(){return this.height},AnySDK.Wyt=function(){return GetWorldInfo2(this).C4().Gl()},AnySDK.Uyt=function(){return GetWorldInfo2(this).C4().Pl()},AnySDK.Vyt=function(){return GetWorldInfo2(this).C4().Ol()},AnySDK.Hyt=function(){return GetWorldInfo2(this).C4().Dl()},AnySDK.jyt=function(){const t=GetWorldInfo2(this).C4();return(t.Gl()+t.Ol())/2},AnySDK.Xyt=function(){const t=GetWorldInfo2(this).C4();return(t.Pl()+t.Dl())/2},AnySDK.Yyt=function(t,e){return C33.vn(GetWorldInfo2(this).yk(),C33.In(e))<=C33.In(t)},AnySDK.qyt=function(t){return C33.Gn(GetWorldInfo2(this).yk(),C33.In(t))},AnySDK.Kyt=function(t,e){const s=C33.In(t),i=C33.In(e),r=GetWorldInfo2(this).yk(),n=!C33.Gn(i,s);return n?!(!C33.Gn(r,s)&&C33.Gn(r,i)):C33.Gn(r,s)&&!C33.Gn(r,i)},SDKv1.Sk=function(t){const e=this.BL(),s=C33.An(C33.In(t));isNaN(s)||e.yk()===s||(e.Sk(s),e.o4())},SDKv2.Sk=function(t){this.m4=t},AnySDK.zyt=function(t){if(!isNaN(t)&&0!==t){const e=GetWorldInfo2(this);e.Sk(e.yk()+C33.In(t)),e.o4()}},AnySDK.Jyt=function(t){if(!isNaN(t)&&0!==t){const e=GetWorldInfo2(this);e.Sk(e.yk()-C33.In(t)),e.o4()}},AnySDK.Zyt=function(t,e){const s=GetWorldInfo2(this),i=s.yk(),r=C33.xn(i,C33.In(e),C33.In(t));isNaN(r)||i===r||(s.Sk(r),s.o4())},AnySDK.Qyt=function(t,e,s){const i=GetWorldInfo2(this),r=i.yk(),n=e-i.Fy(),h=s-i.$y(),o=Math.atan2(h,n),a=C33.xn(r,o,C33.In(t));isNaN(a)||r===a||(i.Sk(a),i.o4())},AnySDK.tTt=function(t,e){const s=GetWorldInfo2(this),i=s.yk(),r=t-s.Fy(),n=e-s.$y(),h=Math.atan2(n,r);isNaN(h)||i===h||(s.Sk(h),s.o4())},SDKv1.yk=function(){return C33.wn(this.BL().yk())},SDKv2.yk=function(){return this.m4},AnySDK.eTt=function(t,e){return C33.compare(C33.jn(100*GetWorldInfo2(this).jv(),6),t,e)},SDKv1.iB=function(){return this.BL().iB()},SDKv2.iB=function(){return this.isVisible},AnySDK.eB=function(t){const e=GetWorldInfo2(this);t=2===t?!e.iB():0!==t,e.iB()!==t&&(e.eB(t),runtime.XL())},AnySDK.Yv=function(t){const e=C33.En(t/100,0,1),s=GetWorldInfo2(this);if(s.f5()){if(s.mht().sTt()===e)return}else if(s.jv()===e)return;s.Yv(e),runtime.XL()},AnySDK.iTt=function(t){tempColor.Ga(t);const e=GetWorldInfo2(this);e.E4().Ea(tempColor)||(e.A4(tempColor),runtime.XL())},AnySDK.Kv=function(){const t=GetWorldInfo2(this).E4();return C33.qn(t.ma(),t.Ca(),t.ga(),t.Sa())},AnySDK.jv=function(){return C33.jn(100*GetWorldInfo2(this).jv(),6)},AnySDK.rTt=function(t){return!!t&&GetWorldInfo2(this).$L()===t},AnySDK.nTt=function(s){const t=this.ZF(),i=t.JF();if(!i.length)return!1;let e=i[0],r=e;for(let t=1,e=i.length;t<e;++t){const n=i[t],h=n.BL(),o=r.BL(),a=h.$L().qO(),l=o.$L().qO();0===s?(l<a||a===l&&h.WL()>o.WL())&&(r=n):(a<l||a===l&&h.WL()<o.WL())&&(r=n)}return t.a0t(r),!0},SDKv1.hTt=function(t,e,s){const i=this.BL(),r=0===t?i.Uy():i.d4();return C33.compare(r,e,s)},SDKv2.hTt=function(t,e,s){const i=0===t?this.TB:this.f4;return C33.compare(i,e,s)},SDKv1.oTt=function(){this.BL().w4()},SDKv2.oTt=function(){this.I4()},SDKv1.aTt=function(){this.BL().M4()},SDKv2.aTt=function(){this.R4()},AnySDK.lTt=function(t){t&&GetWorldInfo2(this).v4(t)},AnySDK.cTt=function(t,e){const s=0===t;if(e){const i=GetInst2(this),r=e.uTt(i);r&&i.BL().G4(r,s)}},SDKv1.Vy=function(t){const e=this.BL();e.Uy()!==t&&(e.Vy(t),runtime.XL())},SDKv2.Vy=function(t){this.TB=t},AnySDK.fTt=function(){return GetWorldInfo2(this).$L().qO()},AnySDK.dTt=function(){return GetWorldInfo2(this).$L().lf()},SDKv1.pTt=function(){return this.BL().WL()},SDKv2.pTt=function(){return this.zIndex},SDKv1.mTt=function(){return this.BL().Uy()},SDKv2.mTt=function(){return this.TB},SDKv1.CTt=function(){return this.BL().d4()},SDKv2.CTt=function(){return this.f4},AnySDK.gTt=function(t){const e=GetInst2(this),s=e.YB().fk().jrt(t);if(s){const i=s.qO(),r=e.BL().n4();return r.K5(i)}},AnySDK.STt=function(t,e){const s=GetInst2(this),i=s.YB().fk().jrt(e);if(i){const r=i.qO(),n=1===t,h=s.BL().n4();h.K5(r)!==n&&(h.z5(r,n),h.J5(),runtime.XL())}},AnySDK.yTt=function(t,e,s){const i=GetInst2(this),r=i.YB().fk().jrt(t);if(r){e=Math.floor(e);const n=r.mA().gA(e);if(n){"color"===n?(tempColor.Ga(s),s=tempColor):"percent"===n&&(s/=100);const h=r.qO(),o=i.BL().n4(),a=o.Q5(h,e,s);a&&o.K5(h)&&runtime.XL()}}},C33.Cn(C33.Rect)),tempCandidates1=[],tempCandidates2=[],needsCollisionFinish=!1,rPickType=null,rPickFromElseInstances=!1,rToPick=new Set;function*DebugOnCollision(S){if(S){let t=this.gf,e=t.eD(),i=t.wD(),s=i.kD(),r=i.t3t(),n=r.YB(),h=r.vSt(),o=r.xSt(),a=s.tH(),l=t.Utt(),c=l-1,u=a.GD(),f=s.eH(u),d=h.get("collmemory"),p=(d||(d=C33.Cn(C33.cu),h.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.zf().addEventListener("instancedestroy",t=>CollMemory_RemoveInstance2(d,t.H5))),n.ZF()),m=S.ZF(),C=p.JF(),g=null;for(let t=0;t<C.length;++t){const y=C[t];m.Xft()?(e.Eyt(y.BL().$L(),S,y.BL().C4(),tempCandidates1),g=tempCandidates1,e.TTt(y,S,g)):g=m.JF();for(let t=0;t<g.length;++t){const T=g[t];if(e.bN(y,T)||e._Tt(y,T)){let t=CollMemory_Get2(d,y,T),e=!1,s=-2;"number"==typeof t&&(e=!0,s=t);const _=!e||s<c;if(CollMemory_Add2(d,y,T,l),_){const E=u.QV(),A=(i.hH(E),n.ZF()),I=S.ZF();if(A.Qft(!1),I.Qft(!1),n===S){const w=A.t0t();C33.Vh(w),w.push(y),w.push(T),n.N1t()}else{const R=A.t0t(),M=I.t0t();C33.Vh(R),C33.Vh(M),R.push(y),M.push(T),n.N1t(),S.N1t()}yield*u.M1t(a,f),i.aH(E)}}else CollMemory_Remove2(d,y,T)}C33.Vh(tempCandidates1)}s.fH()}return!1}AnySDK.ETt=function(S){if(this.gf.ATt())return DebugOnCollision.call(this,S);if(S){let t=this.gf,e=t.eD(),i=t.wD(),s=i.kD(),r=i.t3t(),n=r.YB(),h=r.vSt(),o=r.xSt(),a=s.tH(),l=t.Utt(),c=l-1,u=a.GD(),f=s.eH(u),d=h.get("collmemory"),p=(d||(d=C33.Cn(C33.cu),h.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.zf().addEventListener("instancedestroy",t=>CollMemory_RemoveInstance2(d,t.H5))),n.ZF()),m=S.ZF(),C=p.JF(),g=null;for(let t=0;t<C.length;++t){const y=C[t];m.Xft()?(e.Eyt(y.BL().$L(),S,y.BL().C4(),tempCandidates1),g=tempCandidates1,e.TTt(y,S,g)):g=m.JF();for(let t=0;t<g.length;++t){const T=g[t];if(e.bN(y,T)||e._Tt(y,T)){let t=CollMemory_Get2(d,y,T),e=!1,s=-2;"number"==typeof t&&(e=!0,s=t);const _=!e||s<c;if(CollMemory_Add2(d,y,T,l),_){const E=u.QV(),A=(i.hH(E),n.ZF()),I=S.ZF();if(A.Qft(!1),I.Qft(!1),n===S){const w=A.t0t();C33.Vh(w),w.push(y),w.push(T),n.N1t()}else{const R=A.t0t(),M=I.t0t();C33.Vh(R),C33.Vh(M),R.push(y),M.push(T),n.N1t(),S.N1t()}u.oH(a,f),i.aH(E)}}else CollMemory_Remove2(d,y,T)}C33.Vh(tempCandidates1)}s.fH()}return!1},AnySDK.ITt=function(t){return DoOverlapCondition2(GetInst2(this),t,0,0)},AnySDK.wTt=function(t,e,s){return DoOverlapCondition2(GetInst2(this),t,e,s)},AnySDK.J4=function(){return GetWorldInfo2(this).J4()},AnySDK.O8=function(){return GetWorldInfo2(this).O8()},AnySDK.RTt=function(s,i){const t=this.ZF(),r=t.JF();if(0===r.length)return!1;let e=s.ZF(),n=e.JF();if(e.Xft()){const a=[...this.gf.MTt(s)];0<a.length&&(n=n.concat(a))}if(0===n.length)return!1;const h=e.Xft()?null:new Set(n),o=new Set;for(let t=0,e=r.length;t<e;++t){const l=r[t];if(1===i)for(const c of l.W4())c.bTt(s)&&(null===h||h.has(c))&&o.add(c);else{let t;if(0===i){if(null===(t=l.N4()))continue}else t=l.B4();t.bTt(s)&&(null===h||h.has(t))&&o.add(t)}}return 0!==o.size&&(e.r0t(o),s.N1t(),!0)},AnySDK.vTt=function(s,i){const t=this.ZF(),r=t.JF();if(0===r.length)return!1;let e=s.ZF(),n=e.JF();if(e.Xft()){const a=[...this.gf.MTt(s)];0<a.length&&(n=n.concat(a))}if(0===n.length)return!1;const h=e.Xft()?null:new Set(n),o=new Set;for(let t=0,e=r.length;t<e;++t){const l=r[t];2!==i||l.O8()||!l.bTt(s)||null!==h&&!h.has(l)||o.add(l);for(const c of 0===i?l.children():l.X4())2===i&&c.O8()||c.bTt(s)&&(null===h||h.has(c))&&o.add(c)}return 0!==o.size&&(e.r0t(o),s.N1t(),!0)},AnySDK.xTt=function(s,i,r){const t=this.ZF(),n=t.JF();if(0===n.length)return!1;let e=s.ZF(),h=e.JF();if(e.Xft()){const l=[...this.gf.MTt(s)];0<l.length&&(h=h.concat(l))}if(0===h.length)return!1;const o=e.Xft()?null:new Set(h),a=[];for(let t=0,e=n.length;t<e;++t){const c=n[t];if(0===i){const u=c.j4(r);null!==u&&u.bTt(s)&&(null===o||o.has(u))&&a.push(u)}else if(1===i)for(const f of c.children())if(f.bTt(s)){if(0===r){null!==o&&!o.has(f)||a.push(f);break}--r}}return 0!==a.length&&(e.i0t(a),s.N1t(),!0)},AnySDK.GTt=function(t,e,s){const i=GetInst2(this);switch(t){case 0:default:return C33.compare(i.V4(),e,s);case 1:return C33.compare(i.PTt(),e,s)}},AnySDK.q4=function(t,e,s,i,r,n,h,o,a,l){const c=GetInst2(this),u=runtime.s3t().YB();for(const f of t.OTt(c,u)){if(!f.$F().MF())return;c.q4(f,{Q4:e,e5:s,i5:i,n5:r,o5:n,u5:h,l5:o,d5:a,m5:l})}},AnySDK.K4=function(t){const e=GetInst2(this),s=runtime.s3t().YB();for(const i of t.OTt(e,s))e.K4(i)},AnySDK.DTt=function(){const t=GetInst2(this);if(t.J4()){const e=t.N4();e.K4(t)}},AnySDK.LTt=function(){return GetInst2(this).V4()},AnySDK.NTt=function(){return GetInst2(this).PTt()},AnySDK.FTt=function(t,e){t=Math.floor(t),e=Math.floor(e);const s=GetWorldInfo2(this);t<2||e<2||!isFinite(t)||!isFinite(e)?(s.T5(),s.o4()):s.S5(t,e)},AnySDK.E5=function(t,e,s,i,r,n,h,o){const a=GetWorldInfo2(this),l=a.E5(t,e,{mode:0===s?"absolute":"relative",x:i,y:r,TB:n,u:h,v:o});l&&a.o4()},AnySDK.kTt=function(){const t=GetWorldInfo2(this);return t.I5()?t.w5().fT():0},AnySDK.BTt=function(){const t=GetWorldInfo2(this);return t.I5()?t.w5().dT():0},AnySDK.$Tt=function(t){const e=GetWorldInfo2(this);t=2===t?!e.iB():0!==t,e.iB()!==t&&e.eB(t)},AnySDK.N5=function(t,e){this instanceof self.jB?this.gV(t,e):this.N5(t,e)},AnySDK.WTt=function(t,e){this instanceof self.jB?this.SV(t,""+e):this.WTt(t,""+e)},AnySDK.UTt=function(t){this instanceof self.jB?this.yV(t):this.UTt(t)},AnySDK.VTt=function(){this instanceof self.jB?this.pV():this.O5()},AnySDK.HTt=function(){this instanceof self.jB?this.mV():this.D5()},AnySDK.jTt=function(){return this instanceof self.jB?this.CV():this.jTt()},AnySDK.XTt=function(t){this instanceof self.jB?this._setEnabled(0!==t):this.YTt(0!==t)},AnySDK.qTt=function(){return this instanceof self.jB?this.tgt():this.KTt()},SDKv1.zTt=function(t,e,s){return C33.compare(this.aU().rht(t),e,s)},SDKv2.zTt=function(t,e,s){return C33.compare(GetInst_SDKv22(this).rht(t),e,s)},SDKv1.JTt=function(t){return!!this.aU().rht(t)},SDKv2.JTt=function(t){return!!GetInst_SDKv22(this).rht(t)},AnySDK.ZTt=function(s,i){const t=this.ZF(),r=t.JF();if(!r.length)return!1;let n=this.sq(),h=null,o=0;for(let t=0,e=r.length;t<e;++t){const a=r[t],l=n?a.YB().r2t(this.n2t()):0,c=a.rht(l+i);(null===h||0===s&&c<o||1===s&&c>o)&&(o=c,h=a)}return t.a0t(h),!0},AnySDK.QTt=function(t){return(this.gf.t3t().ISt()?PickByUID_Inverted2:PickByUID_Normal2)(this,t)},AnySDK.WW=function(t){const e=new Set(C33.ao(t)),s=GetInst2(this).p$();return e.isSubsetOf(s)},AnySDK.t_t=function(){return GetInst2(this).e_t()},AnySDK.s_t=function(){return GetInst2(this).p$().size},AnySDK.i_t=function(t){return GetInst2(this).r_t(t)},AnySDK.n_t=function(t,e){const s=C33.ao(e);if(0!==s.length){const i=GetInst2(this),r=new Set(i.p$());if(0===t)for(const n of s)r.add(n);else if(1===t)for(const h of s)r.delete(h);i.C$(r)}},AnySDK.h_t=function(){runtime.t$(GetInst2(this))},AnySDK.o_t=function(){return!0},AnySDK.a_t=function(){return!0},SDKv1.l_t=function(t,e){this.aU().nht(t,e)},SDKv2.l_t=function(t,e){GetInst_SDKv22(this).nht(t,e)},SDKv1.c_t=function(t,e){const s=this.aU(),i=s.rht(t);"number"==typeof i&&"number"!=typeof e?e=parseFloat(e):"string"==typeof i&&"string"!=typeof e&&(e=e.toString()),s.nht(t,i+e)},SDKv2.c_t=function(t,e){const s=GetInst_SDKv22(this),i=s.rht(t);"number"==typeof i&&"number"!=typeof e?e=parseFloat(e):"string"==typeof i&&"string"!=typeof e&&(e=e.toString()),s.nht(t,i+e)},SDKv1.u_t=function(t,e){const s=this.aU(),i=s.rht(t);"number"==typeof i&&("number"!=typeof e&&(e=parseFloat(e)),s.nht(t,i-e))},SDKv2.u_t=function(t,e){const s=GetInst_SDKv22(this),i=s.rht(t);"number"==typeof i&&("number"!=typeof e&&(e=parseFloat(e)),s.nht(t,i-e))},SDKv1.f_t=function(t,e){this.aU().nht(t,e?1:0)},SDKv2.f_t=function(t,e){GetInst_SDKv22(this).nht(t,e?1:0)},SDKv1.d_t=function(t){const e=this.aU();e.nht(t,0===e.rht(t)?1:0)},SDKv2.d_t=function(t){const e=GetInst_SDKv22(this);e.nht(t,0===e.rht(t)?1:0)},AnySDK.p_t=function(t){let e;try{e=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const s=GetInst2(this);runtime.m_t(),s.KJ("state"),s.Jy(e,"state"),runtime.C_t("state",{g_t:!0})},AnySDK.S_t=function(){return JSON.stringify(GetInst2(this).zy("state"))},AnySDK.y_t=function(){return GetInst2(this).YB().lf()},AnySDK.T_t=function(){let t=runtime.Qdt().B0t(),e=t.ek();for(const s of runtime.MTt(t))++e;return e},AnySDK.__t=function(){return runtime.Qdt().B0t().ZF().JF().length},SDKv1.w7=function(){return this.aU().w7()},SDKv2.w7=function(){return GetInst_SDKv22(this).w7()},SDKv1.o$=function(){return this.aU().o$()},SDKv2.o$=function(){return GetInst_SDKv22(this).o$()},AnySDK.wpt=function(t){const e=GetInst2(this);return t.toLowerCase()===runtime.wD().vpt(e)},AnySDK.S$=function(t){const e=GetInst2(this);runtime.wD().S$(e,t)},AnySDK.E_t=function(t){return runtime.wD().ept().A_t(this.ZF().JF(),t),!0},AnySDK.I_t=function(){return GetInst2(this).l$()},C33.w_t=function(t,e,s){const i=t[1],r=t[3],n=t[4],h=t[5],o=t[6],a=t[7],l=t[8],c=t[10],u=t[11],f=t[12],d=t[13],p=t[14],m=t[15],C=t[16],g=e.T7,S=e.unt,y=e.fnt,T=Object.assign({},AnySDK,2<=s?SDKv2:SDKv1);r&&(g.Ryt=T.Ryt,g.Myt=T.Myt,g.byt=T.byt,g.vyt=T.vyt,g.xyt=T.xyt,S.ky=T.ky,S.Wy=T.Wy,S.Gyt=T.Gyt,S.Oyt=T.Oyt,S.Lyt=T.Lyt,S.kyt=T.kyt,y.R_t=T.Fy,y.M_t=T.$y,y.dt=T.XD),n&&(g.Byt=T.Byt,g.$yt=T.$yt,S.wm=T.wm,S.ym=T.ym,S.uM=T.uM,y.b_t=T.Sm,y.v_t=T.vm,y.x_t=T.Wyt,y.G_t=T.Uyt,y.P_t=T.Vyt,y.O_t=T.Hyt,y.D_t=T.jyt,y.L_t=T.Xyt),h&&(g.N_t=T.Yyt,g.F_t=T.qyt,g.Kyt=T.Kyt,S.Sk=T.Sk,S.zyt=T.zyt,S.Jyt=T.Jyt,S.Zyt=T.Zyt,S.Qyt=T.Qyt,S.tTt=T.tTt,y.k_t=T.yk),o&&(g.iB=T.iB,g.eTt=T.eTt,S.eB=T.eB,S.Yv=T.Yv,S.iTt=T.iTt,y.Opacity=T.jv,y.B_t=T.Kv),a&&(g.rTt=T.rTt,g.nTt=T.nTt,g.hTt=T.hTt,S.oTt=T.oTt,S.aTt=T.aTt,S.lTt=T.lTt,S.cTt=T.cTt,S.Vy=T.Vy,y.fTt=T.fTt,y.dTt=T.dTt,y.pTt=T.pTt,y.mTt=T.mTt,y.CTt=T.CTt),l&&(g.gTt=T.gTt,S.STt=T.STt,S.yTt=T.yTt),d&&(g.J4=T.J4,g.O8=T.O8,g.RTt=T.RTt,g.vTt=T.vTt,g.xTt=T.xTt,g.GTt=T.GTt,S.q4=T.q4,S.K4=T.K4,S.DTt=T.DTt,y.LTt=T.LTt,y.NTt=T.NTt),p&&(S.FTt=T.FTt,S.E5=T.E5,y.kTt=T.kTt,y.BTt=T.BTt),c&&(g.iB=T.iB,S.eB=T.$Tt,S.$_t=T.N5,S.W_t=T.WTt,S.U_t=T.UTt),u&&(g.V_t=T.jTt,S.H_t=T.VTt,S.j_t=T.HTt),f&&(g.lu=T.qTt,S.X_t=T.XTt),m&&(g.ETt=T.ETt,g.ITt=T.ITt,g.wTt=T.wTt,e.Y_t=FinishCollisionCondition2),i||(g.zTt=T.zTt,g.JTt=T.JTt,g.ZTt=T.ZTt,g.QTt=T.QTt,g.WW=T.WW,S.l_t=T.l_t,S.c_t=T.c_t,S.u_t=T.u_t,S.f_t=T.f_t,S.d_t=T.d_t,S.n_t=T.n_t,g.o_t=T.o_t,g.a_t=T.a_t,S.h_t=T.h_t,S.p_t||(S.p_t=T.p_t),y.S_t||(y.S_t=T.S_t),y.T_t=T.T_t,y.__t=T.__t,y.q_t=T.w7,y.K_t=T.o$,y.y_t=T.y_t,y.t_t=T.t_t,y.s_t=T.s_t,y.i_t=T.i_t,g.wpt=T.wpt,S.S$=T.S$,S.E_t=T.E_t),C&&(y.I_t=T.I_t)}}{const C33=self.Fe;C33.spt=class extends C33.pn{constructor(t){super(),this.u0t=t,this.wf="",this.MP=-1,this.z_t="",this.J_t=!1,this.Z_t=null,this.T0t=0,this.qmt=[],this.R0t=null,this.Q_t=new Map,this.tEt=null,this.eEt=null,this.sEt=-1,this.Q1t=null,this.iEt=null,this.rEt=!1}gn(){this.wf="",this.MP=-1,this.z_t="",this.Z_t=null,this.eEt=null,this.Q1t=null,this.iEt=null,this.sEt=-1,C33.Vh(this.qmt),this.R0t&&(this.R0t.clear(),this.R0t=null);for(const t of this.Q_t.values())t.gn();this.Q_t.clear(),this.tEt=null}Ny(){const t=this.u0t,e=t.hN().eq(),s=t.Qdt(),i=(this.Z_t=s.GD(),this.T0t=s.P0t()+1,t.Ypt(this.Z_t));i&&(this.eEt=i,this.Q1t=i.Cgt(),this.iEt=i.mgt().map(t=>t.Fit()),i.T1t())&&(this.sEt=i.Tgt());for(const n of e){const h=n.ZF();h.Xft()&&!this.Z_t.HCt(n)||(this.qmt.push(n),this.Q_t.set(n,C33.Cn(C33.nEt,h)))}const r=t.PD();this.R0t=0<r.size?r:null}hEt(t){this.wf="timer",this.Ny(),this.MP=this.u0t.hN().KD()+t}oEt(t){this.wf="signal",this.Ny(),this.z_t=t.toLowerCase()}A_t(t,e){this.wf="instance-signals",this.Ny(),this.z_t=e.toLowerCase(),this.tEt=new Set(t)}aEt(t){this.wf="promise",this.Ny(),t.then(()=>this._pt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this._pt()})}lEt(){return"timer"===this.wf}ypt(){return"signal"===this.wf}Mpt(){return"instance-signals"===this.wf}Vpt(){return"promise"===this.wf}Tpt(){return this.z_t}cEt(){return this.J_t}_pt(){this.J_t=!0}bpt(t){this.tEt.delete(t),0===this.tEt.size&&this._pt()}npt(){return this.lEt()?this.MP<=this.u0t.hN().KD():this.cEt()}uEt(t){t.M0t(this.Z_t,this.T0t);for(const[s,i]of this.Q_t.entries()){const r=s.ZF();i.M0t(r)}this.R0t&&t.j0t([...this.R0t]);const e=this.eEt;e&&(e.G1t(this.Q1t),e.mgt().map((t,e)=>t.yrt(this.iEt[e])),e.T1t())&&e._gt(this.sEt)}hpt(t){this.uEt(t),this.Z_t._1t(t),this.eEt&&this.eEt.T1t()&&this.eEt.W1t(this.sEt),this.u0t.J3t(this.qmt),this.rEt=!0}async cpt(t){this.uEt(t);for(const e of this.Z_t.E1t(t))await this.u0t.hN().D3t(e);this.eEt&&this.eEt.T1t()&&this.eEt.W1t(this.sEt),this.u0t.J3t(this.qmt),this.rEt=!0}opt(){return this.rEt}Wft(t){for(const e of this.Q_t.values())e.Wft(t);if("instance-signals"===this.wf){for(const s of t)this.tEt.delete(s);0===this.tEt.size&&this._pt()}}v8(){const t={},e={wt:this.wf,t:this.MP,st:this.z_t,s:this.J_t,ev:this.Z_t.cq(),sm:this.qmt.map(t=>t.cq()),dsm:this.R0t?[...this.R0t].map(t=>t.cq()):null,sols:t};this.Z_t.a1t(this.T0t)&&(e.act=this.Z_t.i3t(this.T0t).cq());for(const[s,i]of this.Q_t)t[s.cq().toString()]=i.v8();return"instance-signals"===this.wf&&(e.pi=[...this.tEt].map(t=>t.o$())),e}static Hpt(t,e){const s=t.hN(),i=t.f3t(e.ev);if(!i)return null;let r=0;if(e.hasOwnProperty("act")){const h=t.p3t(e.act);if(!h)return null;r=h.qO()}const n=C33.Cn(C33.spt,t);n.MP=e.t,e.hasOwnProperty("wt")?n.wf=e.wt:n.wf=-1===n.MP?"signal":"timer",n.z_t=e.st,n.J_t=e.s,n.Z_t=i,n.T0t=r;for(const o of e.sm){const a=s.XV(o);a&&n.qmt.push(a)}if(Array.isArray(e.dsm))for(const l of e.dsm){const c=s.XV(l);c&&(n.R0t||(n.R0t=new Set),n.R0t.add(c))}for(const[u,f]of Object.entries(e.sols)){const d=parseInt(u,10),p=s.XV(d);if(p){const m=C33.Cn(C33.nEt,null);m.x8(t,f),n.Q_t.set(p,m)}}if("instance-signals"===n.wf){n.tEt=new Set;for(const C of e.pi){const g=s.DL(C);g&&n.tEt.add(g)}}return n}}}{const C33=self.Fe;C33.nEt=class extends C33.pn{constructor(t){super(),this.Dft=null,this.fEt=!0,this.ZX=[],t&&(this.Dft=t.YB(),this.fEt=t.Xft(),C33.Yh(this.ZX,t.t0t()))}gn(){this.Dft=null,C33.Vh(this.ZX)}M0t(t){t.Qft(this.fEt),C33.Yh(t.t0t(),this.ZX)}Wft(t){C33.Zh(this.ZX,t)}v8(){return{sa:this.fEt,insts:this.ZX.map(t=>t.o$())}}x8(t,e){const s=t.hN();this.fEt=!!e.sa,C33.Vh(this.ZX);for(const i of e.insts){const r=s.DL(i);r&&this.ZX.push(r)}}}}{let GetNextParamMap2=function(t,e){let s=t.get(e);return s||(s=new Map,t.set(e,s)),s};GetNextParamMap=GetNextParamMap2;const C33=self.Fe;C33.dEt=class extends C33.pn{constructor(t){super(),this.gf=t.runtime,this.pEt=!!t.pF,this.mEt=!!t.CEt,this.gEt=!!t.TF,this.SEt=!!t.yEt,this.TEt=!!t.EF,this._Et=!!t.EEt,this.AEt=!!t.bF,this.IEt=!!t.SF,this.wEt=!!t.IF,this.REt=t.MEt,this.bEt=null,this.vEt=new Map,this.xEt=new Map,this.GEt=new Map,this.PEt=new Map,this.OEt=t.DEt,this.LEt=null}gn(){this.gf=null}hN(){return this.gf}NEt(){}Rpt(){return(2<=this.ASt()?this.LEt:this).constructor}ASt(){return this.REt}FEt(t=!1){let e=this.OEt;return t&&"function"!=typeof e&&2<=this.ASt()?globalThis.mU:e}mF(){return this.pEt}gF(){return this.mEt}yF(){return this.IEt}wF(){return this.wEt}_F(){return this.gEt}ny(){return this.SEt}AF(){return this.TEt}MF(){return this._Et}vF(){return this.AEt}Xgt(t,e){if(!e)throw new Error("missing 'this' binding");let s=this.vEt.get(t);return s||(s=t.bind(e),this.vEt.set(t,s)),s}ySt(t,e,s){if(!e)throw new Error("missing 'this' binding");let i=GetNextParamMap2(this.xEt,t),r=i.get(s);return r||(r=t.bind(e,s),i.set(s,r)),r}TSt(t,e,s,i){if(!e)throw new Error("missing 'this' binding");let r=GetNextParamMap2(this.GEt,t),n=GetNextParamMap2(r,s),h=n.get(i);return h||(h=t.bind(e,s,i),n.set(i,h)),h}_St(t,e,s,i,r){if(!e)throw new Error("missing 'this' binding");let n=GetNextParamMap2(this.PEt,t),h=GetNextParamMap2(n,s),o=GetNextParamMap2(h,i),a=o.get(r);return a||(a=t.bind(e,s,i,r),o.set(r,a)),a}kEt(t){if(!this.mF())throw new Error("must be single-global plugin");this.bEt=t}LF(){if(this.mF())return this.bEt;throw new Error("must be single-global plugin")}FF(){if(this.mF())return this.bEt.FF();throw new Error("must be single-global plugin")}BEt(){const t=this.ASt(),e=(C33.fF.$Et(this,t),this.FEt(!0));if(e){if(this.LEt=new e,!(this.LEt instanceof self.lF))throw new TypeError("plugin class must derive from IPlugin")}else this.LEt=new self.lF;C33.fF.WEt(t)}PF(){return this.LEt}}}{const C33=self.Fe;C33.UEt=class extends C33.dEt{constructor(t,e){super(t),this.VEt=e,this.HEt=0,this.jEt=new Map,this.XEt("elem-focused",t=>t.YEt()),this.XEt("elem-blurred",t=>{t&&t.qEt()})}gn(){super.gn()}KEt(t){const e=this.HEt++;return this.jEt.set(e,t),e}zEt(t){this.jEt.delete(t)}XEt(t,s){this.gf.N$(this.VEt,t,t=>{const e=this.jEt.get(t.elementId);s(e,t)})}}}{const C33=self.Fe;C33.JEt=class extends C33.pn{constructor(t){super(),this.Dft=t,this.gf=t.hN(),this.ZEt=t.$F()}gn(){this.Dft=null,this.gf=null,this.ZEt=null}YB(){return this.Dft}hN(){return this.gf}$F(){return this.ZEt}gW(){return this.Dft.gW()}NEt(){}LSt(t){}Tyt(t){}_yt(t){}Vz(t){}zz(){}Yz(){}C7(t){}QEt(){}FEt(){return null}tAt(t,e,s){const i=C33.Cn(C33.Event,t,e);i.eAt=this,s&&Object.assign(i,s),this.YB().Q7(i)}}}{const C33=self.Fe;C33.sAt=class extends C33.pn{constructor(t,e){super(),this.vs=t,this.VEt=e,this.iAt=null,this.gf=t.hN(),this.Dft=this.vs.YB(),this.rAt=this.Dft.yyt(),this.kJ=null,this.$J=null,this.U$=!1,this.H$=!1,this.b0=null,this.LR=!1}gn(){this.LR=!0,this.nAt(),this.hAt(),this.kJ=null,this.$J=null,this.b0&&(this.b0.gn(),this.b0=null),this.vs=null,this.gf=null,this.Dft=null,this.rAt=null}Sn(){return this.LR}aU(){return this.vs}hN(){return this.gf}YB(){return this.Dft}$F(){return this.rAt.$F()}yyt(){return this.rAt}oAt(){return this.vs.LL()}P$(t){return this.gf.P$(t,this.vs,null)}aAt(t){return this.gf.aAt(t,this.vs,null)}D$(t){return this.gf.D$(t,this.vs,null)}lAt(t,e){return this.gf.lAt(t,this.vs,e)}cAt(t,e){return this.gf.cAt(t,this.vs,e)}uAt(t){return this.gf.uAt(t)}fAt(t,e){this.gf.N$(this.VEt,t,e)}dAt(t){for(const[e,s]of t)this.fAt(e,s)}pAt(t,e){this.gf.Tf(this.VEt,t,e)}mAt(t,e){return this.gf.qL(this.VEt,t,e)}CAt(t,e){if(!this.gf.lD())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.VEt,handler:t,data:e,responseId:null});this.pAt(t,e)}gAt(t){if(!t)throw new Error("cannot set empty component id");this.iAt=t}SAt(){if(this.iAt)return this.gf.K$(this.iAt);throw new Error("wrapper extension component id not set")}J$(t,e){if(!this.iAt)throw new Error("wrapper extension component id not set");this.gf.J$(this.iAt,t,e)}yAt(t){for(const[e,s]of t)this.J$(e,s)}NV(t,e){if(!this.iAt)throw new Error("wrapper extension component id not set");this.gf.NV(this.iAt,t,e)}FV(t,e){if(this.iAt)return this.gf.FV(this.iAt,t,e);throw new Error("wrapper extension component id not set")}q9(){}TAt(){}_At(){this.U$||(this.kJ||(this.kJ=()=>this.q9()),this.gf.zf().addEventListener("tick",this.kJ),this.U$=!0)}nAt(){this.U$&&(this.gf.zf().removeEventListener("tick",this.kJ),this.U$=!1)}EAt(){return this.U$}AAt(){this.H$||(this.$J||(this.$J=()=>this.TAt()),this.gf.zf().addEventListener("tick2",this.$J),this.H$=!0)}hAt(){this.H$&&(this.gf.zf().removeEventListener("tick2",this.$J),this.H$=!1)}IAt(){return this.H$}wAt(){return[]}zy(){return null}Jy(t){}Knt(t){}eht(t,e){}Kht(t,e,s){if(0!==e){const i=this.Knt(t);if("number"!=typeof i)throw new Error("expected number");this.eht(t,i+e,s)}}RAt(t,e,s,i){}MAt(t,...e){t.call(this,...e)}bAt(t,...e){return t.call(this,...e)}FEt(){return null}tAt(t,e,s){if(this.vs.vAt()){const i=this.oAt(),r=C33.Cn(C33.Event,t,e);r.H5=i,s&&Object.assign(r,s),i.dispatchEvent(r)}}ny(){return!1}}}{const C33=self.Fe;C33.xAt=class extends C33.sAt{constructor(t,e){super(t,e),this.Het=t.BL(),this.GAt=null,this.PAt=null}gn(){if(this.GAt){const t=this.gf.zf();t.removeEventListener("renderercontextlost",this.GAt),t.removeEventListener("renderercontextrestored",this.PAt),this.GAt=null,this.PAt=null}this.Het=null,super.gn()}OAt(){this.DAt()}LAt(){}NAt(){}DAt(){if(!this.GAt){this.GAt=()=>this.HX(),this.PAt=()=>this.FAt();const t=this.gf.zf();t.addEventListener("renderercontextlost",this.GAt),t.addEventListener("renderercontextrestored",this.PAt)}}HX(){this.LAt()}FAt(){this.NAt()}BL(){return this.Het}Dst(){return!1}Ost(){if(!this.Dst())throw new Error("original size not known");const t=this.kAt();if(t)return t.Sm()}Nst(){if(!this.Dst())throw new Error("original size not known");const t=this.kAt();if(t)return t.vm()}kAt(){return null}BAt(){const t=this.kAt();if(t){const e=t.z_();if(e)return[e.Sm(),e.vm()]}return[100,100]}$At(){const t=this.kAt();return t?t.UM():null}WAt(){const t=this.kAt();return t?t.UAt():null}VAt(){const t=this.kAt();return!!t&&t.HAt()}Dyt(t){const e=this.vs.BL();return[e.Fy(),e.$y(),e.d4()]}QEt(t,e,s){}jAt(t,e){}h8(){return!0}}}{const C33=self.Fe,tempRect=C33.Cn(C33.Rect);C33.XAt=class extends C33.xAt{constructor(t,e){super(t,e),this.YAt=this.$F().KEt(this),this.qAt=!0,this.KAt=!1,this.zAt=!1,this.JAt=-.2,this.ZAt=C33.Cn(C33.Rect,0,0,-1,-1);const s=this.gf.KN();this.QAt=s.ZU(),this.tIt=s.QU(),this.eIt=-1,this.sIt=-1,this.iIt=!1,this._At()}gn(){this.$F().zEt(this.YAt),this.rIt("destroy"),this.YAt=-1,super.gn()}G5(){if(this.gf.lD())throw new Error("not valid in worker mode");return this.nIt("get-element")}rIt(t,e){(e=e||{}).elementId=this.YAt,this.pAt(t,e)}nIt(t,e){return(e=e||{}).elementId=this.YAt,this.CAt(t,e)}hIt(t,e){return(e=e||{}).elementId=this.YAt,this.mAt(t,e)}oIt(t){t=t||{};const e=this.BL();t.elementId=this.YAt,t.isVisible=e.iB(),t.htmlIndex=e.$L().nV(),t.htmlZIndex=e.hV(),Object.assign(t,this.aIt()),this.qAt=!!t.isVisible,this.CAt("create",t),this.lIt(!0)}$Tt(t){this.qAt!==(t=!!t)&&(this.qAt=t,this.rIt("set-visible",{isVisible:t}))}q9(){this.lIt(!1)}cIt(){const t=this.gf.KN().uV();return"Android"===C33.ds.Cs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}lIt(c){if(!this.aU().fV()){let t=this.BL(),e=t.$L(),s=t.C4(),[i,r]=e.kB(s.Gl(),s.Pl()),[n,h]=e.kB(s.Ol(),s.Dl()),o=this.gf.KN(),a=o.QN(),l=o.eF();if(t.iB()&&e.iB())if(!this.cIt()&&(n<=0||h<=0||a<=i||l<=r))this.$Tt(!1);else{tempRect.set(i,r,n,h);const u=o.ZU(),f=o.QU(),d=e.nV(),p=t.hV();if(!c&&tempRect.equals(this.ZAt)&&this.QAt===u&&this.tIt===f&&this.eIt===d&&this.sIt===p)this.$Tt(!0);else{this.ZAt.I(tempRect),this.QAt=u,this.tIt=f,this.eIt=d,this.sIt=p,this.$Tt(!0);let t=null;this.zAt&&(t=e.dV()+this.JAt),this.rIt("update-position",{left:Math.round(this.ZAt.Gl()),top:Math.round(this.ZAt.Pl()),width:Math.round(this.ZAt.width()),height:Math.round(this.ZAt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.$Tt(!1)}}O5(){this.nIt("focus",{focus:!0})}D5(){this.nIt("focus",{focus:!1})}YEt(){this.KAt=!0}qEt(){this.KAt=!1}jTt(){return this.KAt}N5(t,e){this.rIt("set-css-style",{prop:C33.Xo(t),val:e})}WTt(t,e){this.rIt("set-attribute",{name:t,val:e})}UTt(t){this.rIt("remove-attribute",{name:t})}uIt(){this.iIt||(this.iIt=!0,Promise.resolve().then(()=>{this.iIt=!1,this.rIt("update-state",this.aIt())}))}aIt(){}fIt(){return this.YAt}}}{const C33=self.Fe,IBehavior=self.Y5;C33.dIt=class extends C33.pn{constructor(t){super(),this.gf=t.runtime,this.pIt=C33.Cn(C33.Su),this.mIt=C33.Cn(C33.Su),this.REt=t.MEt,this.OEt=t.DEt,this.CIt=null}gn(){this.mIt.gn(),this.pIt.gn(),this.gf=null}hN(){return this.gf}NEt(){}ASt(){return this.REt}FEt(t=!1){let e=this.OEt;return t&&"function"!=typeof e&&2<=this.ASt()?globalThis.EV:e}gIt(t){this.pIt.Eu(t)}T9(){return this.pIt.Au()}VY(t){this.mIt.Eu(t)}XY(t){this.mIt.pu(t)}JF(){return this.mIt.Au()}BEt(){const t=this.ASt(),e=(C33.fF.$Et(this,t),this.FEt(!0));if(e){if(this.CIt=new e,!(this.CIt instanceof IBehavior))throw new TypeError("behavior class must derive from IBehavior")}else this.CIt=new IBehavior;C33.fF.WEt(t)}k5(){return this.CIt}}}{const C33=self.Fe;C33.SIt=class extends C33.pn{constructor(t){super(),this.gf=t.hN(),this.o2t=t,this.Dft=t.YB(),this.yIt=t.B5(),this.yIt.gIt(this.Dft)}gn(){this.gf=null,this.o2t=null,this.Dft=null,this.yIt=null}NEt(){}V5(){return this.o2t}YB(){return this.Dft}hN(){return this.gf}B5(){return this.yIt}}}{const C33=self.Fe;C33.TIt=class extends C33.pn{constructor(t,e){super(),this._It=t,this.VEt=e,this.vs=t.j5(),this.gf=t.hN(),this.o2t=t.V5(),this.rAt=this.o2t.yyt(),this.U$=!1,this.H$=!1,this.DV=!1,this.b0=null}gn(){this.nAt(),this.hAt(),this.EIt(),this.b0&&(this.b0.gn(),this.b0=null),this._It=null,this.vs=null,this.gf=null,this.o2t=null,this.rAt=null}B5(){return this.o2t.B5()}AIt(){return this._It}j5(){return this.vs}YB(){return this.vs.YB()}BL(){return this.vs.BL()}hN(){return this.gf}V5(){return this.o2t}yyt(){return this.rAt}oAt(){return this._It.oAt()}P$(t){return this.gf.P$(t,this.vs,this.o2t)}aAt(t){return this.gf.aAt(t,this.vs,this.o2t)}D$(t){return this.gf.D$(t,this.vs,this.o2t)}IIt(){}q9(){}TAt(){}wIt(){}_At(){this.U$||(this.gf.bV(this),this.U$=!0)}nAt(){this.U$&&(this.gf.vV(this),this.U$=!1)}EAt(){return this.U$}AAt(){this.H$||(this.gf.xV(this),this.H$=!0)}hAt(){this.H$&&(this.gf.GV(this),this.H$=!1)}IAt(){return this.H$}RIt(){this.DV||(this.gf.PV(this),this.DV=!0)}EIt(){this.DV&&(this.gf.OV(this),this.DV=!1)}MIt(){return this.DV}wAt(){return[]}fAt(t,e){this.gf.N$(this.VEt,t,e)}bIt(t,e){}zy(){return null}Jy(t){}Knt(t){}eht(t,e){}Kht(t,e){if(0!==e){const s=this.Knt(t);if("number"!=typeof s)throw new Error("expected number");this.eht(t,s+e)}}RAt(t,e,s,i){}MAt(t,...e){t.call(this,...e)}bAt(t,...e){return t.call(this,...e)}FEt(){return null}tAt(t,e,s){if(this._It.vAt()){const i=this.oAt(),r=C33.Cn(C33.Event,t,e);r.vIt=i,r.H5=i.H5,s&&Object.assign(r,s),i.dispatchEvent(r)}}}}{let ValidateInternalAPIToken2=function(t){if(t!==internalApiToken)throw new Error("invalid internal API token")},C33=(ValidateInternalAPIToken=ValidateInternalAPIToken2,self.Fe),internalApiToken=(C33.E7={},C33.hlt={},C33.ke()),initObjectStack=[],initObjectStack2=[],initPropertiesStack=[],originalPushInitObject=null,originalPopInitObject=null,originalGetInitObject=null,originalGetInitObject2=null,pluginsByCtor=new Map,behaviorsByCtor=new Map;C33.fF=class extends C33.pn{constructor(t,e){super(),this.gf=t,this.xIt=[],this.Wgt=null,this.GIt=[],this.PIt=new Map,this.OIt=null,this.DIt=null,this.LIt=new Set(e)}NIt(t){const e=t[19],s=this.gf.j1t(t[0]);if(!s)throw new Error("missing plugin");C33.w_t(t,s,e);const i=2<=e?C33.dEt:s,r=C33.Cn(i,{runtime:this.gf,pF:t[1],CEt:t[2],TF:t[5],EF:t[8],yEt:t[9],EEt:t[13],bF:t[14],SF:t[17],IF:t[18],MEt:e,DEt:2<=e?s:null});r.NEt(),this.xIt.push(r),pluginsByCtor.set(s,r)}FIt(){this.Wgt=C33.Cn(C33.E7._7,{runtime:this.gf,pF:!0}),this.Wgt.NEt()}kIt(t){const s=t[1],i=this.gf.j1t(t[0]);if(!i)throw new Error("missing behavior");this.PIt.set(i,()=>{const t=2<=s?C33.dIt:i,e=C33.Cn(t,{runtime:this.gf,MEt:s,DEt:2<=s?i:null});e.NEt(),this.GIt.push(e),behaviorsByCtor.set(i,e),!this.OIt&&C33.hlt.solid&&e instanceof C33.hlt.solid?this.OIt=e:!this.DIt&&C33.hlt.jumpthru&&e instanceof C33.hlt.jumpthru&&(this.DIt=e),e.BEt()})}BIt(t){const e=this.PIt.get(t);e&&(e(),this.PIt.delete(t))}static $Et(t,e=1){if(C33.fF.$Et!==originalPushInitObject)throw new Error("invalid method");1===e&&initObjectStack.push(t),initObjectStack2.push(t)}static WEt(t=1){if(C33.fF.WEt!==originalPopInitObject)throw new Error("invalid method");1===t&&initObjectStack.pop(),initObjectStack2.pop()}static JB(){if(C33.fF.JB!==originalGetInitObject)throw new Error("invalid method");if(0===initObjectStack.length)throw new Error("no init object set");return initObjectStack.at(-1)}static uF(t){if(C33.fF.uF!==originalGetInitObject2)throw new Error("invalid method");if(ValidateInternalAPIToken2(t),0===initObjectStack2.length)throw new Error("no init object set");return initObjectStack2.at(-1)}static $It(t){initPropertiesStack.push(t)}static WIt(){initPropertiesStack.pop()}static x$(){if(0===initPropertiesStack.length)throw new Error("no init properties set");return initPropertiesStack.at(-1)}UIt(){for(const t of this.xIt)t.BEt()}static GF(t){return pluginsByCtor.get(t)||null}static q5(t){return behaviorsByCtor.get(t)||null}Ugt(){return this.Wgt}VIt(){return this.OIt}HIt(){return this.DIt}K$(t){return this.LIt.has(t)}},originalPushInitObject=C33.fF.$Et,originalPopInitObject=C33.fF.WEt,originalGetInitObject=C33.fF.JB,originalGetInitObject2=C33.fF.uF}{const C33=self.Fe,allImageInfos=new Set;C33.jIt=class extends C33.pn{constructor(){super(),this.XIt=0,this.OX="",this.DX=0,this.YIt=0,this.qIt=0,this.eC=0,this.sC=0,this.KIt=!1,this.zIt=!1,this.JIt=null,this.ZIt="",this.vR=C33.Cn(C33.Rect),this.QIt=C33.Cn(C33.ac),this.twt="",this.ewt=new self.rN(this),allImageInfos.add(this)}gn(){this.PR(),this.JIt&&0===this.JIt.YX()&&this.JIt.gn(),this.JIt=null,allImageInfos.delete(this),this.swt()}static HX(){for(const t of allImageInfos)t.ZIt="",t.vR.set(0,0,0,0),t.QIt.Pc(t.vR)}iwt(t){this.OX=t[0],this.DX=t[1],this.YIt=t[2],this.qIt=t[3],this.eC=t[4],this.sC=t[5],this.KIt=t[6],this.zIt=!0}rwt(t,e){if(this.JIt)throw new Error("already loaded asset");this.OX=e;const s={};return C33.Io(e)&&(s.cX="remote"),this.nN(t,s),this.JIt.dX()}nwt(t,e){if(this.JIt)throw new Error("already loaded asset");this.OX="",this.DX=e.size,this.JIt=C33.Cn(C33.uX,t.ZO(),{blob:e,size:this.DX,cX:"local"})}hwt(t){if(t===this)throw new Error("cannot replace with self");this.XIt++,this.PR(),this.OX=t.OX,this.DX=t.DX,this.YIt=t.YIt,this.qIt=t.qIt,this.eC=t.eC,this.sC=t.sC,this.KIt=t.KIt,this.zIt=t.zIt,this.JIt=t.JIt,this.ZIt=t.ZIt,this.vR=t.vR,this.QIt=t.QIt,this.swt()}fX(){return this.OX}Cu(){return this.DX}owt(){return this.YIt}awt(){return this.qIt}HAt(){return this.KIt}Sm(){return this.eC}vm(){return this.sC}lwt(){return this.JIt.Sm()}cwt(){return this.JIt.vm()}nN(t,e){if(this.JIt)throw new Error("already got asset");e=Object.assign({},e,{url:this.fX(),size:this.Cu()}),this.JIt=t.lX(e)}kX(){return this.JIt&&this.JIt.kX()}async HH(t,e){if(!this.JIt)throw new Error("no asset");if(this.ZIt)throw new Error("already loaded texture");const s=this.XIt,i=(this.ZIt="loading",await this.JIt.HH(t,e));if(this.XIt!==s)return null;if(!i)return this.ZIt="",null;this.ZIt="loaded",this.zIt||(this.eC=i.Sm(),this.sC=i.vm(),this.zIt=!0);const r=this.KIt?this.sC:this.eC,n=this.KIt?this.eC:this.sC;return this.vR.set(this.YIt,this.qIt,this.YIt+r,this.qIt+n),this.vR.vt(i.Sm(),i.vm()),this.QIt.Pc(this.vR),this.KIt&&this.QIt.kc(),i}PR(){this.ZIt&&(this.JIt&&this.JIt.PR(),this.ZIt="",this.vR.set(0,0,0,0),this.QIt.Pc(this.vR))}z_(){return this.JIt&&"loaded"===this.ZIt?this.JIt.z_():null}UM(){return this.vR}UAt(){return this.QIt}bU(){return this.ewt}uwt(){return this.JIt}async fwt(t){t=t||await this.JIt.qX();const e=C33.Fo(this.eC,this.sC),s=e.getContext("2d");return this.KIt?(s.rotate(Math.PI/-2),s.translate(-this.sC,0),s.drawImage(t,this.YIt,this.qIt,this.sC,this.eC,0,0,this.sC,this.eC)):s.drawImage(t,this.YIt,this.qIt,this.eC,this.sC,0,0,this.eC,this.sC),e}async dwt(t){if(!this.twt){const e=await this.fwt(t),s=await C33.ko(e);this.twt=URL.createObjectURL(s)}return this.twt}swt(){this.twt&&(URL.revokeObjectURL(this.twt),this.twt="")}}}{const C33=self.Fe;C33.pwt=class extends C33.pn{constructor(t){super(),this.Tn=t[0],this.mwt=t[1],this.Z2t=!!t[2],this.Rot=t[3],this.Cwt=t[4],this.gwt=!!t[5],this.x6=t[6],this.Swt=t[7].map(t=>C33.Cn(C33.ywt,t)),this.Twt=new self.tW(this)}static _wt(t,e){const s=C33.Cn(C33.pwt,[e,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return s.Swt.push(C33.ywt._wt(t)),s}gn(){for(const t of this.Swt)t.gn();C33.Vh(this.Swt)}Ewt(t){for(const e of this.Swt)e.gW().nN(t)}Awt(e,s){return Promise.all(this.Swt.map(t=>t.gW().HH(e,s)))}Iwt(){for(const t of this.Swt)t.gW().PR()}lf(){return this.Tn}cq(){return this.x6}aW(){return this.Swt.length}cW(){return this.Swt}wwt(t){if((t=Math.floor(t))<0||t>=this.Swt.length)throw new RangeError("invalid frame");return this.Swt[t]}Rwt(t,e){(e=Math.floor(e))<0?this.Swt.unshift(t):e>=this.Swt.length?this.Swt.push(t):this.Swt.splice(e,0,t)}Mwt(t){if((t=Math.floor(t))<0||t>=this.Swt.length)throw new RangeError("invalid frame");this.Swt[t].gn(),this.Swt.splice(t,1)}bwt(s){for(let t=0,e=this.Swt.length;t<e;++t)if(C33.Ir(this.Swt[t].NW(),s))return t;return-1}vwt(t){if("string"!=typeof t)return t;{const e=this.bwt(t);if(-1===e)throw new Error("cannot find animation frame with tag "+t);return e}}eW(){return this.mwt}sW(){return this.Z2t}iW(){return this.Rot}nW(){return this.Cwt}oW(){return this.gwt}xwt(){return this.Twt}}}{const C33=self.Fe,EMPTY_IMAGE_BLOB=(()=>{const s=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),i=new Uint8Array(s.length);for(let t=0,e=s.length;t<e;++t)i[t]=s.charCodeAt(t);return new Blob([i],{type:"image/png"})})();C33.ywt=class extends C33.pn{constructor(t){super(),this.Gwt=C33.Cn(C33.jIt),this.Gwt.iwt(t),this.Pwt=t[7],this.Owt=C33.Cn(C33.ol,t[8],t[9]),this.Dwt=t[10].map(t=>C33.Cn(C33.Lwt,this,t)),this.Nwt=new Map;for(const s of this.Dwt)this.Nwt.set(s.lf().toLowerCase(),s);this.Fwt=null;const e=t[11];6<=e.length&&(this.Fwt=C33.Cn(C33.jc,e)),this.e1=t[12]||"",this.kwt=new self.mW(this)}static _wt(t){const e=C33.Cn(C33.ywt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return e.Gwt.nwt(t,EMPTY_IMAGE_BLOB),e}gn(){this.Fwt&&(this.Fwt.gn(),this.Fwt=null),this.Gwt.gn(),this.Gwt=null}gW(){return this.Gwt}SW(){return this.Pwt}TW(){return this.Owt.fl()}EW(){return this.Owt.pl()}PW(){return this.Fwt}xW(t){return this.Nwt.get(t.toLowerCase())||null}vW(t){return(t=Math.floor(t))<0||t>=this.Dwt.length?null:this.Dwt[t]}wW(){return this.Dwt.length}NW(){return this.e1}uW(){return this.kwt}}}{const C33=self.Fe;C33.Lwt=class extends C33.pn{constructor(t,e){super(),this.Bwt=t,this.Tn=e[0],this.$wt=C33.Cn(C33.ol,e[1],e[2])}gn(){}lf(){return this.Tn}Fy(){return this.$wt.fl()}$y(){return this.$wt.pl()}Wwt(){return this.$wt}}}{const C33=self.Fe,C3Debugger=self.C3Debugger,IObjectClass=self.kF,assert=self.assert;C33.hct=class extends C33.pn{constructor(e,t,s){super();const i=e.j1t(s[1]),[r,n]=(this.gf=e,this.ZEt=C33.fF.GF(i),this.rAt=null,this.Uwt=i.Instance,this.t1=t,this.x6=s[11],this.Tn=s[0],this.bgt=this.gf.l3t(s[14]),this.Vwt=!!s[9],this.Hwt=!!s[2],this.jwt=!!s[10],this.Xwt=s[3].map(t=>({sid:t[0],type:t[1],name:t[2],Ywt:e.l3t(t[3])})),this.qwt=s[4],this.Kwt=s[5],this.mEt=this.ZEt.gF(),this.zwt=C33.Cn(C33.Event.zf),this.dY=null,e.eD().LN());if(this.Jwt=C33.Cn(C33.Zwt,r,n),this.Qwt=!0,this.tRt=null,this.eRt=null,this.sRt=-1,this.iRt=null,this.rRt=null,this.nRt=null,this.hRt=null,this.oRt=null,this.aRt=!1,this.lRt=null,this.cRt=s[8].map(t=>C33.uRt.CE(this,t)),this.fRt=[],this.dRt=new Map,this.pRt=new Map,this.mRt=new Set,this.CRt=new Map,this.gRt=C33.Cn(C33.Oft,this),this.SRt=null,this.yRt=0,this.TRt=!1,this.lRt=null,this.Gwt=null,this._Rt=null,this.ERt=null,this.ARt=null,this.IRt=0,this.iSt=new Map,this.rSt=new Map,this.ZX=[],this.wRt=new Map,this.RRt=!0,this.ZEt.AF()&&(this.dY=C33.Cn(C33.pY,this,s[12])),s[6]&&(this.Gwt=C33.Cn(C33.jIt),this.Gwt.iwt(s[6])),s[7]){this._Rt=s[7].map(t=>C33.Cn(C33.pwt,t)),this.ERt=new Map,this.ARt=new Map;for(const a of this._Rt)this.ERt.set(a.lf().toLowerCase(),a),this.ARt.set(a.cq(),a)}this.Hwt?(this.tRt=[],this.eRt=new Set,this.sRt=this.gf.MRt()):(this.iRt=[],this.rRt=new Set,this.nRt=[],this.hRt=[],this.oRt=[]);const h=this.ZEt.ASt();if(h<2&&(this.rAt=C33.Cn(i.bRt,this,s[15]),!(this.rAt instanceof C33.JEt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.vRt=null,this.xRt=null,this.mz=C33.Cn(C33.Event.zf),C33.fF.$Et(this,h);let o;if(o=2<=h?(o=i.bRt)||globalThis.wU:this.rAt.FEt()){if(this.vRt=new o(h<2?this:null),h<2&&!(this.vRt instanceof IObjectClass))throw new TypeError("script interface class must derive from IObjectClass");if(2<=h&&!(this.vRt instanceof globalThis.wU))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.vRt=new IObjectClass;if(C33.fF.WEt(h),s[13]){const l=s[13];if(l){const c=l[0],u=l[1],f=l[2];this.rAt.QEt(c,u,f)}}this.gf.GRt()&&!this.Hwt&&!this.jwt&&this.mEt||this.NEt(),this.ZEt.mF()&&(this.ZEt.kEt(this),this.PRt(s)),this.ORt=null}static CE(t,e,s){return C33.Cn(C33.hct,t,e,s)}gn(){if(this.zwt.gn(),this.zwt=null,this.Gwt&&(this.Gwt.gn(),this.Gwt=null),this._Rt){for(const t of this._Rt)t.gn();C33.Vh(this._Rt),this.ERt.clear(),this.ARt.clear()}this.ORt=null,this.gRt.gn(),this.gRt=null,this.iSt.clear(),this.rSt.clear(),this.lRt=null,this.gf=null}DRt(s){for(let t=1,e=s.length;t<e;++t){const i=this.gf.PY(s[t]);this.tRt.push(i),this.eRt.add(i),i.iRt.push(this),i.rRt.add(this)}}LRt(t){this.aRt=!0,this.lRt=t}n$(){return this.aRt}$z(){return this.lRt}NRt(){let t=0;if(!this.Hwt)for(const e of this.iRt)for(const s of e.FRt()){const i=s.lf().toLowerCase();this.dRt.set(i,s),this.pRt.set(i,t),this.fRt.push(s),++t}for(const r of this.FRt()){const n=r.lf().toLowerCase();this.dRt.set(n,r),this.pRt.set(n,t),this.fRt.push(r),++t}for(const h of this.fRt)this.mRt.add(h.B5().constructor);if(!this.Hwt&&this.iRt.length){let t=this.gf.kRt(),e=(C33.jh(this.nRt,t,0),C33.jh(this.hRt,t,0),C33.jh(this.oRt,t,0),[]),s=0,i=0,r=0;for(const o of this.iRt){const a=o.n2t(),l=(this.nRt[a]=s,s+=o.BRt(),this.hRt[a]=i,i+=o.$Rt(),this.oRt[a]=r,r+=o.WRt(),o.fk());if(l&&this.dY)for(const c of l.dk())e.push(c.URt(this.dY))}this.dY&&this.dY.VRt(e)}}PRt(t){const e=this.gf.HRt(),s=C33.Cn(C33.Instance,{runtime:this.gf,XB:this,uid:e});s.jRt(t[16],[]),this.gf.XRt(e,s),this.ZX.push(s)}yyt(){return this.rAt}YRt(){return this.jwt}zf(){return this.zwt}NEt(){this.Hwt||(this.rAt?this.rAt.NEt():this.vRt.RU())}qRt(){return 0<this.IRt}async Vz(t){this.Hwt||(this.IRt++,1===this.IRt&&(this.rAt?await this.rAt.Vz(t):await this.vRt.vU(this.gf.KN().KRt())))}zz(){if(!this.Hwt){if(this.IRt--,this.IRt<0)throw new Error("released textures too many times");0===this.IRt&&(this.rAt?this.rAt.zz():this.vRt.xU(this.gf.KN().KRt()))}}Yz(){if(this.Hwt)throw new Error("not applicable to family");this.rAt?this.rAt.Yz():this.vRt.GU()}async C7(t){this.Hwt||(this.rAt?await this.rAt.C7(t):await this.vRt.PU(this.gf.KN().KRt()))}hN(){return this.gf}$F(){return this.ZEt}zRt(){return this.Uwt}lf(){return this.Tn}l3t(){return this.bgt}qO(){return this.t1}cq(){return this.x6}sq(){return this.Hwt}UY(){return this.Vwt}gF(){return this.mEt}n2t(){return this.sRt}FRt(){return this.cRt}$Rt(){return this.qwt}JRt(t){return t&&this.mRt.has(t)}BRt(){return this.Xwt.length}ZRt(){return this.Xwt.map(t=>t.sid)}QRt(e){return this.Xwt.findIndex(t=>t.sid===e)}gst(e){return this.Xwt.findIndex(t=>t.name===e)}tMt(){return this.Xwt.map(t=>t.name)}eMt(){return this.Xwt.map(t=>t.Ywt)}yst(t){if((t=Math.floor(t))<0||t>=this.Xwt.length)throw new RangeError("invalid instance variable index");return this.Xwt[t].type}Sst(t){if((t=Math.floor(t))<0||t>=this.Xwt.length)throw new RangeError("invalid instance variable index");return this.Xwt[t].name}WRt(){return this.Kwt}sMt(){return this.fRt}Vrt(t){return this.dRt.get(t.toLowerCase())||null}_st(t){const e=this.pRt.get(t.toLowerCase());return void 0===e?-1:e}fk(){return this.dY}AF(){return this.ZEt.AF()}iMt(){return this.dY&&this.dY.rMt()}Z3t(){return this.gRt}ZF(){return this.gRt.ZF()}gW(){return this.Gwt}LY(t){this.SRt=t}DY(){return this.SRt}NY(t){this.yRt=t}nMt(){return this.yRt}hMt(){return this._Rt}oMt(){return this._Rt.length}C3t(){return this.iRt}Iyt(t){return this.rRt.has(t)}bCt(){return this.tRt}iq(t){return this.eRt.has(t)}c2t(t){return this.hRt[t]}r2t(t){return this.nRt[t]}fgt(t){this.CRt.set(t.ggt().toLowerCase(),t)}dgt(t){return!!this.Agt(t)}Agt(t){const e=this.CRt.get(t.toLowerCase());return e&&e.lu()?e:null}aMt(){return this._Rt}lMt(t){if(this._Rt)return this.ERt.get(t.toLowerCase())||null;throw new Error("no animations")}cMt(t){if(this._Rt)return this.ARt.get(t)||null;throw new Error("no animations")}uMt(t){if(this.lMt(t))throw new Error(`animation name '${t}' already exists`);const e=C33.pwt._wt(this.hN(),t);return this._Rt.push(e),this.ERt.set(e.lf().toLowerCase(),e),this.ARt.set(e.cq(),e),e}fMt(t){const e=this.lMt(t);if(!e)throw new Error(`animation name '${t}' does not exist`);if(1===this._Rt.length)throw new Error("cannot remove last animation");const s=this._Rt.indexOf(e);this._Rt.splice(s,1),this.ERt.delete(e.lf().toLowerCase()),this.ARt.delete(e.cq()),e.gn()}dMt(){if(this._Rt)return this._Rt[0];throw new Error("no animations")}pMt(){return this.dMt().wwt(0)}mMt(){if(this._Rt){const t=this.pMt().gW();return[t.Sm(),t.vm()]}return this.Gwt?[this.Gwt.Sm(),this.Gwt.vm()]:[100,100]}FF(){if(this.ZEt.mF())return this.ZX[0];throw new Error("not a single-global plugin")}JF(){return this.ZX}*instances(){yield*this.ZX}*zF(){yield*this.ZX,yield*this.gf.MTt(this)}ek(){return this.ZX.length}VY(t){this.ZX.push(t)}CMt(){this.RRt=!0}b7(){if(this.RRt&&!this.Hwt){let e=this.ZX,s=0;for(let t=e.length;s<t;++s)e[s].gMt(s);const t=this.gf.SMt();for(const i of t)i.YB()===this&&i.gMt(s++);this.RRt=!1}}yMt(t){const e=this.ZX;if(t<e.length)return e[t];t-=e.length;const s=this.gf.SMt();for(const i of s)if(i.YB()===this){if(0===t)return i;--t}return null}uTt(t){if(t&&t.n$()&&t.YB()!==this)for(const s of t.h$())if(s.YB()===this)return s;const e=this.ZF().JF();return e.length?e[0]:null}KF(t){const e=this.ZF().JF();return 0<e.length?e[t.w7()%e.length]:null}*OTt(t,e){let s=this.ZF().JF(),i=s.length,r=e.ZF(),n=e.ZF().JF(),h=n.length,o=t.w7(),a=(!e.sq()&&r.Xft()||(o=n.indexOf(t)),Math.ceil(i/h)),l=i%h,c=0,u;u=0==l||o<l?(c=o*a,a):(c=l*a+(o-l)*(a-1),a-1);for(let t=c,e=c+u;t<e;++t)yield s[t]}LSt(t){this.rAt?.LSt(t)}N1t(){if(this.aRt&&!this.Hwt){this.b7();const t=this.ZF(),e=t.t0t(),s=t.Xft(),i=this.gf.Qdt(),r=i&&i.GD()&&i.GD().l0t();for(const n of this.lRt.R7())if(n!==this){n.b7();const h=n.ZF();if(h.Qft(s),!s){const o=h.t0t();C33.Vh(o);for(const a of e)o.push(n.yMt(a.w7()));if(r){const l=t.e0t(),c=h.e0t();C33.Vh(c);for(const u of l)c.push(n.yMt(u.w7()))}}}}}$St(t,e){for(const s of this.$z().R7()){const i=s.ZF();t?C33.Uh(i.e0t(),e):C33.Uh(i.t0t(),e)}}TMt(){return this.Jwt}_Mt(t){this.Qwt=!!t}EMt(){if(this.Qwt&&this.mEt){for(const t of this.ZX)t.BL().AMt();for(const e of this.gf.SMt())e.YB()===this&&e.BL().AMt();this.Qwt=!1}}IMt(e,t,s){if(t){const i=this.wRt.get(t);i&&(i.delete(e),0===i.size)&&this.wRt.delete(t)}if(s){let t=this.wRt.get(s);t||(t=new Set,this.wRt.set(s,t)),t.add(e)}}wMt(){if(this.sq()){const t=new Set;for(const e of this.tRt)for(const s of e.wMt())t.add(s);return t.values()}return this.wRt.keys()}vSt(){return this.iSt||(this.iSt=new Map),this.iSt}xSt(){return this.rSt||(this.rSt=new Map),this.rSt}RMt(){return this.JRt(C33.hlt.solid)}MMt(){return this.JRt(C33.hlt.jumpthru)}bMt(){return this.JRt(C33.hlt.NoSave)}$Y(){return this.JRt(C33.hlt.Persist)}v8(){const t={instances:this.ZX.map(t=>t.zy())};return this.iSt&&this.iSt.size&&(t.ex=C33.Ho(this.iSt)),t}x8(t,i){this.iSt&&(this.iSt.clear(),this.iSt=null);const e=t.ex,r=(e&&(this.iSt=C33.jo(e)),this.ZX),n=t.instances;for(let t=0,e=Math.min(r.length,n.length);t<e;++t)r[t].Jy(n[t]);for(let t=n.length,e=r.length;t<e;++t)this.gf.t$(r[t]);for(let s=r.length,t=n.length;s<t;++s){let t=n[s],e=null;if(!this.gF()||(e=this.gf.gL().xz(t.w.l))){const h=this.gf.WY(this.SRt||this,e,!1,0,0,!0);h.Jy(t),i&&i.add(h)}}this.ORt=n,this.CMt()}vMt(){return this.ORt}xMt(){this.ORt=null}GMt(){for(let t=0,e=this.ZX;t<e;++t)this.ZX[t].GMt()}DF(){return this.vRt}_D(){return this.mz}PMt(){return this.xRt}sk(t){this.xRt=t}Q7(t){const e=this.gf,s=e.tJ()&&!e.wD().ak();s&&C3Debugger.StartMeasuringScriptTime(),this.mz.dispatchEvent(t),s&&C3Debugger.AddScriptTime()}}}{const C33=self.Fe;C33.OMt=class extends C33.pn{constructor(t,e){super(),this.gf=t,this.DMt=e;for(const s of this.DMt)s.LRt(this)}gn(){this.gf=null}hN(){return this.gf}Bz(){return this.DMt}R7(){return this.DMt}x7(){return this.DMt.some(t=>t.gF())}}}{let C33=self.Fe,C3Debugger=self.C3Debugger,IInstance=self.jB,originalAddonManager=C33.fF,EMPTY_ARRAY=[],nextPuid=0,savedDataMaps=new WeakMap,unsavedDataMaps=new WeakMap,FLAG_DESTROYED=1,FLAG_TILEMAP=2,FLAG_MUST_PREDRAW=4,FLAG_SOLID_ENABLED=8,FLAG_JUMPTHRU_ENABLED=16,FLAG_MUST_MITIGATE_Z_FIGHTING=32,FLAG_IS_DRAWING_WITH_EFFECTS=64;C33.Instance=class extends C33.pn{constructor(t){if(C33.fF!==originalAddonManager)throw new Error("invalid addon manager");super(),this.gf=t.runtime,this.LMt=t.XB,this.Het=null,this.NMt=null,this.FMt=null,this.kMt=0,this.BMt=t.uid,this.$Mt=nextPuid++,this.HSt=0,this.WMt=null;const e=C33.ao(t.tags),s=(0<e.length&&(this.WMt=new Set(e)),this.UMt=EMPTY_ARRAY,this.VMt=EMPTY_ARRAY,this.LMt.sMt()),i=(0<s.length&&(this.VMt=s.map((t,e)=>C33.Cn(C33.HMt,{runtime:this.gf,W5:t,H5:this,index:e}))),this.jMt=this.LMt.n$()?[]:null,this.XMt=-1,this.zwt=null,this.$F());if(i.ny()&&(this.HSt|=FLAG_MUST_PREDRAW),i.gF())if(this.Het=C33.Cn(C33.YMt,this,t.h4),t.qMt)this.Het.KMt(t.qMt);else{this.Het.zMt();const[r,n]=this.LMt.mMt();this.Het.uM(r,n),this.YB().iMt()&&this.Het.n4().JMt()}t.ZMt?this.QMt(t.ZMt):this.tbt()}gn(){if(this.FMt&&(this.FMt.ZB(),this.FMt=null),0<this.VMt.length){for(const s of this.VMt)s.gn();C33.Vh(this.VMt)}this.NMt&&(this.NMt.gn(),this.NMt=null);const t=savedDataMaps.get(this),e=(t&&(t.clear(),savedDataMaps.delete(this)),unsavedDataMaps.get(this));e&&(e.clear(),unsavedDataMaps.delete(this)),this.jMt&&C33.Vh(this.jMt),this.zwt&&(this.zwt.gn(),this.zwt=null),this.WMt&&this.WMt.clear(),this.WMt=null,this.gf=null,this.LMt=null,0<this.UMt.length&&C33.Vh(this.UMt),this.Het&&(this.Het.gn(),this.Het=null)}QMt(t){0<t.length&&(this.UMt=[],C33.Yh(this.UMt,t))}tbt(){const e=this.LMt.BRt();if(0!==e){this.UMt=[];const s=[0,0,""];for(let t=0;t<e;++t)this.UMt.push(s[this.LMt.yst(t)])}}jRt(t,s){if(this.NMt)throw new Error("already got sdk instance");for(let t=0,e=this.VMt.length;t<e;++t){const i=this.VMt[t];i.jRt(s?s[t]:null)}const e=this.$F().ASt();if(e<2){if(this.NMt=C33.Cn(this.LMt.zRt(),this,t),!(this.NMt instanceof C33.sAt))throw new Error("sdk type must derive from SDKInstanceBase");!this.$F().gF()&&this.LMt.PMt()&&this.LL()}else{const r=this.$F().FEt();this.ebt(r.Instance,t)}}P5(){return this.NMt??this.FMt}BL(){return this.Het}hN(){return this.gf}ZD(){return this.XMt}c$(){const t=this.XMt;return-1===t?this.hN().ZD():t}QD(t){((t=+t)<0||!isFinite(t))&&(t=0),this.XMt=t,this.YB().iMt()&&this.gf.sbt(this,!0)}f$(){this.XMt=-1,this.YB().iMt()&&this.gf.sbt(this,!1)}g8(){return this.gf.ibt(this)}zf(){return this.zwt||(this.zwt=C33.Cn(C33.Event.zf)),this.zwt}wT(t){this.NMt?this.NMt.wT(t):this.FMt.BU(this.gf.KN().KRt())}NEt(t){this.NMt.NEt(t)}rbt(){this.HSt|=FLAG_TILEMAP}nbt(){return 0!=(this.HSt&FLAG_TILEMAP)}hbt(){this.HSt|=FLAG_DESTROYED}fV(){return 0!=(this.HSt&FLAG_DESTROYED)}ny(){return 0!=(this.HSt&FLAG_MUST_PREDRAW)||this.NMt.ny()}obt(){this.HSt|=FLAG_MUST_MITIGATE_Z_FIGHTING}a8(){return 0!=(this.HSt&FLAG_MUST_MITIGATE_Z_FIGHTING)}abt(){return 0!=(this.HSt&FLAG_SOLID_ENABLED)}lbt(t){t?this.HSt|=FLAG_SOLID_ENABLED:this.HSt&=~FLAG_SOLID_ENABLED}cbt(){return 0!=(this.HSt&FLAG_JUMPTHRU_ENABLED)}ubt(t){t?this.HSt|=FLAG_JUMPTHRU_ENABLED:this.HSt&=~FLAG_JUMPTHRU_ENABLED}fbt(){return 0!=(this.HSt&FLAG_IS_DRAWING_WITH_EFFECTS)}dbt(t){t?this.HSt|=FLAG_IS_DRAWING_WITH_EFFECTS:this.HSt&=~FLAG_IS_DRAWING_WITH_EFFECTS}pbt(t,e){t<<=16,e?this.HSt|=t:this.HSt&=~t}mbt(t){return 0!=(this.HSt&t<<16)}kAt(){return this.NMt.kAt()}BAt(){return this.NMt.BAt()}$At(){return this.NMt.$At()}WAt(){return this.NMt.WAt()}VAt(){return this.NMt.VAt()}Dyt(t){return this.NMt.Dyt(t)}YB(){return this.LMt}h8(){return this.NMt.h8()}bTt(t){return t.sq()?t.iq(this.YB()):this.YB()===t}Cbt(r,t,e){const s=(t,e)=>{const s=e||t.YB(),i=r.get(s);i?i.add(t):r.set(s,new Set([t]))};if(s(this,t),this.n$())for(const i of this.h$())s(i);if(e)for(const n of this.X4())s(n)}gbt(){if(!this.$F().MF())throw new Error("object does not support scene graph")}J4(){return null!==this.N4()}N4(){const t=this.BL();if(!t)return null;const e=t.N4();return e?e.aU():null}B4(){const t=this.BL();if(!t)return null;const e=t.B4();return e?e.aU():null}*W4(){const t=this.BL();if(t)for(const e of t.W4())yield e.aU()}Sbt(t){if(t)for(const e of this.children())if(e===t)return!0;return!1}O8(){const t=this.BL();return!!t&&t.O8()}ybt(t){const e=this.BL();if(!e)return[];const s=t.lf();return e.k7().map(t=>t.aU()).filter(t=>t.YB().lf()===s)}k7(){const t=this.BL();return t?t.k7().map(t=>t.aU()):[]}*children(){const t=this.BL();if(t)for(const e of t.children())yield e.aU()}*X4(){const t=this.BL();if(t)for(const e of t.X4())yield e.aU()}V4(){const t=this.BL();return t?t.V4():0}Tbt(){return[...this.W4()].length}PTt(){const t=this.BL();return t?t.PTt():0}j4(t){const e=this.BL();if(!e)return null;const s=e.j4(t);return s?s.aU():null}_bt(){const t=this.BL();if(!t)return NaN;const e=t.N4();return e?e.Ebt(t):NaN}Abt(t){for(const e of this.BL().k7())if(e.aU().o$()===t)return!0;return!1}q4(t,e){this.gbt(),t.gbt(),this.BL().q4(t.BL(),e||{})}K4(t){const e=this.BL();e&&e.K4(t.BL())}C5(){const t=this.BL();return!!t&&t.C5()}d7(){const t=this.BL();if(t){const e=t.Ibt();if(e)for(const s of e){const i=this.gf.DL(s[2]);if(i){const r=s[3];this.q4(i,{Q4:!!(r>>0&1),e5:!!(r>>1&1),i5:!!(r>>2&1),n5:!!(r>>3&1),o5:!!(r>>4&1),m5:!!(r>>5&1),l5:!!(r>>6&1),u5:!!(r>>7&1),d5:!!(r>>8&1)})}}}}p7(t,e){const s=t.get(this);if(s)for(const i of s.sceneGraphJson.children){const r=e.get(i.index);if(r){const n=i.flags;this.q4(r,{Q4:!!(n>>0&1),e5:!!(n>>1&1),i5:!!(n>>2&1),n5:!!(n>>3&1),o5:!!(n>>4&1),m5:!!(n>>5&1),l5:!!(n>>6&1),u5:!!(n>>7&1),d5:!!(n>>8&1)})}}}l$(){const t=this.gf.wbt();return t?t.lct(this):""}n$(){return null!==this.jMt}M7(t){this.jMt.push(t)}i$(){return this.jMt}Rbt(t){return!!this.Mbt(t)}Mbt(t){const e=this.h$();if(null===e||0===e.length)return!1;for(const s of e)if(s.YB()===t)return s;return null}h$(){return this.jMt}$mt(){for(const t of this.h$())t.YB().ZF().s0t(t)}NSt(){for(const t of this.h$())t.YB().ZF().Jft(t)}FSt(t){for(const e of this.h$())e.YB().ZF().t0t()[t]=e}BSt(){for(const t of this.h$())t.YB().ZF().Zft(t)}kSt(t){for(const e of this.h$())e.YB().ZF().e0t()[t]=e}$F(){return this.LMt.$F()}gMt(t){this.kMt=t}w7(){return this.LMt.b7(),this.kMt}o$(){return this.BMt}bbt(){return this.$Mt}vbt(t){t?this.C$(new Set(t)):this.WMt=null}C$(t){if(0===t.size)this.WMt=null;else{this.WMt?this.WMt.clear():this.WMt=new Set;for(const e of t)this.WMt.add(e)}}p$(){return this.WMt??new Set}e_t(){return Array.from(this.p$()).join(" ")}r_t(t){t=Math.floor(t);for(const e of this.p$()){if(0===t)return e;--t}return""}Urt(){return this.VMt}xbt(t){if(t)for(const e of this.VMt)if(e.B5()instanceof t)return e;return null}ult(t){if(!t)return null;const e=this.xbt(t);return e?e.P5():null}Wrt(s){const i=this.VMt;for(let t=0,e=i.length;t<e;++t)if(i[t].V5().cq()===s)return t;return-1}Gbt(){return this.UMt}tMt(){return this.LMt.tMt()}Pbt(){return this.UMt.length}rht(t){const e=this.UMt;if((t|=0)<0||t>=e.length)throw new RangeError("invalid instance variable");return e[t]}s2t(t){return this.UMt[t]}Obt(t){const e=this.UMt[t];return 0===this.LMt.yst(t)?!!e:e}nht(t,e){const s=this.UMt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");const i=this.LMt.yst(t);switch(i){case 0:s[t]=e?1:0;break;case 1:s[t]="number"==typeof e?e:parseFloat(e);break;case 2:s[t]="string"==typeof e?e:e.toString();break;default:throw new Error("unknown instance variable type")}}zht(t,e){if(0!==e){const s=this.UMt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");const i=s[t];if("number"!=typeof i)throw"boolean"==typeof i?new Error("can not set offset of boolean variable"):"string"==typeof i?new Error("can not set offset of string variable"):new Error("unknown instance variable type");s[t]+="number"==typeof e?e:parseFloat(e)}}vSt(){let t=savedDataMaps.get(this);return t||(t=new Map,savedDataMaps.set(this,t)),t}xSt(){let t=unsavedDataMaps.get(this);return t||(t=new Map,unsavedDataMaps.set(this,t)),t}Dbt(t){const e=this.YB();if(e._D().e0(t))return!0;for(const s of e.C3t())if(s._D().e0(t))return!0;return!!this.gf._D().e0(t)}hk(){const t=new Set,e=(t.add(this),this.BL());if(e&&e.O8())for(const s of this.X4())if(t.add(s),s.n$())for(const i of s.h$())t.add(i);if(this.n$())for(const r of this.h$())t.add(r);for(const n of t.values())n.m7()}Lbt(){this.LMt.PMt()&&this.LL();for(const t of this.VMt)t.IIt()}Nbt(){this.Lbt()}m7(){if(this.Lbt(),this.Dbt("instancecreate")){const t=this.YB(),e=new C33.Event("instancecreate");e.H5=this.LL(),t.Q7(e);for(const s of t.C3t())s.Q7(e);this.gf.Q7(e)}this.gf.P$(this.$F().Rpt().T7.o_t,this,null)}Fbt(){this.gf.P$(this.$F().Rpt().T7.a_t,this,null)}kbt(t){if(this.FMt){const e=new C33.Event("destroy");e.Bbt=t,this.Q7(e)}if(this.Dbt("instancedestroy")){const s=this.YB(),i=new C33.Event("instancedestroy");i.H5=this.LL(),i.Bbt=t,s.Q7(i);for(const r of s.C3t())r.Q7(i);this.gf.Q7(i)}}$bt(){return this.NMt?this.NMt.wAt():this.FMt.j$()}zy(t="full",e=null){const s={},i=("full"===t?s.uid=this.o$():s.c3=!0,this.p$());if(0<i.size&&(s.tags=Array.from(i)),"visual-state"!==t){const n=savedDataMaps.get(this);if(n&&n.size&&(s.ex=C33.Ho(n)),-1!==this.ZD()&&(s.mts=this.ZD()),0<this.LMt.BRt()){const h={},o=this.LMt.ZRt();for(let t=0,e=this.UMt.length;t<e;++t)h[o[t].toString()]=this.UMt[t];s.ivs=h}if(this.VMt.length){const a={};for(const l of this.VMt){const c=l.zy(t);c&&(a[l.V5().cq().toString()]=c)}s.behs=a}}this.Het&&(s.w=this.Het.v8(t,e));const r=this.NMt?this.NMt.zy():this.FMt.X$();return r&&(s.data=r),s}KJ(t="full",e){this.Het&&this.Het.KJ(t)}JJ(t,e="full",s=null){this.Het&&this.Het.JJ(t,e,s)}Wbt(t,e="full",s=null){this.Het&&this.Het.Wbt(t,e,s)}GMt(){this.$F().gF()&&this.Het.GMt()}Jy(e,t="full",s){if("full"===t)this.BMt=e.uid;else if(!e.c3)return;if(this.vbt(e.tags),"visual-state"!==t){let t=savedDataMaps.get(this);t&&(t.clear(),savedDataMaps.delete(this));const r=e.ex,n=(r&&(t=C33.jo(r),savedDataMaps.set(this,t)),this.XMt=e.hasOwnProperty("mts")?e.mts:-1,e.ivs);if(n)for(const[h,o]of Object.entries(n)){const a=parseInt(h,10),l=this.LMt.QRt(a);if(!(l<0||l>=this.UMt.length)){let t=o;null===t&&(t=NaN),this.UMt[l]=t}}}if(this.$F().gF()){const c=e.w;if(c){const u=c.l;if(this.Het.$L().cq()!==u){const f=this.Het.$L(),d=f._L().xz(u);d?(this.Het.HL(d),f.XY(this,!0),d.VY(this,!0),d.jL(this),this.Het.o4()):"full"===t&&this.gf.t$(this)}this.Het.x8(c,t)}}if("visual-state"!==t){const p=e.behs;if(p)for(const[m,C]of Object.entries(p)){const g=parseInt(m,10),S=this.Wrt(g);S<0||S>=this.VMt.length||this.VMt[S].Jy(C,t)}}const i=e.data;i&&(this.NMt?this.NMt.Jy(i,t):this.FMt.Y$(i))}LL(){return this.FMt||this.ebt()}vAt(){return!!this.FMt}ebt(t,e){const s=this.Het?t?self.OU:self.M5:t?self.T$:self.jB,i=t||this.NMt.FEt(),r=this.LMt.PMt(),n=r||i||s,h=this.$F().ASt();if(C33.fF.$Et(this,h),C33.fF.$It(e),this.FMt=new n,C33.fF.WIt(),C33.fF.WEt(h),i&&!(this.FMt instanceof s))throw new TypeError(`script interface class '${i.name}' does not extend the right base class '${s.name}'`);if(r){const o=i||s;if(!(this.FMt instanceof o))throw new TypeError(`setInstanceClass(): class '${r.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.FMt}qB(t){if(0!==this.UMt.length){const s={},i=this.LMt.eMt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:C33.Instance.prototype.Obt.bind(this,t),set:C33.Instance.prototype.nht.bind(this,t)};const e=Object.create(Object.prototype,s);t.Ubt={value:e,writable:!1}}}KB(t){const e=this.VMt;if(0!==e.length){const s={};for(const r of e)s[r.V5().l3t()]={value:r.oAt(),writable:!1};const i=Object.create(Object.prototype,s);t.Rmt={value:i,writable:!1}}}Q7(t){if(this.vAt()){const e=this.LL(),s=(t.H5=e,this.gf),i=s.tJ()&&!s.wD().ak();i&&C3Debugger.StartMeasuringScriptTime(),e.dispatchEvent(t),i&&C3Debugger.AddScriptTime()}}}}{const C33=self.Fe;C33.W7=class extends C33.pn{constructor(i){super(),this.rT=i,this.Xmt=null,this.Vbt=[],this.Hbt=i.Sm(),this.jbt=i.vm(),this.Xbt=1,this.Ybt=1,this.qbt=0,this.Kbt=1,this.zbt=i.jv(),this.Jbt=null,this.Zbt=null,this.Qbt=NaN,this.tvt=!1,this.N8=NaN,this.F8=NaN,this.evt=t=>{if(t.H5===this.Xmt.aU()){const e=i.hN(),s=(e.zf().removeEventListener("instancecreate",this.evt),this.Xmt.aU().P5());this.tvt=!!s.Dst(),this.N8=this.tvt?s.Ost():NaN,this.F8=this.tvt?s.Nst():NaN}}}gn(){this.Xmt=null,this.Jbt=null,this.Zbt=null,this.Qbt=NaN,this.tvt=!1,this.N8=NaN,this.F8=NaN,C33.Vh(this.Vbt)}svt(t){if(this.Kbt=this.rT.jv(),this.zbt=this.Kbt,this.Xmt=t,this.qbt=t?t.yk():0,this.Xmt){const e=this.rT,s=e.hN(),i=this.Xmt.aU().$F().ASt();if(i<2){const r=this.Xmt.aU().P5();r?(this.tvt=!!r.Dst(),this.N8=this.tvt?r.Ost():NaN,this.F8=this.tvt?r.Nst():NaN):this.Xmt.aU().fV()||s.zf().addEventListener("instancecreate",this.evt)}else this.tvt=!1,this.N8=NaN,this.F8=NaN}else this.tvt=!1,this.N8=NaN,this.F8=NaN}N4(){return this.Xmt}O8(){return 0<this.Vbt.length}k7(){return this.Vbt}ivt(){this.O8()&&1!==this.Vbt.length&&(this.Zbt?this.Vbt.sort((t,e)=>{const s=this.Zbt.get(t.aU()),i=this.Zbt.get(e.aU());return C33.Ci(s)&&C33.Ci(i)?s-i:0}):this.Vbt.sort((t,e)=>{const s=t.mht().rvt(),i=e.mht().rvt();return C33.Ci(s)&&C33.Ci(i)?s-i:0}))}rvt(){return this.Qbt}Cht(){return this.Xbt}nvt(t){this.Xbt=t}Sht(){return this.Ybt}hvt(t){this.Ybt=t}Rht(){return this.zbt}sTt(){return this.Kbt}ovt(t){this.Kbt=t}pht(){return 0===this.Hbt?Number.EPSILON:this.Hbt}ght(){return 0===this.jbt?Number.EPSILON:this.jbt}avt(){if(this.rT.r5()){let t=this.Xmt,e=t.Sm(),s=t.mht().pht();return 0===e&&(e=Number.EPSILON),s===Number.EPSILON&&e===Number.EPSILON?1:s===Number.EPSILON&&e!==Number.EPSILON&&this.tvt?1+e/this.N8:e/s}return 1}lvt(){if(this.rT.h5()){let t=this.Xmt,e=t.vm(),s=t.mht().ght();return 0===e&&(e=Number.EPSILON),s===Number.EPSILON&&e===Number.EPSILON?1:s===Number.EPSILON&&e!==Number.EPSILON&&this.tvt?1+e/this.F8:e/s}return 1}cvt(){return 0}uvt(){return{sw:this.Hbt,sh:this.jbt,sx:this.Xbt,sy:this.Ybt,psa:this.qbt,oo:this.Kbt,so:this.zbt,pi:this.rT.aU()._bt()}}v8(t,e=null){const s=this.uvt();return e&&e.selfOnly?Object.assign(s,{p:null,c:[]}):Object.assign(s,{p:this.fvt(t),c:this.dvt(t)})}pvt(t){let e="";return t.t5()&&(e+="x"),t.s5()&&(e+="y"),t.r5()&&(e+="w"),t.h5()&&(e+="h"),t.a5()&&(e+="a"),t.c5()&&(e+="z"),t.C5()&&(e+="d"),t.f5()&&(e+="o"),t.p5()&&(e+="v"),e}fvt(t){return this.Xmt&&this.Xmt.aU()&&!this.Xmt.aU().fV()?this.mvt(this.Xmt,this.rT,t):null}dvt(e){return this.Vbt.map(t=>this.mvt(t,t,e)).filter(t=>t)}mvt(t,e,s){const i=t.aU();if(i&&i.fV())return null;const r={};return r.uid=i.o$(),r.f=this.pvt(e),r.offsets=e.Cvt(),r.data=C33.W7.gvt(i),r.oci=i.YB().qO(),"state"===s?(r.inst=i.zy("full",{selfOnly:!0}),r.instIndex=NaN):(r.instIndex=i.YB().JF().indexOf(i),r.inst=null),r}x8(t){this.Hbt=t.sw,this.jbt=t.sh,this.Xbt=t.sx,this.Ybt=t.sy,this.qbt=t.psa,this.Kbt=t.oo,this.zbt=t.so,this.Qbt=C33.Ci(t.pi)?t.pi:NaN}Svt(t,e){if(!t&&!e&&this.Jbt)for(const s of this.Jbt)s.fV()||s.J4()||s.hN().t$(s);this.Jbt=t,this.Zbt=e}JJ(t,e){const s=this.rT,i=s.hN(),r=new Set;if(t.p&&!this.Xmt){const o=t.p.uid,a=i.DL(o);if(e?.g_t,a){const l=a.BL();if(a.Sbt(s.aU()))this.Xmt=l;else{a.Abt(s.aU().o$())?i.t$(s.aU()):a.q4(s.aU(),this.yvt(t.p.f)),r.has(s)||(s.Tvt(t.p.offsets),this._vt(a,t.p,e)),r.add(s);const c=a.BL();c.mht().ivt()}}else if(C33.Ci(t.p.oci)){const u=i.PY(t.p.oci),f=(i.Ugt(),i.ik(u,s.$L(),0,0,!0));if(e?.g_t,f){const d=this.Evt(t.p,i),p=(d&&f.Jy(d),f.BL()),m=(p.$L().rk(f),f.q4(s.aU(),this.yvt(t.p.f)),f.BL());m.mht().ivt()}}}const n=[];for(const C of t.c){const g=C.uid,S=i.DL(g);S&&n.push(S)}let h=0;for(const y of t.c){const T=y.uid,_=i.DL(T);if(e?.g_t,_){if(this.Jbt){if(this.Jbt.includes(_)){const w=_;if(w.YB()!==_.YB()){h++;continue}if(w.fV()){h++;continue}const R=t.c[h];if(!e?.g_t&&this.Avt(w,n,s)){this.Ivt(h,R,s,r,e),h++;continue}if(w.J4()&&w.N4()!==s.aU()){const M=this.wvt(R,e);this.Rvt(M,R,r,e),h++;continue}this.Rvt(w.BL(),R,r,e,!0),h++;continue}if(this.Jbt[h]){const b=this.Jbt[h];if(b.YB()!==_.YB()){h++;continue}if(b.fV()){h++;continue}const v=t.c[h];if(!e?.g_t&&this.Avt(b,n,s)){this.Ivt(h,v,s,r,e),h++;continue}if(b.J4()&&b.N4()!==s.aU()){const x=this.wvt(v,e);this.Rvt(x,v,r,e),h++;continue}this.Rvt(b.BL(),v,r,e,!0),h++;continue}}const E=_.YB(),A=this.Mvt(n,E),I=s.aU().ybt(E).length;if(A===I){const G=s.aU().j4(h);if(G){const P=G.BL();P&&(r.has(P)||(P.Tvt(y.offsets),this._vt(G,y,e)),r.add(P))}h++;continue}if(_.J4()&&_.N4()!==s.aU()){const O=this.wvt(y,e);this.Rvt(O,y,r,e),h++;continue}this.Rvt(_.BL(),y,r,e)}else if(this.Jbt&&this.Jbt[h]){const D=this.Jbt[h],N=i.PY(this.bvt(y));if(D.YB()!==N){h++;continue}if(D.fV()){h++;continue}const L=t.c[h];if(!e?.g_t&&this.Avt(D,n,s)){this.Ivt(h,L,s,r,e),h++;continue}if(D.J4()&&D.N4()!==s.aU()){const F=this.wvt(L,e);this.Rvt(F,L,r,e),h++;continue}this.Rvt(D.BL(),L,r,e)}else{const k=this.wvt(y,e);this.Rvt(k,y,r,e)}h++}}Avt(t,e,s){const i=t.YB(),r=this.Mvt(e,i),n=s.aU().ybt(i).length;return r===n}Ivt(t,e,s,i,r){const n=s.aU().j4(t,e);if(n){const h=n.BL();h&&(i.has(h)||(h.Tvt(e.offsets),this._vt(n,e,r)),i.add(h))}}yvt(t){const e={};return e.Q4=t.includes("x"),e.e5=t.includes("y"),e.i5=t.includes("w"),e.n5=t.includes("h"),e.o5=t.includes("a"),e.l5=t.includes("z"),e.m5=t.includes("d"),e.u5=t.includes("o"),e.d5=t.includes("v"),e}bvt(t){return C33.Ci(t.oci)?t.oci:t[1]}wvt(i,r){if(C33.Ci(i.oci)){let t=this.rT,e=t.hN(),s;if(i.data)s=e.WY(i.data,t.$L(),!1,0,0,!1,!0);else{const n=e.PY(i.oci);s=e.ik(n,t.$L(),0,0,!0)}if(r?.g_t,s){const h=this.Evt(i,e),o=(h&&s.Jy(h),s.BL());return o.$L().rk(s,!0),o}}}Rvt(t,e,s,i,r=!0){const n=this.rT,h=n.q4(t,this.yvt(e.f));h&&r&&(s.has(t)||(t.Tvt(e.offsets),this._vt(t.aU(),e,i)),s.add(t)),this.ivt()}_vt(t,e,s){let i=this.Evt(e,this.rT.hN());i&&((i=JSON.parse(JSON.stringify(i))).w=null,t.Jy(i))}Mvt(t,e){return t.filter(t=>t.YB().lf()===e.lf()).length}Evt(t,e){if(C33.Ci(t.instIndex)){const s=e.PY(t.oci),i=s.vMt();return i?i[t.instIndex]:null}return C33.wi(t.inst)?JSON.parse(t.inst):t.inst||void 0}static gvt(t){let e=t.BL().$L().FY(t.o$());if(!e)return null;e=JSON.parse(JSON.stringify(e));const s=[];for(const i of[...t.k7()]){const r=i.BL();s.push([r._L().cq(),r.$L().qO(),i.o$(),C33.W7.B7(r),i.YB().n$()?1:0,r.WL(),C33.W7.gvt(i)])}return C33.$i(e[0][14])?e[0][14][1]=s:(e[0][14]=[],e[0][14][0]=C33.W7.vvt(),e[0][14][1]=s,e[0][14][2]=t.BL().WL()),e}static B7(t){let e=0;return(e|=Number(t.p5())<<8)|Number(t.f5())<<7|Number(t.c5())<<6|Number(t.C5())<<5|Number(t.a5())<<4|Number(t.h5())<<3|Number(t.r5())<<2|Number(t.s5())<<1|Number(t.t5())<<0}static vvt(t){let e=0;return e,511}}}{let C33=self.Fe,glMatrix=self.ye,vec32=glMatrix.Me,vec42=glMatrix.ve,tempRect=C33.Cn(C33.Rect),tempQuad=C33.Cn(C33.ac),bboxChangeEvent=C33.Cn(C33.Event,"bboxchange",!1),tempColor=C33.Cn(C33.Ko,0,0,0,0),tempCollisionPoly=C33.Cn(C33.jc),DEFAULT_COLOR=C33.Cn(C33.Ko,1,1,1,1),DEFAULT_RENDER_CELLS=C33.Cn(C33.Rect,0,0,-1,-1),DEFAULT_COLLISION_CELLS=C33.Cn(C33.Rect,0,0,-1,-1),VALID_SET_MESH_POINT_MODES=new Set(["absolute","relative"]),EMPTY_ARRAY=[],enableUpdateRendererStateGroup=!0,FLAG_IS_VISIBLE=1,FLAG_BBOX_CHANGED=2,FLAG_ENABLE_BBOX_CHANGED_EVENT=4,FLAG_COLLISION_ENABLED=8,FLAG_COLLISION_CELL_CHANGED=16,FLAG_SOLID_FILTER_INCLUSIVE=32,FLAG_HAS_ANY_ACTIVE_EFFECT=64,FLAG_IS_ROTATABLE=128,FLAG_DESTROYED=256,FLAG_DESTROY_WITH_PARENT=512,FLAG_TRANSFORM_WITH_PARENT_X=1024,FLAG_TRANSFORM_WITH_PARENT_Y=2048,FLAG_TRANSFORM_WITH_PARENT_W=4096,FLAG_TRANSFORM_WITH_PARENT_H=8192,FLAG_TRANSFORM_WITH_PARENT_A=16384,FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION=32768,FLAG_TRANSFORM_WITH_PARENT_OPACITY=1<<22,FLAG_TRANSFORM_WITH_PARENT_VISIBILITY=1<<23,MASK_ALL_SCENE_GRAPH_FLAGS=FLAG_DESTROY_WITH_PARENT|FLAG_TRANSFORM_WITH_PARENT_X|FLAG_TRANSFORM_WITH_PARENT_Y|FLAG_TRANSFORM_WITH_PARENT_W|FLAG_TRANSFORM_WITH_PARENT_H|FLAG_TRANSFORM_WITH_PARENT_A|FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION|FLAG_TRANSFORM_WITH_PARENT_OPACITY|FLAG_TRANSFORM_WITH_PARENT_VISIBILITY,FLAG_MESH_CHANGED=65536,FLAG_PHYSICS_BODY_CHANGED=1<<17,FLAG_SIN_COS_ANGLE_CHANGED=1<<18,FLAG_USE_POINTS_SHADER_PROGRAM=1<<19,FLAG_DRAW_BACK_FACE_ONLY=1<<20,FLAG_DRAW_NON_BACK_FACES_ONLY=1<<21,FLAG_BLEND_MODE_BIT_OFFSET=26,FLAG_BLEND_MODE_MASK=31<<FLAG_BLEND_MODE_BIT_OFFSET,sceneGraphExportDataMap=new WeakMap,sceneGraphZIndexMap=new WeakMap;C33.YMt=class extends C33.pn{constructor(t,e){super(),this.vs=t,this.Dft=t.YB(),this.gf=t.hN(),this.xvt=e,this.Dft.IMt(this,null,e),this.Gvt=-1,this.Pvt=-1,this.HSt=FLAG_IS_VISIBLE|FLAG_BBOX_CHANGED|FLAG_COLLISION_ENABLED|FLAG_COLLISION_CELL_CHANGED|FLAG_MESH_CHANGED|FLAG_PHYSICS_BODY_CHANGED,this.Dft.$F()._F()&&(this.HSt|=FLAG_IS_ROTATABLE),this.al=NaN,this.ll=NaN,this.Iy=NaN,this.Ovt=NaN,this.Dvt=NaN,this.x_=NaN,this.Qo=NaN,this.Lvt=NaN,this.Nvt=NaN,this.Fvt=NaN,this.kvt=NaN,this.Bvt=C33.Cn(C33.Rect),this.$vt=C33.Cn(C33.ac),this.Wvt=DEFAULT_COLLISION_CELLS,this.Uvt=DEFAULT_RENDER_CELLS,this.Vvt=null,this.Hvt=null,this.jvt=null,this.Ay=DEFAULT_COLOR,this.Xvt=DEFAULT_COLOR,this.Yvt=null,this.qvt=null,this.vs.YB().iMt()&&(this.qvt=C33.Cn(C33.Kvt,this.vs,this)),this.zvt=null,this.Jbt=null,this.Zbt=null,this.Jvt=-1,this.Zvt=null}hbt(){this.HSt|=FLAG_DESTROYED}gn(){if(this.Dft.IMt(this,this.xvt,null),this.Yvt&&(this.gf.JS().l2(this.Yvt),this.Yvt=null),this.Vvt=null,this.Hvt&&(this.Hvt.Qvt.gn(),this.Hvt=null),this.jvt&&(this.jvt.clear(),this.jvt=null),this.T5(),this.qvt&&this.qvt.gn(),this.J4()&&this.N4().K4(this),this.O8()){const t=[...this.k7()];for(const e of t)this.K4(e)}this.txt(),this.sxt(),sceneGraphExportDataMap.delete(this),sceneGraphZIndexMap.delete(this),this.vs=null,this.Dft=null,this.gf=null,this.xvt=null}KMt(t){if(enableUpdateRendererStateGroup=!1,this.a4(t[0],t[1]),this.Vy(t[2]),this.uM(t[3],t[4]),this.x_=0,this._F()?this.Sk(t[6]):this.Qo=0,tempColor.za(t[7]),this.ixt(tempColor),this.bht(t[8]),this.xht(t[9]),this.Ry(t[10]),this.qvt&&this.qvt.rxt(t[12]),t[14]&&sceneGraphExportDataMap.set(this,{nxt:t[14][1],hxt:t[14][2]}),t[15]){const e=t[15],i=(this.S5(e[0],e[1]),this.w5()),r=e[2];for(let s=0,t=r.length;s<t;++s){const n=r[s];for(let t=0,e=n.length;t<e;++t){const h=n[t],o=i.AT(t,s);o.ky(h[0]),o.Wy(h[1]),o.Vy(h[2]),o.jy(h[3]),o.Yy(h[4])}}}if(t[16]){const s=t[16][0],a=t[16][1],l=!!a,c=!l,u=this.gf.wbt();l&&u&&u.oct(this.aU(),a),c&&u&&u.oct(this.aU(),s)}enableUpdateRendererStateGroup=!0,this.oxt()}zMt(){this.al=0,this.ll=0,this.Iy=0,this.Ovt=0,this.Dvt=0,this.x_=0,this.Qo=0,this.Lvt=0,this.Nvt=1,this.Fvt=0,this.kvt=0,this.oxt()}hN(){return this.gf}YB(){return this.Dft}aU(){return this.vs}axt(){return this.a5()?this.lxt(this.N4().cxt()-this.zvt.cvt()):0}ky(t){if(t=+t,this.t5()){const e=this.zvt,s=t-this.Fy(),i=-this.axt();0==i?this.al+=s/e.avt():(this.al+=Math.cos(i)*s/e.avt(),this.s5()&&(this.ll+=Math.sin(i)*s/e.lvt()))}else this.al=t}cht(t,e=!1){t=+t,!e&&this.t5()?this.ky(this.Fy()+t):this.al+=t}Fy(){if(this.t5()){let t=this.al,e=this.zvt,s=this.N4(),i=this.axt();return 0===i?t*=e.avt():(t=t*e.avt()*Math.cos(i),this.s5()&&(t-=this.ll*e.lvt()*Math.sin(i))),s.Fy()+t}return this.al}Wy(t){if(t=+t,this.s5()){const e=this.zvt,s=t-this.$y(),i=-this.axt();0==i?this.ll+=s/e.lvt():(this.t5()&&(this.al-=Math.sin(i)*s/e.avt()),this.ll+=Math.cos(i)*s/e.lvt())}else this.ll=t}uht(t,e=!1){t=+t,!e&&this.s5()?this.Wy(this.$y()+t):this.ll+=t}$y(){if(this.s5()){let t=this.ll,e=this.zvt,s=this.N4(),i=this.axt();return 0===i?t*=e.lvt():(t=t*e.lvt()*Math.cos(i),this.t5()&&(t+=this.al*e.avt()*Math.sin(i))),s.$y()+t}return this.ll}a4(t,e){if(t=+t,e=+e,this.uxt()){const s=this.t5(),i=this.s5(),r=this.zvt,n=t-this.Fy(),h=e-this.$y(),o=-this.axt();if(0==o)s?this.al+=n/r.avt():this.al=t,i?this.ll+=h/r.lvt():this.ll=e;else{const a=Math.sin(o),l=Math.cos(o);s?this.al+=i?(l*n-a*h)/r.avt():l*n/r.avt():this.al=t,i?this.ll+=s?(a*n+l*h)/r.lvt():l*h/r.lvt():this.ll=e}}else this.al=t,this.ll=e}fxt(){return[this.Fy(),this.$y()]}u4(t,e){t=+t,e=+e,this.uxt()?this.a4(this.Fy()+t,this.$y()+e):(this.al+=t,this.ll+=e)}Pyt(t,e){return this.Fy()===t&&this.$y()===e}Vy(t){if(t=+t,this.c5()&&(t-=this.N4().Uy()),this.Iy!==t){this.Iy=t,this.dxt();const e=this.$L();0!==this.Iy&&e.KY(),e.jL(this)}}dxt(){if(this.oxt(),this.O8()){const s=this.k7();for(let t=0,e=s.length;t<e;t++){const i=s[t];i.c5()&&i.dxt()}}}Ght(t){this.Vy(this.Uy()+t)}Uy(){return this.c5()?this.N4().Uy()+this.Iy:this.Iy}d4(){return this.$L().Uy()+this.Uy()}Dst(){const t=this.aU().$F().ASt();return t<2&&this.aU().P5().Dst()}wm(t){if(t=+t,this.r5()){const e=this.Sm();0===e?this.Ovt=Number.EPSILON:this.Ovt*=t/e}else this.Ovt=t;this.pxt()}Jm(t,e){t=+t,!e&&this.r5()?this.wm(this.Sm()+t):this.Ovt+=t,this.pxt()}Sm(){if(this.r5()){const t=this.N4(),e=t.Sm(),s=t.mht().pht();return s===Number.EPSILON?(this.mht().pht()+e)*this.Ovt:e*this.Ovt}return this.Ovt}ym(t){if(t=+t,this.h5()){const e=this.vm();0===e?this.Dvt=Number.EPSILON:this.Dvt*=t/e}else this.Dvt=t;this.pxt()}yht(t,e){t=+t,!e&&this.h5()?this.ym(this.vm()+t):this.Dvt+=t,this.pxt()}vm(){if(this.h5()){const t=this.N4(),e=t.vm(),s=t.mht().ght();return s===Number.EPSILON?(this.mht().ght()+e)*this.Dvt:e*this.Dvt}return this.Dvt}uM(t,e){if(t=+t,e=+e,this.r5()){const s=this.Sm();0===s?this.Ovt=Number.EPSILON:this.Ovt*=t/s}else this.Ovt=t;if(this.h5()){const i=this.vm();0===i?this.Dvt=Number.EPSILON:this.Dvt*=e/i}else this.Dvt=e;this.pxt()}Cu(){return[this.Sm(),this.vm()]}o8(){return this.x_}mxt(t){if(t<0)throw new RangeError("invalid depth");this.x_=t}Cxt(){if(this.J4()){const t=this.zvt;return Math.min(t.avt(),t.lvt())}return 1}_F(){return 0!=(this.HSt&FLAG_IS_ROTATABLE)}Sk(t){t=+t,this._F()&&(this.a5()&&(t-=this.N4().yk()),t=C33.An(t),this.Qo!==t)&&(this.Qo=t,this.pxt())}Tht(t){0!=(t=+t)&&this._F()&&(this.Qo=C33.An(this.Qo+t),this.pxt())}pxt(){if(this.HSt|=FLAG_SIN_COS_ANGLE_CHANGED,this.O8()){const s=this.k7();for(let t=0,e=s.length;t<e;t++)s[t].pxt()}}yk(){return this.a5()&&this._F()?this.lxt(C33.An(this.N4().cxt()+this.Qo)):this.Qo}cxt(){return this.a5()&&this._F()?C33.An(this.N4().cxt()+this.Qo):this.Qo}lxt(t){return this.r5()&&this.B4().Sm()<0&&(t=C33.An(C33.Ln(t,this.B4().yk()+Math.PI))),this.h5()&&this.B4().vm()<0?C33.Ln(t,this.B4().yk()):t}gxt(){const t=this.N4();return!!(this.r5()&&t.Sm()<0)||!!(this.h5()&&t.vm()<0)}Sxt(){const t=this.N4();return!!(this.r5()&&t.Sm()<0&&this.h5()&&t.vm()<0)}yxt(){const t=this.HSt;if(0!=(t&FLAG_SIN_COS_ANGLE_CHANGED)){const e=this.yk();this.Lvt=Math.sin(e),this.Nvt=Math.cos(e),this.HSt=t&~FLAG_SIN_COS_ANGLE_CHANGED}}Fyt(){return this.yxt(),this.Lvt}Nyt(){return this.yxt(),this.Nvt}bht(t){this.Fvt=+t}Mht(t){this.Fvt+=+t}TW(){return this.Fvt}xht(t){this.kvt=+t}vht(t){this.kvt+=+t}EW(){return this.kvt}ixt(t){this.Ay.equals(t)||(this.Ay===DEFAULT_COLOR?(this.Ay=C33.Cn(C33.Ko,t),this.Xvt=C33.Cn(C33.Ko,t),this.Xvt.ba()):t.Ia(1,1,1,1)?(this.Ay=DEFAULT_COLOR,this.Xvt=DEFAULT_COLOR):(this.Ay.set(t),this.Xvt.set(t),this.Xvt.ba()),this.oxt())}Yv(t){if(t=C33.En(+t,0,1),this.f5()){if(this.mht().sTt()===t)return;this.mht().ovt(t),t=this.jv()}else if(this.Ay.a===t)return;this.Txt(t)}_xt(){if(this.O8()){const s=this.k7();for(let t=0,e=s.length;t<e;t++){const i=s[t];i.Txt(i.jv())}}}Txt(t){tempColor.fa(this.Ay),tempColor.a=t,this.ixt(tempColor),this._xt()}Aht(t){this.f5()?this.Yv(this.mht().sTt()+t):this.Yv(this.jv()+t)}jv(){return this.f5()?this.N4().jv()*this.mht().sTt():this.Ay.a}A4(t){this.Ay.Ea(t)||(tempColor.fa(t),tempColor.a=this.jv(),this.ixt(tempColor))}sht(t,e,s){tempColor.ea(t,e,s),this.A4(tempColor)}Ext(t,e,s){0===t&&0===e&&0===s||(tempColor.fa(this.Ay),tempColor.r+=t,tempColor.g+=e,tempColor.b+=s,this.A4(tempColor))}E4(){return this.Ay}CY(){return this.Xvt}C5(){return 0!=(this.HSt&FLAG_DESTROY_WITH_PARENT)}Axt(t){this.Ixt(FLAG_DESTROY_WITH_PARENT,t)}t5(){return 0!=(this.HSt&FLAG_TRANSFORM_WITH_PARENT_X)}wxt(t){this.Ixt(FLAG_TRANSFORM_WITH_PARENT_X,t)}s5(){return 0!=(this.HSt&FLAG_TRANSFORM_WITH_PARENT_Y)}uxt(){return 0!=(this.HSt&(FLAG_TRANSFORM_WITH_PARENT_X|FLAG_TRANSFORM_WITH_PARENT_Y))}Rxt(t){this.Ixt(FLAG_TRANSFORM_WITH_PARENT_Y,t)}r5(){return 0!=(this.HSt&FLAG_TRANSFORM_WITH_PARENT_W)}Mxt(t){this.Ixt(FLAG_TRANSFORM_WITH_PARENT_W,t)}h5(){return 0!=(this.HSt&FLAG_TRANSFORM_WITH_PARENT_H)}bxt(t){this.Ixt(FLAG_TRANSFORM_WITH_PARENT_H,t)}a5(){return 0!=(this.HSt&FLAG_TRANSFORM_WITH_PARENT_A)}vxt(t){this.Ixt(FLAG_TRANSFORM_WITH_PARENT_A,t)}c5(){return 0!=(this.HSt&FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION)}xxt(t){this.Ixt(FLAG_TRANSFORM_WITH_PARENT_Z_ELEVATION,t)}f5(){return 0!=(this.HSt&FLAG_TRANSFORM_WITH_PARENT_OPACITY)}Gxt(t){this.Ixt(FLAG_TRANSFORM_WITH_PARENT_OPACITY,t)}p5(){return 0!=(this.HSt&FLAG_TRANSFORM_WITH_PARENT_VISIBILITY)}Pxt(t){this.Ixt(FLAG_TRANSFORM_WITH_PARENT_VISIBILITY,t)}Oxt(){this.HSt&=~MASK_ALL_SCENE_GRAPH_FLAGS}q4(t,e){if(t===this)return!1;if(t.J4())return!1;if(this.Dxt(t))return!1;if(this.Lxt(t))return!1;const s=t.Fy(),i=t.$y(),r=t.Sm(),n=t.vm(),h=t.yk(),o=t.Uy(),a=t.jv(),l=(t.Nxt(this),t.wxt(e.Q4),t.Rxt(e.e5),t.Mxt(e.i5),t.bxt(e.n5),t.vxt(e.o5),t.xxt(e.l5),t.Gxt(e.u5),t.Pxt(e.d5),t.Axt(e.m5),s-this.Fy()),c=i-this.$y(),u=-this.yk(),f=Math.cos(u),d=Math.sin(u);if(e.Q4&&(e.o5?t.al=l*f-c*d:t.al=l,e.i5)){const p=this.Sm()/this.zvt.pht();0!=p&&(t.al/=p)}if(e.e5&&(e.o5?t.ll=l*d+c*f:t.ll=c,e.n5)){const m=this.vm()/this.zvt.ght();0!=m&&(t.ll/=m)}if(e.i5){const C=this.Sm();0===C||C===Number.EPSILON?(t.Ovt=1,t.zvt.nvt(1)):(t.Ovt=r/this.Sm(),t.zvt.nvt(t.Ovt))}if(e.n5){const g=this.vm();0===g||g===Number.EPSILON?(t.Dvt=1,t.zvt.hvt(1)):(t.Dvt=n/this.vm(),t.zvt.hvt(t.Dvt))}return e.o5&&(t.Qo=h-this.yk()),e.l5&&(t.Iy=o-this.Uy()),e.u5&&t.zvt.ovt(a),e.d5&&t.eB(this.iB()),this.Fxt(t),this.o4(),this._xt(),!0}K4(t){if(t.N4()===this){const e=t.Fy(),s=t.$y(),i=t.Sm(),r=t.vm(),n=t.yk(),h=t.Uy(),o=t.jv();t.Nxt(null),t.Oxt(),t.a4(e,s),t.uM(i,r),t.Sk(n),t.Vy(h),t.Yv(o),this.kxt(t),this.o4()}}Bxt(){return this.Jvt}$xt(){this.Wxt();const t=[...this.children()];for(const s of t)this.K4(s);const e=this.N4();e&&e.K4(this),this.Oxt()}Wxt(){if(this.Uxt(),!this.Jbt){const e=[...this.children()];e.length&&(this.Jbt=[],this.Zbt=new WeakMap);let t=0;for(const s of e){const i=s.aU();this.Jbt.push(i),this.Zbt.set(i,t),t++}}const t=this.N4();t&&t.Wxt()}Uxt(){if(-1===this.Jvt){const t=[...this.W4()];this.Jvt=t.length;for(const s of t)s.Uxt();const e=[...this.children()];for(const i of e)i.Uxt()}}sxt(){this.Jbt&&(this.Jbt.length=0),this.Jbt=null,this.Zbt=null;const t=this.N4();t&&t.sxt(),this.Jvt=-1}J4(){return null!==this.N4()}N4(){const t=this.zvt;return null!==t?t.N4():null}B4(){let t=this;for(;t.J4();)t=t.N4();return t}*W4(){let t=this.N4();for(;t;)yield t,t=t.N4()}Sbt(t){return this.k7().includes(t)}O8(){const t=this.zvt;return null!==t&&t.O8()}k7(){const t=this.zvt;return null!==t?t.k7():EMPTY_ARRAY}children(){return this.k7()}*X4(){for(const t of this.children())yield t,yield*t.X4()}V4(){return this.k7().length}PTt(){return[...this.X4()].length}j4(t){const e=this.k7();return(t=Math.floor(+t))<0||t>=e.length?null:e[t]}Ebt(e){if(e){const s=this.k7();if(s)for(let t=0;t<s.length;t++)if(e===s[t])return t}return NaN}Vxt(t){this.zvt||(this.zvt=C33.Cn(C33.W7,this)),t&&this.zvt.svt(t)}mht(){return this.zvt}txt(){this.zvt&&(this.zvt.gn(),this.zvt=null)}Nxt(t){t?(t.Vxt(null),this.Vxt(t)):(this.zvt&&this.zvt.svt(null),this.O8()||this.txt())}Lxt(t){if(!this.J4())return!1;const e=this.N4();return e===t||e.Lxt(t)}Dxt(t){if(this.Sbt(t))return!0;for(const e of this.k7())if(e.Dxt(t))return!0;return!1}Fxt(t){this.zvt.k7().push(t)}kxt(t){const e=this.zvt.k7(),s=e.indexOf(t);-1!==s&&e.splice(s,1),0!==e.length||this.J4()||this.txt(),t.O8()||t.txt()}Ibt(){const t=sceneGraphExportDataMap.get(this);return t?t.nxt:null}Hxt(){const t=sceneGraphExportDataMap.get(this);return t?t.hxt:NaN}P8(){const t=sceneGraphZIndexMap.get(this);return C33.Ci(t)?t:NaN}jxt(t){sceneGraphZIndexMap.set(this,t)}Xxt(){this.Ixt(FLAG_USE_POINTS_SHADER_PROGRAM,!0),this.oxt()}oxt(){if(enableUpdateRendererStateGroup){const e=this.gf.JS();this.Yvt&&e.l2(this.Yvt);let t;t=0!=(this.HSt&FLAG_USE_POINTS_SHADER_PROGRAM)?e.Vg()||"<point>":e.$g()||"<default>",this.Yvt=e.i2(t,this.MB(),this.Xvt,this.Uy())}}p8(){return this.Yvt}mq(){return this.Ay===DEFAULT_COLOR}Ry(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.MB()!==t&&(this.HSt=this.HSt&~FLAG_BLEND_MODE_MASK|t<<FLAG_BLEND_MODE_BIT_OFFSET,this.oxt())}MB(){return(this.HSt&FLAG_BLEND_MODE_MASK)>>FLAG_BLEND_MODE_BIT_OFFSET}HL(t,e){const s=e&&this.xvt!==t;s&&this.YY(),this.Dft.IMt(this,this.xvt,t),this.xvt=t,s&&this.Yxt(),0!==this.Uy()&&this.xvt.KY()}$L(){return this.xvt}_L(){return this.$L()._L()}JY(t){this.Gvt=0|t}WL(){return this.xvt.oK(),this.Gvt}uK(t){this.Pvt=0|t}hV(){return this.xvt.lK(),this.Pvt}KX(){return this.Gvt}Ixt(t,e){e?this.HSt|=t:this.HSt&=~t}iB(){return 0!=(this.HSt&FLAG_IS_VISIBLE)}eB(t){if(this.Ixt(FLAG_IS_VISIBLE,t),this.O8())for(const e of this.k7())e.p5()&&e.eB(t)}O4(){return 0!=(this.HSt&FLAG_COLLISION_ENABLED)}D4(t){t=!!t,this.O4()!==t&&(this.Ixt(FLAG_COLLISION_ENABLED,t),t?this.o4():this.qxt())}Kxt(t,e){if(this.Ixt(FLAG_SOLID_FILTER_INCLUSIVE,t),this.jvt&&this.jvt.clear(),e.trim()){this.jvt||(this.jvt=new Set);for(const s of e.split(" "))s&&this.jvt.add(s.toLowerCase())}else this.jvt=null}zxt(t){const e=0!=(this.HSt&FLAG_SOLID_FILTER_INCLUSIVE),s=this.jvt;if(t&&s)for(const i of s)if(t.has(i))return e;return!e}o4(){if(this.HSt|=FLAG_BBOX_CHANGED|FLAG_COLLISION_CELL_CHANGED|FLAG_MESH_CHANGED,this.Dft._Mt(!0),this.gf.XL(),this.xvt.bY()&&(this.Jxt(this.Bvt,this.$vt,!0),this.HSt&=~FLAG_BBOX_CHANGED,this.Yxt()),0!=(this.HSt&FLAG_ENABLE_BBOX_CHANGED_EVENT)&&this.vs.zf().dispatchEvent(bboxChangeEvent),null!==this.zvt){const s=this.zvt.k7();for(let t=0,e=s.length;t<e;++t)s[t].o4()}}Jxt(t,e,s){const i=this.Fy(),r=this.$y(),n=this.Sm(),h=this.vm(),o=this.yk();t.Al(i-this.Fvt*n,r-this.kvt*h,n,h),s&&this.I5()&&this.Zxt(t),0===o?e.Pc(t):(t.offset(-i,-r),e.Dc(t,this.Fyt(),this.Nyt()),e.offset(i,r),e.Lc(t)),t.normalize()}Qxt(){const t=this.HSt;0!=(t&FLAG_BBOX_CHANGED)&&(this.Jxt(this.Bvt,this.$vt,!0),this.HSt=t&~FLAG_BBOX_CHANGED)}C4(){return this.Qxt(),this.Bvt}S4(){return this.Qxt(),this.$vt}tGt(t){const e=this.Fy(),s=this.$y(),i=Math.round(e)-e,r=Math.round(s)-s;return 0==i&&0==r?t:(tempQuad.I(t),tempQuad.offset(i,r),tempQuad)}eGt(t){this.Bvt.I(t),this.$vt.Pc(this.Bvt),this.HSt&=~FLAG_BBOX_CHANGED,this.AMt(),this.Yxt()}sGt(t){this.Ixt(FLAG_ENABLE_BBOX_CHANGED_EVENT,t)}iGt(){return 0!=(this.HSt&FLAG_ENABLE_BBOX_CHANGED_EVENT)}s8(t,e,s){return e&&0!==this.o8()?this.n8(this.$L().r8()):0===this.Uy()||s?t.ec(this.C4()):this.rGt()}rGt(){const t=this.$L(),e=this.d4();return!(e>=t.Oq())&&(t.Gq(e,tempRect),tempRect.ec(this.C4()))}n8(t){const e=this.C4(),s=e.Gl(),i=e.Ol(),r=e.Pl(),n=e.Dl(),h=this.d4(),o=h+this.o8();return t.A1(s,r,h,i,n,o)}T4(){const t=this.$L();if(t.jq())return this.n8(t.r8());{const e=t._L();return this.s8(t.GB(),e.e8(),e.Xk())}}u8(t){this.Ixt(FLAG_DRAW_BACK_FACE_ONLY,t)}c8(t){this.Ixt(FLAG_DRAW_NON_BACK_FACES_ONLY,t)}nGt(){return 0!=(this.HSt&FLAG_DRAW_BACK_FACE_ONLY)}hGt(){return 0!=(this.HSt&FLAG_DRAW_NON_BACK_FACES_ONLY)}oGt(t){this.Vvt=t,this.aGt(),this.I5()&&(this.Zvt.lGt=null)}cGt(){return this.Vvt}uGt(){return null!==this.Vvt||this.I5()}fGt(){return this.dGt(this.Sm(),this.vm(),this.yk(),this.Fyt(),this.Nyt())}pGt(t,e,s){let i=0,r=1;return 0!==s&&(i=Math.sin(s),r=Math.cos(s)),this.dGt(t,e,s,i,r)}dGt(r,n,t,h,o){let e=this.Hvt;null===e&&(e={Qvt:C33.Cn(C33.jc),width:NaN,height:NaN,angle:NaN},this.Hvt=e);const a=e.Qvt;if(e.width!==r||e.height!==n||e.angle!==t){const l=this.Vvt;if(this.I5()){let t=this.TW(),e=this.EW(),s=this.w5(),i=this.Zvt.lGt;i||(l?(tempCollisionPoly.I(l),tempCollisionPoly.offset(t,e)):tempCollisionPoly.Qc(),i=s.MT(tempCollisionPoly),this.Zvt.lGt=i),s.bT(i,a),a.offset(-t,-e),a.iu(r,n,h,o)}else l?(a.I(l),a.iu(r,n,h,o)):a.su(this.S4(),-this.Fy(),-this.$y());e.width=r,e.height=n,e.angle=t}return a}aGt(){this.mGt(!0);const t=this.Hvt;null!==t&&(t.width=NaN)}S5(t,e){if(t=Math.floor(t),e=Math.floor(e),!this.aU().$F().vF())throw new Error("object does not support mesh");this.T5(),this.Zvt={CGt:C33.Cn(C33.l1.eT,t,e),gGt:C33.Cn(C33.l1.eT,t,e),lGt:null}}I5(){return null!==this.Zvt}w5(){if(this.I5())return this.Zvt.CGt;throw new Error("no mesh")}SGt(){if(this.I5())return this.Zvt.gGt;throw new Error("no mesh")}yGt(t){this.Ixt(FLAG_MESH_CHANGED,t)}TGt(){return 0!=(this.HSt&FLAG_MESH_CHANGED)}mGt(t){this.Ixt(FLAG_PHYSICS_BODY_CHANGED,t)}_Gt(){return 0!=(this.HSt&FLAG_PHYSICS_BODY_CHANGED)}Zxt(t){const e=this.Zvt.CGt,s=Math.min(e.gT(),0),i=Math.min(e.ST(),0),r=Math.max(e.yT(),1),n=Math.max(e.TT(),1),h=t.width(),o=t.height();t.offsetLeft(s*h),t.offsetTop(i*o),t.Wl((r-1)*h),t.Ul((n-1)*o),this.x_=e._T()}T5(){this.Zvt&&(this.Zvt.CGt.gn(),this.Zvt.gGt.gn(),this.Zvt=null,this.aGt())}E5(t,e,s){t=Math.floor(t),e=Math.floor(e);const i=s.mode||"absolute";if(!VALID_SET_MESH_POINT_MODES.has(i))throw new Error("invalid mode");let r="relative"===i,n=s.x,h=s.y,o=s.TB,a="number"==typeof s.u?s.u:r?0:-1,l="number"==typeof s.v?s.v:r?0:-1;if(!this.I5())return!1;const c=this.w5(),u=c.AT(t,e);if(null===u)return!1;let f=!1;return"number"==typeof o&&u.Uy()!==o&&(u.Vy(o),f=!0),r&&(n+=t/(c.fT()-1),h+=e/(c.dT()-1)),a=-1!==a||r?(r&&(a+=t/(c.fT()-1)),C33.En(a,0,1)):u.Hy(),l=-1!==l||r?(r&&(l+=e/(c.dT()-1)),C33.En(l,0,1)):u.Xy(),u.Fy()===n&&u.$y()===h&&u.Hy()===a&&u.Xy()===l?f:(u.ky(n),u.Wy(h),u.jy(a),u.Yy(l),this.aGt(),!0)}nbt(){return this.vs.nbt()}L4(t,e){return!!this.C4().rc(t,e)&&!!this.S4().rc(t,e)&&(this.nbt()?this.vs.P5().jAt(t,e):!this.uGt()||this.fGt().rc(t-this.Fy(),e-this.$y()))}EGt(){return 0!=(this.HSt&FLAG_COLLISION_CELL_CHANGED)}AMt(){if(this.EGt()&&this.O4()&&0==(this.HSt&FLAG_DESTROYED)){const t=this.C4(),e=this.Dft.TMt(),s=this.Wvt;if(tempRect.set(e.f6(t.Gl()),e.d6(t.Pl()),e.f6(t.Ol()),e.d6(t.Dl())),!s.equals(tempRect)){const i=this.vs;s===DEFAULT_COLLISION_CELLS?(e.p6(i,null,tempRect),this.Wvt=C33.Cn(C33.Rect,tempRect)):(e.p6(i,s,tempRect),s.I(tempRect)),this.HSt&=~FLAG_COLLISION_CELL_CHANGED}}}AGt(){this.HSt|=FLAG_COLLISION_CELL_CHANGED}qxt(){const t=this.Wvt;t!==DEFAULT_COLLISION_CELLS&&(this.Dft.TMt().p6(this.vs,t,null),this.Wvt=DEFAULT_COLLISION_CELLS)}Yxt(){const t=this.$L();if(t.bY()&&0==(this.HSt&FLAG_DESTROYED)){const e=t.gq(),s=this.C4(),i=this.Uvt;if(tempRect.set(e.f6(s.Gl()),e.d6(s.Pl()),e.f6(s.Ol()),e.d6(s.Dl())),!i.equals(tempRect)){const r=this.vs;i===DEFAULT_RENDER_CELLS?(e.p6(r,null,tempRect),this.Uvt=C33.Cn(C33.Rect,tempRect)):(e.p6(r,i,tempRect),i.I(tempRect)),t.Sq()}}}YY(){const t=this.Uvt;t!==DEFAULT_RENDER_CELLS&&(this.$L().gq().p6(this.vs,t,null),this.Uvt=DEFAULT_RENDER_CELLS)}aK(){return this.Uvt}w4(){const t=this.vs,e=this.xvt,s=e.VL();s.length&&s.at(-1)===t||(e.XY(t,!1),e.VY(t,!1),this.gf.XL())}M4(){const t=this.vs,e=this.xvt,s=e.VL();s.length&&s[0]===t||(e.XY(t,!1),e.jY(t,!1),this.gf.XL())}v4(t){const e=this.vs,s=this.xvt;if(s._L()!==t._L())throw new Error("layer from different layout");t!==s&&(s.XY(e,!0),this.HL(t),t.VY(e,!0),this.gf.XL())}G4(t,e){let s=this.vs,i=!1,r=this.xvt;if(t.o$()!==s.o$()){const n=t.BL();if(!n)throw new Error("expected world instance");const h=n.$L(),o=(r.qO()!==h.qO()&&(r.XY(s,!0),this.HL(h),h.VY(s,!0),i=!0),h.pK(s,t,!!e));(i||o)&&this.gf.XL()}}n4(){return this.qvt}IGt(t){this.Ixt(FLAG_HAS_ANY_ACTIVE_EFFECT,t)}_K(){return 0!=(this.HSt&FLAG_HAS_ANY_ACTIVE_EFFECT)}v8(t,e=null){const s={x:this.Fy(),y:this.$y(),w:this.Sm(),h:this.vm(),l:this.$L().cq(),zi:this.WL()},i=(0!==this.Uy()&&(s.ze=this.Uy()),0!==this.yk()&&(s.a=this.cxt()),this.mq()||(s.c=this.Ay.toJSON()),.5!==this.TW()&&(s.oX=this.TW()),.5!==this.EW()&&(s.oY=this.EW()),0!==this.MB()&&(s.bm=this.MB()),this.iB()||(s.v=this.iB()),this.O4()||(s.ce=this.O4()),this.iGt()&&(s.be=this.iGt()),this.qvt&&(s.fx=this.qvt.v8()),0!=(this.HSt&FLAG_SOLID_FILTER_INCLUSIVE));return i&&(s.sfi=i),this.jvt&&(s.sft=[...this.jvt].join(" ")),this.zvt&&"visual-state"!==t&&(s.sgi=this.zvt.v8(t,e),sceneGraphExportDataMap.has(this))&&(s.sgcd=sceneGraphExportDataMap.get(this).nxt,s.sgzid=sceneGraphExportDataMap.get(this).hxt),this.I5()&&(s.mesh=this.w5().zy()),s}Cvt(){return{x:this.al,y:this.ll,z:this.Iy,w:this.Ovt,h:this.Dvt,a:this.Qo,sgi:this.mht()?this.mht().uvt():null}}Tvt(t){t&&(this.al=t.x,this.ll=t.y,this.Iy=t.z,this.Ovt=t.w,this.Dvt=t.h,this.Qo=t.a,t.sgi&&this.mht()&&this.mht().x8(t.sgi),this.pxt(),this.o4())}GMt(){this.sxt(),this.$xt(),this.Vxt(null),this.zvt&&this.zvt.Svt(this.Jbt,this.Zbt)}KJ(t){"visual-state"!==t&&this.$xt()}JJ(t,e="full",s=null){t.hasOwnProperty("sgi")&&"visual-state"!==e&&0==(this.HSt&FLAG_DESTROYED)&&this.zvt.JJ(t.sgi,s)}Wbt(t,e="full",s){t.hasOwnProperty("sgi")&&"visual-state"!==e&&0==(this.HSt&FLAG_DESTROYED)&&(this.zvt.Svt(null,null),this.sxt(),this.o4())}x8(t,e){if(enableUpdateRendererStateGroup=!1,this.ky(t.x),this.Wy(t.y),this.wm(t.w),this.ym(t.h),this.JY(t.zi),this.Vy(t.hasOwnProperty("ze")?t.ze:0),this.Sk(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?tempColor.za(t.c):t.hasOwnProperty("o")?(tempColor.fa(this.Ay),tempColor.a=t.o):tempColor.ta(1,1,1,1),this.ixt(tempColor),this.bht(t.hasOwnProperty("oX")?t.oX:.5),this.xht(t.hasOwnProperty("oY")?t.oY:.5),this.Ry(t.hasOwnProperty("bm")?t.bm:0),this.eB(!t.hasOwnProperty("v")||t.v),this.D4(!t.hasOwnProperty("ce")||t.ce),this.sGt(!!t.hasOwnProperty("be")&&t.be),this.Kxt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.qvt&&t.hasOwnProperty("fx")&&this.qvt.x8(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==e&&this.Jbt)for(const s of this.Jbt)s.fV()||this.gf.t$(s);if(t.hasOwnProperty("sgi")&&"visual-state"!==e){this.Vxt(null);const i=this.zvt,r=t.sgi;i.x8(r),i.Svt(this.Jbt,this.Zbt),t.sgcd&&C33.Ci(t.sgzid)&&sceneGraphExportDataMap.set(this,{nxt:t.sgcd,hxt:t.sgzid})}if(t.hasOwnProperty("mesh")){const n=t.mesh;this.S5(n.cols,n.rows),this.w5().Jy(n)}else this.T5();this.o4(),enableUpdateRendererStateGroup=!0,this.oxt(),"visual-state"!==e&&this.gf.wGt(this.aU(),t)}}}{const C33=self.Fe;C33.uRt=class extends C33.pn{constructor(t,e){super();const s=t.hN(),i=s.j1t(e[1]),r=(s.RGt().BIt(i),this.gf=s,this.Dft=t,this.yIt=C33.fF.q5(i),this.rAt=null,this.MGt=null,this.Uwt=i.Instance,this.x6=e[2],this.Tn=e[0],this.bgt=this.gf.l3t(e[3]),this.yIt.ASt());if(r<2&&(this.rAt=C33.Cn(i.bRt,this),!(this.rAt instanceof C33.SIt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(C33.fF.$Et(this,r),2<=r){const n=i.bRt??globalThis.AV;if(this.MGt=new n,!(this.MGt instanceof globalThis.AV))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.MGt=new globalThis.X5;C33.fF.WEt(r),this.NEt()}static CE(t,e){return C33.Cn(C33.uRt,t,e)}gn(){this.gf=null,this.yIt=null,this.rAt&&(this.rAt.gn(),this.rAt=null),this.Uwt=null}yyt(){return this.rAt}NEt(){this.rAt?this.rAt.NEt():this.MGt&&this.MGt.RU()}hN(){return this.gf}YB(){return this.Dft}B5(){return this.yIt}zRt(){return this.Uwt}lf(){return this.Tn}cq(){return this.x6}U5(){return this.MGt}l3t(){return this.bgt}}}{const C33=self.Fe,IBehaviorInstance=self.F5;C33.HMt=class extends C33.pn{constructor(t){super(),this.gf=t.runtime,this.o2t=t.W5,this.yIt=this.o2t.B5(),this.vs=t.H5,this.t1=t.index,this.NMt=null,this.FMt=null,this.yIt.VY(this.vs)}gn(){this.FMt&&(this.FMt.ZB(),this.FMt=null),this.yIt.XY(this.vs),this.NMt&&(this.NMt.gn(),this.NMt=null),this.gf=null,this.o2t=null,this.yIt=null,this.vs=null}jRt(t){if(this.NMt)throw new Error("already got sdk instance");const e=this.B5().ASt();if(e<2){if(this.NMt=C33.Cn(this.o2t.zRt(),this,t),!(this.NMt instanceof C33.TIt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.B5().FEt();this.BEt(s.Instance,t)}}P5(){return this.NMt??this.FMt}j5(){return this.vs}hN(){return this.gf}V5(){return this.o2t}B5(){return this.yIt}Unt(){return this.t1}IIt(){this.NMt?this.NMt.IIt():this.FMt.MV()}bIt(t,e){this.NMt&&this.NMt.bIt(t,e)}$bt(){return this.NMt?this.NMt.wAt():this.FMt.j$()}zy(t="full"){return this.NMt?this.NMt.zy(t):this.FMt.X$(t)}Jy(t,e="full"){if(this.NMt)return this.NMt.Jy(t,e);this.FMt.Y$(t,e)}static bGt(t,e,s){let i=globalThis.IV,r,n;r=e instanceof i?t.Pk(e):e.AIt(),n=s instanceof i?t.Pk(s):s.AIt();const h=r.j5(),o=n.j5(),a=h.YB().qO(),l=o.YB().qO();if(a!==l)return a-l;const c=h.bbt(),u=o.bbt();return c!==u?c-u:r.Unt()-n.Unt()}BEt(t,e){const s=IBehaviorInstance,i=t??this.NMt.FEt(),r=i||s,n=this.B5().ASt();if(C33.fF.$Et(this,n),C33.fF.$It(e),this.FMt=new r,C33.fF.WIt(),C33.fF.WEt(n),!i||this.FMt instanceof s)return this.FMt;throw new TypeError(`script interface class '${i.name}' does not extend the right base class '${s.name}'`)}oAt(){return this.FMt||this.BEt()}vAt(){return!!this.FMt}}}{const C33=self.Fe;C33.pY=class extends C33.pn{constructor(t,e){super(),this.rT=t,this.vGt=[],this.xGt=[],this.GGt=new Map,this.PGt=[],this.OGt=[],this.DGt=new Set,this.BS=!0;for(const s of e){const i=C33.Cn(C33.LGt,this,s,this.vGt.length);this.vGt.push(i),this.GGt.set(i.lf().toLowerCase(),i),3<=s.length&&this.PGt.push(this.NGt(i,s[2]))}this.hN().FGt(this)}gn(){this.hN().kGt(this);for(const t of this.OGt)t.gn();C33.Vh(this.OGt),C33.Vh(this.vGt),C33.Vh(this.xGt),this.GGt.clear(),C33.Vh(this.PGt),this.rT=null}BGt(t){this.DGt.add(t)}$Gt(t){this.DGt.delete(t)}WGt(t){t.Og()&&(this.OGt=this.vGt.map(t=>{const e=t.mA();return 0<e.GetCustomParametersByteSize()?C33.Cn(C33.l1.WebGPUEffectCustomParamsBuffer,e):null}),this.UGt());for(const e of this.DGt)e.WGt(t)}VRt(t){if(t.length){this.vGt=t.concat(this.vGt);for(const e of t)this.GGt.set(e.lf().toLowerCase(),e);for(let t=0,e=this.vGt.length;t<e;++t)this.vGt[t].nq(t)}}NGt(t,e){t.VGt(e[0]);const s=e.slice(1);for(let t=0,e=s.length;t<e;++t){const i=s[t];if(Array.isArray(i)){const r=C33.Cn(C33.Ko);r.za(i),s[t]=r}}return s}pT(){return this.rT}hN(){return this.rT.hN()}J5(){C33.Vh(this.xGt);let t=!0;for(const e of this.vGt)e.Gmt()&&(this.xGt.push(e),e.mA().hy()||(t=!1));this.BS=t}dk(){return this.vGt}rMt(){return 0<this.vGt.length}jrt(t){return this.GGt.get(t.toLowerCase())||null}HGt(t){if((t=Math.floor(+t))<0||t>=this.vGt.length)throw new RangeError("invalid effect type index");return this.vGt[t]}K5(t){return this.HGt(t).Gmt()}z5(t,e){this.HGt(t).VGt(e)}Cq(){return this.xGt}_K(){return 0<this.xGt.length}hy(){return this.BS}Hrt(t){return this.PGt[t]}SY(t){return(t<this.OGt.length?this.OGt:this.PGt)[t]}Z5(t,e){if(t<0||t>=this.PGt.length)return null;const s=this.PGt[t];return e<0||e>=s.length?null:s[e]}Q5(t,e,s){if(t<0||t>=this.PGt.length)return!1;const i=this.PGt[t];if(e<0||e>=i.length)return!1;const r=i[e];if(r instanceof C33.Ko){if(r.Ea(s))return!1;r.fa(s)}else{if(r===s)return!1;i[e]=s}return t<this.OGt.length&&this.OGt[t].SetParameterValue(e,s),!0}UGt(){const s=this.PGt,i=this.OGt;for(let t=0,e=Math.min(s.length,i.length);t<e;++t){const r=i[t],n=s[t];for(let t=0,e=n.length;t<e;++t)r.SetParameterValue(t,n[t])}}static jGt(t){return t&&t instanceof C33.Ko?{t:"color",v:t.toJSON()}:t}static XGt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const e=t.t;if("color"!==e)throw new Error("invalid effect parameter type");{const s=C33.Cn(C33.Ko);return s.za(t.v),s}}}static YGt(t){return t.map(C33.pY.jGt)}static qGt(t){return t.map(C33.pY.XGt)}zy(){return this.vGt.map(t=>({name:t.lf(),active:t.Gmt(),params:C33.pY.YGt(this.PGt[t.qO()])}))}Jy(t){for(const e of t){const s=this.jrt(e.name);s&&(s.VGt(e.active),this.PGt[s.qO()]=C33.pY.qGt(e.params))}this.J5(),this.UGt()}}}{const C33=self.Fe;C33.LGt=class extends C33.pn{constructor(t,e,s){super(),this.dY=t,this.yf=e[0],this.Tn=e[1],this.t1=s,this.Ty=null,this.C0=!0}gn(){this.dY=null,this.Ty=null}URt(t){const e=C33.Cn(C33.LGt,t,[this.yf,this.Tn],-1);return e.Ty=this.Ty,e.C0=this.C0,e}WGt(t){const e=t.Bg(this.yf);if(!e)throw new Error("failed to find shader program '"+this.yf+"'");this.Ty=e}fk(){return this.dY}lf(){return this.Tn}nq(t){this.t1=t}qO(){return this.t1}pT(){return this.dY.pT()}hN(){return this.dY.hN()}VGt(t){this.C0=!!t}Gmt(){return this.C0}mA(){return this.Ty}KGt(){const s=[];for(let t=0,e=this.Ty.CA();t<e;++t){const i=this.Ty.gA(t);if("float"===i||"percent"===i)s.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");s.push(C33.Cn(C33.Ko,1,1,1,1))}}return s}}}{const C33=self.Fe;C33.Kvt=class extends C33.pn{constructor(t,e){super(),this.vs=t,this.zGt=e,this.dY=t.YB().fk(),this.JGt=!0,this.TY=!0,this.ZGt=!1,this.QGt=!1,this.tPt=!1,this.ePt=!1,this.HO=C33.Cn(C33.l1.HG,t.hN().KN().mY(),{OG:(t,e)=>{const s=e.NO(),i=s.BL();t.My(i.CY()),t.w2(i.d4()),s.wT(t),t.w2(0)},DG:t=>{const e=t.$At(),[s,i]=t.BAt();return{vO:e,xO:s,GO:i}},LG:t=>this.SY(t)}),this.sPt=[],this.xGt=[],this.BS=!0,this.PGt=[],this.OGt=[],this.WGt(t.hN().JS());for(let t=0,e=this.dY.dk().length;t<e;++t)this.sPt.push(!0);this.J5(),this.dY.BGt(this)}gn(){this.dY.$Gt(this);for(const t of this.OGt)t&&t.gn();C33.Vh(this.OGt),this.HO.gn(),this.HO=null,C33.Vh(this.sPt),C33.Vh(this.xGt),C33.Vh(this.PGt),this.vs=null,this.dY=null}WGt(t){t.Og()&&(this.OGt=this.dY.dk().map(t=>{const e=t.mA();return 0<e.GetCustomParametersByteSize()?C33.Cn(C33.l1.WebGPUEffectCustomParamsBuffer,e):null}))}rxt(t){let e=0;for(const s of t)this.PGt.push(this.NGt(e,s)),++e;this.UGt(),this.J5()}NGt(t,e){this.sPt[t]=e[0];const s=e.slice(1);for(let t=0,e=s.length;t<e;++t){const i=s[t];if(Array.isArray(i)){const r=C33.Cn(C33.Ko);r.za(i),s[t]=r}}return s}JMt(){for(const t of this.dY.dk())this.PGt.push(t.KGt());this.UGt()}pT(){return this.rT}fk(){return this.dY}YO(){return this.pq(),this.HO}hN(){return this.vs.hN()}J5(){C33.Vh(this.xGt);let t=this.zGt,s=this.dY.dk(),i=this.xGt,r=this.sPt,n=!0;for(let t=0,e=s.length;t<e;++t)if(r[t]){const h=s[t];i.push(h),h.mA().hy()||(n=!1)}this.BS=n,t.IGt(!!i.length),this.JGt=!0}pq(){const t=this.vs,e=this.zGt,s=e.mq(),i=t.$F().wF(),r=0!==e.yk()||0!==e.$L().yk()||e.Sm()<0||e.vm()<0,n=t.VAt(),h=t.ny();(this.JGt||s!==this.TY||i!==this.ZGt||r!==this.QGt||n!==this.tPt||h!==this.ePt||this.HO.DP())&&(this.HO.LP(this.xGt.map(t=>t.mA()),{FG:this.xGt.map(t=>t.qO()),kG:!s||h,$G:i,WG:n,UG:r}),this.JGt=!1,this.TY=s,this.ZGt=i,this.QGt=r,this.tPt=n,this.ePt=h)}Cq(){return this.xGt}Hrt(t){return this.PGt[t]}SY(t){return(t<this.OGt.length?this.OGt:this.PGt)[t]}Z5(t,e){if(t<0||t>=this.PGt.length)return null;const s=this.PGt[t];return e<0||e>=s.length?null:s[e]}Q5(t,e,s){if(t<0||t>=this.PGt.length)return!1;const i=this.PGt[t];if(e<0||e>=i.length)return!1;const r=i[e];if(r instanceof C33.Ko){if(r.Ea(s))return!1;r.fa(s)}else{if(r===s)return!1;i[e]=s}return t<this.OGt.length&&this.OGt[t].SetParameterValue(e,s),!0}UGt(){const s=this.PGt,i=this.OGt;for(let t=0,e=i.length;t<e;++t){const r=i[t],n=s[t];for(let t=0,e=n.length;t<e;++t)r.SetParameterValue(t,n[t])}}hy(){return this.BS}iPt(){return this.xGt.some(t=>t.mA().my())}K5(t){return this.sPt[t]}z5(t,e){this.sPt[t]=!!e}dk(){return this.dY.dk()}v8(){return this.dY.dk().map(t=>({name:t.lf(),active:this.sPt[t.qO()],params:C33.pY.YGt(this.PGt[t.qO()])}))}x8(t){for(const e of t){const s=this.dY.jrt(e.name);s&&(this.sPt[s.qO()]=e.active,this.PGt[s.qO()]=C33.pY.qGt(e.params))}this.J5(),this.UGt()}}}{let C33=self.Fe,tempCandidates=[],tileCollRectCandidates=[],tempJumpthruRet=[],tempPolyA=C33.Cn(C33.jc),tempPolyB=C33.Cn(C33.jc),tempQuad=C33.Cn(C33.ac),tempRect=C33.Cn(C33.Rect),tempRect2=C33.Cn(C33.Rect),tempPolyC=null,tempRect3=null,tempQuadB=null;C33.rPt=class extends C33.pn{constructor(t){super(),this.gf=t,this.nPt=0,this.hPt=0,this.oPt=[],this.aPt=0,this.lPt=0,this.cPt=0,this.uPt=0,this.fPt=new self.RN(this)}gn(){this.gf=null}hN(){return this.gf}tD(){return this.fPt}dPt(){this.lPt=this.aPt,this.aPt=0,this.uPt=this.cPt,this.cPt=0}pPt(){return this.lPt}mPt(){return this.uPt}CPt(t,e){const s=t.BL(),i=e.BL();s&&i&&s.O4()&&i.O4()&&this.oPt.push([t,e])}TTt(e,s,i){for(const[r,n]of this.oPt){let t=null;if(e===r)t=n;else{if(e!==n)continue;t=r}t.bTt(s)&&!i.includes(t)&&i.push(t)}}_Tt(t,e){if(this.oPt.length)for(const[s,i]of this.oPt)if(t===s&&e===i||t===i&&e===s)return!0;return!1}gPt(){C33.Vh(this.oPt)}bN(t,e){if(!t||!e||t===e)return!1;const s=t.BL(),i=e.BL();if(!s.O4()||!i.O4())return!1;this.aPt++;const r=s.$L(),n=i.$L(),h=r.iK(n);return h?this.SPt(s,i):this.yPt(s,i)}SPt(t,e){if(!t.C4().ec(e.C4()))return!1;if(this.cPt++,!t.S4().Fc(e.S4()))return!1;if(t.nbt()&&e.nbt())return!1;if(t.nbt())return this.TPt(t,e);if(e.nbt())return this.TPt(e,t);if(!t.uGt()&&!e.uGt())return!0;const s=t.fGt(),i=e.fGt();return s.ru(i,e.Fy()-t.Fy(),e.$y()-t.$y())}yPt(s,i){const t=s.nbt(),e=i.nbt();if(t&&!e)return this._Pt(s,i);if(e&&!t)return this._Pt(i,s);if(e||t)return!1;{const r=s.$L(),n=i.$L(),h=(tempPolyA.I(s.fGt()),tempPolyB.I(i.fGt()),tempPolyA.zc());for(let t=0,e=h.length;t<e;t+=2){const a=t+1,l=h[t],c=h[a],[u,f]=r.kB(l+s.Fy(),c+s.$y());h[t]=u,h[a]=f}const o=tempPolyB.zc();for(let t=0,e=o.length;t<e;t+=2){const d=t+1,p=o[t],m=o[d],[C,g]=n.kB(p+i.Fy(),m+i.$y());o[t]=C,o[d]=g}return tempPolyA.tu(),tempPolyB.tu(),this.cPt++,tempPolyA.ru(tempPolyB,0,0)}}_Pt(t,e){const s=t.$L(),i=e.$L(),r=(tempPolyC=tempPolyC||C33.Cn(C33.jc),tempRect3=tempRect3||C33.Cn(C33.Rect),tempQuadB=tempQuadB||C33.Cn(C33.ac),e.Fy()),n=e.$y(),[h,o]=i.kB(r,n),[a,l]=s.OB(h,o),c=a-r,u=l-n;if(tempRect3.I(e.C4()),tempRect3.offset(c,u),!t.C4().ec(tempRect3))return!1;if(tempQuadB.I(e.S4()),tempQuadB.offset(c,u),this.cPt++,!t.S4().Fc(tempQuadB))return!1;tempPolyC.I(e.fGt());const f=tempPolyC.zc();for(let t=0,e=f.length;t<e;t+=2){const d=t+1;f[t]+=c,f[d]+=u}return tempPolyC.tu(),this.TPt(t,e,a,l,tempPolyC,tempRect3,tempQuadB)}TPt(t,i,e,s,r,n,h){const o=void 0!==n?n:i.C4(),a=t.Fy(),l=t.$y(),c=t.aU().P5(),u=void 0!==e?e:i.Fy(),f=void 0!==s?s:i.$y(),d=i.uGt(),p=void 0!==h?h:i.S4(),m=tileCollRectCandidates;c.GetCollisionRectCandidates(o,m);for(let t=0,e=m.length;t<e;++t){const C=m[t],g=C.GetRect();if(this.aPt++,o.ic(g,a,l)&&(tempQuad.Pc(g),tempQuad.offset(a,l),tempQuad.Fc(p)))if(d){let t=void 0!==r?r:i.fGt(),e=u,s=f;void 0!==r&&(e=i.Fy(),s=i.$y());const S=C.GetPoly();if(S){if(this.cPt++,S.ru(t,e-(a+g.Gl()),s-(l+g.Pl())))return C33.Vh(m),!0}else if(tempPolyA.su(tempQuad,0,0),tempPolyA.ru(t,e,s))return C33.Vh(m),!0}else{const y=C.GetPoly();if(!y)return C33.Vh(m),!0;if(tempPolyA.su(p,0,0),y.ru(tempPolyA,-(a+g.Gl()),-(l+g.Pl())))return C33.Vh(m),!0}}return C33.Vh(m),!1}EPt(t,o,a){const l=t.ZF(),e=this.gf.GD();if(!e)throw new Error("cannot call outside event");const c=e.l0t(),s=new Map,u=t=>{let e=s.get(t);return void 0===e&&(e=t.cB(),s.set(t,e)),e};if(l.Xft()){a||(l.Qft(!1),C33.Vh(l.t0t())),c&&C33.Vh(l.e0t());for(const i of t.JF()){let r=i.BL(),n=r.$L();if(!(!u(n)||!r.T4())&&o.some(([t,e])=>{const[s,i]=n.OB(t,e,r.d4());return r.L4(s,i)})){if(a)return!1;l.Jft(i)}else c&&l.Zft(i)}}else{let s,i=!1,h=(!c||e.e1t(this.gf.t3t())||this.gf.Ayt()&&!l.e0t().length&&l.t0t().length?s=l.t0t():(s=l.e0t(),i=!0),0);for(let e=0,t=s.length;e<t;++e){let t=s[e],r=t.BL(),n=r.$L();if(!(!u(n)||!r.T4())&&o.some(([t,e])=>{const[s,i]=n.OB(t,e,r.d4());return r.L4(s,i)})){if(a)return!1;i?l.Jft(t):s[h++]=t}else i?s[h++]=t:c&&l.Zft(t)}a||(s.length=h)}return t.N1t(),s.clear(),!!a||l.Yft()}APt(t,e){if(t)for(const s of e.wMt())if(!t.iK(s))return!1;return!0}Eyt(t,e,s,i){if(e.sq())for(const r of e.bCt())this.APt(t,r)?(r.EMt(),r.TMt().m6(s,i)):C33.sn(i,r.JF());else this.APt(t,e)?(e.EMt(),e.TMt().m6(s,i)):C33.sn(i,e.JF())}kN(t,e,s,i){for(const r of e)this.Eyt(t,r,s,i)}IPt(t,e,s){const i=this.gf.VIt();i&&this.kN(t,i.T9(),e,s)}wPt(t,e,s){const i=this.gf.HIt();i&&this.kN(t,i.T9(),e,s)}zxt(t,e){return t.abt()&&(!e||e.BL().zxt(t.vSt().get("solidTags")))}GN(t){const e=t.BL();this.IPt(e.$L(),e.C4(),tempCandidates);for(const s of tempCandidates)if(this.zxt(s,t)&&this.bN(t,s))return C33.Vh(tempCandidates),s;return C33.Vh(tempCandidates),null}RPt(t,e){this.IPt(null,t,tempCandidates);for(const s of tempCandidates)if(this.zxt(s,e)&&this.MPt(t,s))return C33.Vh(tempCandidates),s;return C33.Vh(tempCandidates),null}bPt(t,e){let s=null;e&&(s=tempJumpthruRet,C33.Vh(s));const i=t.BL();this.wPt(i.$L(),i.C4(),tempCandidates);for(const r of tempCandidates)if(r.cbt()&&this.bN(t,r)){if(!e)return C33.Vh(tempCandidates),r;s.push(r)}return C33.Vh(tempCandidates),s}vPt(e,s,i,r,n){r=r||50;const h=e.BL(),o=h.Fy(),a=h.$y();for(let t=0;t<r;++t)if(h.a4(o+s*t,a+i*t),h.o4(),!this.bN(e,n))return!0;return h.a4(o,a),h.o4(),!1}xPt(e,s,i,r,n,h){r=r||50;let o=e.BL(),a=o.Fy(),l=o.$y(),c=null,u=null;for(let t=0;t<r;++t)if(o.a4(a+s*t,l+i*t),o.o4(),!this.bN(e,c))if(c=this.GN(e))u=c;else if(n&&(c=h?this.bN(e,h)?h:null:this.bPt(e))&&(u=c),!c)return u&&this.GPt(e,s,i,u,16,!0),!0;return o.a4(a,l),o.o4(),!1}PPt(s,i,r,t){t=t||50;let n=s.BL(),h=n.Fy(),o=n.$y(),a=null,l=null;for(let e=0;e<t;++e)for(let t=0;t<2;++t){const c=2*t-1;if(n.a4(h+i*e*c,o+r*e*c),n.o4(),!this.bN(s,a)){if(!(a=this.GN(s)))return l&&this.GPt(s,i*c,r*c,l,16,!0),!0;l=a}}return n.a4(h,o),n.o4(),!1}GPt(t,e,s,i,r,n){let h=2,o=!1,a=!1,l=t.BL(),c=l.Fy(),u=l.$y();for(;h<=r;){const f=1/h;h*=2,l.u4(e*f*(o?1:-1),s*f*(o?1:-1)),l.o4(),this.bN(t,i)||n&&this.GN(t)?(o=!0,a=!0):(o=!1,a=!1,c=l.Fy(),u=l.$y())}a&&(l.a4(c,u),l.o4())}OPt(s,t=100){let i=0,r=s.BL(),n=r.Fy(),h=r.$y(),o=0,a=this.GN(s);if(!a)return!0;for(;i<=t;){let t=0,e=0;switch(o){case 0:t=0,e=-1,i++;break;case 1:t=1,e=-1;break;case 2:t=1,e=0;break;case 3:t=1,e=1;break;case 4:t=0,e=1;break;case 5:t=-1,e=1;break;case 6:t=-1,e=0;break;case 7:t=-1,e=-1}if(o=(o+1)%8,r.a4(Math.floor(n+t*i),Math.floor(h+e*i)),r.o4(),!this.bN(s,a)&&!(a=this.GN(s)))return!0}return r.a4(n,h),r.o4(),!1}DPt(t,e,s,i){const r=t.BL(),n=r.Fy(),h=r.$y(),o=Math.max(10,C33.Rn(e,s,n,h)),a=C33.bn(e,s,n,h),l=i||this.GN(t);if(!l)return C33.An(a+Math.PI);let c=l,u=0,f=0,d=C33.In(5),p;for(p=1;p<36;++p){const I=a-p*d;if(r.a4(e+Math.cos(I)*o,s+Math.sin(I)*o),r.o4(),!this.bN(t,c)&&!(c=i?null:this.GN(t))){u=I;break}}for(36===p&&(u=C33.An(a+Math.PI)),c=l,p=1;p<36;++p){const w=a+p*d;if(r.a4(e+Math.cos(w)*o,s+Math.sin(w)*o),r.o4(),!this.bN(t,c)&&!(c=i?null:this.GN(t))){f=w;break}}if(36===p&&(f=C33.An(a+Math.PI)),r.a4(n,h),r.o4(),f===u)return f;let m=C33.vn(f,u)/2,C;C=C33.Gn(f,u)?C33.An(u+m+Math.PI):C33.An(f+m);const g=Math.cos(a),S=Math.sin(a),y=Math.cos(C),T=Math.sin(C),_=g*y+S*T,E=g-2*_*y,A=S-2*_*T;return C33.bn(0,0,E,A)}LPt(t,e,s,i,r){if(!r)return!1;const n=r.BL();if(!n.O4())return!1;if(this.aPt++,tempRect.set(Math.min(t,s),Math.min(e,i),Math.max(t,s),Math.max(e,i)),!n.C4().ec(tempRect))return!1;if(r.nbt())return this.NPt(t,e,s,i,r,n);if(this.cPt++,!n.S4().Nc(t,e,s,i))return!1;if(!n.uGt())return!0;const h=n.fGt();return h.Nc(n.Fy(),n.$y(),t,e,s,i)}NPt(s,i,r,n,t,e){const h=e.Fy(),o=e.$y(),a=t.P5(),l=tileCollRectCandidates;tempRect2.set(s,i,r,n),tempRect2.normalize(),a.GetCollisionRectCandidates(tempRect2,l);for(let t=0,e=l.length;t<e;++t){const c=l[t],u=c.GetRect();if(this.aPt++,tempRect.ic(u,h,o)&&(tempQuad.Pc(u),tempQuad.offset(h,o),tempQuad.Nc(s,i,r,n))){const f=c.GetPoly();if(!f)return C33.Vh(l),!0;if(this.cPt++,f.Nc(h+u.Gl(),o+u.Pl(),s,i,r,n))return C33.Vh(l),!0}}return C33.Vh(l),!1}MPt(t,e){if(!e)return!1;const s=e.BL();if(!s.O4())return!1;if(this.aPt++,!s.C4().ec(t))return!1;if(e.nbt())return this.FPt(t,e,s);if(this.cPt++,tempQuad.Pc(t),!s.S4().Fc(tempQuad))return!1;if(!s.uGt())return!0;const i=tempPolyA,r=(i.Pc(t,s.Fy(),s.$y()),s.fGt());return i.ru(r,0,0)}FPt(s,t,e){const i=e.Fy(),r=e.$y(),n=t.P5(),h=tileCollRectCandidates;n.GetCollisionRectCandidates(s,h);for(let t=0,e=h.length;t<e;++t){const o=h[t],a=o.GetRect();if(this.aPt++,s.ic(a,i,r)){const l=o.GetPoly();if(!l)return C33.Vh(h),!0;if(this.cPt++,tempPolyA.Pc(s,0,0),l.ru(tempPolyA,-(i+a.Gl()),-(r+a.Pl())))return C33.Vh(h),!0}}return C33.Vh(h),!1}kPt(t,e){if(t){const s=t.BL();s.O4()&&(this.aPt++,s.C4().ec(e.rect))&&(t.nbt()?this.BPt(t,s,e):(this.cPt++,s.uGt()?e.$Pt(t,s.Fy(),s.$y(),s.fGt()):e.WPt(t,s.S4())))}}BPt(s,i,r){const n=i.Fy(),h=i.$y(),o=tileCollRectCandidates;s.P5().GetCollisionRectCandidates(r.rect,o);for(let t=0,e=o.length;t<e;t++){const a=o[t],l=a.GetRect();if(this.aPt++,r.rect.ic(l,n,h)){const c=a.GetPoly();this.cPt++,c?r.$Pt(s,n+l.Gl(),h+l.Pl(),c):r.UPt(s,i.Fy(),i.$y(),l)}}C33.Vh(o)}ON(t,e){if(t!==this.nPt||e!==this.hPt){this.nPt=t,this.hPt=e;const s=this.gf.eq();for(const i of s)if(i.gF()){for(const r of i.zF())r.BL().qxt();i.TMt().VPt(t,e),i._Mt();for(const n of i.zF()){const h=n.BL();h.AGt(),h.AMt()}}}}LN(){return[this.nPt,this.hPt]}HPt(t,e){this.nPt=t,this.hPt=e}}}{const C33=self.Fe;C33.Zwt=class extends C33.pn{constructor(t,e){super(),this.a6=t,this.l6=e,this.c6=C33.Cn(C33.cu)}gn(){this.c6.gn(),this.c6=null}VPt(t,e){if(!this.c6.du())throw new Error("grid not empty");this.a6=t,this.l6=e}u6(t,e,s){let i=this.c6.rs(t,e);return i||(s?(i=C33.Cn(C33.jPt,this,t,e),this.c6.Set(t,e,i),i):null)}f6(t){const e=Math.floor(t/this.a6);return isFinite(e)?e:0}d6(t){const e=Math.floor(t/this.l6);return isFinite(e)?e:0}p6(i,r,n){if(r)for(let s=r.Gl(),t=r.Ol();s<=t;++s)for(let t=r.Pl(),e=r.Dl();t<=e;++t)if(!n||!n.rc(s,t)){const h=this.u6(s,t,!1);h&&(h.v0(i),h.du())&&this.c6.pu(s,t)}if(n)for(let s=n.Gl(),t=n.Ol();s<=t;++s)for(let t=n.Pl(),e=n.Dl();t<=e;++t)r&&r.rc(s,t)||this.u6(s,t,!0).r6(i)}m6(t,e){let s=this.f6(t.Gl()),i=this.d6(t.Pl()),r=this.f6(t.Ol()),n=this.d6(t.Dl());if(isFinite(r)&&isFinite(n))for(;s<=r;++s)for(let t=i;t<=n;++t){const h=this.u6(s,t,!1);h&&h.h6(e)}}}}{const C33=self.Fe;C33.jPt=class extends C33.pn{constructor(t,e,s){super(),this.JX=t,this.al=e,this.ll=s,this.ZX=C33.Cn(C33.Su)}gn(){this.ZX.gn(),this.ZX=null,this.JX=null}du(){return this.ZX.du()}r6(t){this.ZX.Eu(t)}v0(t){this.ZX.pu(t)}h6(t){C33.sn(t,this.ZX.Au())}}}{const C33=self.Fe,PADDING=1e-6,NO_HIT=2;C33.XPt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new C33.Rect,this.YPt=NO_HIT,this.qPt=null,this.KPt=0,this.zPt=0,this.JPt=0,this.ZPt=0,this.QPt=0,this.Gt=0,this.tOt=1,this.eOt=0,this.sOt=1,this.iOt=0}rOt(){return this.YPt<1+PADDING}g0(){this.YPt=NO_HIT}Set(t,e,s,i){return this.x1=t,this.y1=e,this.x2=s,this.y2=i,this.dx=s-t,this.dy=i-e,this.rect.set(t,e,s,i),this.rect.normalize(),this.YPt=NO_HIT,this.qPt=null,this.KPt=0,this.zPt=0,this.JPt=0,this.ZPt=0,this.QPt=0,this.Gt=0,this.tOt=1,this.eOt=0,this.sOt=1,this.iOt=0,this}nOt(){if(!1!==this.rOt()){const t=this.dx*this.YPt,e=this.dy*this.YPt,s=Math.hypot(t,e),i=t/s,r=e/s,n=(this.Gt=s-PADDING,this.ZPt=this.x1+i*this.Gt,this.QPt=this.y1+r*this.Gt,this.KPt=Math.atan2(this.JPt,this.zPt)+Math.PI/2,this.tOt=Math.cos(this.KPt),this.eOt=Math.sin(this.KPt),i*this.tOt+r*this.eOt);if(this.sOt=i-2*this.tOt*n,this.iOt=r-2*this.eOt*n,0<n){const h=Math.PI;this.KPt=C33.An(this.KPt+h),this.tOt=-this.tOt,this.eOt=-this.eOt}}}hOt(t,e,s,i,r){const n=C33.Sh(this.x1,this.y1,this.x2,this.y2,e,s,i,r);0<=n&&n<this.YPt&&(this.YPt=n,this.qPt=t.o$(),this.zPt=e-i,this.JPt=s-r)}UPt(t,e,s,i){const r=e+i.Gl(),n=e+i.Ol(),h=s+i.Pl(),o=s+i.Dl();this.hOt(t,r,h,n,h),this.hOt(t,n,h,n,o),this.hOt(t,n,o,r,o),this.hOt(t,r,o,r,h)}WPt(t,e){const s=e.hh(),i=e.oh(),r=e.ah(),n=e.uh(),h=e.fh(),o=e.ph(),a=e.mh(),l=e.Ch();this.hOt(t,s,i,r,n),this.hOt(t,r,n,h,o),this.hOt(t,h,o,a,l),this.hOt(t,a,l,s,i)}$Pt(s,i,r,t){const n=t.zc();for(let t=0,e=n.length;t<e;t+=2){const h=(t+2)%e,o=n[t]+i,a=n[t+1]+r,l=n[h]+i,c=n[1+h]+r;this.hOt(s,o,a,l,c)}}}}{const C33=self.Fe,VALID_FULLSCREEN_MODES=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),VALID_FULLSCREEN_SCALING_QUALITIES=new Set(["high","low"]),glMatrix=self.ye,mat42=glMatrix.Ae,vec32=glMatrix.Me,tempProjection=mat42.create(),PERCENTTEXT_WIDTH=300,PERCENTTEXT_HEIGHT=200,PROGRESSBAR_WIDTH=120,PROGRESSBAR_HEIGHT=8,tempQuad=C33.Cn(C33.ac),tempRect=C33.Cn(C33.Rect),SPLASH_MIN_DISPLAY_TIME=3e3,SPLASH_AFTER_FADEOUT_WAIT_TIME=200,SPLASH_FADE_DURATION=300;C33.oOt=class extends C33.pn{constructor(t){super(),this.gf=t,this.aOt=[],this.lOt=!1,this.cOt=null,this.uOt=null,this.fOt=null,this.dOt="high-performance",this.pOt=!1,this.mOt=0,this.COt=0,this.gOt="",this.SOt=0,this.yOt=0,this.TOt=0,this._Ot=0,this.EOt=0,this.AOt=0,this.O1="normalized",this.IOt=0,this.wOt=1,this.ROt=1e4,this.fg=!0,this.MOt=0,this.mP=0,this.CP=0,this.bOt="letterbox-scale",this.vOt="letterbox-scale",this.xOt=0,this.GOt=0,this.POt=mat42.create(),this.OOt="high",this.DOt=this.OOt,this.LOt=!1,this.NOt=[],this.FOt=new Set,this.kOt=self.C3_Shaders,this.BOt=C33.Cn(C33.l1.SG,{pG:()=>[this.kK(),this.BK()],mG:()=>this.$Ot(),CG:t=>this.WOt(t),getTime:()=>this.hN().KD(),gG:()=>this.hN().XL()}),this.UOt=0,this.VOt=0,this.HOt=NaN,this.jOt=null,this.XOt=new Map,this.YOt=NaN,this.qOt=new Map,this.KOt="",this.zOt=1,this.JOt=C33.Cn(C33.Rect),this.ZOt="",this.QOt=null,this.tDt=null,this.eDt=0,this.sDt=0,this.iDt=-1,this.rDt=0,this.nDt=t=>this.rDt=t.progress,this.hDt=null,this.oDt={aDt:null,lDt:null,cDt:null},this.uDt=0,this.fDt=0,this.dDt=0,this.pDt="fade-in",this.mDt=null,this.CDt=new Promise(t=>this.mDt=t)}gDt(t){this.dOt=t}SDt(t){this.lOt=!!t}yDt(t){this.O1=t}TDt(){return this.O1}_Dt(t){this.IOt=t}EDt(t,e){this.wOt=t,this.ROt=e}ADt(t){this.pOt=!!t}async Fo(t){let e=t.canvas,s=(this.aOt.push({canvas:e,IDt:null}),this.gf.N$("runtime","window-resize",t=>this.wDt(t)),this.gf.N$("runtime","fullscreenchange",t=>this.RDt(t)),this.gf.N$("runtime","fullscreenerror",t=>this.MDt(t)),e.addEventListener("webglcontextlost",t=>this.bDt(t)),e.addEventListener("webglcontextrestored",t=>this.vDt(t)),this.LOt=!!t.isFullscreen,this.gOt=t.cssDisplayMode,navigator.gpu&&this.lOt),i=!1;if(s)try{await this.xDt(!0)}catch(t){this.GDt("WebGPU",t),this.uOt=null}if(!this.JS())try{await this.PDt(!0)}catch(t){this.GDt("WebGL",t),this.cOt=null}if(this.JS()||(i=!0),!this.JS()&&s)try{await this.xDt(!1)}catch(t){this.GDt("WebGPU",t),this.uOt=null}if(!this.JS())try{await this.PDt(!1)}catch(t){this.GDt("WebGL",t),this.cOt=null}const r=this.JS();if(!r)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");r.TS(i),this.uOt&&(this.uOt.ODt=()=>this.DDt(),this.uOt.LDt=()=>this.NDt()),"normalized"===this.O1?r.vg():(r.xg(),r.Mg(this.IOt)),this.uM(t.windowInnerWidth,t.windowInnerHeight,!0),await this.WGt()}GDt(t,e){e&&"string"==typeof e.message&&e.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,e)}async xDt(t){const e={w1:this.wOt,R1:this.ROt},s={powerPreference:this.dOt,depth:this.gf.Hq(),failIfMajorPerformanceCaveat:t,FDt:this.gf.YK(),kDt:this.gf.BDt(),_b:this.gf.$Dt()};this.uOt=C33.Cn(C33.l1.WebGPURenderer,e),await this.uOt.CE(this.aOt[0].canvas,s)}async PDt(t){const e={alpha:!0,powerPreference:this.dOt,Tb:"xbox-uwp-webview2"!==this.gf.jN(),depth:this.gf.Hq(),_b:this.gf.$Dt(),failIfMajorPerformanceCaveat:t,w1:this.wOt,R1:this.ROt};this.pOt&&(e.Eb=1),this.cOt=C33.Cn(C33.l1.wb,this.aOt[0].canvas,e),await this.cOt.gg()}async WDt(){if(this.kOt){const t=[];for(const[e,s]of Object.entries(this.kOt)){s.src=s.UDt;const i=C33.l1.WebGPUShaderProgram.LA();t.push(this.uOt.Gv(Object.assign({dE:i,name:e},s)))}await Promise.all(t)}}async VDt(){if(this.kOt){const e=[];for(const[s,i]of Object.entries(this.kOt)){let t;if(i.HDt&&2<=this.cOt.e_())i.src=i.HDt,t=C33.l1.uE.NA();else{if(!i.jDt)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.jDt,t=C33.l1.uE.LA()}e.push(this.cOt.Gv(Object.assign({dE:t,name:s},i)))}await Promise.all(e),this.cOt.Pv(),this.cOt.Wg()}this.cOt.eG()&&(this.jOt=C33.Cn(C33.l1.lb,this.cOt))}async WGt(){this.uOt?await this.WDt():this.cOt&&await this.VDt();const t=this.JS();t.SS(this.fg),t.eG()&&(this.HOt=0);for(const e of this.gf.XDt()){for(const s of e.dk())s.WGt(t);e.WGt(t),e.J5()}this.fOt=new self.dH(this.gf,t)}gn(){this.gf=null,this.cOt=null,this.aOt.length=0}lD(){return this.gf.lD()}wDt(t){const e=this.gf;if(!e.YDt()){const s=t.devicePixelRatio,i=(this.lD()&&(self.devicePixelRatio=s),e.qDt(s),this.LOt=!!t.isFullscreen,this.gOt=t.cssDisplayMode,this.uM(t.innerWidth,t.innerHeight),e.XL(),new C33.Event("window-resize")),r=(i.data=t,e.zf().h0(i),new C33.Event("resize"));r.KDt=this.QN(),r.zDt=this.eF(),r.JDt=this.iF(),r.ZDt=this.nF(),e.Q7(r),e.tJ()&&(e.U3t()||self.C3Debugger.IsDebuggerPaused())&&e.jP()}}RDt(t){this.LOt=!!t.isFullscreen,this.uM(t.innerWidth,t.innerHeight,!0),this.gf.XL()}MDt(t){this.LOt=!!t.isFullscreen,this.uM(t.innerWidth,t.innerHeight,!0),this.gf.XL()}uM(t,e,s=!1){if(t=Math.floor(t),e=Math.floor(e),t<=0||e<=0)throw new Error("invalid size");if(this.mOt!==t||this.COt!==e||s){this.mOt=t,this.COt=e;const i=this.QDt();"letterbox-scale"===i?this.tLt(t,e):"letterbox-integer-scale"===i?this.eLt(t,e):"off"===i?this.sLt(t,e):this.iLt(t,e),this.rLt(i);for(const{canvas:h}of this.aOt)h.width=this.TOt,h.height=this._Ot;this.gf.Tf("canvas","update-size",{marginLeft:this.EOt,marginTop:this.AOt,styleWidth:this.SOt,styleHeight:this.yOt,displayScale:this.dV()});const r=this.JS();r.uM(this.TOt,this._Ot,!0);for(const o of this.NOt)r.Kx(o);C33.Vh(this.NOt),this.nLt();const n=this.gf.TL();n.EJ(),n.AJ()}}nLt(){this.JS().Pg(this.POt,this.kK()/this.BK())}$K(){return this.POt}tLt(t,e){const s=this.gf.hF(),i=this.gf.uD(),r=this.gf.dD(),n=i/r,h=t/e;if(n<h){const o=e*n;this.SOt=Math.round(o),this.yOt=e,this.EOt=Math.floor((t-this.SOt)/2),this.AOt=0}else{const a=t/n;this.SOt=t,this.yOt=Math.round(a),this.EOt=0,this.AOt=Math.floor((e-this.yOt)/2)}this.TOt=Math.round(this.SOt*s),this._Ot=Math.round(this.yOt*s),this.gf.hLt(i,r)}eLt(t,e){let s=this.gf.hF(),i=(1!==s&&(t+=1,e+=1),this.gf.uD()),r=this.gf.dD(),n=i/r,h=t/e,o;if(n<h){const a=e*n;o=a*s/i}else{const l=t/n;o=l*s/r}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.TOt=Math.round(i*o),this._Ot=Math.round(r*o),this.SOt=this.TOt/s,this.yOt=this._Ot/s,this.EOt=Math.max(Math.floor((t-this.SOt)/2),0),this.AOt=Math.max(Math.floor((e-this.yOt)/2),0),this.gf.hLt(i,r)}iLt(t,e){const s=this.gf.hF(),i=(this.SOt=t,this.yOt=e,this.TOt=Math.round(this.SOt*s),this._Ot=Math.round(this.yOt*s),this.EOt=0,this.AOt=0,this.dV());this.gf.hLt(this.SOt/i,this.yOt/i)}sLt(t,e){const s=this.gf.hF();this.SOt=this.gf.Dq(),this.yOt=this.gf.Lq(),this.TOt=Math.round(this.SOt*s),this._Ot=Math.round(this.yOt*s),this.oLt()?(this.EOt=Math.floor((t-this.SOt)/2),this.AOt=Math.floor((e-this.yOt)/2)):(this.EOt=0,this.AOt=0),this.gf.hLt(this.gf.Dq(),this.gf.Lq())}rLt(s){if("high"===this.OOt)this.mP=this.TOt,this.CP=this._Ot,this.DOt="high";else{let t,e;if(e="off"===this.QDt()?(t=this.gf.Dq(),this.gf.Lq()):(t=this.gf.uD(),this.gf.dD()),this.TOt<t||this._Ot<e)this.mP=this.TOt,this.CP=this._Ot,this.DOt="high";else if(this.mP=t,this.CP=e,this.DOt="low","scale-inner"===s){const i=t/e,r=this.mOt/this.COt;r<i?this.mP=this.CP*r:i<r&&(this.CP=this.mP/r)}else if("scale-outer"===s){const n=t/e,h=this.mOt/this.COt;n<h?this.mP=this.CP*h:h<n&&(this.CP=this.mP/h)}}}hN(){return this.gf}aLt(){return this.aOt[0].canvas}mY(){return this.BOt}oLt(){return this.LOt}lLt(){return this.gOt}cLt(t){if(!VALID_FULLSCREEN_MODES.has(t))throw new Error("invalid fullscreen mode");this.bOt=t;const e=this.gf.TL();e.EJ(),e.AJ()}uV(){return this.bOt}uLt(t){if(!VALID_FULLSCREEN_MODES.has(t))throw new Error("invalid fullscreen mode");this.vOt=t;const e=this.gf.TL();e.EJ(),e.AJ()}fLt(){return this.vOt}QDt(){return this.oLt()?this.fLt():this.uV()}dLt(t){if(!VALID_FULLSCREEN_SCALING_QUALITIES.has(t))throw new Error("invalid fullscreen scaling quality");this.OOt=t,this.gf.TL().EJ()}pLt(){return this.OOt}qK(){return this.DOt}static mLt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}ZU(){return this.mOt}QU(){return this.COt}kK(){return this.mP}BK(){return this.CP}SS(t){this.fg=!!t}CLt(t){this.MOt=t}jX(){return this.MOt}gLt(){return this.JS().$M()}bDt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.NOt=[],this.FOt.clear(),this.BOt.by(),this.cOt.by(),this.gf.Zz()}DDt(){console.log("[Construct] WebGPU device lost"),this.NOt=[],this.FOt.clear(),this.BOt.by(),this.gf.Zz()}async vDt(t){await this.cOt.vy(),await this.WGt(),await this.gf.SLt(),console.log("[Construct] WebGL context restored")}async NDt(){await this.WGt(),await this.gf.SLt(),console.log("[Construct] WebGPU device restored")}yLt(){return this.cOt}TLt(){return this.uOt}JS(){return this.uOt||this.cOt}KRt(){return this.fOt}qN(){let t="";return t=this.gf.TLt()?"webgpu":"webgl"+this.gf.yLt().e_(),this.gf.JS()._S()&&(t+="-software"),t}JN(){return this.gf.TLt()?this.gf.TLt().GetAdapterInfoString():this.gf.yLt().cG()}HB(){return"low"===this.DOt?1/this.gf.hF():this.dV()}dV(){const t=this.QDt();if("off"===t||"crop"===t)return 1;const e=this.gf.uD(),s=this.gf.dD(),i=e/s,r=this.TOt/this._Ot;return"scale-inner"!==t&&i<r||"scale-inner"===t&&r<i?this.yOt/s:this.SOt/e}S8(){return"low"===this.qK()?1:this.dV()}C8(){return"low"===this.qK()?1:this.gf.hF()}_Lt(t,e){this.xOt=t,this.GOt=e}ZH(e,s,i,t=!0){s=s||this.mP,i=i||this.CP;const r=s/2+this.xOt,n=i/2+this.GOt;if(t){let t=this.$K();s===this.mP&&i===this.CP||(e.Pg(tempProjection,s/i),t=tempProjection),e.Dv(t)}const h=e.Ng(r,n,e.yg(i),r,n,0,i);e.$v(h)}ELt(t,e=!0){const s=this.QN(),i=this.eF(),r=s/2,n=i/2,h=(e&&t.Dv(this.$K()),t.Ng(r,n,t.yg(i),r,n,0,i));t.$v(h)}iF(){return this.TOt}nF(){return this._Ot}QN(){return this.SOt}eF(){return this.yOt}DB(){return this.EOt}LB(){return this.AOt}Dz(){return this.aOt.length}ALt(){return"undefined"!=typeof OffscreenCanvas&&this.aLt()instanceof OffscreenCanvas&&("Chromium"!==C33.ds._s||124<=C33.ds.Ts)}async i7(i,r=!1){if(i<1)throw new Error("invalid HTML layer count");if(this.aOt.length!==i){let t=this.gf.TL().gL(),e={count:i,layersDomState:t.lq().filter(t=>t.oB()).map(t=>t.dK()),immediate:r,marginLeft:this.EOt,marginTop:this.AOt,styleWidth:this.SOt,styleHeight:this.yOt},s;if(s=this.lD()?await this.gf.qL("canvas","set-html-layer-count",e):self.c3_runtimeInterface._OnSetHTMLLayerCount(e),i<this.aOt.length)this.aOt.length=i;else for(const n of s.addedCanvases){n.width=this.TOt,n.height=this._Ot;const h=this.ALt()?"bitmaprenderer":"2d",o=n.getContext(h);if(!o)throw new Error(`failed to acquire '${h}' canvas context`);this.aOt.push({canvas:n,IDt:o})}this.gf.XL()}}z7(t){if(!(t>=this.aOt.length)){const e=this.aLt(),s=this.aOt[t].IDt;this.ALt()?s.transferFromImageBitmap(e.transferToImageBitmap()):(s.globalCompositeOperation="copy",s.drawImage(e,0,0))}}KK(e){e.depth=this.gf.Hq();let t=this.NOt,s=t.findIndex(t=>t.nE(e)),i;return-1!==s?(i=t[s],t.splice(s,1)):i=this.JS().Hx(e),this.FOt.add(i),i}gY(t){if(!this.FOt.has(t))throw new Error("render target not in use");this.FOt.delete(t),this.NOt.push(t)}$Ot(){const t={NT:this.gf.pD()};return"low"===this.qK()&&(t.width=this.kK(),t.height=this.BK()),this.KK(t)}WOt(t){this.gY(t)}*ILt(){for(const t of this.gf.TL().yJ())for(const e of t.bk()){const s=this.XOt.get(e);s&&(yield s)}}HK(t){if(!this.JS().eG())return null;let e=this.XOt.get(t);return e||(e={h4:t,name:t.lf(),wLt:C33.Cn(C33.l1.lb,this.cOt),RLt:0,MLt:0,bLt:0},this.XOt.set(t,e)),e.wLt}vLt(){const t=this.JS();if(t.eG()&&0===this.VOt){this.VOt=t.CS(),this.YOt=NaN;for(const e of this.ILt())e.RLt=NaN}}xLt(){this.cOt&&this.cOt.eG()&&this.GLt(),this.uOt&&this.uOt.eG()&&this.PLt()}GLt(){if(isNaN(this.YOt)&&(this.YOt=this.jOt.gb(this.UOt,this.VOt),!isNaN(this.YOt))){if(this.gf.tJ())for(const t of this.ILt())if(t.RLt=t.wLt.gb(this.UOt,this.VOt),isNaN(t.RLt))return;if(this.jOt.Sb(this.VOt),this.HOt=Math.min(this.YOt,1),this.gf.tJ()){const s=new Map;for(const r of this.ILt())r.wLt.Sb(this.VOt),r.MLt=Math.min(r.RLt,1),s.set(r.h4,r.MLt);for(const n of this.ILt()){const h=n.h4,o=s.get(h)||0,a=o-h.Jk().reduce((t,e)=>t+(s.get(e)||0),0);n.bLt=C33.En(a,0,1)}const e=this.gf.gL(),i=this.HOt-e.lq().reduce((t,e)=>t+(s.get(e)||0),0);self.C3Debugger.UpdateGPUProfile(C33.En(i,0,1),this.HOt,[...this.ILt()])}this.UOt=this.VOt,this.VOt=0}}OLt(){return this.jOt}PLt(){if(0!==this.VOt){for(let t=this.UOt;t<this.VOt;++t){const s=this.qOt.get(t);if(s&&!s.ZM())return}let t=this.gf.gL(),h=C33.qo(t.bz()+1,0),e=0;for(let t=this.UOt;t<this.VOt;++t){const o=this.qOt.get(t);if(o){let s=o.QM(),i=BigInt(0),r=BigInt(0),n=BigInt(0);for(let t=0,e=Math.min(h.length,s.length/2);t<e;++t){const c=s[2*t],u=s[2*t+1],f=(c!==n&&(i===n||c<i)&&(i=c),u>r&&(r=u),u-c),d=Number(f)/1e9;h[t]+=d}const a=r-i,l=Number(a)/1e9;e+=l}}if(this.HOt=C33.En(e,0,1),this.gf.tJ()){const i=t.bk(),r=new Map;for(let t=0,e=Math.min(i.length,h.length-1);t<e;++t){const C=h[t+1];r.set(i[t],C)}const n=[],p=new Map;for(const[g,S]of r){const y=[...g.Qk()].reduce((t,e)=>t+(r.get(e)||0),0);p.set(g,y),n.push({name:g.lf(),bLt:C33.En(S,0,1),MLt:C33.En(y,0,1)})}const m=this.HOt-t.lq().reduce((t,e)=>t+(p.get(e)||0),0);self.C3Debugger.UpdateGPUProfile(C33.En(m,0,1),this.HOt,n)}for(let t=this.UOt;t<this.VOt;++t)this.qOt.delete(t);this.UOt=this.VOt,this.VOt=0}}DLt(t){this.qOt.set(this.uOt.CS(),t)}hL(){return this.HOt}LLt(t,e,s,i,r,n){return this.KOt=t,this.zOt=e,this.JOt.Al(s,i,r,n),this.QOt||(this.QOt=new Promise(t=>{this.tDt=t})),this.QOt}NLt(){if(this.KOt){let t=this.aLt(),e=this.JOt,s=C33.En(Math.floor(e.Gl()),0,t.width),i=C33.En(Math.floor(e.Pl()),0,t.height),r=e.width(),n=(r=0===r?t.width-s:C33.En(Math.floor(r),0,t.width-s),e.height());if(n=0===n?t.height-i:C33.En(Math.floor(n),0,t.height-i),(0!==s||0!==i||r!==t.width||n!==t.height)&&0<r&&0<n){const h=C33.Fo(r,n),o=h.getContext("2d");o.drawImage(t,s,i,r,n,0,0,r,n),t=h}C33.ko(t,this.KOt,this.zOt).then(t=>{this.ZOt&&URL.revokeObjectURL(this.ZOt),this.ZOt=URL.createObjectURL(t),this.QOt=null,this.tDt(this.ZOt)}),this.KOt="",this.zOt=1}}FLt(){return this.ZOt}kLt(t){t?this.eDt++:this.eDt--}BLt(){return 0<this.eDt}$Lt(t){const e=this.JS();if(2===t)this.hDt=C33.Cn(C33.l1.bS,this.JS()),this.hDt.$R("Arial"),this.hDt.WR(16),this.hDt.sM("center"),this.hDt.rM("center"),this.hDt.uM(PERCENTTEXT_WIDTH,PERCENTTEXT_HEIGHT);else if(0===t){const s=this.gf.WLt();s&&s.HH(e).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.ULt("splash-images/splash-logo.svg").then(t=>{"done"===this.pDt?e.H_(t):this.oDt.aDt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.VLt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.pDt?e.H_(t):this.oDt.lDt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.VLt("splash-images/splash-website-512.png").then(t=>{"done"===this.pDt?e.H_(t):this.oDt.cDt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async ULt(t){t=new URL(t,this.gf.HLt()).toString();const e=await C33.xo(t),s=await this.gf.jLt(e,2048,2048);return this.JS().Vx(s,{$T:"high"})}async VLt(t){t=new URL(t,this.gf.HLt()).toString();const e=await C33.xo(t);return this.JS().Vx(e,{$T:"high"})}XLt(){this.gf.Tf("runtime","hide-cordova-splash")}YLt(){this.sDt=Date.now(),this.gf.zf().addEventListener("loadingprogress",this.nDt),this.iDt=requestAnimationFrame(()=>this.qLt());const t=this.gf.KLt();3!==t&&this.XLt()}async zLt(){const t=this.JS(),e=(this.rDt=1,this.gf.KLt());4===e&&await this.CDt,this.mDt=null,this.CDt=null,-1!==this.iDt&&(cancelAnimationFrame(this.iDt),this.iDt=-1),this.gf.zf().removeEventListener("loadingprogress",this.nDt),this.nDt=null,this.hDt&&(this.hDt.gn(),this.hDt=null),this.gf.JLt(),t.Ox(),this.oDt.aDt&&(t.H_(this.oDt.aDt),this.oDt.aDt=null),this.oDt.lDt&&(t.H_(this.oDt.lDt),this.oDt.lDt=null),this.oDt.cDt&&(t.H_(this.oDt.cDt),this.oDt.cDt=null),t.Px(0,0,0,0),t.pS(),this.pDt="done",this.UOt=t.CS(),3===e&&this.XLt()}qLt(){if(-1!==this.iDt){const t=this.JS(),e=(t.Ox(),this.iDt=-1,this.gf.ZO().SX()),s=this.gf.KLt();if(3!==s&&(this.ELt(t),t.Px(0,0,0,0),t.qv(),t.Wg(),t.zv(null)),0===s)this.ZLt(e);else if(1===s)this.QLt(e,PROGRESSBAR_WIDTH,0);else if(2===s)this.tNt(e);else if(3===s)C33.Bh();else{if(4!==s)throw new Error("invalid loader style");this.eNt(e)}t.pS(),this.iDt=requestAnimationFrame(()=>this.qLt())}}tNt(t){t?this.hDt.eM(1,0,0):this.hDt.eM(.6,.6,.6),this.hDt._f(Math.round(100*this.rDt)+"%");const e=this.SOt/2,s=this.yOt/2,i=PERCENTTEXT_WIDTH/2,r=PERCENTTEXT_HEIGHT/2,n=(tempQuad.yc(e-i,s-r,e+i,s+r),this.JS());n.zv(this.hDt.z_()),n.F2(tempQuad,this.hDt.UM())}QLt(t,e,s){const i=this.JS(),r=PROGRESSBAR_HEIGHT,n=(i.Yg(),t?i.Xv(1,0,0,1):i.Xv(.118,.565,1,1),this.SOt/2),h=this.yOt/2,o=e/2,a=r/2;tempRect.Al(n-o,h-a+s,Math.floor(e*this.rDt),r),i.Rect(tempRect),tempRect.Al(n-o,h-a+s,e,r),tempRect.offset(-.5,-.5),tempRect.Hl(.5,.5),i.Xv(0,0,0,1),i.H2(tempRect),tempRect.Hl(1,1),i.Xv(1,1,1,1),i.H2(tempRect)}ZLt(t){const e=this.JS(),s=this.gf.WLt();if(s){const i=s.z_();if(i){const r=i.Sm(),n=i.vm(),h=this.SOt/2,o=this.yOt/2,a=r/2,l=n/2;tempQuad.yc(h-a,o-l,h+a,o+l),e.zv(i),e.ac(tempQuad),this.QLt(t,r,16+l)}else this.QLt(t,PROGRESSBAR_WIDTH,0)}else this.QLt(t,PROGRESSBAR_WIDTH,0)}eNt(t){let e=this.JS(),s=this.oDt.aDt,i=this.oDt.lDt,r=this.oDt.cDt,n=Date.now(),h=(0===this.uDt&&(this.sDt=n),this.gf.sNt()||this.gf.iNt()&&!this.gf.rNt()),o=h?0:SPLASH_AFTER_FADEOUT_WAIT_TIME,a=h?0:SPLASH_MIN_DISPLAY_TIME,l=1,c=("fade-in"===this.pDt?l=Math.min((n-this.sDt)/SPLASH_FADE_DURATION,1):"fade-out"===this.pDt&&(l=Math.max(1-(n-this.dDt)/SPLASH_FADE_DURATION,0)),e.Yg(),e.Xv(.231*l,.251*l,.271*l,l),tempRect.set(0,0,this.SOt,this.yOt),e.Rect(tempRect),Math.ceil(this.SOt)),u=Math.ceil(this.yOt),f,d;256<this.yOt?(e.Xv(.302*l,.334*l,.365*l,l),f=c,d=Math.max(.005*u,2),tempRect.Al(0,.8*u-d/2,f,d),e.Rect(tempRect),t?e.Xv(l,0,0,l):e.Xv(.161*l,.953*l,.816*l,l),f=c*this.rDt,tempRect.Al(.5*c-f/2,.8*u-d/2,f,d),e.Rect(tempRect),e.Xv(l,l,l,l),e.Wg(),i&&(f=1.5*C33.En(.22*u,105,.6*c),d=f/8,tempRect.Al(.5*c-f/2,.2*u-d/2,f,d),e.zv(i),e.Rect(tempRect)),s&&(f=Math.min(.395*u,.95*c),d=f,tempRect.Al(.5*c-f/2,.485*u-d/2,f,d),e.zv(s),e.Rect(tempRect)),r&&(f=1.5*C33.En(.22*u,105,.6*c),d=f/8,tempRect.Al(.5*c-f/2,.868*u-d/2,f,d),e.zv(r),e.Rect(tempRect))):(e.Xv(.302*l,.334*l,.365*l,l),f=c,d=Math.max(.005*u,2),tempRect.Al(0,.85*u-d/2,f,d),e.Rect(tempRect),t?e.Xv(l,0,0,l):e.Xv(.161*l,.953*l,.816*l,l),f=c*this.rDt,tempRect.Al(.5*c-f/2,.85*u-d/2,f,d),e.Rect(tempRect),e.Xv(l,l,l,l),e.Wg(),s&&(f=.55*u,d=f,tempRect.Al(.5*c-f/2,.45*u-d/2,f,d),e.zv(s),e.Rect(tempRect))),this.uDt++,"fade-in"===this.pDt&&n-this.sDt>=SPLASH_FADE_DURATION&&2<=this.uDt&&(this.pDt="wait",this.fDt=n),"wait"===this.pDt&&n-this.fDt>=a&&1<=this.rDt&&(this.pDt="fade-out",this.dDt=n),("fade-out"===this.pDt&&n-this.dDt>=SPLASH_FADE_DURATION+o||h&&1<=this.rDt&&n-this.sDt<500)&&this.mDt()}}}{let C33=self.Fe,C3Debugger=self.C3Debugger,assert=self.assert,DEFAULT_RUNTIME_OPTS={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},ife=!0;C33.nNt=class extends C33.pn{constructor(t){t=Object.assign({},DEFAULT_RUNTIME_OPTS,t),super(),this.hNt=t.messagePort,this.oNt=t.runtimeBaseUrl,this.aNt=t.previewUrl,this.lNt=!!t.headless,this.cNt=!!t.hasDom,this.uNt=!!t.isInWorker,ife=t.ife,this.fNt=!!t.useAudio,this.dNt=t.exportType,this.pNt=t.isNWjs,this.Tj=!!t.isiOSCordova,this.mNt=!!t.isiOSWebView,this.CNt=!!t.isWindowsWebView2,this.gNt=!!t.isAnyWebView2Wrapper,this.SNt=!!t.isFBInstantAvailable,this.yNt=!("preview"!==this.dNt||!t.isDebug),this.TNt=this.yNt,this._Nt=this.yNt,this.ENt=0,this.ANt=[],this.INt=[],this.wNt=!1,this.RNt="",this.MNt="",this.bNt="",this.vNt="",this.xNt=0,this.GNt=0,this.IP=self.devicePixelRatio,this.PNt=0,this.ONt=0,this.DNt=0,this.LNt=0,this.NNt=0,this.FNt=!1,this.VC=!0,this.kNt=!1,this.BNt=!1,this.$Nt=!1,this.WNt=null,this.PX=C33.Cn(C33.Cj,this,t),this.L8=C33.Cn(C33.iJ,this),this.u0t=C33.Cn(C33.adt,this),this.UNt=C33.Cn(C33.fF,this,t.wrapperComponentIds),this.VNt=C33.Cn(C33.rPt,this),this.LQ=C33.Cn(C33.IJ,this),this.HNt=C33.Cn(C33.Qlt,this),this.jNt=C33.Cn(C33.ect,this),this.Cct=C33.Cn(C33.cct,this),this.kC=C33.Cn(C33.RC,{vC:t=>this.XNt(t),GC:t=>this.YNt(t)}),this.qNt=new Map,this.KNt=[],this.zNt=new Map,this.JNt=new Map,this.ZNt=0,this.QNt=[],this.tFt=new Set,this.eFt=[],this.sFt=[],this.iFt=new Map,this.rFt=!1,this.nFt=!1,this.hFt=0,this.oFt=0,this.aFt=new Map,this.lFt=new Set,this.cFt=new Set,this.uFt=[],this.fFt=[],this.dFt=null,this.pFt=!1,this.mFt="vsync",this.YT="trilinear",this.CFt=!1,this.gFt=!0,this.SFt=!1,this.yFt=!1,this.TFt=null,this._Ft={EFt:t=>{this.iDt=-1,this.AFt=-1,this.q9(t)},IFt:t=>{this.AFt=-1,this.q9(t,!1,"skip-render")},wFt:()=>{this.iDt=-1,this.jP()}},this.iDt=-1,this.AFt=-1,this.RFt=0,this.MFt=0,this.bFt=!1,this.vFt=!1,this.xFt=!1,this.GFt=!0,this.PFt=!0,this.OFt=!1,this.DFt=0,this.LFt=new C33.Ad(1),this.NFt=()=>Math.random(),this.FFt=0,this.kFt=0,this.BFt=0,this.$Ft=0,this.WFt=0,this.XMt=1,this.UFt=1/30,this.VFt=0,this.HFt=C33.Cn(C33.G0),this.jFt=C33.Cn(C33.G0),this.XFt=C33.Cn(C33.G0),this.YFt=new Map,this.qFt=-1,this.KFt=0,this.zFt=0,this.JFt=-1,this.ZFt=0,this.QFt=0,this.tkt=0,this.ekt=!1,this.skt="",this.ikt=!1,this.rkt="",this.Y$=null,this.nkt="",this.hkt=null,this.okt=null,this.zwt=C33.Cn(C33.Event.zf),this.akt=new Map,this.lkt=new Map,this.ckt=0,this.ukt=!1,this.fkt=!1,this.dkt=!1,this.pkt=[],this.mkt={pretick:C33.Cn(C33.Event,"pretick",!1),tick:C33.Cn(C33.Event,"tick",!1),tick2:C33.Cn(C33.Event,"tick2",!1),instancecreate:C33.Cn(C33.Event,"instancecreate",!1),instancedestroy:C33.Cn(C33.Event,"instancedestroy",!1),beforelayoutchange:C33.Cn(C33.Event,"beforelayoutchange",!1),layoutchange:C33.Cn(C33.Event,"layoutchange",!1)},this.mkt.instancecreate.H5=null,this.mkt.instancedestroy.H5=null,this.mz=C33.Cn(C33.Event.zf),this.Ckt=null;const e=(t,e)=>C33.HMt.bGt(this,t,e);this.gkt=C33.Cn(C33.$0,e),this.Skt=C33.Cn(C33.$0,e),this.ykt=C33.Cn(C33.$0,e),this.Tkt=C33.Cn(C33._kt,this,t.jobScheduler),t.canvas&&(this.dFt=C33.Cn(C33.oOt,this)),this.hNt.onmessage=t=>this._OnMessageFromDOM(t.data),this.N$("runtime","visibilitychange",t=>this.Ekt(t)),this.N$("runtime","wrapper-extension-message",t=>this.Akt(t)),this.N$("runtime","opus-decode",t=>this.yN(t.arrayBuffer)),this.N$("runtime","get-remote-preview-status-info",()=>this.Ikt()),this.N$("runtime","js-invoke-function",t=>this.Ndt(t)),this.N$("runtime","go-to-last-error-script",self.goToLastErrorScript),this.N$("runtime","offline-audio-render-completed",t=>this.wkt(t)),this.zwt.addEventListener("window-blur",t=>this.Rkt(t)),this.zwt.addEventListener("window-focus",()=>this.Mkt()),this.LQ.i9(),this.jNt.i9(),this.bkt=null,this.vkt=new WeakMap,this.xkt={keyboard:null,bL:null,vL:null,xL:null},this.Gkt=new WeakMap,this.Pkt=[]}static CE(t){return C33.Cn(C33.nNt,t)}gn(){C33.Vh(this.KNt),this.zNt.clear(),this.JNt.clear(),this.L8.gn(),this.L8=null,this.u0t.gn(),this.u0t=null,this.UNt.gn(),this.UNt=null,this.PX.gn(),this.PX=null,this.VNt.gn(),this.VNt=null,this.LQ.gn(),this.LQ=null,this.HNt.gn(),this.HNt=null,this.jNt.gn(),this.jNt=null,this.Cct.gn(),this.Cct=null,this.kC.gn(),this.kC=null,this.dFt&&(this.dFt.gn(),this.dFt=null),this.zwt.gn(),this.zwt=null,this.Okt=null}["_OnMessageFromDOM"](t){const e=t.type;if("event"===e)this.Dkt(t);else{if("result"!==e)throw new Error(`unknown message '${e}'`);this.Lkt(t)}}Dkt(t){if(this.dkt){const e=t.component,s=t.handler,i=t.data,r=t.dispatchOpts,n=!(!r||!r.dispatchRuntimeEvent),h=!(!r||!r.dispatchUserScriptEvent),o=t.responseId;if("runtime"===e){if(n){const l=new C33.Event(s);l.data=i,this.zwt.h0(l)}if(h){const c=new C33.Event(s,!0);for(const[u,f]of Object.entries(i))c[u]=f;this.Q7(c)}}const a=this.akt.get(e);if(a){const d=a.get(s);if(d){let t=null;try{t=d(i)}catch(t){return console.error(`Exception in '${e}' handler '${s}':`,t),void(null!==o&&this.Nkt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.Nkt(o,!0,t)).catch(t=>{console.error(`Rejection from '${e}' handler '${s}':`,t),this.Nkt(o,!1,""+t)}):this.Nkt(o,!0,t))}else n||h||console.warn(`[Runtime] No DOM handler '${s}' for component '${e}'`)}else n||h||console.warn(`[Runtime] No DOM event handlers for component '${e}'`)}else this.pkt.push(t)}Nkt(t,e,s){this.hNt.postMessage({type:"result",responseId:t,isOk:e,result:s})}Lkt(t){const e=t.responseId,s=t.isOk,i=t.result,r=this.lkt.get(e);s?r.resolve(i):r.reject(i),this.lkt.delete(e)}N$(t,e,s){let i=this.akt.get(t);if(i||(i=new Map,this.akt.set(t,i)),i.has(e))throw new Error(`[Runtime] Component '${t}' already has handler '${e}'`);i.set(e,s)}Tf(t,e,s,i){this.hNt.postMessage({type:"event",component:t,handler:e,data:s,responseId:null},i)}qL(t,e,s,i){const r=this.ckt++,n=new Promise((t,e)=>{this.lkt.set(r,{resolve:t,reject:e})});return this.hNt.postMessage({type:"event",component:t,handler:e,data:s,responseId:r},i),n}NV(t,e,s,i=-1){this.Tf("runtime","send-wrapper-extension-message",{componentId:t,messageId:e,params:s,asyncId:i})}FV(t,e,s){const i=this.ckt++,r=new Promise((t,e)=>{this.lkt.set(i,{resolve:t,reject:e})});return this.NV(t,e,s,i),r}Akt(t){if(-1!==t.asyncId){const e=t.asyncId,s=this.lkt.get(e);s.resolve(t.params),this.lkt.delete(e)}else this.Dkt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}J$(t,e,s){this.N$("wrapper-extension:"+t,e,s)}K$(t){return this.UNt.K$(t)}Fkt(t){if(!this.tJ())throw new Error("not in debug mode");this.Tf("runtime","post-to-debugger",t)}async KMt(t){C33.wyt(this),this.tJ()?await C3Debugger.KMt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const[e]=await Promise.all([this.PX.vo("data.json"),this.kkt(),this.Tkt.KMt()]);if(await this.Bkt(e),await this.$kt(t),this.sNt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.yLt()){const s=this.yLt();console.info(`[C3 runtime] Hosted in ${this.lD()?"worker":"DOM"}, rendering with WebGL ${s.e_()} [${s.cG()}]`)}else this.TLt()&&console.info(`[C3 runtime] Hosted in ${this.lD()?"worker":"DOM"}, rendering with WebGPU [${this.TLt().GetAdapterInfoString()}]`);this.JS()._S()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.dkt=!0;for(const i of this.pkt)this.Dkt(i);C33.Vh(this.pkt),this.dFt&&this.dFt.YLt();for(const r of t.runOnStartupFunctions)this.ANt.push(this.Wkt(r));if(await Promise.all([this.PX.CX(),...this.ANt]),C33.Vh(this.ANt),!this.PX.SX())return this.dFt&&await this.dFt.zLt(),await this.zwt.r0(new C33.Event("beforeruntimestart")),await this.Ox(),this.hNt.postMessage({type:"runtime-ready"}),this;this.dFt&&this.dFt.XLt()}async Wkt(t){try{await t(this.bkt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async Bkt(t){const e=t.project,s=(this.RNt=e[0],this.MNt=e[16],this.bNt=e[31],this.vNt=e[38],e[39]||"loading-logo.png"),i=(this.CFt=!!e[9],this.xNt=this.DNt=e[10],this.GNt=this.LNt=e[11],this.VNt.HPt(this.xNt,this.GNt),this.PNt=this.xNt/2,this.ONt=this.GNt/2,this.mFt=e[37],this.pFt=!!e[40],this.YT=e[14],this.kNt=e[15],this.BNt=e[42],this.$Nt=e[17],this.FNt=!!e[18],this.NNt=e[19],this.oFt=e[21],this.SFt=e[22],this.PX);if(i.Xj(e[45]),i.AX(e[7],e[25]),i.qj(e[8]),i.Kj(e[32]),i.Jj(e[28]),i.TX(e[29]),0===this.NNt){let t;(t="flat"===i.pN()?i.Zj()+s:s)&&(this.WNt=i.lX({url:t}))}this.dFt&&(this.dFt.cLt(C33.oOt.mLt(e[12])),this.dFt.dLt(e[23]?"high":"low"),this.dFt.SS(0!==e[24]),this.dFt.gDt(e[34]),this.dFt.CLt(e[41]),this.dFt.SDt(e[13]),this.dFt.yDt(e[30]),this.dFt.EDt(e[46],e[47]),this.dFt._Dt(e[26]),this.dFt.ADt(e[48]));const r=e[43],n=(r&&await this.Ukt(r),this.Vkt(),this.UNt.FIt(),this.uFt=self.Hkt(),e[2]);for(const l of n[1])this.UNt.kIt(l);for(const c of n[0])this.UNt.NIt(c);this.uFt=self.Hkt(),this.jkt(),this.UNt.UIt();for(const u of e[3]){const f=C33.hct.CE(this,this.KNt.length,u);this.KNt.push(f),this.zNt.set(f.lf().toLowerCase(),f),this.JNt.set(f.cq(),f)}for(const d of e[4]){const p=this.KNt[d[0]];p.DRt(d)}for(const m of e[27]){const C=m.map(t=>this.KNt[t]);this.QNt.push(C33.Cn(C33.OMt,this,C))}this.Xkt();for(const g of this.KNt)g.NRt();for(const S of e[5])this.L8.CE(S);const h=e[1];if(h){const y=this.L8.pJ(h);y&&this.L8.fJ(y)}for(const T of e[35])this.HNt.CE(T);for(const _ of e[33])this.LQ.CE(_);for(const E of e[44])this.jNt.CE(E);this.jNt.rct()||(this.jNt.gn(),this.jNt=null);for(const A of e[49])this.Cct.CE(A);this.Cct.pct()||(this.Cct.gn(),this.Cct=null);for(const I of e[6])this.u0t.CE(I);this.u0t.Bdt(),this.Ykt(),C33.Vh(this.uFt),this.ck();let o="any",a=e[20];1===a?o="portrait":2===a&&(o="landscape"),this.Tf("runtime","set-target-orientation",{targetOrientation:o})}async Ukt(t){const e=t.format;"image-sequence"===e?this.TFt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===e?this.TFt=new self.C3ExportToGIF(this,t):"webm"===e?this.TFt=new self.C3ExportToWebMVideo(this,t):"mp4"===e&&(this.TFt=new self.C3ExportToMP4Video(this,t)),this.mFt="unlimited-frame",this.dFt.cLt("off"),this.IP=1,self.devicePixelRatio=1,await this.qL("runtime","set-exporting-to-video",{message:this.TFt.GetExportingMessageForPercent(0),duration:this.TFt.SW()})}KLt(){return this.NNt}YDt(){return null!==this.TFt}qkt(){return this.TFt.SW()}Kkt(){return this.TFt.GetFramerate()}zkt(){return this.TFt.KMt({width:this.dFt.iF(),height:this.dFt.nF()})}Jkt(){const t=this.RFt/this.Kkt();return this.TFt.AddFrame(this.dFt.aLt(),t)}Zkt(){this.TFt&&this.TFt.Yst()}wkt(t){this.TFt.OnOfflineAudioRenderCompleted(t)}Qkt(){return this.TFt.pS()}iNt(){return this.SNt}qC(){return this.VC}ZL(t){this.ANt.push(t)}n7(t){this.wNt=!!t}tBt(t){this.wNt&&this.INt.push(t)}u7(){return this.INt}MRt(){return this.ZNt++}kRt(){return this.ZNt}FGt(t){this.tFt.add(t)}kGt(t){this.tFt.delete(t)}XDt(){return this.tFt}async $kt(t){this.dFt&&(await this.dFt.Fo(t),this.dFt.$Lt(this.NNt))}async kkt(){const r=this.PX;if(!r.eN("audio/webm; codecs=opus")){let t=null,e=r.Yj(),s=e+"opus.wasm.js",i=e+"opus.wasm.wasm";try{t=this.eBt()&&r.Qj()?await r.eX(i):await r.Go(i)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.sBt(t,"opus-decoder-wasm"),await this.iBt([s])}}async yN(t){const e=await this.rBt("OpusDecode",{arrayBuffer:t},[t]);return e}async Ox(){this.bFt=!0,this.FFt=Date.now();let e=null,t=new Promise(t=>e=t);if(this.FNt){for(const r of this.KNt)r.sq()||r.YRt()||!r.gF()||r.NEt();(async()=>{await this.PX.CX(),await t,this.VC=!1,this.nBt()})()}else this.VC=!1;this.PX.gX(),this.tJ()&&C3Debugger.RuntimeInit(ife);for(const n of this.L8.AL())n.v7();this.YDt()&&await this.zkt();const s=this.L8.dJ(),i=(await s.Uz(null,this.JS()),await s.Qz(!0),this.KFt=performance.now(),e(),this.FNt||this.nBt(),await this.qL("runtime","before-start-ticking"));i.isSuspended&&!this.YDt()?(this.DFt++,this.OFt=!0):this.q9()}nBt(){this.P$(C33.E7._7.T7.hBt,null,null),this.Tf("runtime","register-sw")}j1t(t){t=Math.floor(t);const e=this.uFt;if(t<0||t>=e.length)throw new Error("invalid object reference");return e[t]}jkt(){for(const t of self.oBt){const e=C33.first(Object.keys(t));this.fFt.push(e)}}l3t(t){t=Math.floor(t);const e=this.fFt;if(t<0||t>=e.length)throw new Error("invalid prop reference");return e[t]}aBt(){return this.cNt}lBt(){return this.lNt}lD(){return this.uNt}HLt(){return this.oNt}cBt(){return this.aNt}wD(){return this.u0t}kD(){return this.u0t.kD()}Qdt(){return this.u0t.Qdt()}GD(){return this.u0t.GD()}t3t(){return this.u0t.t3t()}Ayt(){return 0===this.Qdt().x0t()}s3t(){return this.u0t.s3t()}RGt(){return this.UNt}Ugt(){return this.UNt.Ugt()}PY(t){if((t=Math.floor(t))<0||t>=this.KNt.length)throw new RangeError("invalid index");return this.KNt[t]}uBt(t){return this.zNt.get(t.toLowerCase())||null}XV(t){return this.JNt.get(t)||null}cnt(t){const e=C33.fF.GF(t);return e?e.LF():null}eq(){return this.KNt}*fBt(){for(const t of this.KNt)t.sq()||(yield*t.instances())}zf(){return this.zwt}_D(){return this.mz}Q7(t){t.runtime=this.dF();const e=this.tJ()&&!this.u0t.ak();e&&C3Debugger.StartMeasuringScriptTime(),this.mz.dispatchEvent(t),e&&C3Debugger.AddScriptTime()}g7(t){return t.runtime=this.dF(),this.mz.r0(t)}uD(){return this.xNt}dD(){return this.GNt}dBt(t,e){if(this.xNt!==t||this.GNt!==e){this.xNt=t,this.GNt=e;const s=this.TL();s.EJ(),s.AJ()}}Dq(){return this.DNt}Lq(){return this.LNt}hLt(t,e){if(this.DNt!==t||this.LNt!==e){this.DNt=t,this.LNt=e;const s=this.TL();s.EJ(),s.AJ()}}qDt(t){this.YDt()||(this.IP=t)}hF(){return this.IP}xK(){return this.PNt}GK(){return this.ONt}KN(){return this.dFt}kK(){return this.dFt?this.dFt.kK():this.DNt}BK(){return this.dFt?this.dFt.BK():this.LNt}HB(){return this.dFt?this.dFt.HB():1}dV(){return this.dFt?this.dFt.dV():1}S8(){return this.dFt?this.dFt.S8():1}C8(){return this.dFt?this.dFt.C8():1}DB(){return this.dFt?this.dFt.DB():0}LB(){return this.dFt?this.dFt.LB():0}pBt(){return this.dFt?this.dFt.QN():0}mBt(){return this.dFt?this.dFt.eF():0}uV(){return this.dFt?this.dFt.uV():"off"}KK(t){return this.dFt?this.dFt.KK(t):null}gY(t){this.dFt&&this.dFt.gY(t)}YK(){return this.kNt}BDt(){return this.BNt}$Dt(){return this.$Nt}hL(){return this.dFt?this.dFt.hL():NaN}Z_(){return"nearest"!==this.pD()}aL(){return this.mFt}lL(t){this.mFt!==t&&(this.mFt=t,-1!==this.iDt||-1!==this.AFt)&&(this.CBt(),this.gBt())}pD(){return this.YT}GRt(){return this.FNt}WLt(){return this.WNt}JLt(){this.WNt&&(this.WNt.PR(),this.WNt.gn(),this.WNt=null)}TL(){return this.L8}gL(){return this.L8.gL()}Ttt(){return this.LQ}SBt(){return this.HNt}wbt(){return this.jNt}Fct(){return this.Cct}ZO(){return this.PX}lX(t){return this.PX.lX(t)}ik(t,e,s,i,r,n){if(n&&this.jNt){if(t instanceof C33.hct&&t.sq()){const o=t.bCt(),a=Math.floor(this.CL()*o.length);return this.ik(o[a],e,s,i,r,n)}const h=this.jNt.nct(t,n);if(h){const l=this.WY(h,e,!1,s,i,!1,r,void 0,r);return this.jNt.oct(l,n),l}}return this.WY(t,e,!1,s,i,!1,r,void 0,r)}WY(t,e,s,i,r,n,h,o,a){let l=null,c=null;if(t instanceof C33.hct){if((c=t).sq()){const T=c.bCt(),_=Math.floor(this.CL()*T.length);c=T[_]}l=c.DY()}else l=t,c=this.PY(l[1]);const u=c.$F().gF();if(this.VC&&u&&!c.YRt())return null;const f=e;u||(e=null);let d;d=s&&!n&&l&&!this.aFt.has(l[2])?l[2]:this.oFt++;const p=l?l[0]:null,m=C33.Cn(C33.Instance,{runtime:this,XB:c,h4:e,qMt:p,ZMt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.aFt.set(d,m);let C=null,g=(u&&(C=m.BL(),void 0!==i&&void 0!==r&&(C.ky(i),C.Wy(r)),c._Mt(!0)),e&&(a||e.VY(m,!0),e._L().jz(c)),this.hFt++,!0);if(o){const E=o.YB();if(E.n$()&&c.n$()){const A=c.$z(),I=E.$z();A===I&&(g=!1)}}if(c.n$()&&!s&&!n&&g){const w=new Set;for(const R of c.$z().R7())if(R!==c){const M=this.yBt(R,C,w);if(M){const b=this.WY(M,f,!1,C?C.Fy():i,C?C.$y():r,!0,!1,void 0,a);m.M7(b)}else{const k=this.WY(R,f,!1,C?C.Fy():i,C?C.$y():r,!0,!1,void 0,a);m.M7(k)}}for(const v of m.h$()){v.M7(m);for(const x of m.h$())v!==x&&v.M7(x)}}if(u&&!s&&h&&this.TBt(m,p,C,e,i,r,a),c.n$()&&!s&&!n&&h)for(const G of m.h$()){const P=G.BL();if(P){const B=G.$F(),O=G.YB().DY()[0];B.gF()?this.TBt(G,O,P,e,P.Fy(),P.$y(),a):this.TBt(G,O,P,e,void 0,void 0,a)}}if(!n&&h){void 0===i&&(i=p[0]),void 0===r&&(r=p[1]);const D=C.B4(),$=i-C.Fy()+D.Fy(),W=r-C.$y()+D.$y();D.a4($,W)}c.CMt();const N=l?C33.ro(l[5]):null,F=l?l[4].map(t=>C33.ro(t)):null,S=u&&p&&p[13];if(S&&m.rbt(),m.jRt(N,F),S){const L=p[13];m.P5().QEt(L[2],L[0],L[1])}this.sFt.push(m),this.rFt=!0,this.tJ()&&C3Debugger.InstanceCreated(m);const y=this.mkt.instancecreate;return y.H5=m,this.zwt.dispatchEvent(y),m}Evt(t){const e=t[0],s=t[1],i=t[2],r=t[6];if(r)return r;const n=this.L8.mJ(e),h=n.$L(s);return h.FY(i)}yBt(t,e,s){const i=e?.Ibt()??[];for(const r of i){const n=this.Evt(r),h=!!r[4],o=this.PY(n[1]);if(!s.has(n)&&t===o&&h)return s.add(n),n}}TBt(a,t,e,l,c,u,f){const s=e.Hxt(),i=e.Ibt();if(a.BL().jxt(s),i){void 0===c&&(c=t[0]),void 0===u&&(u=t[1]);const d=new Set,p=t[0],m=t[1];for(const C of i){let t=C[0],e=C[1],s=C[2],i=C[3],r=!!C[4],n=C[5],h=C[6],o;if(h)o=h;else{const T=this.L8.mJ(t),_=T.$L(e);o=_.FY(s)}const g=this.PY(o[1]),S=a.Rbt(g),y=d.has(g);if(S&&!y&&r){const E=a.Mbt(g),A=(E.BL().KMt(o[0]),c+o[0][0]-p),I=u+o[0][1]-m;E.BL().a4(A,I),E.BL().jxt(n),a.q4(E,{Q4:!!(i>>0&1),e5:!!(i>>1&1),i5:!!(i>>2&1),n5:!!(i>>3&1),o5:!!(i>>4&1),m5:!!(i>>5&1),l5:!!(i>>6&1),u5:!!(i>>7&1),d5:!!(i>>8&1)}),d.add(g)}else{const w=c+o[0][0]-p,R=u+o[0][1]-m,M=this.WY(o,l,!1,w,R,!1,!0,a,f);M.BL().jxt(n),a.q4(M,{Q4:!!(i>>0&1),e5:!!(i>>1&1),i5:!!(i>>2&1),n5:!!(i>>3&1),o5:!!(i>>4&1),m5:!!(i>>5&1),l5:!!(i>>6&1),u5:!!(i>>7&1),d5:!!(i>>8&1)})}}}}t$(s){if(!this.lFt.has(s)){let t=s.YB(),e=this.iFt.get(t);if(e){if(e.has(s))return;e.add(s)}else(e=new Set).add(s),this.iFt.set(t,e);if(this.tJ()&&C3Debugger.InstanceDestroyed(s),s.hbt(),this.rFt=!0,s.n$())for(const i of s.h$())this.t$(i);for(const r of s.children())r.C5()&&this.t$(r);if(!this.L8.lk()&&!this.ekt){const n=this.wD();n.nk(!0),s.Fbt(),n.nk(!1)}s.kbt(this.L8.lk())}}ck(){this.rFt&&(this.nFt=!0,this._Bt(),this.EBt(),this.nFt=!1,this.rFt=!1,this.XL())}_Bt(){for(const t of this.sFt){const e=t.YB();e.VY(t);for(const s of e.C3t())s.VY(t),s.CMt()}C33.Vh(this.sFt)}EBt(){this.zwt.Vf(!0);for(const[t,e]of this.iFt.entries())this.ABt(t,e),e.clear();this.iFt.clear(),this.zwt.Vf(!1)}ABt(t,e){for(const s of e){const i=this.mkt.instancedestroy,r=(i.H5=s,this.zwt.dispatchEvent(i),this.aFt.delete(s.o$()),this.YFt.delete(s),s.BL());r&&(r.qxt(),r.YY(),r.hbt()),this.lFt.add(s),this.hFt--}C33.Zh(t.JF(),e),t.CMt(),this.cFt.add(t);for(const n of t.C3t())C33.Zh(n.JF(),e),n.CMt(),this.cFt.add(n);if(t.$F().gF()){const h=new Set([...e].map(t=>t.BL().$L()));for(const o of h)o.hK(e)}}SMt(){return this.sFt}*MTt(t){for(const e of this.SMt())t.sq()?e.YB().Iyt(t)&&(yield e):e.YB()===t&&(yield e)}HRt(){return this.oFt++}XRt(t,e){this.aFt.set(t,e)}WV(t){this.PFt!==(t=!!t)&&(this.PFt=!!t,this.PFt)&&this.OFt&&(this.HV(!1),this.OFt=!1)}UV(){return this.PFt}Zz(){this.zwt.dispatchEvent(C33.Cn(C33.Event,"renderercontextlost")),this.HV(!0);for(const e of this.KNt)!e.sq()&&e.qRt()&&e.zz();const t=this.gL();t&&t.Zz(),C33.jIt.HX(),C33.uX.HX()}async SLt(){await this.gL().Uz(null,this.JS()),this.zwt.dispatchEvent(C33.Cn(C33.Event,"renderercontextrestored")),this.HV(!1),this.XL()}Ekt(t){if(this.PFt){const e=t.hidden;this.HV(e),(this.OFt=e)||this.XL()}}Rkt(t){this.sNt()&&this.SFt&&!C33.ds.Is&&!t.data.parentHasFocus&&(this.HV(!0),this.yFt=!0)}Mkt(){this.yFt&&(this.HV(!1),this.yFt=!1)}gBt(){const t=this._Ft;"vsync"===this.mFt?-1===this.iDt&&(this.iDt=self.requestAnimationFrame(t.EFt)):"unlimited-tick"===this.mFt?(-1===this.AFt&&(this.AFt=C33.So(t.IFt)),-1===this.iDt&&(this.iDt=self.requestAnimationFrame(t.wFt))):-1===this.AFt&&(this.AFt=C33.So(t.EFt))}CBt(){-1!==this.iDt&&(self.cancelAnimationFrame(this.iDt),this.iDt=-1),-1!==this.AFt&&(C33.yo(this.AFt),this.AFt=-1)}jD(){return 0<this.DFt}HV(t){if(!this.YDt()){const e=this.jD(),s=(this.DFt+=t?1:-1,this.DFt<0&&(this.DFt=0),this.jD());if(!e&&s)console.log("[Construct] Suspending"),this.CBt(),this.zwt.dispatchEvent(C33.Cn(C33.Event,"suspend")),this.P$(C33.E7._7.T7.IBt,null,null);else if(e&&!s){console.log("[Construct] Resuming");const i=performance.now();this.kFt=i,this.KFt=i,this.qFt=0,this.zFt=0,this.JFt=0,this.ZFt=0,this.tkt=0,this.QFt=0,this.zwt.dispatchEvent(C33.Cn(C33.Event,"resume")),this.P$(C33.E7._7.T7.wBt,null,null),this.U3t()||this.q9(i)}}}bV(t){this.gkt.Eu(t)}PV(t){this.Skt.Eu(t)}xV(t){this.ykt.Eu(t)}vV(t){this.gkt.v0(t)}OV(t){this.Skt.v0(t)}GV(t){this.ykt.v0(t)}RBt(){const t=globalThis.IV;this.gkt._d(!0);for(const e of this.gkt)e instanceof t?e.W$():e.q9();this.gkt._d(!1)}MBt(){const t=globalThis.IV;this.Skt._d(!0);for(const e of this.Skt)e instanceof t?e.LV():e.wIt();this.Skt._d(!1)}bBt(){const t=globalThis.IV;this.ykt._d(!0);for(const e of this.ykt)e instanceof t?e.V$():e.TAt();this.ykt._d(!1)}*vBt(){const e=globalThis.IV;this.gkt._d(!0);for(const s of this.gkt){let t;t=s instanceof e?s.W$():s.q9(),C33.Yo(t)&&(yield*t)}this.gkt._d(!1)}*xBt(){const e=globalThis.IV;this.Skt._d(!0);for(const s of this.Skt){let t;t=s instanceof e?s.LV():s.wIt(),C33.Yo(t)&&(yield*t)}this.Skt._d(!1)}*GBt(){const e=globalThis.IV;this.ykt._d(!0);for(const s of this.ykt){let t;t=s instanceof e?s.V$():s.TAt(),C33.Yo(t)&&(yield*t)}this.ykt._d(!1)}async q9(a,t,e){this.xFt=!0;const l="background-wake"===e,c="background-wake"!==e&&"skip-render"!==e,u=this.TL(),f=this.KN();if(this.bFt&&(!this.jD()||t||l)){let t=performance.now(),e=(this.vFt=!0,this.PBt(a||0),this.JFt++,this.OBt(),this.DBt()),s=(this.ATt()&&await e,this.zwt.n0(this.mkt.pretick)),i=(s instanceof Promise&&await s,this.LBt()),r=(this.ATt()&&await i,this.NBt()&&await this.FBt(),u.wL()&&await this.kBt(),this.BBt()),n=(this.ATt()&&await r,u.gL()),h=n.Lz(),o=!1;if(-1!==h&&(n.Nz(),f.Dz()!==h)){const d=this.KN().i7(h);this.lD()&&(o=!0,await d)}this.Tf("canvas","update-html-layer-dom-state",{layersDomState:n.lq().filter(t=>t.oB()).map(t=>t.dK())}),c&&this.jP(),o&&this.Tf("canvas","cleanup-html-layers"),this.YDt()&&(await this.Jkt(),this.KD()>=this.qkt())?this.Qkt():(this.jD()||l||this.gBt(),this.RFt++,this.MFt++,this.vFt=!1,this.QFt+=performance.now()-t)}}async DBt(){const t=this.u0t,e=this.tJ();this.ck(),t.nk(!0),this.x3t(this.gL()),e&&C3Debugger.StartMeasuringTime(),this.ATt()?await t.lpt():t.rpt(),e&&C3Debugger.AddEventsTime(),this.G3t(),t.nk(!1),this.ck(),t.nk(!0)}async LBt(){const t=this.tJ(),e=this.ATt(),s=this.zwt,i=this.mkt,r=this.Ckt;t&&C3Debugger.StartMeasuringTime(),e?await this.$Bt(this.vBt()):this.RBt(),e?await this.$Bt(this.xBt()):this.MBt(),t&&C3Debugger.AddBehaviorTickTime(),t&&C3Debugger.StartMeasuringTime(),e?await this.WBt(i.tick):s.dispatchEvent(i.tick),t&&C3Debugger.AddPluginTickTime(),this.u0t.nk(!1),this.Q7(r.tick)}async BBt(){const t=this.u0t,e=this.zwt,s=this.mkt,i=this.tJ(),r=this.ATt();i&&C3Debugger.StartMeasuringTime(),r?await t.P3t(this.L8):t.v3t(this.L8),i&&C3Debugger.AddEventsTime(),this.VNt.gPt(),this.OBt(),this.GFt=!1,t.nk(!0),i&&C3Debugger.StartMeasuringTime(),r?await this.$Bt(this.GBt()):this.bBt(),i&&C3Debugger.AddBehaviorTickTime(),i&&C3Debugger.StartMeasuringTime(),r?await this.WBt(s.tick2):e.dispatchEvent(s.tick2),i&&C3Debugger.AddPluginTickTime(),t.nk(!1),r&&await t.V3t()}OBt(){if(0!==this.lFt.size){const t=this.zwt;t.Vf(!0);for(const e of this.cFt)e.Z3t().Wft(this.lFt);this.cFt.clear(),this.u0t.upt(this.lFt);for(const s of this.lFt)s.gn();this.lFt.clear(),t.Vf(!1)}}async kBt(){let t=this.TL(),e=0;for(;t.wL()&&e++<10;)await this.UBt(t._J())}PBt(t){let e=0;if(this.YDt())e=1/this.Kkt(),this.BFt=e,this.$Ft=e;else if(0!==this.kFt){const s=Math.max(t-this.kFt,0);.5<(e=s/1e3)&&(e=0),this.BFt=e,this.$Ft=C33.En(e,this.VFt,this.UFt)}this.kFt=t,this.WFt=this.$Ft*this.XMt,this.HFt.Eu(this.WFt),this.jFt.Eu(e*this.XMt),this.XFt.Eu(this.$Ft);for(const[i,r]of this.YFt)r.Eu(this.$Ft*i.ZD());this.dFt&&this.dFt.xLt(),1e3<=t-this.KFt&&(this.KFt+=1e3,1e3<=t-this.KFt&&(this.KFt=t),this.zFt=this.qFt,this.qFt=0,this.ZFt=this.JFt,this.JFt=0,this.tkt=Math.min(this.QFt/1e3,1),this.QFt=0,this.dFt&&this.dFt.vLt(),this.VNt.dPt(),this.tJ())&&C3Debugger.Update1sPerfStats()}sbt(t,e){if(e){if(!this.YFt.has(t)){const s=C33.Cn(C33.G0);s.N0(this.HFt),this.YFt.set(t,s)}}else this.YFt.delete(t)}ibt(t){const e=this.YFt.get(t);return e?e.rs():this.KD()}async UBt(t){const e=this.zwt,s=this.TL(),i=s.gL();await i.G7(),i.Jz(t,this.JS()),i===t&&this.u0t.D7(),this.VNt.gPt(),this.OBt(),e.dispatchEvent(this.mkt.beforelayoutchange),C33.jf.a0(!0),await t.Uz(i,this.JS()),C33.jf.a0(!1),await t.Qz(!1),e.dispatchEvent(this.mkt.layoutchange),this.XL(),this.GFt=!0,this.ck(),this.Zkt()}XL(){this.gFt=!0}yLt(){return this.dFt?this.dFt.yLt():null}TLt(){return this.dFt?this.dFt.TLt():null}JS(){return this.dFt?this.dFt.JS():null}jP(){const s=this.dFt;if(s&&!s.gLt()){const i=this.JS(),t=i.eG(),r=t&&i.ES(),n=t&&i.Og();if(r&&i.Wx(),this.gFt||this.YDt()){const h=this.L8.gL(),o=(this.qFt++,i.Ox(),this.tJ());o&&C3Debugger.StartMeasuringTime(),this.gFt=!1;let t=null,e=(r&&(t=s.OLt().mb(),i.tG(t)),null);n&&(e=i.StartFrameTiming(2*(1+h.bz())),i.StartMeasuringRenderPassTime(0,1)),this.Hq()&&"low"===s.qK()?i.Nv(s.kK(),s.BK()):i.Fv(),this.VBt(this.JS(),h),t&&i.sG(t),n&&(i.StopMeasuringRenderPassTime(),this.dFt.DLt(e)),i.pS(),o&&(C3Debugger.AddDrawCallsTime(),C3Debugger.UpdateInspectHighlight()),s&&s.NLt()}else i.gS()}}j7(t){return"low"===this.KN().qK()||t.ES()&&(this.YK()||this.Hq())}VBt(e,s){e.Wg(),e.ix(),e.Xv(1,1,1,1),e.jx(null),e.zv(null),e.Lx(this.Hq()),this.j7(e)&&s.V7(e);const i=s.Dz();for(let t=1;t<i;++t)s.K7(e,t),e.Og()&&e.Restart();this.j7(e)||s.V7(e),s.q7(e)}P$(t,e,s){if(!this.bFt)return!1;let i=!this.vFt&&!this.u0t.Y3t(),r=0;i&&(r=performance.now());const n=this.tJ(),h=(n&&this.rH(!1),this.u0t.N3t(this.L8,t,e,s));if(i){const o=performance.now()-r;this.QFt+=o,n&&C3Debugger.AddTriggersTime(o)}return n&&this.rH(!0),h}aAt(t,e,s){if(!this.ATt())return this.P$(t,e,s);if(this.U3t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.vFt||this.u0t.Y3t())return this.u0t.B3t(this.L8,t,e,s);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async D$(t,e,s){if(!this.ATt())return this.P$(t,e,s);if(!this.bFt)return!1;if(this.U3t())return this.u0t.$3t(t,e,s);if(!this.gL())return this.u0t.F3t(t,e,s);let i=performance.now(),r=this.u0t.B3t(this.L8,t,e,s),n=r.next();for(;!n.done;)await this.D3t(n.value),n=r.next();return this.jD()||this.u0t.Y3t()||(await this.u0t.V3t(),this.xFt&&!this.vFt&&this.gBt()),this.QFt+=performance.now()-i,n.value}lAt(t,e,s){const i=this.tJ(),r=(i&&this.rH(!1),this.u0t.H3t(this.L8,t,e,s));return i&&this.rH(!0),r}cAt(t,e,s){return this.u0t.j3t(this.L8,t,e,s)}uAt(t){return this.LFt.Eu(t)}x3t(t){this.eFt.push(t)}G3t(){if(!this.eFt.length)throw new Error("layout stack empty");this.eFt.pop()}FL(){return this.eFt.length?this.eFt.at(-1):this.gL()}XD(t){return t&&-1!==t.ZD()?this.$Ft*t.ZD():this.WFt}X9(){return this.WFt}Y9(){return this.$Ft}qD(){return this.BFt}ZD(){return this.XMt}QD(t){(isNaN(t)||t<0)&&(t=0),this.XMt=t}fL(t){this.VFt=Math.max(t,0)}uL(){return this.VFt}mL(t){this.UFt=Math.max(t,0)}pL(){return this.UFt}tL(){return this.zFt}sL(){return this.ZFt}rL(){return this.tkt}HBt(){return this.FFt}KD(){return this.HFt.rs()}jBt(){return this.jFt.rs()}JD(){return this.XFt.rs()}Utt(){return this.RFt}XBt(){return this.MFt}YBt(){return this.hFt}nD(){return this.RNt}oD(){return this.MNt}qBt(){return this.bNt}KBt(){return this.vNt}DL(t){if(this.ekt)throw new Error("cannot call while loading state - wait until afterload event");return this.aFt.get(t)||null}I7(){this.aFt.clear();for(const t of this.KNt)if(!t.sq())for(const e of t.JF())this.aFt.set(e.o$(),e)}sNt(){return"preview"===this.dNt}tJ(){return this.yNt}jN(){return this.dNt}XN(){return"nwjs"===this.jN()||this.pNt}rNt(){return"cordova"===this.dNt}zBt(){return"Android"===C33.ds.Cs&&("cordova"===this.dNt||"playable-ad-single-file"===this.dNt||"playable-ad-zip"===this.dNt||"instant-games"===this.dNt)}eBt(){return this.Tj}JBt(){return this.mNt}YN(){return this.CNt}ZBt(){return this.gNt}eD(){return this.VNt}VIt(){return this.UNt.VIt()}HIt(){return this.UNt.HIt()}Hq(){return this.pFt}QBt(){return this.JS().Eg(this.Lq())}yg(t){return this.JS().yg(t||this.Lq())}t$t(){return this.GFt}e$t(t){this.CFt!==(t=!!t)&&(this.CFt=t,this.TL().AJ(),this.XL())}CD(){return this.CFt}s$t(t){if(!this.qNt.has(t)){const s=()=>this.i$t(t);this.qNt.set(t,s),t.zf().addEventListener("animationframeimagechange",s)}const e=this.kC.PC(t);return e.YC()||e.KC().then(()=>this.XL()),e}i$t(t){this.kC.NC(t)}XNt(t){const e=[];for(const s of t.hMt())for(const i of s.cW()){const r=i.gW();e.push({source:i,width:r.Sm(),height:r.vm(),tag:i.NW()})}return{jC:e}}async YNt(t){const e=C33.Cn(C33.Ad),s=[],r=new Map;for(const h of t.hMt())for(const o of h.cW()){const a=o.gW().uwt();r.has(a)||(r.set(a,null),s.push(e.Eu(async()=>{const t=await a.qX();r.set(a,t)})))}await Promise.all(s);const i=[];for(const l of t.hMt())for(const c of l.cW())i.push(e.Eu(async()=>{const t=c.gW(),e=r.get(t.uwt()),s=await t.fwt(e),i=await createImageBitmap(s);return{JC:i}}));const n=await Promise.all(i);for(const u of r.values())u instanceof ImageBitmap&&u.close&&u.close();return{jC:n}}r$t(t){this.skt=t,this.ikt=!1}n$t(){this.skt="",this.ikt=!0}h$t(t){this.rkt=t}p_t(t){this.Y$=t}o$t(){return this.nkt}NBt(){return!!(this.skt||this.ikt||this.rkt||null!==this.Y$)}async FBt(){if(this.skt&&(this.ck(),await this.a$t(this.skt),this.l$t()),this.rkt&&(await this.c$t(this.rkt),this.l$t(),this.tJ())&&C3Debugger.StepIfPausedInDebugger(),this.ikt){const t=await this.u$t();this.nkt=t,await this.D$(C33.E7._7.T7.f$t,null),this.nkt="",this.l$t()}if(null!==this.Y$){this.ck();try{await this.d$t(this.Y$),this.nkt=this.Y$,await this.D$(C33.E7._7.T7.p$t,null),this.nkt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.D$(C33.E7._7.T7.m$t,null)}this.l$t()}}l$t(){this.skt="",this.ikt=!1,this.rkt="",this.Y$=null}aF(){return this.hkt||(this.hkt=localforage.Ws({name:"c3-localstorage-"+this.qBt(),description:this.nD()})),this.hkt}C$t(){return this.okt||(this.okt=localforage.Ws({name:"c3-savegames-"+this.qBt(),description:this.nD()})),this.okt}async a$t(t){const e=await this.u$t();try{await this.C$t().setItem(t,e),console.log("[Construct] Saved state to storage ("+e.length+" chars)"),this.nkt=e,await this.D$(C33.E7._7.T7.f$t,null),this.nkt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.D$(C33.E7._7.T7.g$t,null)}}async c$t(t){try{const e=await this.C$t().getItem(t);if(!e)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+e.length+" chars)"),await this.d$t(e),this.nkt=e,await this.D$(C33.E7._7.T7.p$t,null),this.nkt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.D$(C33.E7._7.T7.m$t,null)}}async u$t(){const t={c3save:!0,version:1,rt:{time:this.KD(),timeRaw:this.jBt(),walltime:this.JD(),timescale:this.ZD(),tickcount:this.Utt(),next_uid:this.oFt,running_layout:this.gL().cq(),start_time_offset:Date.now()-this.FFt},types:{},layouts:{},events:this.u0t.v8(),timelines:this.LQ.v8(),user_script_data:null};for(const s of this.KNt)s.sq()||s.bMt()||(t.types[s.cq().toString()]=s.v8());for(const i of this.L8.AL())t.layouts[i.cq().toString()]=i.v8();const e=this.S$t("save");return e.saveData=null,await this.g7(e),t.user_script_data=e.saveData,JSON.stringify(t)}f7(){return this.ekt}async d$t(t){const e=this.TL(),s=JSON.parse(t);if(s.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!s.c3save)throw new Error("not valid C3 save data");if(1<s.version)throw new Error("C3 save data from future version");this.m_t(),this.zwt.dispatchEvent(C33.Cn(C33.Event,"beforeload"));for(const a of this.fBt()){const l=a.YB();l.bMt()||a.KJ()}let i=s.rt,r=(this.HFt.Set(i.time),i.hasOwnProperty("timeRaw")&&this.jFt.Set(i.timeRaw),this.XFt.Set(i.walltime),this.XMt=i.timescale,this.RFt=i.tickcount,this.FFt=Date.now()-i.start_time_offset,i.running_layout),n=!(this.ekt=!0);if(r!==this.gL().cq()){const c=e.mJ(r);if(!c)return;await this.UBt(c),n=!0}for(const[u,f]of Object.entries(s.layouts)){const d=parseInt(u,10),p=e.mJ(d);p&&p.x8(f)}const h=new Set;for(const[m,C]of Object.entries(s.types)){const g=parseInt(m,10),S=this.XV(g);!S||S.sq()||S.bMt()||S.x8(C,h)}for(const y of this.L8.AL())for(const T of y.vk())T.G8();if(this.ck(),this.I7(),this.ekt=!1,n){for(const _ of this.fBt())_.d7();for(const[E,A]of Object.entries(s.types)){const I=parseInt(E,10),w=this.XV(I);!w||w.sq()||w.bMt()||w.GMt(A)}}this.oFt=i.next_uid,this.u0t.x8(s.events);for(const R of this.KNt)if(!R.sq()&&R.n$())for(const M of R.JF()){const b=M.w7();for(const v of R.$z().R7())if(v!==R){const x=v.JF();if(b<0||b>=x.length)throw new Error("missing sibling instance");M.M7(x[b])}}this.LQ.x8(s.timelines),e.EJ(),e.AJ();for(const G of h)G.Nbt();this.C_t(),this.zwt.dispatchEvent(C33.Cn(C33.Event,"afterload")),this.Q7(this.S$t("afterload"));for(const[P,O]of Object.entries(s.types)){const D=parseInt(P,10),L=this.XV(D);L&&L.xMt()}const o=this.S$t("load");o.saveData=s.user_script_data,await this.g7(o),this.XL()}y$t(t,e){return t.BL().Bxt()-e.BL().Bxt()}wGt(t,e){t.BL()&&!this.Gkt.has(t)&&(this.Gkt.set(t,e),this.Pkt.push(t))}m_t(){this.Gkt=new WeakMap,C33.Vh(this.Pkt)}C_t(t="full",e=null){this.Pkt.sort(this.y$t);for(const s of this.Pkt)s.JJ(this.Gkt.get(s),t,e);for(const i of this.Pkt)i.Wbt(this.Gkt.get(i),t,e);this.m_t()}async iBt(t){const e=await Promise.all(t.map(async t=>{const e=this.rNt()&&this.PX.Qj();if(e||"playable-ad-single-file"===this.jN()){const s=await this.PX.xo(t);return URL.createObjectURL(s)}return new URL(t,location.href).toString()}));this.Tkt.T$t(e)}_$t(t,e){this.Tkt.E$t(t,e)}sBt(t,e){this.Tkt.A$t(t,e)}rBt(t,e,s,i){return this.Tkt.rBt(t,e,s,null,null,i)}I$t(t,e,s,i){return this.Tkt.I$t(t,e,s,i)}w$t(){return this.Tkt.R$t()}PL(t,e){this.Tf("runtime","invoke-download",{url:t,filename:e})}async jLt(t,e,s,i,r,n){if(i=i||e,r=r||s,this.lD()){const h=await this.qL("runtime","raster-svg-image",{blob:t,imageWidth:e,imageHeight:s,surfaceWidth:i,surfaceHeight:r,imageBitmapOpts:n});return h.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,e,s,i,r);return n?self.createImageBitmap(o,n):o}}async M$t(t){return this.lD()?this.qL("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}b$t(){this.ukt||(this.ukt=!0,this.Tf("runtime","enable-device-orientation"))}v$t(){this.fkt||(this.fkt=!0,this.Tf("runtime","enable-device-motion"))}CL(){return this.NFt()}x$t(t){this.NFt=t}Ikt(){const t=this.JS();return{fps:this.tL(),tps:this.sL(),cpu:this.rL(),gpu:this.hL(),layout:this.gL()?this.gL().lf():"",renderer:t.ES()?t.cG():t.GetAdapterInfoString()}}U3t(){return!!this.tJ()&&C3Debugger.U3t()}D3t(t){return this.ATt()?C3Debugger.D3t(t):Promise.resolve()}C1t(){return!!this.ATt()&&C3Debugger.BreakNext()}G$t(t){this.TNt=!!t,this.P$t()}O$t(){return this.TNt}ATt(){return this._Nt}rH(t){t?this.ENt--:this.ENt++,this.P$t()}P$t(){this._Nt=this.tJ()&&this.TNt&&0===this.ENt}Dmt(){return this.tJ()&&C3Debugger.Dmt()}VK(){return this.tJ()&&this.JS().eG()&&C3Debugger.VK()}async $Bt(t){if(t)for(const e of t)await this.D3t(e)}WBt(t){return this.$Bt(this.zwt.o0(t))}Ndt(t){return this.u0t.Ndt(t.name,t.params)}zL(t){if(this.lD())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}dF(){return this.bkt}S$t(t){const e=C33.Cn(C33.Event,t,!1);return e.runtime=this.bkt,e}Vkt(){this.bkt=new self.KO(this),this.Ckt={tick:this.S$t("tick")}}Xkt(){const t={};for(const e of this.KNt)t[e.l3t()]={value:e.DF(),enumerable:!0,writable:!1};this.bkt.ED(t)}Ykt(){const t={};for(const e of this.wD().g3t())t[e.l3t()]=e.c3t();this.bkt.AD(t)}ML(){return this.xkt}WF(t,e){this.vkt.set(t,e)}Pk(t){return this.vkt.get(t)}FN(t){if(!(t instanceof self.kF))throw new TypeError("expected IObjectClass");const e=this.Pk(t);if(e&&e instanceof C33.hct)return e;throw new Error("invalid IObjectClass")}qF(t){if(!(t instanceof self.jB))throw new TypeError("expected IInstance");const e=this.Pk(t);if(e&&e instanceof C33.Instance)return e;throw new Error("invalid IInstance")}kL(t){if(!(t instanceof self.M5))throw new TypeError("expected IWorldInstance");const e=this.Pk(t);if(e&&e instanceof C33.Instance)return e;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=C33.nNt.CE,self.C3_InitRuntime=(t,e)=>t.KMt(e)}{const C33=self.Fe;C33._kt=class extends C33.pn{constructor(t,e){super(),this.gf=t,this.D$t=new Map,this.L$t=0,this.N$t=e.inputPort,e.outputPort.onmessage=t=>this.F$t(t),this.k$t=e.maxNumWorkers,this.B$t=1,this.$$t=!1,this.W$t=!1}async KMt(){}R$t(){return this.k$t}T$t(t){this.N$t.postMessage({type:"_import_scripts",scripts:t})}E$t(t,e){this.N$t.postMessage({type:"_send_blob",blob:t,id:e})}A$t(t,e){this.N$t.postMessage({type:"_send_buffer",buffer:t,id:e},[t])}rBt(t,e,s,i,r,n){if(s=s||[],"number"==typeof n&&(n=Math.floor(n))<=0)throw new Error("invalid maxWorkerNum");const h=this.L$t++,o={type:t,isBroadcast:!1,maxWorkerNum:n,jobId:h,params:e,transferables:s},a=new Promise((t,e)=>{this.D$t.set(h,{resolve:t,progress:i,reject:e,U$t:!1,maxWorkerNum:n})});return r&&r.M0(()=>this.V$t(h)),this.N$t.postMessage(o,s),this.H$t(),a}I$t(t,e,s,i){if(s=s||[],"number"==typeof i&&(i=Math.floor(i))<=0)throw new Error("invalid maxWorkerNum");const r=this.L$t++,n={type:t,isBroadcast:!0,maxWorkerNum:i,jobId:r,params:e,transferables:s};this.N$t.postMessage(n,s)}V$t(t){const e=this.D$t.get(t);e&&(e.U$t=!0,e.resolve=null,e.progress=null,e.reject=null,this.N$t.postMessage({type:"_cancel",jobId:t}))}F$t(t){const e=t.data,s=e.type,i=e.jobId;switch(s){case"result":this.j$t(i,e.result);break;case"progress":this.X$t(i,e.progress);break;case"error":this.Y$t(i,e.error);break;case"ready":this.q$t();break;default:throw new Error(`unknown message from worker '${s}'`)}}j$t(t,e){const s=this.D$t.get(t);if(!s)throw new Error("invalid job ID");s.U$t||s.resolve(e),this.D$t.delete(t)}X$t(t,e){const s=this.D$t.get(t);if(!s)throw new Error("invalid job ID");!s.U$t&&s.progress&&s.progress(e)}Y$t(t,e){const s=this.D$t.get(t);if(!s)throw new Error("invalid job ID");s.U$t||s.reject(e),this.D$t.delete(t)}q$t(){this.$$t&&(this.$$t=!1,this.B$t++,this.B$t<this.k$t?this.H$t():this.N$t.postMessage({type:"_no_more_workers"}))}K$t(){let t=0,e=[...this.D$t.values()].sort((t,e)=>{const s=t.maxWorkerNum||1/0,i=e.maxWorkerNum||1/0;return s-i});for(const s of e){const i=s.maxWorkerNum||1/0;t<i&&t++}return t}async H$t(){if(!(this.B$t>=this.k$t||this.$$t||this.W$t||this.K$t()<=this.B$t))try{this.$$t=!0;const t=await this.gf.qL("runtime","create-job-worker");t.outputPort.onmessage=t=>this.F$t(t)}catch(t){this.W$t=!0,this.$$t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.B$t} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.sepiamask={jDt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform lowp sampler2D samplerBack;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nvoid main(void)\n{\nlowp float fronta = texture2D(samplerFront, vTex).a;\nmediump vec2 tex = (vTex - srcStart) / (srcEnd - srcStart);\nlowp vec4 back = texture2D(samplerBack, mix(destStart, destEnd, tex));\nlowp vec4 sepia = back * mat4( 0.3588, 0.7044, 0.1368, 0.0,\n0.2990, 0.5870, 0.1140, 0.0,\n0.2392, 0.4696, 0.0912, 0.0,\n0.0,\t0.0,\t0.0,\t1.0);\ngl_FragColor = mix(back, vec4(sepia.r, sepia.g, sepia.b, back.a), fronta);\n}",HDt:"",UDt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\n%%SAMPLERBACK_BINDING%% var samplerBack : sampler;\n%%TEXTUREBACK_BINDING%% var textureBack : texture_2d<f32>;\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\nconst sepiaMatrix : mat4x4<f32> = mat4x4<f32>(\nvec4<f32>(0.3588, 0.7044, 0.1368, 0.0),\nvec4<f32>(0.2990, 0.5870, 0.1140, 0.0),\nvec4<f32>(0.2392, 0.4696, 0.0912, 0.0),\nvec4<f32>(0.0,\t0.0,\t0.0,\t1.0)\n);\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar fronta : f32 = textureSample(textureFront, samplerFront, input.fragUV).a;\nvar back : vec4<f32> = textureSample(textureBack, samplerBack, c3_getBackUV(input.fragPos.xy, textureBack));\nvar sepia : vec4<f32> = back * sepiaMatrix;\nvar output : FragmentOutput;\noutput.color = mix(back, vec4<f32>(sepia.rgb, back.a), fronta);\nreturn output;\n}",XS:!0,qS:!1,PS:0,DS:0,NS:!1,kS:!1,$S:!1,US:!1,HS:!1,parameters:[]},self.C3_Shaders.grayscale={jDt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp float intensity;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float gray = front.r * 0.299 + front.g * 0.587 + front.b * 0.114;\ngl_FragColor = mix(front, vec4(gray, gray, gray, front.a), intensity);\n}",HDt:"",UDt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nintensity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar gray : f32 = c3_grayscale(front.rgb);\nvar output : FragmentOutput;\noutput.color = mix(front, vec4<f32>(gray, gray, gray, front.a), shaderParams.intensity);\nreturn output;\n}",XS:!1,qS:!1,PS:0,DS:0,NS:!1,kS:!1,$S:!0,US:!1,HS:!1,parameters:[["intensity",0,"percent"]]},self.C3_Shaders.warpobjectmask={jDt:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform lowp sampler2D samplerBack;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform highmedp float seconds;\nuniform mediump vec2 pixelSize;\nuniform mediump float devicePixelRatio;\nuniform mediump float layerScale;\nuniform mediump float freqX;\nuniform mediump float freqY;\nuniform mediump float ampX;\nuniform mediump float ampY;\nuniform mediump float speedX;\nuniform mediump float speedY;\nvoid main(void)\n{\nmediump float _2pi = 2.0 * 3.14159265359;\nlowp float fronta = texture2D(samplerFront, vTex).a;\nmediump vec2 srcSize = srcEnd - srcStart;\nmediump vec2 tex = ((vTex - srcStart) / srcSize);\nmediump vec2 srcOriginSize = srcOriginEnd - srcOriginStart;\nmediump vec2 n = ((vTex - srcOriginStart) / srcOriginSize);\nmediump vec2 p = mix(destStart, destEnd, tex);\np.x += cos(n.y * _2pi * freqY + seconds * speedY * _2pi) * ampY * pixelSize.x * devicePixelRatio * layerScale * fronta;\np.y += sin(n.x * _2pi * freqX + seconds * speedX * _2pi) * ampX * pixelSize.y * devicePixelRatio * layerScale * fronta;\np = clamp(p, min(destStart, destEnd), max(destStart, destEnd));\ngl_FragColor = texture2D(samplerBack, p);\n}",HDt:"",UDt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\n%%SAMPLERBACK_BINDING%% var samplerBack : sampler;\n%%TEXTUREBACK_BINDING%% var textureBack : texture_2d<f32>;\nstruct ShaderParams {\nfreqX : f32,\nfreqY : f32,\nampX : f32,\nampY : f32,\nspeedX : f32,\nspeedY : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\nconst pi2 : f32 = 6.283185307179586;\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar pixelSize : vec2<f32> = c3_getPixelSize(textureFront);\nvar fronta : f32 = textureSample(textureFront, samplerFront, input.fragUV).a;\nvar n : vec2<f32> = c3_srcOriginToNorm(input.fragUV);\nvar p : vec2<f32> = c3_getBackUV(input.fragPos.xy, textureBack) + vec2<f32>(\ncos(n.y * pi2 * shaderParams.freqY + c3Params.seconds * shaderParams.speedY * pi2) * shaderParams.ampY * pixelSize.x * c3Params.devicePixelRatio * c3Params.layerScale * fronta,\nsin(n.x * pi2 * shaderParams.freqX + c3Params.seconds * shaderParams.speedX * pi2) * shaderParams.ampX * pixelSize.y * c3Params.devicePixelRatio * c3Params.layerScale * fronta\n);\np = c3_clampToDest(p);\nvar output : FragmentOutput;\noutput.color = textureSample(textureBack, samplerBack, p);\nreturn output;\n}",XS:!0,qS:!1,PS:30,DS:30,NS:!0,kS:!1,$S:!1,US:!1,HS:!0,parameters:[["freqX",0,"float"],["freqY",0,"float"],["ampX",0,"float"],["ampY",0,"float"],["speedX",0,"float"],["speedY",0,"float"]]},self.C3_Shaders.lighten={jDt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform lowp sampler2D samplerBack;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nfront.rgb /= front.a;\nmediump vec2 tex = (vTex - srcStart) / (srcEnd - srcStart);\nlowp vec4 back = texture2D(samplerBack, mix(destStart, destEnd, tex));\nback.rgb /= back.a;\nfront.rgb = max(front.rgb, back.rgb) * front.a;\ngl_FragColor = front * back.a;\n}",HDt:"",UDt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\n%%SAMPLERBACK_BINDING%% var samplerBack : sampler;\n%%TEXTUREBACK_BINDING%% var textureBack : texture_2d<f32>;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\nvar back : vec4<f32> = c3_unpremultiply(textureSample(textureBack, samplerBack, c3_getBackUV(input.fragPos.xy, textureBack)));\nvar output : FragmentOutput;\noutput.color = vec4<f32>(\nmax(front.rgb, back.rgb) * front.a,\nfront.a\n) * back.a;\nreturn output;\n}",XS:!0,qS:!1,PS:0,DS:0,NS:!1,kS:!1,$S:!1,US:!1,HS:!1,parameters:[]},self.C3_Shaders.blurhorizontal={jDt:"varying mediump vec2 vTex;\nuniform mediump sampler2D samplerFront;\nuniform mediump vec2 pixelSize;\nuniform mediump float intensity;\nvoid main(void)\n{\nmediump vec4 sum = vec4(0.0);\nmediump float pixelWidth = pixelSize.x;\nmediump float halfPixelWidth = pixelWidth / 2.0;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 7.0 + halfPixelWidth, 0.0)) * 0.06;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 5.0 + halfPixelWidth, 0.0)) * 0.10;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 3.0 + halfPixelWidth, 0.0)) * 0.13;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 1.0 + halfPixelWidth, 0.0)) * 0.16;\nmediump vec4 front = texture2D(samplerFront, vTex);\nsum += front * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 1.0 + halfPixelWidth, 0.0)) * 0.16;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 3.0 + halfPixelWidth, 0.0)) * 0.13;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 5.0 + halfPixelWidth, 0.0)) * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 7.0 + halfPixelWidth, 0.0)) * 0.06;\ngl_FragColor = mix(front, sum, intensity);\n}",HDt:"",UDt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nintensity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar pixelWidth : f32 = c3_getPixelSize(textureFront).x;\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar sum : vec4<f32> =\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 7.5, 0.0)) * 0.06 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 5.5, 0.0)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 3.5, 0.0)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 1.5, 0.0)) * 0.16 +\nfront * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 1.5, 0.0)) * 0.16 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 3.5, 0.0)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 5.5, 0.0)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 7.5, 0.0)) * 0.06;\nvar output : FragmentOutput;\noutput.color = mix(front, sum, shaderParams.intensity);\nreturn output;\n}",XS:!1,qS:!1,PS:8,DS:0,NS:!1,kS:!1,$S:!1,US:!1,HS:!1,parameters:[["intensity",0,"percent"]]},self.C3_Shaders.blurvertical={jDt:"varying mediump vec2 vTex;\nuniform mediump sampler2D samplerFront;\nuniform mediump vec2 pixelSize;\nuniform mediump float intensity;\nvoid main(void)\n{\nmediump vec4 sum = vec4(0.0);\nmediump float pixelHeight = pixelSize.y;\nmediump float halfPixelHeight = pixelHeight / 2.0;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 7.0 + halfPixelHeight)) * 0.06;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 5.0 + halfPixelHeight)) * 0.10;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 3.0 + halfPixelHeight)) * 0.13;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 1.0 + halfPixelHeight)) * 0.16;\nmediump vec4 front = texture2D(samplerFront, vTex);\nsum += front * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 1.0 + halfPixelHeight)) * 0.16;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 3.0 + halfPixelHeight)) * 0.13;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 5.0 + halfPixelHeight)) * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 7.0 + halfPixelHeight)) * 0.06;\ngl_FragColor = mix(front, sum, intensity);\n}",HDt:"",UDt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nintensity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar pixelHeight : f32 = c3_getPixelSize(textureFront).y;\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar sum : vec4<f32> =\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 7.5)) * 0.06 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 5.5)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 3.5)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 1.5)) * 0.16 +\nfront * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 1.5)) * 0.16 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 3.5)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 5.5)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 7.5)) * 0.06;\nvar output : FragmentOutput;\noutput.color = mix(front, sum, shaderParams.intensity);\nreturn output;\n}",XS:!1,qS:!1,PS:0,DS:8,NS:!1,kS:!1,$S:!1,US:!1,HS:!1,parameters:[["intensity",0,"percent"]]},self.C3_Shaders.softlight={jDt:"precision mediump float;\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform lowp sampler2D samplerBack;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nfront.rgb /= front.a;\nmediump vec2 tex = (vTex - srcStart) / (srcEnd - srcStart);\nlowp vec4 back = texture2D(samplerBack, mix(destStart, destEnd, tex));\nback.rgb /= back.a;\nfront.r = ((front.r < 0.5) ? (2.0 * back.r * front.r + back.r * back.r * (1.0 - 2.0 * front.r)) : (sqrt(back.r) * (2.0 * front.r - 1.0) + 2.0 * back.r * (1.0 - front.r)));\nfront.g = ((front.g < 0.5) ? (2.0 * back.g * front.g + back.g * back.g * (1.0 - 2.0 * front.g)) : (sqrt(back.g) * (2.0 * front.g - 1.0) + 2.0 * back.g * (1.0 - front.g)));\nfront.b = ((front.b < 0.5) ? (2.0 * back.b * front.b + back.b * back.b * (1.0 - 2.0 * front.b)) : (sqrt(back.b) * (2.0 * front.b - 1.0) + 2.0 * back.b * (1.0 - front.b)));\nfront.rgb *= front.a;\ngl_FragColor = front * back.a;\n}",HDt:"",UDt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\n%%SAMPLERBACK_BINDING%% var samplerBack : sampler;\n%%TEXTUREBACK_BINDING%% var textureBack : texture_2d<f32>;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\nvar back : vec4<f32> = c3_unpremultiply(textureSample(textureBack, samplerBack, c3_getBackUV(input.fragPos.xy, textureBack)));\nvar rgb : vec3<f32> = select(\nsqrt(back.rgb) * (2.0 * front.rgb - 1.0) + 2.0 * back.rgb * (1.0 - front.rgb),\n2.0 * back.rgb * front.rgb + back.rgb * back.rgb * (1.0 - 2.0 * front.rgb),\nfront.rgb < vec3<f32>(0.5)\n);\nvar output : FragmentOutput;\noutput.color = vec4<f32>(rgb * front.a * back.a, front.a * back.a);\nreturn output;\n}",XS:!0,qS:!1,PS:0,DS:0,NS:!1,kS:!1,$S:!1,US:!1,HS:!1,parameters:[]},self.C3_Shaders.overlay={jDt:"precision mediump float;\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform lowp sampler2D samplerBack;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nmediump vec2 tex = (vTex - srcStart) / (srcEnd - srcStart);\nlowp vec4 back = texture2D(samplerBack, mix(destStart, destEnd, tex));\nfront.r = back.r < 0.5 ? 2.0 * back.r * front.r : 2.0 * (front.r + back.r * front.a - back.r * front.r) - front.a;\nfront.g = back.g < 0.5 ? 2.0 * back.g * front.g : 2.0 * (front.g + back.g * front.a - back.g * front.g) - front.a;\nfront.b = back.b < 0.5 ? 2.0 * back.b * front.b : 2.0 * (front.b + back.b * front.a - back.b * front.b) - front.a;\nfront *= back.a;\ngl_FragColor = front;\n}",HDt:"",UDt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\n%%SAMPLERBACK_BINDING%% var samplerBack : sampler;\n%%TEXTUREBACK_BINDING%% var textureBack : texture_2d<f32>;\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar back : vec4<f32> = textureSample(textureBack, samplerBack, c3_getBackUV(input.fragPos.xy, textureBack));\nvar rgb : vec3<f32> = select(\n2.0 * (front.rgb + back.rgb * front.a - back.rgb * front.rgb) - front.a,\n2.0 * back.rgb * front.rgb,\nback.rgb < vec3<f32>(0.5)\n);\nvar output : FragmentOutput;\noutput.color = vec4<f32>(rgb, front.a) * back.a;\nreturn output;\n}",XS:!0,qS:!1,PS:0,DS:0,NS:!1,kS:!1,$S:!1,US:!1,HS:!1,parameters:[]},self.C3_Shaders.brightness={jDt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp float brightness;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float a = front.a;\nif (a != 0.0)\nfront.rgb /= front.a;\nfront.rgb += (brightness - 1.0);\nfront.rgb *= a;\ngl_FragColor = front;\n}",HDt:"",UDt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nbrightness : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\nvar output : FragmentOutput;\noutput.color = vec4<f32>((front.rgb + (shaderParams.brightness - 1.0)) * front.a, front.a);\nreturn output;\n}",XS:!1,qS:!1,PS:0,DS:0,NS:!1,kS:!1,$S:!0,US:!1,HS:!1,parameters:[["brightness",0,"percent"]]},self.C3_Shaders.grayscalemask={jDt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform lowp sampler2D samplerBack;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nvoid main(void)\n{\nlowp float fronta = texture2D(samplerFront, vTex).a;\nmediump vec2 tex = (vTex - srcStart) / (srcEnd - srcStart);\nlowp vec4 back = texture2D(samplerBack, mix(destStart, destEnd, tex));\nlowp float gray = back.r * 0.299 + back.g * 0.587 + back.b * 0.114;\ngl_FragColor = mix(back, vec4(gray, gray, gray, back.a), fronta);\n}",HDt:"",UDt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\n%%SAMPLERBACK_BINDING%% var samplerBack : sampler;\n%%TEXTUREBACK_BINDING%% var textureBack : texture_2d<f32>;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar fronta : f32 = textureSample(textureFront, samplerFront, input.fragUV).a;\nvar back : vec4<f32> = textureSample(textureBack, samplerBack, c3_getBackUV(input.fragPos.xy, textureBack));\nvar gray : f32 = c3_grayscale(back.rgb);\nvar output : FragmentOutput;\noutput.color = mix(back, vec4<f32>(gray, gray, gray, back.a), fronta);\nreturn output;\n}",XS:!0,qS:!1,PS:0,DS:0,NS:!1,kS:!1,$S:!0,US:!1,HS:!1,parameters:[]};{let ForEachOrdered_SortInstances2=function(t,e){const s=t[1],i=e[1];if("number"==typeof s&&"number"==typeof i)return s-i;{const r=""+s,n=""+i;return r<n?-1:n<r?1:0}},a=(ForEachOrdered_SortInstances=ForEachOrdered_SortInstances2,self.Fe),r=null,n="",s="",o=[],u="",l="",c="",i=a.Cn(a.odt);a.E7._7=class extends a.dEt{constructor(t){super(t),this.sdt=this.gf.wD().sH(),this.Uft=this.gf.wD().kD(),this.z$t=0,this.J$t=0,this.Z$t=new Map}gn(){super.gn()}XL(){this.gf.XL()}P$(t){this.gf.P$(t,null,null)}Q$t(t,e){return r&&t===n&&e===s||(r=new RegExp(t,e),n=t,s=e),r.lastIndex=0,r}t4t(t,e,s){if(t!==u||e!==l||s!==c){const i=this.Q$t(e,s);o=t.match(i),u=t,l=e,c=s}return o}async e4t(t,e){if(e.length){this.z$t+=e.length;const s=[];for(const i of e)s.push(t.jz(i));await a.do(s,()=>{this.J$t++}),this.J$t++,this.J$t===this.z$t&&(this.J$t=0,this.z$t=0,this.gf.P$(a.E7._7.T7.s4t,null,null))}}i4t(t,e){for(const s of e)0===s.ek()&&t.Kz(s)}r4t(){return i}n4t(e){const s=this.gf.wD(),t=s.kD(),i=t.tH(),r=i.GD(),n=r.QV(),h=i.U0t(),o=t.eH(r),a=s.sH(),l=a.eH();if(l.ndt(e),h)for(let t=0;t<e&&!l.uH();++t)s.hH(n),l.lH(t),r.oH(i,o),s.aH(n);else for(let t=0;t<e&&!l.uH();++t)l.lH(t),r.oH(i,o);return t.fH(),a.fH(),!1}*h4t(e){const s=this.gf.wD(),t=s.kD(),i=t.tH(),r=i.GD(),n=r.QV(),h=i.U0t(),o=t.eH(r),a=s.sH(),l=a.eH();if(l.ndt(e),h)for(let t=0;t<e&&!l.uH();++t)s.hH(n),l.lH(t),yield*r.M1t(i,o),s.aH(n);else for(let t=0;t<e&&!l.uH();++t)l.lH(t),yield*r.M1t(i,o);return t.fH(),a.fH(),!1}o4t(){const e=this.gf.wD(),t=e.kD(),s=t.tH(),i=s.GD(),r=i.QV(),n=s.U0t(),h=t.eH(i),o=e.sH(),a=o.eH();if(n)for(let t=0;!a.uH();++t)e.hH(r),a.lH(t),i.oH(s,h)||a.BW(),e.aH(r);else for(let t=0;!a.uH();++t)a.lH(t),i.oH(s,h)||a.BW();return t.fH(),o.fH(),!1}*a4t(){const e=this.gf.wD(),t=e.kD(),s=t.tH(),i=s.GD(),r=i.QV(),n=s.U0t(),h=t.eH(i),o=e.sH(),a=o.eH();if(n)for(let t=0;!a.uH();++t){e.hH(r),a.lH(t);const l=yield*i.M1t(s,h);l||a.BW(),e.aH(r)}else for(let t=0;!a.uH();++t){a.lH(t);const c=yield*i.M1t(s,h);c||a.BW()}return t.fH(),o.fH(),!1}l4t(t,e,s){const i=this.gf.wD(),r=i.kD(),n=r.tH(),h=n.GD(),o=h.QV(),a=n.U0t(),l=r.eH(h),c=i.sH(),u=c.eH();if(u.iH(t),u.ndt(s),s<e)if(a)for(let t=e;t>=s&&!u.uH();--t)i.hH(o),u.lH(t),h.oH(n,l),i.aH(o);else for(let t=e;t>=s&&!u.uH();--t)u.lH(t),h.oH(n,l);else if(a)for(let t=e;t<=s&&!u.uH();++t)i.hH(o),u.lH(t),h.oH(n,l),i.aH(o);else for(let t=e;t<=s&&!u.uH();++t)u.lH(t),h.oH(n,l);return r.fH(),c.fH(),!1}*c4t(t,e,s){const i=this.gf.wD(),r=i.kD(),n=r.tH(),h=n.GD(),o=h.QV(),a=n.U0t(),l=r.eH(h),c=i.sH(),u=c.eH();if(u.iH(t),u.ndt(s),s<e)if(a)for(let t=e;t>=s&&!u.uH();--t)i.hH(o),u.lH(t),yield*h.M1t(n,l),i.aH(o);else for(let t=e;t>=s&&!u.uH();--t)u.lH(t),yield*h.M1t(n,l);else if(a)for(let t=e;t<=s&&!u.uH();++t)i.hH(o),u.lH(t),yield*h.M1t(n,l),i.aH(o);else for(let t=e;t<=s&&!u.uH();++t)u.lH(t),yield*h.M1t(n,l);return r.fH(),c.fH(),!1}u4t(s){const t=s.ZF(),e=t.JF();if(0!==e.length){const r=this.gf.wD(),n=r.kD(),h=n.tH(),o=h.GD(),l=o.QV(),c=h.U0t(),u=n.eH(o),f=r.sH(),d=f.eH(),p=s.n$(),m=i.eH();if(a.Yh(m,e),d.ndt(m.length),c)for(let t=0,e=m.length;t<e&&!d.uH();++t){r.hH(l);const C=m[t];s.ZF().s0t(C),p&&C.$mt(),d.lH(t),o.oH(h,u),r.aH(l)}else{t.Qft(!1);const g=t.t0t();a.Vh(g),g.push(null);for(let t=0,e=m.length;t<e&&!d.uH();++t){const S=m[t];g[0]=S,p&&S.$mt(),d.lH(t),o.oH(h,u)}}n.fH(),f.fH(),a.Vh(m),i.fH()}return!1}*f4t(s){const t=s.ZF(),e=t.JF();if(0!==e.length){const r=this.gf.wD(),n=r.kD(),h=n.tH(),o=h.GD(),l=o.QV(),c=h.U0t(),u=n.eH(o),f=r.sH(),d=f.eH(),p=s.n$(),m=i.eH();if(a.Yh(m,e),d.ndt(m.length),c)for(let t=0,e=m.length;t<e&&!d.uH();++t){r.hH(l);const C=m[t];s.ZF().s0t(C),p&&C.$mt(),d.lH(t),yield*o.M1t(h,u),r.aH(l)}else{t.Qft(!1);const g=t.t0t();a.Vh(g),g.push(null);for(let t=0,e=m.length;t<e&&!d.uH();++t){const S=m[t];g[0]=S,p&&S.$mt(),d.lH(t),yield*o.M1t(h,u)}}n.fH(),f.fH(),a.Vh(m),i.fH()}return!1}d4t(s,t){const e=s.ZF(),r=e.JF();if(0!==r.length){const n=this.gf.wD(),h=n.kD(),o=n.t3t(),l=h.tH(),c=l.GD(),u=c.QV(),f=l.U0t(),d=h.eH(c),p=n.sH(),m=p.eH(),C=s.n$(),g=i.eH();a.Vh(g),m.ndt(r.length);for(let t=0,e=r.length;t<e;++t)g.push([r[t],o.USt(1,t)]);if(g.sort(ForEachOrdered_SortInstances2),1===t&&g.reverse(),f)for(let t=0,e=g.length;t<e&&!m.uH();++t){n.hH(u);const S=g[t][0];s.ZF().s0t(S),C&&S.$mt(),m.lH(t),c.oH(l,d),n.aH(u)}else{e.Qft(!1);const y=e.t0t();a.Vh(y),y.push(null);for(let t=0,e=g.length;t<e&&!m.uH();++t){const T=g[t][0];y[0]=T,C&&T.$mt(),m.lH(t),c.oH(l,d)}}h.fH(),p.fH(),a.Vh(g),i.fH()}return!1}*p4t(s,t){const e=s.ZF(),r=e.JF();if(0!==r.length){const n=this.gf.wD(),h=n.kD(),o=n.t3t(),l=h.tH(),c=l.GD(),u=c.QV(),f=l.U0t(),d=h.eH(c),p=n.sH(),m=p.eH(),C=s.n$(),g=i.eH();a.Vh(g),m.ndt(r.length);for(let t=0,e=r.length;t<e;++t)g.push([r[t],o.USt(1,t)]);if(g.sort(ForEachOrdered_SortInstances2),1===t&&g.reverse(),f)for(let t=0,e=g.length;t<e&&!m.uH();++t){n.hH(u);const S=g[t][0];s.ZF().s0t(S),C&&S.$mt(),m.lH(t),yield*c.M1t(l,d),n.aH(u)}else{e.Qft(!1);const y=e.t0t();a.Vh(y),y.push(null);for(let t=0,e=g.length;t<e&&!m.uH();++t){const T=g[t][0];y[0]=T,C&&T.$mt(),m.lH(t),yield*c.M1t(l,d)}}h.fH(),p.fH(),a.Vh(g),i.fH()}return!1}m4t(t,e){let s=this.Z$t.get(t);if(!s){if(!e)return null;s={C4t:null,g4t:new Map},this.Z$t.set(t,s)}return s}S4t(t,e,s,i,r){e.vD().V1t(s,e.DD()),i&&t.aH(r)}*y4t(t,e,s,i,r){yield*e.vD().H1t(s,e.DD()),i&&t.aH(r)}}}{const a1=self.Fe;a1.E7._7.bRt=class extends a1.pn{constructor(t){super(),this.Dft=t,this.gf=t.hN(),this.ZEt=t.$F()}NEt(){}gn(){this.Dft=null,this.gf=null,this.ZEt=null}}}{const d1=self.Fe;d1.E7._7.Instance=class extends d1.pn{constructor(t,e){super(),this.vs=t,this.Dft=this.vs.YB(),this.rAt=this.Dft.yyt(),this.gf=this.vs.hN()}gn(){this.vs=null,this.Dft=null,this.rAt=null,this.gf=null}}}{const h1=self.Fe,i1=[];h1.E7._7.T7={T4t(){return!0},y7(){return!0},P7(){return!0},IBt(){return!0},wBt(){return!0},jD(){return this.gf.jD()},ICt(){const t=this.gf.Qdt();return!t.F0t()&&!t.L0t()},_4t(){let t=this.gf.t3t(),e=t.vSt(),s=e.get("TriggerOnce_lastTick");void 0===s&&(s=-1,e.set("TriggerOnce_lastTick",-1));const i=this.gf.Utt();return e.set("TriggerOnce_lastTick",i),this.gf.t$t()||s!==i-1},E4t(t){const e=this.gf.t3t(),s=e.vSt(),i=s.get("Every_lastTime")||0,r=this.gf.KD(),n=(s.has("Every_seconds")||s.set("Every_seconds",t),s.get("Every_seconds"));return i+n<=r?(s.set("Every_lastTime",i+n),r>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",r),s.set("Every_seconds",t),!0):(r<i-.1&&s.set("Every_lastTime",r),!1)},$pt(t){const e=this.gf.wD()._3t(t);return e&&e.$pt()},sNt(){return this.gf.sNt()},Is(){return h1.ds.Is},hBt(){return!0},A4t(){return!0},I4t(){return!0},f$t(){return!0},g$t(){return!0},p$t(){return!0},m$t(){return!0},w4t(t){return!!this.gf.DL(t)},R4t(t){switch(t){case 0:return"browser"===h1.ds.Es;case 1:return"iOS"===h1.ds.Cs;case 2:return"Android"===h1.ds.Cs;case 8:return"cordova"===h1.ds.Es;case 9:return"scirra-arcade"===this.gf.jN();case 10:return"nwjs"===h1.ds.Es;case 13:return"windows-uwp"===this.gf.jN();default:return!1}},M4t(t,e,s){const i=this.Q$t(e,s);return i.test(t)},b4t(t,e,s){return h1.compare(t,e,s)},v4t(t,e,s){return e<=t&&t<=s},x4t(t,e,s){return h1.compare(t.Fit(),e,s)},G4t(t){return!!t.Fit()},P4t(t,e){const s=this.gf.KD();if(0!==t)return h1.compare(s,t,e);{const i=this.gf.t3t(),r=i.vSt();return!r.get("CompareTime_executed")&&e<=s&&(r.set("CompareTime_executed",!0),!0)}},O4t(t){return isNaN(t)},N_t(t,e,s){return h1.vn(h1.In(t),h1.In(s))<=h1.In(e)},F_t(t,e){return h1.Gn(h1.In(t),h1.In(e))},Kyt(t,e,s){let i=h1.In(t),r=h1.In(e),n=h1.In(s),h=!h1.Gn(n,r);return h?!(!h1.Gn(i,r)&&h1.Gn(i,n)):h1.Gn(i,r)&&!h1.Gn(i,n)},D4t(t,e){return"number"==typeof t?0===e:1===e},L4t(t){return!!t},Spt(t){return t.toLowerCase()===this.gf.wD().Ept()},N4t(t,s,i,r){if(!t)return!1;let e=this.r4t(),n=e.eH(),h=t.ZF(),o=(h1.Yh(n,h.JF()),h.Xft()&&h1.Vh(h.e0t()),this.gf.t3t()),a=0;for(let t=0,e=n.length;t<e;++t){const c=n[t];n[a]=c,s=o.USt(1,t),r=o.USt(3,t),h1.compare(s,i,r)?++a:h.Zft(c)}h1.Uh(n,a),h.i0t(n);const l=!!n.length;return h1.Vh(n),e.fH(),t.N1t(),l},F4t(t,e){if(!t)return!1;let s=this.r4t(),i=s.eH(),r=t.ZF(),n=(h1.Yh(i,r.JF()),r.Xft()&&h1.Vh(r.e0t()),this.gf.t3t()),h=0;for(let t=0,e=i.length;t<e;++t){const a=i[t];i[h]=a,n.USt(1,t)?++h:r.Zft(a)}h1.Uh(i,h),r.i0t(i);const o=!!i.length;return h1.Vh(i),s.fH(),t.N1t(),o},k4t(t,s,i){if(!t)return!1;const e=t.ZF(),r=e.JF();if(0===r.length)return!1;let n=this.gf.t3t(),h=null,o=0;for(let t=0,e=r.length;t<e;++t){const a=r[t];i=n.USt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=a)}return e.a0t(h),t.N1t(),!0},B4t(t,e){if(!t)return!1;const s=t.ZF(),i=s.JF();if((e=Math.floor(e))>=i.length)return!1;const r=i[e];return s.a0t(r),t.N1t(),!0},$4t(t){if(!t)return!1;const e=t.ZF(),s=e.JF(),i=Math.floor(this.gf.CL()*s.length);if(i>=s.length)return!1;const r=s[i];return e.a0t(r),t.N1t(),!0},W4t(t){if(!t)return!1;if(!t.ek())return!1;const e=t.ZF();return e.Qft(!0),t.N1t(),!0},U4t(t,s,i){if(!t)return!1;const r=t.ZF(),e=r.JF(),n=this.gf.GD(),h=n.l0t(),o=this.gf.t3t().ISt();r.Xft()?(h1.Yh(i1,e),r.jft(),r.Qft(!1)):h?(h1.Yh(i1,r.e0t()),h1.Vh(r.e0t())):(h1.Yh(i1,r.t0t()),h1.Vh(r.t0t()));for(let t=0,e=i1.length;t<e;++t){const a=i1[t];h1.xor(a.BL().L4(s,i),o)?r.Jft(a):r.Zft(a)}return t.N1t(),h1.xor(!!r.t0t().length,o)},V4t(e){if(!e)return!1;let s=e.sq(),i=null,r=this.gf.SMt();for(let t=r.length-1;0<=t;--t){const n=r[t];if(s){if(n.YB().Iyt(e)){i=n;break}}else if(n.YB()===e){i=n;break}}if(!i){const h=e.JF();h.length&&(i=h.at(-1))}if(!i)return!1;const t=e.ZF();return t.a0t(i),e.N1t(),!0},H4t(t){return this.gf.ATt()?this.h4t(t):this.n4t(t)},j4t(){return this.gf.ATt()?this.a4t():this.o4t()},X4t(t,e,s){return this.gf.ATt()?this.c4t(t,e,s):this.l4t(t,e,s)},Ed(t){return this.gf.ATt()?this.f4t(t):this.u4t(t)},Y4t(t,e,s){return this.gf.ATt()?this.p4t(t,s):this.d4t(t,s)},q4t(t){return!!t&&t.iB()},K4t(t){return!!t&&t.cB()},z4t(t){return!!t&&t.oB()},J4t(t){return!!t&&!t.ek()},Z4t(t,e,s){return!!t&&h1.compare(100*t.jv(),e,s)},Q4t(t){const e=this.gf.gL();return!!e&&e.vz(t)},s4t(){return!0},t5t(){return 0<this.z$t},e5t(t,e){const s=this.gf.wbt();return!!s&&!!e&&!!s.nct(t,e)}}}{let SortZOrderList2=function(t,e){const s=t[0],i=e[0],r=s-i;if(0!=r)return r;const n=t[1],h=e[1];return n-h},SortInstancesByValue2=function(t,e){return t[1]-e[1]};SortZOrderList=SortZOrderList2,SortInstancesByValue=SortInstancesByValue2;const M2=self.Fe,N2=[],O2=[],P2=M2.Cn(M2.Rect),Q2=M2.Cn(M2.Ko),R2=[];M2.E7._7.unt={s5t(t,e){t.yrt(e)},i5t(t,e){t.mi()&&"number"!=typeof e&&(e=parseFloat(e)),t.yrt(t.Fit()+e)},r5t(t,e){t.mi()&&t.yrt(t.Fit()-e)},n5t(t,e){t.yrt(!!e)},h5t(t){t.yrt(!t.Fit())},o5t(t){t.yrt(t.Zdt())},a5t(t){this.gf.wD().y3t(t)},l5t(t,e,s,i,r,n){if(t&&e){const h=this.gf.ik(t,e,s,i,r,n);if(h){r&&e.rk(h);const o=this.gf.wD(),a=(o.nk(!0),h.hk(),o.nk(!1),new Map);h.Cbt(a,t,r);for(const[l,c]of a)l.ZF().r0t(c)}}},c5t(t,e,s,i,r,n){if(t&&e){const h=this.gf.uBt(t);h&&M2.E7._7.unt.l5t.call(this,h,e,s,i,r,n)}},tq(r,n,h,o,a,t,l,c,u,f,d){if(r){let e=this.gf.FL(),s=e;if(t){const p=this.gf.TL().pJ(t);if(!p)return;s=p}let i=null;if(!("number"!=typeof l||0<=l)||(i=s.$L(l))){let t=null;if(!("number"!=typeof c||0<=c)||(t=e.$L(c))){P2.set(n,h,o,a);const m=s.tq(r,P2,i,t,u,f,d);r.ZF().i0t(m),r.N1t()}}}},u5t(){const t=this.sdt;t.Z0t()&&t.z0t().BW()},Wpt(t,e){const s=this.gf.wD()._3t(t);s&&(0===e?s.Wpt(!1):1===e?s.Wpt(!0):s.Wpt(!s.$pt()))},f5t(t){this.gf.QD(t)},d5t(t,e){if(e<0&&(e=0),t){const s=t.ZF(),i=s.JF();for(const r of i)r.QD(e)}},p5t(t){if(t){const e=t.ZF(),s=e.JF();for(const i of s)i.f$()}},Fh(t){if(!(t<0))return this.gf.wD().ept().hEt(t),!0},VD(t){return this.gf.wD().ept().oEt(t),!0},m5t(){const t=this.gf.wD();return t.ept().aEt(t.gpt()),!0},WD(t){this.gf.wD().WD(t)},async LLt(t,e,s,i,r,n){const h=this.gf.KN();h&&(this.XL(),await h.LLt(0===t?"image/png":"image/jpeg",e/100,s,i,r,n),await this.gf.D$(M2.E7._7.T7.A4t,null))},C5t(t,e){if(!(t<=0||e<=0)){this.gf.hLt(t,e),this.gf.FL().T8();const s=this.gf.KN();s&&("off"!==s.QDt()&&this.gf.dBt(t,e),s.uM(s.ZU(),s.QU(),!0),this.gf.XL())}},g5t(t){const e=this.gf.KN();e&&"off"!==e.QDt()&&(e.dLt(0!==t?"high":"low"),e.uM(e.ZU(),e.QU(),!0))},tit(t){this.gf.r$t(t)},S5t(){this.gf.n$t()},y5t(t){this.gf.h$t(t)},T5t(t){this.gf.p_t(t)},_5t(t){},E5t(){for(const t of this.gf.TL().AL())t.U7()},A5t(t){this.gf.e$t(0!==t)},I5t(t,e){this.gf.mL(1/t),this.gf.fL(1/e)},w5t(t,e){this.gf.fL(t),this.gf.mL(e)},R5t(t){this.gf.lL(["vsync","unlimited-tick","unlimited-frame"][t])},M5t(t,s){if(t){const e=t.ZF(),i=e.JF(),r=N2,n=O2,h=this.gf.FL(),o=t.sq(),a=t.n2t();for(let t=0,e=i.length;t<e;++t){const l=i[t],c=l.BL();if(c){let t;t=o?l.rht(s+l.YB().r2t(a)):l.rht(s),r.push([c.$L().qO(),c.WL()]),n.push([l,t])}}if(r.length){r.sort(SortZOrderList2),n.sort(SortInstancesByValue2);let s=!1;for(let t=0,e=r.length;t<e;++t){const u=n[t][0],f=h.UL(r[t][0]),d=r[t][1],p=f.VL();p[d]!==u&&((p[d]=u).BL().HL(f,!0),f.jL(u),s=!0)}s&&this.gf.XL(),M2.Vh(N2),M2.Vh(O2)}}},ON(t,e){t=Math.floor(t),e=Math.floor(e),t<=0||e<=0||!Number.isFinite(t)||!Number.isFinite(e)||this.gf.eD().ON(t,e)},b5t(t){if(!this.gf.qC()){const e=this.gf.TL();e.wL()||e.RL(t)}},v5t(t){if(!this.gf.qC()){const e=this.gf.TL();if(!e.wL()){const s=e.pJ(t);s&&e.RL(s)}}},x5t(t){if(!this.gf.qC()){const e=this.gf.TL();if(!e.wL()){const s=e.AL(),i=s.indexOf(e.gL());if((!t||0!==i)&&(t||i!==s.length-1)){const r=s[i+(t?-1:1)];e.RL(r)}}}},G5t(){if(!this.gf.qC()){const t=this.gf.TL();t.wL()||(t.RL(t.gL()),this.gf.wD().w3t())}},P5t(t,e){t&&t.eB(e)},O5t(t,e){t&&t.nB(e)},D5t(t,e){t&&t.aB(e)},L5t(t,e){t&&t.Yv(e/100)},N5t(t,e){t&&t.uB(e)},F5t(t,e){t&&t.dB(e)},k5t(t,e){t&&t.Sk(M2.In(+e))},B5t(t,e,s){t&&(t.vB(!0),t.Tk(e),t.Ek(s))},$5t(t){t&&t.vB(!1)},W5t(t,e,s){t&&t.Nq(e/100,s/100)},U5t(t,e){t&&t.Vy(+e)},V5t(t,e){if(t){Q2.Ga(e),Q2.En();const s=t.bB();s.Ea(Q2)||(s.fa(Q2),this.XL())}},H5t(t,e){t&&t.EB(e)},j5t(t,e){t&&t.Ry(e)},X5t(t,e,s){if(t){const i=t.fk(),r=i.jrt(s);if(r){const n=1===e;r.Gmt()!==n&&(r.VGt(n),t.J5(),this.gf.XL())}}},Y5t(t,e,s,i){if(t){const r=t.fk(),n=r.jrt(e);if(n){s=Math.floor(s);const h=n.mA().gA(s);if(h){"color"===h?(Q2.Ga(i),i=Q2):"percent"===h&&(i/=100);const o=r.Q5(n.qO(),s,i);o&&n.Gmt()&&this.gf.XL()}}}},q5t(t,e){t&&t.wB(e)},K5t(t){this.gf.FL().Ck(+t)},z5t(t){this.gf.FL().Sk(M2.In(+t))},J5t(t,e){const s=this.gf.FL(),i=s.fk(),r=i.jrt(e);if(r){const n=1===t;r.Gmt()!==n&&(r.VGt(n),s.J5(),this.gf.XL())}},Z5t(t,e,s){const i=this.gf.FL(),r=i.fk(),n=r.jrt(t);if(n){e=Math.floor(e);const h=n.mA().gA(e);if(h){"color"===h?(Q2.Ga(s),s=Q2):"percent"===h&&(s/=100);const o=r.Q5(n.qO(),e,s);o&&n.Gmt()&&this.gf.XL()}}},Q5t(t,e){const s=this.gf.FL();s.Wk(t/100,e/100)},tWt(t){const e=this.gf.FL();0===t?e.Hk():e.jk()},eWt(t){const e=this.gf.FL();e.Tk(t)},sWt(t){const e=this.gf.FL();e.Ek(t)},iWt(t,e){const s=this.gf.FL();s.Tk(t),s.Ek(e)},rWt(t){if(t){const e=t.uTt();if(e){const s=e.BL();if(s){const i=this.gf.FL();i.Tk(s.Fy()),i.Ek(s.$y())}}}},Ok(t,e,s){const i=this.gf.FL();try{i.Ok(t,e,s)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},Lk(t,e,s){if(t){const i=this.gf.FL();try{i.Lk(t,e,s)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},Fk(t){if(t){const e=this.gf.FL();e.Fk(t)}},Bk(){this.gf.FL().Bk()},async nWt(t){const e=this.gf.gL();if(e&&t&&!this.gf.qC()){const s=t.sq()?t.bCt():[t];await this.e4t(e,s)}},async hWt(t){await M2.E7._7.unt.nWt.call(this,this.gf.uBt(t))},oWt(t){const e=this.gf.gL();if(e&&t){const s=t.sq()?t.bCt():[t];this.i4t(e,s)}},aWt(t){M2.E7._7.unt.oWt.call(this,this.gf.uBt(t))},lWt(){const t=this.gf.gL();if(t){const e=t.Wz();this.i4t(t,e)}},async cWt(t){const e=this.gf.gL();t&&e&&!this.gf.qC()&&await this.e4t(e,t.kz())},async uWt(t){const e=this.gf.gL(),s=this.gf.TL().pJ(t);s&&e&&!this.gf.qC()&&await this.e4t(e,s.kz())},$D(t){const e=this.Uft.FD();if(e)switch(e.BD()){case 1:"number"==typeof t&&e.$D(t);break;case 2:"string"==typeof t&&e.$D(t);break;case 3:e.$D(t)}},fWt(t,e,s){const i=this.m4t(t.toLowerCase(),!0),r=i.g4t,n=e.toLowerCase(),h=(r.has(n)&&console.warn(`[Construct] Function map '${t}' string '${e}' already in map; overwriting entry`),M2.first(r.values())||i.C4t);if(h){const o=0!==h.LD(),a=0!==s.LD();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${e}' function return type not compatible with other functions in the map; entry ignored`)}r.set(n,s)},dWt(t,e){const s=this.m4t(t.toLowerCase(),!0),i=(s.C4t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),M2.first(s.g4t.values())||s.C4t);if(i){const r=0!==i.LD(),n=0!==e.LD();if(r!=n)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}s.C4t=e},pWt(t,e,s){const i=this.gf,r=i.ATt()?R2:null,n=(s=Math.floor(s),this.m4t(t.toLowerCase(),!1));if(!n)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),r;let h=n.g4t.get(e.toLowerCase());if(!h){if(!n.C4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${e}'; call ignored (consider setting a default)`),r;h=n.C4t,s=0}if(!h.lu())return r;if(0!==h.LD())return console.warn(`[Construct] Call mapped function: map '${t}' string '${e}' has a return type so cannot be called`),r;const o=i.wD(),a=o.GD(),l=a.xD(),c=0<l.length,u=(c&&(h.DD()?o.hH(l):o.Q3t(l)),[]),f=o.Ypt(a);if(f){const p=f.Kpt();for(let t=s,e=p.length;t<e;++t)u.push(p[t].Fit())}const d=h.Kpt();for(let t=u.length,e=d.length;t<e;++t)u.push(d[t].Zdt());return i.ATt()?this.y4t(o,h,u,c,l):this.S4t(o,h,u,c,l)}}}{const Vf=self.Fe;Vf.E7._7.fnt={mWt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},N(t){return t.toString()},Yt(t){return"string"==typeof t?t.length:0},random(t,e){return void 0===e?this.gf.CL()*t:this.gf.CL()*(e-t)+t},Vgt(...t){const e=Math.floor(this.gf.CL()*t.length);return t[e]},CWt(t,...e){return"number"!=typeof t&&(t=0),e[t=Vf.En(Math.floor(t),0,e.length-1)]},pi(){return Math.PI},gWt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},SWt(t,e){e=Math.max(Math.floor(e),0);const s=Math.pow(10,e);return Math.round((t+Number.EPSILON)*s)/s},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(Vf.In(t))},cos(t){return Math.cos(Vf.In(t))},tan(t){return Math.tan(Vf.In(t))},asin(t){return Vf.wn(Math.asin(t))},acos(t){return Vf.wn(Math.acos(t))},atan(t){return Vf.wn(Math.atan(t))},exp(t){return Math.exp(t)},Qt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...s){let i=s[0];"number"!=typeof i&&(i=0);for(let e=1,t=s.length;e<t;++e){let t=s[e];"number"==typeof t&&i<t&&(i=t)}return i},min(...s){let i=s[0];"number"!=typeof i&&(i=0);for(let e=1,t=s.length;e<t;++e){let t=s[e];"number"==typeof t&&i>t&&(i=t)}return i},En(t,e,s){return Vf.En(t,e,s)},Gt(t,e,s,i){return Vf.Rn(t,e,s,i)},angle(t,e,s,i){return Vf.wn(Vf.bn(t,e,s,i))},Ft(t,e,s){return Vf.Ft(t,e,s)},Nn(t,e,s){return Vf.Nn(t,e,s)},kn(t,e,s,i){return Vf.kn(t,e,s,i)},Bn(t,e,s,i,r){return Vf.Bn(t,e,s,i,r)},$n(t,e,s){return Vf.$n(t,e,s)},yWt(t,e){return Vf.wn(Vf.vn(Vf.In(t),Vf.In(e)))},TWt(t,e,s){return Vf.wn(Vf.Pn(Vf.In(t),Vf.In(e),s))},_Wt(t,e,s){return Vf.wn(Vf.xn(Vf.In(t),Vf.In(e),Vf.In(s)))},EWt(t,e,s){return(t|=0)&~(1<<(e|=0))|(s=0!==s?1:0)<<e},AWt(t,e){return(t|=0)^1<<(0|e)},IWt(t,e){return(t|=0)&1<<(0|e)?1:0},wWt(){return"\n"},RWt(t){return"string"==typeof t?t.toUpperCase():""},MWt(t){return"string"==typeof t?t.toLowerCase():""},left(t,e){return"string"==typeof t?t.substr(0,e):""},mid(t,e,s){return"string"!=typeof t?"":s<0?t.substr(e):t.substr(e,s)},right(t,e){return"string"==typeof t?t.substr(Math.max(t.length-e,0)):""},trim(t){return"string"==typeof t?t.trim():""},bWt(t,e,s){if("string"!=typeof t||"string"!=typeof s)return"";let i=t.split(s);return(e=Math.floor(e))<0||e>=i.length?"":i[e]},vWt(t,e){return"string"==typeof t&&"string"==typeof e&&t.length?t.split(e).length:0},find(t,e){return"string"==typeof t&&"string"==typeof e?t.search(new RegExp(Vf.fi(e),"i")):-1},xWt(t,e){return"string"==typeof t&&"string"==typeof e?t.search(new RegExp(Vf.fi(e),"")):-1},replace(t,e,s){return"string"==typeof t&&"string"==typeof e&&"string"==typeof s?t.replace(new RegExp(Vf.fi(e),"gi"),s):"string"==typeof t?t:""},GWt(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},PWt(t,e,s){const i=this.Q$t(e,s);return t?t.search(i):-1},OWt(t,e,s,i){const r=this.Q$t(e,s);return t?t.replace(r,i):""},DWt(t,e,s){const i=this.t4t(t.toString(),e,s);return i?i.length:0},LWt(t,e,s,i){i=Math.floor(i);const r=this.t4t(t.toString(),e,s);return!r||i<0||i>=r.length?"":r[i]},NWt(t,e){let s=t<0?"-":"",i=e-(t=t<0?-t:t).toString().length;return(s+="0".repeat(Math.max(i,0)))+t.toString()},FWt(t){return encodeURIComponent(t)},kWt(t){return decodeURIComponent(t)},dt(){return this.gf.X9()},timescale(){return this.gf.ZD()},BWt(){return(Date.now()-this.gf.HBt())/1e3},$Wt(){return Date.now()},time(){return this.gf.KD()},tickcount(){return this.gf.Utt()},WWt(){return this.gf.YBt()},fps(){return this.gf.tL()},UWt(){return this.gf.rL()},VWt(){return this.gf.hL()},HWt(){return this.gf.KN().iF()},jWt(){return this.gf.KN().nF()},XWt(){return this.gf.uD()},YWt(){return this.gf.dD()},qWt(){return this.gf.uD()},KWt(){return this.gf.dD()},zWt(){return this.gf.FL()._k()},JWt(){return this.gf.FL().Ak()},ZWt(){return this.gf.FL().lf()},QWt(){return this.gf.FL().gk()},tUt(){return Vf.wn(this.gf.FL().yk())},eUt(){return this.gf.FL().Sm()},sUt(){return this.gf.FL().vm()},iUt(){return 100*this.gf.FL().vq()},rUt(){return 100*this.gf.FL().xq()},nUt(t){const e=this.gf.FL().$L(t);return e?e.bq().Gl():0},hUt(t){const e=this.gf.FL().$L(t);return e?e.bq().Pl():0},oUt(t){const e=this.gf.FL().$L(t);return e?e.bq().Ol():0},aUt(t){const e=this.gf.FL().$L(t);return e?e.bq().Dl():0},lUt(t){const e=this.gf.FL().$L(t);return e?e.bq().width():0},cUt(t){const e=this.gf.FL().$L(t);return e?e.bq().height():0},uUt(t){const e=this.gf.FL().$L(t);if(e){const s=e.bq();return(s.Gl()+s.Ol())/2}return 0},fUt(t){const e=this.gf.FL().$L(t);if(e){const s=e.bq();return(s.Pl()+s.Dl())/2}return 0},dUt(t,e,s){const i=this.gf.FL().$L(t);return i?i.OB(e,s)[0]:0},pUt(t,e,s){const i=this.gf.FL().$L(t);return i?i.OB(e,s)[1]:0},mUt(t,e,s){const i=this.gf.FL().$L(t);return i?i.kB(e,s)[0]:0},CUt(t,e,s){const i=this.gf.FL().$L(t);return i?i.kB(e,s)[1]:0},gUt(t,e,s,i){const r=this.gf.FL(),n=r.$L(t),h=r.$L(e);if(!n||!h||n===h)return s;const[o,a]=n.kB(s,i);return h.OB(o,a)[0]},SUt(t,e,s,i){const r=this.gf.FL(),n=r.$L(t),h=r.$L(e);if(!n||!h||n===h)return i;const[o,a]=n.kB(s,i);return h.OB(o,a)[1]},yUt(t){const e=this.gf.FL().$L(t);return e?e.fB():0},TUt(t){const e=this.gf.FL().$L(t);return e?Vf.wn(e.mB()):0},_Ut(t){const e=this.gf.FL().$L(t);return e?100*e.jv():0},EUt(t){const e=this.gf.FL().$L(t);return e?e.pB():0},AUt(t){const e=this.gf.FL().$L(t);return e?e._k():0},IUt(t){const e=this.gf.FL().$L(t);return e?e.Ak():0},wUt(t){const e=this.gf.FL().$L(t);return e?100*e.gB():0},RUt(t){const e=this.gf.FL().$L(t);return e?100*e.yB():0},MUt(t){const e=this.gf.FL().$L(t);return e?e.Uy():0},bUt(t){const e=this.gf.FL().$L(t);return e?e.qO():-1},vUt(){const t=this.gf.KN();return t?t.FLt():""},xUt(t){const e=this.sdt;if(!e.Z0t())return 0;if(t){const s=e.tdt(t);return s?s.qO():0}return e.z0t().qO()},GUt(){return this.gf.o$t()},PUt(t,e,...s){const i=this.m4t(t.toLowerCase(),!1);if(!i)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let r=i.g4t.get(e.toLowerCase());if(!r){if(!i.C4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${e}'; returning 0 (consider setting a default)`),0;r=i.C4t}const n=r.LD(),h=r.MD();if(0===n)return console.warn(`[Construct] Call mapped function: map '${t}' string '${e}' has no return type so cannot be called from an expression; returning 0`),0;if(!r.lu())return h;const o=this.gf,a=o.wD(),l=a.GD(),c=l.xD(),u=0<c.length,f=(u&&(r.DD()?a.hH(c):a.Q3t(c)),r.Kpt());for(let t=s.length,e=f.length;t<e;++t)s.push(f[t].Zdt());const d=r.vD(),p=d.OD(d.xD(),r.DD(),n,h,...s);return u&&a.aH(c),p},OUt(){return this.gf.ZO().yX()},DUt(){return 0===this.z$t?1:this.J$t/this.z$t},renderer(){return this.gf.TLt()?"webgpu":"webgl"},LUt(){return this.gf.TLt()?this.gf.TLt().GetAdapterInfoString():this.gf.yLt().cG()},NUt(){let t=this.gf.JS().wS();return Math.round(100*t/1048576)/100},FUt(t,e,s){return Vf.Yn(t,e,s)},kUt(t,e,s){return Vf.Kn(t/100,e/100,s/100)},BUt(t,e,s,i){return Vf.qn(t/100,e/100,s/100,i/100)},$Ut(t,e,s){return Vf.Kn(t/255,e/255,s/255)},WUt(t,e,s,i){return Vf.qn(t/255,e/255,s/255,i/255)},UUt(){return this.gf.nD()},VUt(){return this.gf.oD()},HUt(){return this.gf.GD().Mz().lf()},jUt(){return this.gf.GD().XCt()}}}{const a=self.Fe;a.E7.qrt=class extends a.dEt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe,e=self.Ye,f=[],g=(d.E7.qrt.bRt=class extends d.JEt{constructor(t){super(t),this._Rt=t.hMt()}gn(){d.Vh(this._Rt),super.gn()}NEt(){for(const t of this._Rt)t.Ewt(this.gf)}Vz(e){const s={NT:this.gf.pD()};return Promise.all(this._Rt.map(t=>t.Awt(e,s)))}zz(){for(const t of this._Rt)t.Iwt()}Yz(){this.XUt()}XUt(){for(const t of this.Dft.zF())t.P5().YUt()}LSt(t){d.E7.qrt.Y_t(this,t)}Tyt(t){f.push({eAt:null,qUt:!1,instances:[]})}KUt(t,e,s){const i=f.at(-1);i.eAt=t,i.qUt=s,i.instances.push(e)}_yt(t){const e=f.pop(),s=e.eAt,i=e.qUt;if(s){const r=new Map;for(const n of e.instances)n.Cbt(r,s,i);for(const[h,o]of r)h.ZF().r0t(o)}}zUt(t){const e=this.YB().uMt(t),s=this.hN(),i=e.wwt(0);return i.gW().HH(s.JS(),{NT:s.pD()}).then(()=>this.XUt()),e}JUt(t){for(const e of this.Dft.zF())e.P5().ZUt(t);this.YB().fMt(t)}QUt(t,e){const s=this.Dft.lMt(t);if(!s)throw new Error(`cannot find animation name '${t}'`);let i=s.vwt(e);i<0&&(i+=s.aW()+1);const r=d.ywt._wt(this.hN()),n=(s.Rwt(r,i),this.hN());r.gW().HH(n.JS(),{NT:n.pD()}).then(()=>this.XUt());for(const h of this.Dft.zF())h.P5().tVt();return r}eVt(t,e){const s=this.Dft.lMt(t);if(!s)throw new Error(`cannot find animation name '${t}'`);if(1===s.aW())throw new Error(`cannot remove last frame from animation '${t}'`);let i=s.vwt(e);i<0&&(i+=s.aW()),s.Mwt(i);for(const r of this.Dft.zF())r.P5().tVt()}FEt(){return self.sVt}},new WeakMap);self.sVt=class extends self.kF{constructor(t){super(t),g.set(this,t.yyt())}iVt(t){e.Ri(t);const s=g.get(this).YB().lMt(t);return s?s.xwt():null}rVt(){return g.get(this).YB().aMt().map(t=>t.xwt())}nVt(t){return e.Ri(t),g.get(this).zUt(t).xwt()}hVt(t){e.Ri(t),g.get(this).JUt(t)}oVt(t,s){if(e.Ri(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return g.get(this).QUt(t,s).uW()}aVt(t,s){if(e.Ri(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");g.get(this).eVt(t,s)}}}{const ea=self.Fe,fa=self.Ye,ga=0,ha=1,ia=2,ja=3,ka=ea.Cn(ea.Rect),la=ea.Cn(ea.ac),ma=ea.Cn(ea.ol),na=1,oa=2,pa=4,qa=(ea.E7.qrt.Instance=class extends ea.xAt{constructor(t,e){super(t);let s=!0,i="",r=0,n=!0;e&&(s=!!e[ga],i=e[ha],r=e[ia],n=e[ja]),this.lVt=this.Dft.lMt(i)||this.Dft.hMt()[0],this.cVt=ea.En(r,0,this.lVt.aW()-1),this.uVt=this.lVt.wwt(this.cVt);const h=this.uVt.gW(),o=(this.fVt=h.z_(),this.dVt=h.UM(),this.pVt=h.UAt(),this.DAt(),t.pbt(oa,!0),t.pbt(na,0<=this.lVt.eW()),this.mVt=Math.abs(this.lVt.eW()),this.CVt=this.lVt.nW(),this.gVt=ea.Cn(ea.G0),this.SVt=0,this.yVt=0,this.TVt="",this._Vt=-1,this.EVt="",this.AVt=0,this.BL());this.IVt=o.S4(),o.eB(s),o.D4(n),o.bht(this.uVt.TW()),o.xht(this.uVt.EW()),o.oGt(this.uVt.PW()),o.o4(),1===this.Dft.oMt()&&1===this.Dft.hMt()[0].aW()||0===this.mVt||this._At()}gn(){this.lVt=null,this.uVt=null,this.fVt=null,this.gVt=null,super.gn()}kAt(){return this.uVt.gW()}Dst(){return!0}HX(){this.fVt=null}FAt(){this.YUt()}wT(t){const e=this.fVt;if(null!==e){t.zv(e);const s=this.BL();s.I5()?this.wVt(s,t):this.RVt(s,t)}}RVt(t,e){let s=this.IVt;this.gf.CD()&&(s=t.tGt(s)),e.Cx(s,this.pVt)}wVt(e,t){const s=e.SGt();if(e.TGt()){e.Jxt(ka,la,!1);let t=la;this.gf.CD()&&(t=e.tGt(t)),s.IT(e.w5(),t,this.pVt),e.yGt(!1)}s.wT(t)}MVt(){return this.gVt.rs()}bVt(){return this.vs.mbt(oa)}vVt(t){this.vs.pbt(oa,t)}xVt(){return this.vs.mbt(na)}GVt(t){this.vs.pbt(na,t)}PVt(){return this.vs.mbt(pa)}OVt(t){this.vs.pbt(pa,t)}q9(){this.EVt&&this.DVt(),0<=this._Vt&&this.LVt();const t=this.mVt;if(this.bVt()&&0!==t){const e=this.gf.XD(this.vs),s=(this.gVt.Eu(e),this.MVt()),i=this.uVt,r=i.SW()/t;if(!(s<this.SVt+r)){const n=this.lVt,h=this.CVt,o=n.aW(),a=n.iW(),l=n.sW(),c=n.oW(),u=(this.xVt()?this.cVt++:this.cVt--,this.SVt+=r,this.cVt>=o&&(c?(this.GVt(!1),this.cVt=o-2):!l&&(this.yVt++,this.yVt>=a)?this.NVt(!1):this.cVt=h),this.cVt<0&&(c?(this.cVt=1,this.GVt(!0),l||(this.yVt++,this.yVt>=a&&this.NVt(!0))):!l&&(this.yVt++,this.yVt>=a)?this.NVt(!0):this.cVt=h),this.cVt=ea.En(this.cVt,0,o-1),n.wwt(this.cVt));s>this.SVt+u.SW()/t&&(this.SVt=s),this.FVt(i,u)}}else this.nAt()}NVt(t){this.cVt=t?0:this.lVt.aW()-1,this.vVt(!1),this.TVt=this.lVt.lf(),this.OVt(!0),this.tAt("animationend",!1,{animationName:this.TVt}),this.P$(ea.E7.qrt.T7.kVt),this.P$(ea.E7.qrt.T7.BVt),this.OVt(!1),this.yVt=0}FVt(s,i,t){if(s!==i){const e=this.BL(),r=s.gW(),n=i.gW(),h=r.Sm(),o=r.vm(),a=n.Sm(),l=n.vm(),c=(t&&t.onFrameChange?t.onFrameChange(e,h,o,a,l):(h!==a&&e.wm(e.Sm()*(a/h)),o!==l&&e.ym(e.vm()*(l/o))),e.bht(i.TW()),e.xht(i.EW()),e.oGt(i.PW()),e.o4(),this.uVt=i,this.fVt=n.z_(),this.dVt=n.UM(),this.pVt=n.UAt(),this.aU().Urt());for(let t=0,e=c.length;t<e;++t)c[t].bIt(s,i);this.tAt("framechange",!1,{animationName:this.lVt.lf(),$Vt:this.cVt}),this.P$(ea.E7.qrt.T7.WVt),this.gf.XL()}}UVt(t){this.vVt(!0),this.SVt=this.MVt(),1===t&&0!==this.cVt&&(this._Vt=0,this.PVt()||this.LVt()),this._At()}VVt(t,e,s){this.EVt=t,this.AVt=e,this._At(),!s&&this.PVt()||this.DVt()}HVt(){return this.lVt}jVt(){return this.EVt||this.lVt.lf()}ZUt(t){ea.Ir(t,this.jVt())&&this.VVt(this.Dft.dMt().lf(),1,!0)}XVt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const e=this.Dft.lMt(this.jVt());if(!e)return;if(-1===(t=e.bwt(t)))return}isFinite(t)&&(this._Vt=t,this.PVt()||this.LVt())}tVt(){if(!this.EVt&&-1===this._Vt){const t=this.uVt,e=this.lVt.wwt(ea.En(this.cVt,0,this.lVt.aW()-1));t!==e&&this.FVt(t,e),1<this.lVt.aW()&&0<this.mVt&&this._At()}}YVt(){return this.cVt}qVt(){return this.uVt.NW()}KVt(t){this.mVt=Math.abs(t),this.GVt(0<=t),0<this.mVt&&this._At()}zVt(){return this.xVt()?this.mVt:-this.mVt}JVt(t){"string"==typeof t&&-1===(t=this.lVt.bwt(t))||(t=ea.En(Math.floor(t),0,this.lVt.aW()-1),this.CVt=t)}ZVt(){return this.CVt}DVt(t){const e=this.uVt,s=this.Dft.lMt(this.EVt);if(this.EVt="",s&&(s!==this.lVt||!this.bVt())){this.lVt=s,this.GVt(0<=s.eW()),this.mVt=Math.abs(s.eW()),this.CVt=s.nW(),this.cVt=ea.En(this.cVt,0,this.lVt.aW()-1),1===this.AVt&&(this.cVt=0),this.vVt(!0),this.SVt=this.MVt();const i=this.lVt.wwt(this.cVt);this.FVt(e,i,t)}}LVt(t){const e=this.uVt,s=this.cVt;if(this.cVt=ea.En(Math.floor(this._Vt),0,this.lVt.aW()-1),this._Vt=-1,t||s!==this.cVt){const i=this.lVt.wwt(this.cVt);this.FVt(e,i),this.SVt=this.MVt()}}YUt(){const t=this.uVt.gW();this.fVt=t.z_(),this.dVt=t.UM(),this.pVt=t.UAt(),this.BL().yGt(!0)}z_(){return this.fVt}UM(){return this.dVt}UAt(){return this.pVt}wW(){return this.uVt.wW()}Dyt(t){let e=this.uVt,s=this.BL(),i=null;if("string"==typeof t)i=e.xW(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");i=e.vW(t-1)}let r=s.d4();if(!i)return[s.Fy(),s.$y(),r];if(ma.I(i.Wwt()),s.I5()){const[n,h,o]=s.w5().GT(ma.fl(),ma.pl());ma.set(n,h),r+=o}return ma.offset(-e.TW(),-e.EW()),ma.scale(s.Sm(),s.vm()),ma.rotate(s.yk()),ma.offset(s.Fy(),s.$y()),[ma.fl(),ma.pl(),r]}QVt(){return this.BL().fGt().Jc()}tHt(t){t=Math.floor(t);const e=this.BL(),s=e.fGt(),i=s.Jc();if((t=t===i?0:t)<0||i<=t)return[0,0];const r=s.zc();return[r[2*t+0]+e.Fy(),r[2*t+1]+e.$y()]}wAt(){const e=ea.E7.qrt.unt,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.lVt.lf(),eHt:t=>this.MAt(e.sHt,t,0)},{name:t+".current-frame",value:this.cVt,eHt:t=>this.MAt(e.iHt,t)},{name:t+".is-playing",value:this.bVt(),eHt:t=>t?this.MAt(e.rHt,0):this.MAt(e.nHt)},{name:t+".speed",value:this.mVt,eHt:t=>this.MAt(e.hHt,t)},{name:t+".repeats",value:this.yVt,eHt:t=>this.yVt=t}]}]}zy(){const t={a:this.lVt.cq()},e=(0!==this.SVt&&(t.fs=this.SVt),this.MVt()),s=(0!==e&&(t.at=e),0!==this.cVt&&(t.f=this.cVt),0!==this.mVt&&(t.cas=this.mVt),1!==this.yVt&&(t.ar=this.yVt),0!==this.CVt&&(t.rt=this.CVt),this.bVt()||(t.ap=this.bVt()),this.xVt()||(t.af=this.xVt()),this.BL());return s.O4()&&(t.ce=s.O4()),t}Jy(t){const e=this.YB().cMt(t.a),s=(e&&(this.lVt=e),this.SVt=t.hasOwnProperty("fs")?t.fs:0,this.gVt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),i=(this.cVt=ea.En(s,0,this.lVt.aW()-1),this.mVt=t.hasOwnProperty("cas")?t.cas:0,this.yVt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),r=(this.CVt=ea.En(i,0,this.lVt.aW()-1),this.vVt(!t.hasOwnProperty("ap")||!!t.ap),this.GVt(!t.hasOwnProperty("af")||!!t.af),this.lVt.wwt(this.cVt)),n=(this.uVt=r,this.YUt(),this.BL());n.bht(r.TW()),n.xht(r.EW()),n.oGt(r.PW()),n.D4(!!t.ce),this.bVt()&&this._At()}Knt(t){const e=this.BL();switch(t){case ja:return e.O4();case ia:return ea.En(this.cVt,0,this.lVt.aW()-1);case ha:return this.lVt.lf()}}eht(t,e,s){const i=this.BL();switch(t){case ja:i.D4(!!e);break;case ia:{this.vVt(!1);const r=this.lVt.aW()-1,n=e=ea.En(e,0,r),h=this.lVt.wwt(this.cVt),o=this.lVt.wwt(n);this.FVt(h,o,s),this.cVt=ea.En(n,0,r);break}case ha:{this.EVt=e,this.DVt(s);const a=this.lVt.aW();1<a&&0<this.lVt.eW()?this._At():this.nAt();break}}}FEt(){return self.oHt}},new WeakMap),ra=new Map([["current-frame",0],["beginning",1]]);self.oHt=class extends self.M5{constructor(){super(),qa.set(this,self.jB.zB().P5())}IW(){return qa.get(this).wW()}RW(t){return this.MW(t)[0]}bW(t){return this.MW(t)[1]}aHt(t){return this.MW(t)[2]}MW(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return qa.get(this).Dyt(t)}GW(){return qa.get(this).QVt()}OW(t){return fa.Ei(t),qa.get(this).tHt(t)[0]}LW(t){return fa.Ei(t),qa.get(this).tHt(t)[1]}DW(t){return fa.Ei(t),qa.get(this).tHt(t)}lHt(){qa.get(this).vVt(!1)}cHt(t="current-frame"){fa.Ri(t);const e=ra.get(t);if(void 0===e)throw new Error("invalid mode");qa.get(this).UVt(e)}uHt(t,e="beginning"){fa.Ri(t),fa.Ri(e);const s=ra.get(e);if(void 0===s)throw new Error("invalid mode");const i=qa.get(this);if(!i.YB().lMt(t))throw new Error(`animation name "${t}" does not exist`);i.VVt(t,s)}iVt(t){fa.Ri(t);const e=qa.get(this).YB().lMt(t);return e?e.xwt():null}get animation(){return qa.get(this).HVt().xwt()}get animationName(){return qa.get(this).jVt()}set $Vt(t){fa.Ei(t),qa.get(this).XVt(t)}get $Vt(){return qa.get(this).YVt()}set fHt(t){fa.Ri(t),qa.get(this).XVt(t)}get fHt(){return qa.get(this).qVt()}set dHt(t){fa.Ei(t),qa.get(this).KVt(t)}get dHt(){return qa.get(this).zVt()}set pHt(t){fa.Ei(t),qa.get(this).JVt(t)}get pHt(){return qa.get(this).ZVt()}get imageWidth(){return qa.get(this).kAt().Sm()}get imageHeight(){return qa.get(this).kAt().vm()}mHt(){const t=qa.get(this).kAt();return[t.Sm(),t.vm()]}async CHt(t){fa.nr(t,Blob);const e=qa.get(this),s=e.hN(),i=e.kAt(),r=ea.Cn(ea.jIt);if(r.nwt(s,t),await r.HH(s.JS(),{NT:s.pD()}),e.Sn())r.gn();else{i.hwt(r);const n=e.yyt();n.XUt(),n.YB().zf().dispatchEvent(new ea.Event("animationframeimagechange")),s.XL()}}gHt(t,e){fa.Ri(e),qa.get(this).BL().Kxt(!!t,e)}}}{const Vb=self.Fe;Vb.E7.qrt.T7={SHt(t){return Vb.Ir(this.jVt(),t)},yHt(t,e){return Vb.compare(this.cVt,t,e)},THt(t,e){if("string"!=typeof e)return!1;const s=this.uVt.NW();return Vb.compare(s.toLowerCase(),t,e.toLowerCase())},_Ht(t,e){return Vb.compare(this.zVt(),t,e)},BVt(t){return Vb.Ir(this.TVt,t)},kVt(){return!0},WVt(){return!0},EHt(){return this.BL().Sm()<0},AHt(){return this.BL().vm()<0},IHt(){return!0},wHt(){return!0},O4(){return this.BL().O4()}}}{const d1=self.Fe;d1.E7.qrt.unt={RHt(t,e,s,i,r){if(t&&e){const[n,h]=this.Dyt(s),o=this.gf.ik(t,e,n,h,i,r);if(o){if(i&&e.rk(o),t.$F()._F()){const l=o.BL();l.Sk(this.BL().yk()),l.o4()}const a=this.gf.wD();a.nk(!0),o.hk(),a.nk(!1),t!==this.gf.s3t().YB()&&this.rAt.KUt(t,o,i)}}},nHt(){this.vVt(!1)},rHt(t){this.UVt(t)},sHt(t,e){this.VVt(t,e)},iHt(t){this.XVt(t)},hHt(t){this.KVt(t)},MHt(t){this.JVt(t)},bHt(e,t){try{0===e?this.yyt().zUt(t):this.yyt().JUt(t)}catch(t){console.error(`[Construct] Error ${0===e?"adding":"removing"} animation: `,t)}},vHt(e,t,s){try{0===e?this.yyt().QUt(t,s):this.yyt().eVt(t,s)}catch(t){console.error(`[Construct] Error ${0===e?"adding":"removing"} animation frame: `,t)}},xHt(t){const e=this.BL(),s=e.Sm(),i=Math.abs(s)*(0===t?-1:1);s!==i&&(e.wm(i),e.o4())},GHt(t){const e=this.BL(),s=e.vm(),i=Math.abs(s)*(0===t?-1:1);s!==i&&(e.ym(i),e.o4())},Ck(t){const e=this.uVt,s=e.gW(),i=this.BL(),r=i.Sm()<0?-1:1,n=i.vm()<0?-1:1,h=s.Sm()*t*r,o=s.vm()*t*n;i.Sm()===h&&i.vm()===o||(i.uM(h,o),i.o4())},async PHt(t,e,s){const i=this.uVt,r=i.gW(),n=this.BL(),h=this.gf,o=this.rAt;if(r.fX()===t)0===e&&(n.uM(r.Sm(),r.vm()),n.o4()),this.P$(d1.E7.qrt.T7.IHt);else{const a=d1.Cn(d1.jIt);try{if(await a.rwt(h,t),!a.kX())throw new Error("image failed to load");if(this.Sn())return void a.gn();await a.HH(h.JS(),{NT:h.pD()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Sn()||this.P$(d1.E7.qrt.T7.wHt))}this.Sn()?a.gn():(r.hwt(a),o.XUt(),o.YB().zf().dispatchEvent(new d1.Event("animationframeimagechange")),h.XL(),0===e&&(n.uM(r.Sm(),r.vm()),n.o4()),await this.D$(d1.E7.qrt.T7.IHt))}},OHt(t){this.BL().D4(t)},Kxt(t,e){this.BL().Kxt(0===t,e)},DHt(t){this.BL().Ry(t),this.gf.XL()}}}{const dc=self.Fe;dc.E7.qrt.fnt={LHt(){return this.YVt()},NHt(){return this.qVt()},FHt(){return this.lVt.aW()},kHt(){return this.lVt.lf()},BHt(){return this.zVt()},$Ht(){return this.lVt.eW()},WHt(t){return this.Dyt(t)[0]},UHt(t){return this.Dyt(t)[1]},VHt(t){return this.Dyt(t)[2]},HHt(){return this.wW()},jHt(){return this.kAt().Sm()},XHt(){return this.kAt().vm()},YHt(t){return this.tHt(t)[0]},qHt(t){return this.tHt(t)[1]},KHt(){return this.QVt()}}}{const a=self.Fe,b=[];a.E7.Audio=class extends a.dEt{constructor(t){super(t)}zHt(t){b.push(t)}static async JHt(){await Promise.all(b),a.Vh(b)}gn(){super.gn()}}}{let GetAudioSdkInstance2=function(){return e.FF().P5()},GetAudioDOMInterface2=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};GetAudioSdkInstance=GetAudioSdkInstance2,GetAudioDOMInterface=GetAudioDOMInterface2;const f=self.Fe,g=self.Ye;f.E7.Audio.bRt=class extends f.JEt{constructor(t){super(t)}gn(){super.gn()}NEt(){}FEt(){return self.ZHt}};let e=null;self.ZHt=class extends self.kF{constructor(t){super(t),e=t}get QHt(){return GetAudioDOMInterface2().GetAudioContextExtern()}get tjt(){return GetAudioDOMInterface2().GetDestinationNodeExtern()}get isSilent(){return GetAudioSdkInstance2().ejt()}set isSilent(t){GetAudioSdkInstance2().sjt(t)}get masterVolume(){return GetAudioSdkInstance2().ijt()}set masterVolume(t){g.Ei(t),GetAudioSdkInstance2().rjt(t)}njt(){GetAudioSdkInstance2().hjt()}}}{const o=self.Fe,p="audio",q=["interactive","balanced","playback"];o.E7.Audio.Instance=class extends o.sAt{constructor(t,e){super(t,p),this.ojt=0,this.ajt=[],this.ljt=!0,this.cjt=0,this.ujt=0,this.fjt=!1,this.djt=1,this.pjt=1,this.mjt=[this.gf.Dq()/2,this.gf.Lq()/2,600],this.Cjt=[0,0,-1],this.gjt=[0,1,0],this.Sjt=600,this.yjt=1e4,this.Tjt=1,this._jt=null,this.Ejt=-1,this.Ajt=1,this.Ijt=!1,this.wjt=0,this.Rjt="suspended",this.Mjt=0,this.bjt=new Map,this.vjt=0,this.xjt=0,this.Gjt=new Map,this.Pjt=new Map;let s="interactive";e&&(this.cjt=e[0],this.ujt=e[1],this.fjt=e[2],s=q[e[3]],this.ljt=e[4],this.djt=e[5],this.pjt=e[6],this.mjt[2]=e[7],this.Sjt=e[8],this.yjt=e[9],this.Tjt=e[10]),this.Ojt=[],this.Djt=[],this.Ljt=[],this.dAt([["state",t=>this.Njt(t)],["audiocontext-state",t=>this.Fjt(t)],["fxstate",t=>this.kjt(t)],["trigger",t=>this.Bjt(t)],["buffer-metadata",t=>this.$jt(t)]]);const i=this.hN().zf(),r=(this.b0=new o.w0(o.y0.I0(i,"instancedestroy",t=>this.Wjt(t.H5)),o.y0.I0(i,"afterload",()=>this.JJ()),o.y0.I0(i,"suspend",()=>this.Ujt()),o.y0.I0(i,"resume",()=>this.Vjt())),"Safari"===o.ds.Ss),n=this.gf.JBt(),h=this.gf.ZO().Qj(),a="playable-ad-single-file"===this.gf.jN(),l=r||n||h||a;this.gf.ZL(this.mAt("create-audio-context",{preloadList:this.gf.ZO().vX().map(t=>({originalUrl:t.originalUrl,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.cjt,latencyHint:s,panningModel:this.djt,distanceModel:this.pjt,refDistance:this.Sjt,maxDistance:this.yjt,rolloffFactor:this.Tjt,listenerPos:this.mjt,usePlayMusicAsSoundWorkaround:l}).then(t=>{this.wjt=t.sampleRate,this.Rjt=t.audioContextState,this.Mjt=t.outputLatency})),this._At()}gn(){this._jt=null,super.gn()}Hjt(t){return this.ljt?t.split(" ").filter(t=>!!t):t?[t]:[]}jjt(e,t){for(const s of t){let t=!1;for(const i of e)if(o.Ir(i,s)){t=!0;break}if(!t)return!1}return!0}Xjt(t,e){return this.jjt(t,this.Hjt(e))}zHt(t){this.$F().zHt(t)}Wjt(t){this._jt===t&&(this._jt=null)}Yjt(t){return Math.pow(10,t/20)}qjt(t){const e=this.Yjt(t);return isFinite(e)?Math.max(Math.min(e,1),0):0}Kjt(t){return Math.log(t)/Math.log(10)*20}zjt(t){return this.Kjt(Math.max(Math.min(t,1),0))}Ujt(){this.fjt||this.pAt("set-suspended",{isSuspended:!0})}Vjt(){this.fjt||this.pAt("set-suspended",{isSuspended:!1})}Njt(t){const e=t.tickCount,s=(this.Mjt=t.outputLatency,this.Ojt.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>e||-1===t.placeholder)));this.Ojt=t.audioInstances,this.Ljt=t.analysers,0<s.length&&o.sn(this.Ojt,s)}$jt(t){this.Gjt.set(t.originalUrl,{duration:t.duration})}Fjt(t){this.Rjt=t.audioContextState}_nt(){return this.gf.YDt()?"running":this.Rjt}kjt(t){this.Djt=t.fxstate}Jjt(t){const e=this.Hjt(t);for(const s of this.Ojt)if(this.jjt(s.tags,e))return s;return null}Zjt(t){const e=this.Hjt(t);return this.Ojt.some(t=>this.jjt(t.tags,e)&&t.isPlaying)}Qjt(t,e,s,i,r){if(this.Zjt(e))return null;const n=this.Gjt.get(t),h={tags:this.Hjt(e),duration:n?n.duration:0,volume:r,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:s,isLooping:i,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.Ojt.push(h),h}tXt(t){const e=this.Hjt(t);for(const s of this.Ojt)this.jjt(s.tags,e)&&(s.isPlaying=!1)}async Bjt(t){const e=t.type,s=(this.ajt=t.tags,t.aiid);if("ended"===e){for(const i of this.Ojt)if(i.aiid===s){i.isPlaying=!1;break}await this.D$(o.E7.Audio.T7.eXt)}else"fade-ended"===e&&await this.D$(o.E7.Audio.T7.sXt)}iXt(t){return this.Xjt(this.ajt,t)}q9(){const t={timeScale:this.gf.ZD(),gameTime:this.gf.jBt(),instPans:this.rXt(),tickCount:this.gf.XBt()};if(this._jt){const e=this._jt.BL();this.mjt[0]=e.Fy(),this.mjt[1]=e.$y(),t.listenerPos=this.mjt,t.listenerOrientation=[...this.Cjt,...this.gjt]}this.pAt("tick",t)}nXt(t,e,s,i,r){if(0!==s){const n=Math.sin(s),h=Math.cos(s),o=(t-=i)*n,a=(e-=r)*n,l=t*h,c=e*h;t=l-a,e=c+o,t+=i,e+=r}return[t,e]}rXt(){return this.Ojt.filter(t=>-1!==t.uid).map(t=>this.gf.DL(t.uid)).filter(t=>t).map(t=>{const e=t.BL(),s=e.$L().yk(),[i,r]=this.nXt(e.Fy(),e.$y(),-s,this.mjt[0],this.mjt[1]);return{uid:t.o$(),x:i,y:r,z:e.d4(),angle:e.yk()-s}})}hXt(t,e){for(const s of this.Ljt)if(s.index===e&&o.Ir(s.tag,t))return s;return null}oXt(t){for(const e of this.Hjt(t)){const s=e.toLowerCase();this.bjt.set(s,(this.bjt.get(s)||0)+1)}}ejt(){return this.Ijt}sjt(t){this.Ijt!==(t=!!t)&&(this.Ijt=t,this.pAt("set-silent",{isSilent:t}))}ijt(){return this.Ajt}rjt(t){this.Ajt!==t&&(this.Ajt=t,this.pAt("set-master-volume",{vol:t}))}hjt(){this.pAt("stop-all");for(const t of this.Ojt)t.isPlaying=!1}aXt(t){return!t.hasOwnProperty("placeholder")&&3!==this.ujt&&!(t.isMusic&&1===this.ujt||!t.isMusic&&2===this.ujt)}zy(){return{isSilent:this.Ijt,masterVolume:this.Ajt,listenerZ:this.mjt[2],listenerForwardVec:this.Cjt,listenerUpVec:this.gjt,listenerUid:this._jt?this._jt.o$():-1,remoteUrls:[...this.Pjt.entries()],playing:this.Ojt.filter(t=>this.aXt(t)),effects:this.Djt,analysers:this.Ljt}}Jy(t){if(this.Ijt=t.isSilent,this.Ajt=t.masterVolume,this.mjt[2]=t.listenerZ,this._jt=null,this.Ejt=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.Cjt=t.listenerForwardVec:this.Cjt=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.gjt=t.listenerUpVec:this.gjt=[0,1,0],this.Pjt.clear(),t.remoteUrls)for(const[e,s]of t.remoteUrls)this.Pjt.set(e,s);this.Ojt=t.playing;for(const i of this.Ojt)i.hasOwnProperty("tag")&&!i.hasOwnProperty("tags")&&(i.tags=[i.tag].filter(t=>!!t));this.Djt=t.effects,this.Ljt=t.analysers}JJ(){if(-1!==this.Ejt&&(this._jt=this.gf.DL(this.Ejt),this.Ejt=-1,this._jt)){const t=this._jt.BL();this.mjt[0]=t.Fy(),this.mjt[1]=t.$y()}for(const e of this.Ojt){const s=this.gf.ZO().bX(e.bufferOriginalUrl);s?(e.bufferUrl=s.url,e.bufferType=s.type):e.bufferUrl=null}for(const i of Object.values(this.Djt))for(const r of i)if(r.hasOwnProperty("bufferOriginalUrl")){const n=this.gf.ZO().bX(r.bufferOriginalUrl);n&&(r.bufferUrl=n.url,r.bufferType=n.type)}this.pAt("load-state",{saveLoadMode:this.ujt,timeScale:this.gf.ZD(),gameTime:this.gf.jBt(),listenerPos:this.mjt,listenerOrientation:[...this.Cjt,...this.gjt],isSilent:this.Ijt,masterVolume:this.Ajt,playing:this.Ojt.filter(t=>null!==t.bufferUrl),effects:this.Djt})}wAt(){const t=[];for(const[s,i]of Object.entries(this.Djt))t.push({name:"$"+s,value:i.map(t=>t.type).join(", ")});const e="plugins.audio.debugger";return[{title:e+".tag-effects",properties:t},{title:e+".currently-playing",properties:[{name:e+".currently-playing-count",value:this.Ojt.length},...this.Ojt.map((t,e)=>({name:"$#"+e,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / `+Math.round(10*t.duration)/10}))]}]}}}{const w0=self.Fe;w0.E7.Audio.T7={eXt(t){return this.iXt(t)},sXt(t){return this.iXt(t)},lXt(){return this.xjt===this.vjt},cXt(){return!0},uXt(){return this.ejt()},fXt(){for(const t of this.Ojt)if(t.isPlaying)return!0;return!1},dXt(t){return this.Zjt(t)}}}{const B0=self.Fe,C0=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];B0.E7.Audio.unt={Play(t,e,s,i,r){const n=B0.E7.Audio.unt.pXt.call(this,t,e,s,i,r);return this.zHt(n),n},Ent(t,e,s,i){B0.E7.Audio.unt.pXt.call(this,t,0,e,0,s,i)},async pXt(t,e,s,i,r,n){if(!this.Ijt){const h=t[1],o=this.gf.ZO().bX(t[0]);if(o){const a=this.ojt,l=(this.ojt=0,this.Qjt(t[0],r,h,0!==e,this.qjt(s)));try{await this.mAt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:h,tags:this.Hjt(r),isLooping:0!==e,vol:this.qjt(s),stereoPan:B0.En(i/100,-1,1),pos:n||0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.gf.XBt())}}}},async mXt(t,e,s,i,r,n,h,o,a,l,c){if(!this.Ijt){const u=t[1],f=this.gf.ZO().bX(t[0]);if(f){const d=this.ojt,p=(this.ojt=0,this.Qjt(t[0],c,u,0!==e,this.qjt(s)));try{await this.mAt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:u,tags:this.Hjt(c),isLooping:0!==e,vol:this.qjt(s),pos:0,off:d,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:i,y:r,z:n,angle:B0.In(h),innerAngle:B0.In(o),outerAngle:B0.In(a),outerGain:this.qjt(l)}})}finally{p&&(p.placeholder=this.gf.XBt())}}}},async CXt(t,e,s,i,r,n,h,o){if(!this.Ijt&&i){const a=i.uTt();if(a&&a.BL()){const l=a.BL(),c=l.$L().yk(),[u,f]=this.nXt(l.Fy(),l.$y(),-c,this.mjt[0],this.mjt[1]),d=t[1],p=this.gf.ZO().bX(t[0]);if(p){const m=this.ojt,C=(this.ojt=0,this.Qjt(t[0],o,d,0!==e,this.qjt(s)));try{await this.mAt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.Hjt(o),isLooping:0!==e,vol:this.qjt(s),pos:0,off:m,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:u,y:f,z:l.d4(),angle:l.yk()-c,innerAngle:B0.In(r),outerAngle:B0.In(n),outerGain:this.qjt(h),uid:a.o$()}})}finally{C&&(C.placeholder=this.gf.XBt())}}}}},async gXt(t,e,s,i,r,n){if(!this.Ijt){const h=1===t,o=this.gf.ZO().bX(e)||this.Pjt.get(e.toLowerCase());if(o){const a=this.ojt,l=(this.ojt=0,this.Qjt(e,n,h,0!==s,this.qjt(i)));try{await this.mAt("play",{originalUrl:e,url:o.url,type:o.type,isMusic:h,tags:this.Hjt(n),isLooping:0!==s,vol:this.qjt(i),stereoPan:B0.En(r/100,-1,1),pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.gf.XBt())}}}},async SXt(t,e,s,i,r,n,h,o,a,l,c,u){if(!this.Ijt){const f=1===t,d=this.gf.ZO().bX(e)||this.Pjt.get(e.toLowerCase());if(d){const p=this.ojt,m=(this.ojt=0,this.Qjt(e,u,f,0!==s,this.qjt(i)));try{await this.mAt("play",{originalUrl:e,url:d.url,type:d.type,isMusic:f,tags:this.Hjt(u),isLooping:0!==s,vol:this.qjt(i),pos:0,off:p,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:r,y:n,z:h,angle:B0.In(o),innerAngle:B0.In(a),outerAngle:B0.In(l),outerGain:this.qjt(c)}})}finally{m&&(m.placeholder=this.gf.XBt())}}}},async yXt(t,e,s,i,r,n,h,o,a){if(!this.Ijt&&!this.Ijt&&r){const l=r.uTt();if(l&&l.BL()){const c=l.BL(),u=c.$L().yk(),[f,d]=this.nXt(c.Fy(),c.$y(),-u,this.mjt[0],this.mjt[1]),p=1===t,m=this.gf.ZO().bX(e)||this.Pjt.get(e.toLowerCase());if(m){const C=this.ojt,g=(this.ojt=0,this.Qjt(e,a,p,0!==s,this.qjt(i)));try{await this.mAt("play",{originalUrl:e,url:m.url,type:m.type,isMusic:p,tags:this.Hjt(a),isLooping:0!==s,vol:this.qjt(i),pos:0,off:C,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:f,y:d,z:c.d4(),angle:c.yk()-u,innerAngle:B0.In(n),outerAngle:B0.In(h),outerGain:this.qjt(o),uid:l.o$()}})}finally{g&&(g.placeholder=this.gf.XBt())}}}}},TXt(t,e){this.pAt("set-looping",{tags:this.Hjt(t),isLooping:0===e})},_Xt(t,e){this.pAt("set-muted",{tags:this.Hjt(t),isMuted:0===e})},ynt(t,e){this.pAt("set-volume",{tags:this.Hjt(t),vol:this.qjt(e)})},EXt(t,e,s,i){this.pAt("fade-volume",{tags:this.Hjt(t),vol:this.qjt(e),duration:s,stopOnEnd:0===i})},AXt(t,e){this.pAt("set-stereo-pan",{tags:this.Hjt(t),p:B0.En(e/100,-1,1)})},async IXt(t){const e=t[1],s=this.gf.ZO().bX(t[0]);s&&(this.vjt++,await this.mAt("preload",{originalUrl:t[0],url:s.url,type:s.type,isMusic:e}),this.xjt++)},async wXt(t,e){const s=1===t,i=this.gf.ZO().bX(e)||this.Pjt.get(e.toLowerCase());i&&(this.vjt++,await this.mAt("preload",{originalUrl:e,url:i.url,type:i.type,isMusic:s}),this.xjt++)},KW(t,e){this.pAt("set-playback-rate",{tags:this.Hjt(t),rate:Math.max(e,0)})},BW(t){this.tXt(t),this.pAt("stop",{tags:this.Hjt(t)})},RXt(){this.hjt()},MXt(t,e){this.pAt("set-paused",{tags:this.Hjt(t),paused:0===e})},bXt(t,e){this.pAt("seek",{tags:this.Hjt(t),pos:e})},vXt(t){2===t&&(t=this.ejt()?1:0),this.sjt(0===t)},xXt(t){const e=this.qjt(t);this.rjt(e)},GXt(t,e,s,i,r,n,h){const o=C0[e];this.oXt(t),this.pAt("add-effect",{type:"filter",tags:this.Hjt(t),params:[o,s,i,r,n,B0.En(h/100,0,1)]})},PXt(t,e,s,i){this.oXt(t),this.pAt("add-effect",{type:"delay",tags:this.Hjt(t),params:[e,this.qjt(s),B0.En(i/100,0,1)]})},OXt(t,e,s,i,r,n){this.oXt(t),this.pAt("add-effect",{type:"flanger",tags:this.Hjt(t),params:[e/1e3,s/1e3,i,r/100,B0.En(n/100,0,1)]})},DXt(t,e,s,i,r,n,h){this.oXt(t),this.pAt("add-effect",{type:"phaser",tags:this.Hjt(t),params:[e,s,i,r,n,B0.En(h/100,0,1)]})},LXt(t,e,s,i){const r=this.gf.ZO().bX(e[0]);r&&(this.oXt(t),this.pAt("add-effect",{type:"convolution",tags:this.Hjt(t),bufferOriginalUrl:e[0],bufferUrl:r.url,bufferType:r.type,params:[0===s,B0.En(i/100,0,1)]}))},NXt(t,e){this.oXt(t),this.pAt("add-effect",{type:"gain",tags:this.Hjt(t),params:[this.qjt(e)]})},FXt(t,e){this.oXt(t),this.pAt("add-effect",{type:"stereopan",tags:this.Hjt(t),params:[B0.En(e/100,-1,1)]})},kXt(t){this.oXt(t),this.pAt("add-effect",{type:"gain",tags:this.Hjt(t),params:[0]})},BXt(t,e,s){this.oXt(t),this.pAt("add-effect",{type:"tremolo",tags:this.Hjt(t),params:[e,B0.En(s/100,0,1)]})},$Xt(t,e,s){this.oXt(t),this.pAt("add-effect",{type:"ringmod",tags:this.Hjt(t),params:[e,B0.En(s/100,0,1)]})},WXt(t,e,s,i,r,n){this.oXt(t),this.pAt("add-effect",{type:"distortion",tags:this.Hjt(t),params:[this.Yjt(e),this.Yjt(s),i,this.Yjt(r),B0.En(n/100,0,1)]})},UXt(t,e,s,i,r,n){this.oXt(t),this.pAt("add-effect",{type:"compressor",tags:this.Hjt(t),params:[e,s,i,r/1e3,n/1e3]})},VXt(t,e,s){this.oXt(t),this.pAt("add-effect",{type:"analyser",tags:this.Hjt(t),params:[e,s]})},HXt(t){const e=this.Hjt(t);for(const s of e)this.bjt.set(s.toLowerCase(),0);this.pAt("remove-effects",{tags:e}),this.Djt={}},Q5(t,e,s,i,r,n){this.pAt("set-effect-param",{tags:this.Hjt(t),index:Math.floor(e),param:s,value:i,ramp:r,time:n})},jXt(t){if(t){const e=t.uTt();e&&e.BL()&&(this._jt=e)}},XXt(t){this.mjt[2]=t},YXt(t,e,s,i,r,n){this.Cjt[0]=t,this.Cjt[1]=e,this.Cjt[2]=-s,this.gjt[0]=i,this.gjt[1]=r,this.gjt[2]=-n},qXt(t){this.ojt=Math.max(t,0)},KXt(t){const e=t[1],s=this.gf.ZO().bX(t[0]);s&&this.pAt("unload",{url:s.url,type:s.type,isMusic:e})},zXt(t,e){const s=1===t,i=this.gf.ZO().bX(e)||this.Pjt.get(e.toLowerCase());i&&this.pAt("unload",{url:i.url,type:i.type,isMusic:s})},JXt(){this.pAt("unload-all")},ZXt(t,e,s){this.Pjt.set(s.toLowerCase(),{url:t,type:e})}}}{const x2=self.Fe;x2.E7.Audio.fnt={QXt(t){const e=this.Jjt(t);return e?e.duration:0},mnt(t){const e=this.Jjt(t);return e?e.playbackTime:0},Tnt(t){const e=this.Jjt(t);return e?e.playbackRate:0},Cnt(t){const e=this.Jjt(t);return e?this.zjt(e.volume):0},t6t(){return this.zjt(this.ijt())},e6t(t){return this.bjt.get(t.toLowerCase())||0},s6t(t,e){const s=this.hXt(t,Math.floor(e));return s?s.binCount:0},i6t(t,e,s){const i=this.hXt(t,Math.floor(e));return!i||(s=Math.floor(s))<0||s>=i.binCount?0:i.freqBins[s]},r6t(t,e){const s=this.hXt(t,Math.floor(e));return s?s.peak:0},n6t(t,e){const s=this.hXt(t,Math.floor(e));return s?s.rms:0},h6t(){return this.wjt},o6t(){return self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3},a6t(){return this.Mjt},l6t(t,e){return 0==(t=x2.En(+t,0,100)/100)?-1/0:t<.1?this.zjt(x2.Ft(0,this.qjt(e),10*t)):x2.Ft(e,0,(t-.1)/.9)}}}{const C33=self.Fe;C33.E7.Ss=class BrowserPlugin extends C33.dEt{constructor(t){super(t)}gn(){super.gn()}}}{const C33=self.Fe;C33.E7.Ss.bRt=class BrowserType extends C33.JEt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const C33=self.Fe,DOM_COMPONENT_ID="browser";C33.E7.Ss.Instance=class BrowserInstance extends C33.sAt{constructor(t,e){super(t,DOM_COMPONENT_ID),this.c6t="",this.u6t=!1,this.f6t="",this.d6t="",this.p6t=!1,this.m6t=0,this.C6t=0,this.g6t=0,this.S6t=0,this.y6t=!1,this.T6t=new Map,this._6t=!1,this.E6t="",this.A6t=!1,this.dAt([["online-state",t=>this.I6t(t)],["backbutton",()=>this.w6t()],["sw-message",t=>this.R6t(t)],["hashchange",t=>this.M6t(t)],["install-available",()=>this.b6t()],["app-installed",t=>this.v6t(t)]]);const s=this.hN().zf();this.b0=new C33.w0(C33.y0.I0(s,"afterfirstlayoutstart",()=>this.x6t()),C33.y0.I0(s,"window-resize",()=>this.wDt()),C33.y0.I0(s,"suspend",()=>this.Ujt()),C33.y0.I0(s,"resume",()=>this.Vjt())),this.gf.ZL(this.mAt("get-initial-state",{exportType:this.gf.jN()}).then(t=>{this.c6t=t.location,this.u6t=t.isOnline,this.f6t=t.referrer,this.d6t=t.title,this.p6t=t.isCookieEnabled,this.m6t=t.screenWidth,this.C6t=t.screenHeight,this.g6t=t.windowOuterWidth,this.S6t=t.windowOuterHeight,this.y6t=t.isConstructArcade}))}gn(){super.gn()}x6t(){this.pAt("ready-for-sw-messages")}async I6t(t){const e=!!t.isOnline;this.u6t!==e&&(this.u6t=e,this.u6t?await this.D$(C33.E7.Ss.T7.G6t):await this.D$(C33.E7.Ss.T7.P6t))}async wDt(){await this.D$(C33.E7.Ss.T7.O6t)}Ujt(){this.P$(C33.E7.Ss.T7.D6t)}Vjt(){this.P$(C33.E7.Ss.T7.L6t)}async w6t(){await this.D$(C33.E7.Ss.T7.N6t)}R6t(t){const e=t.type;"downloading-update"===e?this.P$(C33.E7.Ss.T7.F6t):"update-ready"===e||"update-pending"===e?this.P$(C33.E7.Ss.T7.k6t):"offline-ready"===e&&this.P$(C33.E7.Ss.T7.B6t)}M6t(t){this.c6t=t.location,this.P$(C33.E7.Ss.T7.$6t)}b6t(){this._6t=!0,this.P$(C33.E7.Ss.T7.W6t)}v6t(t){this._6t=!1,this.P$(C33.E7.Ss.T7.U6t)}V6t(){return this.A6t}H6t(t){this.A6t!==(t=!!t)&&(this.A6t=t,this.pAt("set-warn-on-close",{enabled:t}))}wAt(){const t="plugins.browser.debugger";return[{title:"plugins.browser.name",properties:[{name:t+".user-agent",value:navigator.userAgent},{name:t+".is-online",value:this.u6t},{name:t+".is-fullscreen",value:this.gf.KN().oLt()}]}]}}}{const C33=self.Fe;C33.E7.Ss.T7={j6t(){return this.u6t},G6t(){return!0},P6t(){return!0},O6t(){return!0},X6t(){return this.p6t},Y6t(){return this.gf.KN().oLt()},N6t(){return!0},q6t(t){const e=this.gf.KN().ZU(),s=this.gf.KN().QU(),i=e<=s?0:1;return i===t},F6t(){return!0},k6t(){return!0},B6t(){return!0},$6t(){return!0},W6t(){return!0},K6t(){return this._6t},z6t(t){switch(t){case 0:return"accepted"===this.E6t;case 1:return"dismissed"===this.E6t;case 2:return"error"===this.E6t;case 3:return!0;default:return!1}},U6t(){return!0},J6t(t){const e=this.gf.KN().lLt();switch(t){case 0:return"browser"===e;case 1:return"minimal-ui"===e;case 2:return"standalone"===e;case 3:return"fullscreen"===e;default:return!1}},Z6t(){return this.V6t()},Q6t(){return!this.gf.jD()},D6t(){return!0},L6t(){return!0},tYt(){return!1},eYt(){return!1},sYt(){return!1},iYt(){return!1},rYt(){return!1},nYt(){return!0},hYt(){return!0}}}{const C3=self.Fe,ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.E7.Ss.unt={oYt(t){this.pAt("alert",{message:t.toString()})},aYt(){this.y6t||(this.gf.tJ()?self.C3Debugger.CloseWindow():this.pAt("close"))},lYt(){this.pAt("set-focus",{isFocus:!0})},cYt(){this.pAt("set-focus",{isFocus:!1})},uYt(){this.y6t||this.pAt("navigate",{type:"back"})},fYt(){this.y6t||this.pAt("navigate",{type:"forward"})},dYt(){},pYt(){this.y6t||(this.gf.tJ()?this.gf.Fkt({type:"reload"}):this.pAt("navigate",{type:"reload"}))},mYt(t,e){this.CAt("navigate",{type:"url",url:t,target:e,exportType:this.gf.jN()})},CYt(t,e){this.CAt("navigate",{type:"new-window",url:t,tag:e,exportType:this.gf.jN()})},gYt(t,e){2<=t&&(t+=1),1===(t=6===t?2:t)&&(t=0);const s=C3.oOt.mLt(t);this.gf.KN().uLt(s),this.CAt("request-fullscreen",{navUI:e})},SYt(){this.CAt("exit-fullscreen")},yYt(t){const s=t.split(",");for(let t=0,e=s.length;t<e;++t)s[t]=parseInt(s[t],10);this.CAt("vibrate",{pattern:s})},async PL(t,e){if(t&&e){const s=await this.gf.ZO().fN(t);this.gf.PL(s,e)}},TYt(t,e,s){if(s){const i=`data:${e},`+encodeURIComponent(t);this.gf.PL(i,s)}},_Yt(t,e){e=e.toString(),0===t?console.log(e):1===t?console.warn(e):2===t&&console.error(e)},EYt(t){console.group(t)},AYt(){console.groupEnd()},IYt(jsStr){try{eval(jsStr)}catch(err){console.error("Error executing JavaScript: ",err)}},wYt(t){if(!((t=Math.floor(t))<0||t>=ORIENTATIONS.length)){const e=ORIENTATIONS[t];this.CAt("lock-orientation",{orientation:e})}},RYt(){this.CAt("unlock-orientation")},wN(t){this.gf.ZO().wN(t)},async MYt(t,e,s,i){await this.mAt("set-document-css-style",{prop:C3.Xo(t),value:e,selector:s,"is-all":0!==i})},async bYt(t,e,s){const i=await this.mAt("get-document-css-style",{prop:t,selector:e});i.isOk&&this.T6t.set(s.toLowerCase(),i.result.trim())},vYt(t){this.pAt("set-hash",{hash:t})},xYt(t,e){this.pAt("set-window-size",{windowWidth:t,windowHeight:e})},GYt(t,e){this.pAt("set-window-position",{windowX:t,windowY:e})},async PYt(){const t=await this.mAt("request-install");this.E6t=t.result,this.P$(C3.E7.Ss.T7.z6t)},OYt(t){this.H6t(t)}}}{const C3=self.Fe;C3.E7.Ss.fnt={URL(){return this.gf.lD()?this.c6t:location.toString()},DYt(){return(this.gf.lD()?new URL(this.c6t):location).protocol},LYt(){return(this.gf.lD()?new URL(this.c6t):location).hostname},NYt(){return(this.gf.lD()?new URL(this.c6t):location).port},FYt(){return(this.gf.lD()?new URL(this.c6t):location).pathname},kYt(){return(this.gf.lD()?new URL(this.c6t):location).hash},os(){return(this.gf.lD()?new URL(this.c6t):location).search},BYt(t){const e=(this.gf.lD()?new URL(this.c6t):location).search,s=RegExp("[?&]"+t+"=([^&]*)").exec(e);return s?decodeURIComponent(s[1].replace(/\+/g," ")):""},$Yt(){return this.f6t},WYt(){return this.d6t},UYt(){return navigator.language},ds(){return navigator.platform},VYt(){return navigator.userAgent},HYt(jsStr){let result=0;try{result=eval(jsStr)}catch(err){console.error("Error executing JavaScript: ",err)}return"number"==typeof result||"string"==typeof result?result:"boolean"==typeof result&&result?1:0},CSSStyleValue(t){return this.T6t.get(t)||""},jYt(){return navigator.appName},XYt(){return navigator.appVersion},YYt(){return navigator.product},qYt(){return navigator.vendor},KYt(){return 1},zYt(){return 1/0},JYt(){const t=navigator.connection;return t&&(t.downlink||t.downlinkMax||t.bandwidth)||1/0},ConnectionType(){const t=navigator.connection;return t&&t.type||"unknown"},ZYt(){return self.devicePixelRatio},QYt(){return this.m6t},tqt(){return this.C6t},eqt(){return this.gf.KN().ZU()},sqt(){return this.gf.KN().QU()},iqt(){return this.g6t},rqt(){return this.g6t},nqt(){return this.gf.KN().lLt()},hqt(){return this.E6t}}}{const a=self.Fe;a.E7.Keyboard=class extends a.dEt{constructor(t){super(t)}gn(){super.gn()}}}{let GetKeyboardSdkInstance2=function(){return r.FF().P5()};GetKeyboardSdkInstance=GetKeyboardSdkInstance2;const d=self.Fe,e=self.Ye;d.E7.Keyboard.bRt=class extends d.JEt{constructor(t){super(t)}gn(){super.gn()}NEt(){}FEt(){return self.oqt}};let r=null;self.oqt=class extends self.kF{constructor(t){super(t),(r=t).hN().ML().keyboard=this}aqt(t){const e=GetKeyboardSdkInstance2();if("string"==typeof t)return e.lqt(t);if("number"==typeof t)return e.cqt(t);throw new TypeError("expected string or number")}}}{const m=self.Fe;m.E7.Keyboard.Instance=class extends m.sAt{constructor(t,e){super(t),this.uqt=new Set,this.fqt=new Set,this.dqt=0,this.pqt="",this.mqt="";const s=this.hN().zf();this.b0=new m.w0(m.y0.I0(s,"keydown",t=>this.Cqt(t.data)),m.y0.I0(s,"keyup",t=>this.gqt(t.data)),m.y0.I0(s,"window-blur",()=>this.Sqt()),m.y0.I0(s,"keyboard-blur",()=>this.Sqt()))}gn(){super.gn()}Cqt(t){const e=t.which,s=t.code||e.toString(),i=t.key;this.uqt.has(s)||(this.uqt.add(s),this.fqt.add(e),this.pqt=s,this.dqt=e,this.mqt=i,this.P$(m.E7.Keyboard.T7.yqt),this.P$(m.E7.Keyboard.T7.Tqt),this.P$(m.E7.Keyboard.T7._qt),this.P$(m.E7.Keyboard.T7.Eqt))}gqt(t){const e=t.which,s=t.code||e.toString(),i=t.key;this.uqt.delete(s),this.fqt.delete(e),this.pqt=s,this.dqt=e,this.mqt=i,this.P$(m.E7.Keyboard.T7.Aqt),this.P$(m.E7.Keyboard.T7.Iqt),this.P$(m.E7.Keyboard.T7.wqt),this.P$(m.E7.Keyboard.T7.Rqt)}Sqt(){for(const t of this.fqt)this.fqt.delete(t),this.dqt=t,this.P$(m.E7.Keyboard.T7.Aqt),this.P$(m.E7.Keyboard.T7.Iqt),this.P$(m.E7.Keyboard.T7.Rqt);this.uqt.clear()}lqt(t){return this.uqt.has(t)}cqt(t){return this.fqt.has(t)}zy(){return{tk:this.dqt,tkk:this.mqt}}Jy(t){this.dqt=t.tk,t.hasOwnProperty("tkk")&&(this.mqt=t.tkk)}wAt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.dqt},{name:t+".debugger.last-key-string",value:m.E7.Keyboard.fnt.Mqt(this.dqt)},{name:t+".debugger.last-typed-key",value:this.mqt}]}]}}}{const G=self.Fe,H=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];G.E7.Keyboard.T7={lqt(t){return this.fqt.has(t)},Tqt(t){return this.dqt===t},yqt(){return!0},Aqt(){return!0},Iqt(t){return this.dqt===t},cqt(t){return t=Math.floor(t),this.fqt.has(t)},Eqt(t){return this.dqt===t},Rqt(t){return this.dqt===t},_qt(t){const e=H[t];return this.pqt===e},wqt(t){const e=H[t];return this.pqt===e},bqt(t){const e=H[t];return this.uqt.has(e)}}}{const U=self.Fe;U.E7.Keyboard.unt={}}{let StringFromCharCode2=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};StringFromCharCode=StringFromCharCode2;const V=self.Fe;V.E7.Keyboard.fnt={vqt(){return this.dqt},Mqt(t){return StringFromCharCode2(t)},xqt(){return this.mqt}}}{const a=self.Fe;a.E7.Gqt=class extends a.dEt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.E7.Gqt.bRt=class extends d.JEt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const g=self.Fe,h="localstorage";g.E7.Gqt.Instance=class extends g.sAt{constructor(t,e){super(t,h),this.Pqt="",this.hI="",this.Oqt=[],this.Dqt="",this.Lqt=!1,this.Nqt=0,this.Fqt=0,this.kqt=!1,e&&(this.kqt=e[0]);const s=this.gf.aF();this.oF=null,this.kqt?this.oF=s.Ws({Us:!0}):this.oF=s,this.Bqt=new Map,this.$qt=!1,this.gf.ZL(this.Ny())}async Ny(){const t=await Promise.race([this.mAt("init"),g.Fh(3e3)]);t&&(this.Lqt=t.isPersistent)}gn(){super.gn()}async Wqt(t){this.Dqt=this.Uqt(t),await this.D$(g.E7.Gqt.T7.Vqt)}Uqt(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}wAt(){return this.$qt||this.Hqt(),[{title:"plugins.localstorage.name",properties:[...this.Bqt.entries()].map(e=>({name:"$"+e[0],value:e[1],eHt:t=>this.oF.setItem(e[0],t)}))}]}async Hqt(){this.$qt=!0;try{const s=await this.oF.keys(),i=(s.sort((t,e)=>{const s=t.toLowerCase(),i=e.toLowerCase();return s<i?-1:i<s?1:0}),await Promise.all(s.map(t=>this.oF.getItem(t))));this.Bqt.clear();for(let t=0,e=s.length;t<e;++t)this.Bqt.set(s[t],i[t])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.$qt=!1}}}}{const B=self.Fe;B.E7.Gqt.T7={jqt(t){return this.Pqt===t},Xqt(){return!0},Yqt(t){return this.Pqt===t},qqt(){return!0},Kqt(t){return this.Pqt===t},zqt(){return!0},Jqt(){return!0},Zqt(){return!0},Vqt(){return!0},Qqt(t){return this.Pqt===t},tKt(t){return this.Pqt===t},eKt(t,e){return B.compare(this.Pqt,t,e)},sKt(t,e){return B.compare(this.hI,t,e)},iKt(){return 0<this.Fqt},rKt(){return 0<this.Nqt},nKt(){return!0},hKt(){return!0},oKt(){return this.Lqt}}}{let IsExpressionType2=function(t){return"string"==typeof t||"number"==typeof t};IsExpressionType=IsExpressionType2;const L=self.Fe;L.E7.Gqt.unt={async aKt(t,e){this.Fqt++;try{const s=await this.oF.setItem(t,e);await this.uAt(async()=>{this.Pqt=t,this.hI=s,await this.D$(L.E7.Gqt.T7.Xqt),await this.D$(L.E7.Gqt.T7.jqt)})}catch(t){await this.Wqt(t)}finally{this.Fqt--,0===this.Fqt&&await this.D$(L.E7.Gqt.T7.nKt)}},async lKt(t,e){if(e){const s=e.uTt(this.vs);if(s){const i=s.P5();if(i){const r=i.GetArrayBufferReadOnly();this.Fqt++;try{await this.oF.setItem(t,r),await this.uAt(async()=>{this.Pqt=t,this.hI="",await this.D$(L.E7.Gqt.T7.Xqt),await this.D$(L.E7.Gqt.T7.jqt)})}catch(t){await this.Wqt(t)}finally{this.Fqt--,0===this.Fqt&&await this.D$(L.E7.Gqt.T7.nKt)}}}}},async cKt(t){this.Nqt++;try{const e=await this.oF.getItem(t);await this.uAt(async()=>{this.Pqt=t,this.hI=IsExpressionType2(e)?e:"",await this.D$(L.E7.Gqt.T7.qqt),await this.D$(L.E7.Gqt.T7.Yqt)})}catch(t){await this.Wqt(t)}finally{this.Nqt--,0===this.Nqt&&await this.D$(L.E7.Gqt.T7.hKt)}},async uKt(e,t){if(t){const s=t.uTt(this.vs);if(s){const i=s.P5();this.Nqt++;try{let t=await this.oF.getItem(e);t=t instanceof ArrayBuffer?t:new ArrayBuffer(0),await this.uAt(async()=>{this.hI="",this.Pqt=e,i.SetArrayBufferTransfer(t),await this.D$(L.E7.Gqt.T7.qqt),await this.D$(L.E7.Gqt.T7.Yqt)})}catch(t){await this.Wqt(t)}finally{this.Nqt--,0===this.Nqt&&await this.D$(L.E7.Gqt.T7.hKt)}}}},async fKt(t){try{const e=await this.oF.getItem(t);await this.uAt(async()=>{this.Pqt=t,null==e?(this.hI="",await this.D$(L.E7.Gqt.T7.tKt)):(this.hI=IsExpressionType2(e)?e:"",await this.D$(L.E7.Gqt.T7.Qqt))})}catch(t){await this.Wqt(t)}},async df(t){try{await this.oF.removeItem(t),await this.uAt(async()=>{this.Pqt=t,this.hI="",await this.D$(L.E7.Gqt.T7.zqt),await this.D$(L.E7.Gqt.T7.Kqt)})}catch(t){await this.Wqt(t)}},async dKt(){try{await this.oF.clear(),await this.uAt(async()=>{this.Pqt="",this.hI="",L.Vh(this.Oqt),await this.D$(L.E7.Gqt.T7.Jqt)})}catch(t){await this.Wqt(t)}},async pKt(){try{const t=await this.oF.keys();await this.uAt(async()=>{this.Oqt=t,await this.D$(L.E7.Gqt.T7.Zqt)})}catch(t){await this.Wqt(t)}},async mKt(){const t=await this.mAt("request-persistent");t.isOk&&(this.Lqt=t.isPersistent)},CKt(e){if(this.kqt){let t;try{t=JSON.parse(e)}catch(t){return void console.error("[Local Storage] Failed to parse memory storage JSON: ",t)}t&&t["is-c3-storage"]&&Array.isArray(t.items)||console.error("[Local Storage] Failed to load memory storage JSON: invalid data"),this.oF.$s(new Map(t.items))}}}}{const qa=self.Fe;qa.E7.Gqt.fnt={gKt(){return this.hI},Key(){return this.Pqt},SKt(){return this.Oqt.length},yKt(t){return(t=Math.floor(t))<0||t>=this.Oqt.length?"":this.Oqt[t]},TKt(){return this.Dqt},_Kt(){return this.kqt?JSON.stringify({"is-c3-storage":!0,items:[...this.oF.Bs()]}):""}}}{const a=self.Fe;a.E7.EKt=class extends a.dEt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.E7.EKt.bRt=class extends d.JEt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const g=self.Fe,h=self.Ye,i=self.jB,j=(g.E7.EKt.Instance=class extends g.sAt{constructor(t,e){super(t),this.wat=new Map,this.AKt=""}gn(){this.wat.clear(),super.gn()}IKt(){return JSON.stringify({c2dictionary:!0,data:g.Uo(this.wat)})}wKt(){return this.wat}zy(){return g.Uo(this.wat)}Jy(t){g.Vo(t,this.wat)}wAt(){const t="plugins.dictionary";return[{title:t+".name",properties:[{name:t+".debugger.key-count",value:this.wat.size},...[...this.wat].map(e=>({name:"$"+e[0],value:e[1],eHt:t=>this.wat.set(e[0],t)}))]}]}FEt(){return self.RKt}},new WeakMap);self.RKt=class extends i{constructor(){super(),j.set(this,i.zB().P5())}MKt(){return j.get(this).wKt()}}}{const s=self.Fe;s.E7.EKt.T7={sKt(t,e,i){const r=this.wat.get(t);return void 0!==r&&s.compare(r,e,i)},bKt(){const t=this.gf,e=t.wD(),s=t.GD(),i=s.QV(),r=t.kD(),n=r.tH(),h=r.eH(s);t.rH(!1);for(const o of this.wat.keys()){this.AKt=o,e.hH(i);const a=this.YB().ZF();a.a0t(this.aU()),s.oH(n,h),e.aH(i)}return t.rH(!0),this.AKt="",r.fH(),!1},vKt(t,e){const i=this.wat.get(this.AKt);return void 0!==i&&s.compare(i,t,e)},xKt(t){return this.wat.has(t)},du(){return 0===this.wat.size}}}{const K=self.Fe;K.E7.EKt.unt={GKt(t,e){this.wat.set(t,e)},PKt(t,e){this.wat.has(t)&&this.wat.set(t,e)},OKt(t){this.wat.delete(t)},fu(){this.wat.clear()},DKt(t){let e=null;try{e=JSON.parse(t)}catch(t){return void console.error("[Construct] Error parsing JSON: ",t)}e.c2dictionary&&K.Vo(e.data,this.wat)},LKt(t){const e=URL.createObjectURL(new Blob([this.IKt()],{type:"application/json"}));this.gf.PL(e,t)}}}{const V=self.Fe;V.E7.EKt.fnt={rs(t){const e=this.wat.get(t);return void 0===e?0:e},NKt(t,e){const s=this.wat.get(t);return void 0===s?e:s},SKt(){return this.wat.size},FKt(){return this.AKt},kKt(){return this.wat.get(this.AKt)??0},S_t(){return this.IKt()}}}{const a=self.Fe;a.E7.Touch=class extends a.dEt{constructor(t){super(t)}gn(){super.gn()}}}{let GetTouchSdkInstance2=function(){return s.FF().P5()};GetTouchSdkInstance=GetTouchSdkInstance2;const d=self.Fe,e=self.Ye;d.E7.Touch.bRt=class extends d.JEt{constructor(t){super(t)}gn(){super.gn()}NEt(){}FEt(){return self.BKt}};let s=null;self.BKt=class extends self.kF{constructor(t){super(t),(s=t).hN().ML().vL=this}requestPermission(t){e.Ri(t);const s=GetTouchSdkInstance2();if("orientation"===t)return s.$Kt(0);if("motion"===t)return s.$Kt(1);throw new Error("invalid type")}}}{const m=self.Fe,n="touch";m.E7.Touch.Instance=class extends m.sAt{constructor(t,e){super(t,n),this.WKt=new Map,this.UKt=!1,this.VKt=!1,this.HKt=0,this.jKt=0,this.XKt=0,this.YKt=0,this.qKt=0,this.KKt=0,this.zKt=0,this.JKt=0,this.ZKt=0,this.QKt=0,this.t8t=0,this.e8t=0,this.s8t=0,this.i8t=0,this.r8t=0,this.n8t=0,this.h8t=0,this.o8t=[],e&&(this.UKt=e[0]),this.fAt("permission-result",t=>this.a8t(t));const s=this.hN().zf();this.b0=new m.w0(m.y0.I0(s,"pointerdown",t=>this.l8t(t.data)),m.y0.I0(s,"pointermove",t=>this.c8t(t.data)),m.y0.I0(s,"pointerup",t=>this.u8t(t.data,!1)),m.y0.I0(s,"pointercancel",t=>this.u8t(t.data,!0)),m.y0.I0(s,"deviceorientation",t=>this.f8t(t.data)),m.y0.I0(s,"deviceorientationabsolute",t=>this.d8t(t.data)),m.y0.I0(s,"devicemotion",t=>this.p8t(t.data)),m.y0.I0(s,"tick2",t=>this.WJ()))}gn(){this.WKt.clear(),super.gn()}l8t(t){if("mouse"===t.pointerType){if(!this.UKt)return;this.VKt=!0}const e=t.pointerId;if(!this.WKt.has(e)){const s=t.pageX-this.gf.DB(),i=t.pageY-this.gf.LB(),r=performance.now(),n=this.WKt.size,h=(this.t8t=n,this.e8t=e,m.Cn(m.E7.Touch.m8t));h.KMt(r,s,i,e,n),this.WKt.set(e,h),this.P$(m.E7.Touch.T7.C8t),this.P$(m.E7.Touch.T7.g8t),this.i8t=s,this.r8t=i,this.h8t=0,this.P$(m.E7.Touch.T7.S8t)}}c8t(t){if("mouse"!==t.pointerType||this.VKt){const e=this.WKt.get(t.pointerId);if(e){const s=performance.now();if(!(s-e.GG()<2)){const i=t.pageX-this.gf.DB(),r=t.pageY-this.gf.LB();e.p6(s,i,r,t.width,t.height,t.pressure)}}}}u8t(t,e){if("mouse"===t.pointerType){if(!this.VKt)return;this.VKt=!1}const s=performance.now(),i=t.pointerId,r=this.WKt.get(i);if(r){if(this.t8t=r.y8t(),this.e8t=r.fU(),!e){const n=t.pageX-this.gf.DB(),h=t.pageY-this.gf.LB();this.i8t=n,this.r8t=h,this.h8t=1,this.P$(m.E7.Touch.T7.S8t)}if(this.P$(m.E7.Touch.T7.T8t),this.P$(m.E7.Touch.T7._8t),!e){const o=r.E8t(s);"single-tap"===o?(this.P$(m.E7.Touch.T7.A8t),this.i8t=r.Fy(),this.r8t=r.$y(),this.P$(m.E7.Touch.T7.I8t)):"double-tap"===o&&(this.P$(m.E7.Touch.T7.w8t),this.i8t=r.Fy(),this.r8t=r.$y(),this.P$(m.E7.Touch.T7.R8t))}r.gn(),this.WKt.delete(i)}}$Kt(s){return this.CAt("request-permission",{type:s}),new Promise((t,e)=>{this.o8t.push({type:s,resolve:t,reject:e})})}a8t(t){const e=t.result,s=t.type,i=(this.s8t=s,this.o8t.filter(t=>t.type===s));for(const r of i)r.resolve(e?"granted":"denied");this.o8t=this.o8t.filter(t=>t.type!==s),e?(this.P$(m.E7.Touch.T7.M8t),0===s?this.gf.b$t():this.gf.v$t()):this.P$(m.E7.Touch.T7.b8t)}f8t(t){"number"==typeof t.webkitCompassHeading?this.HKt=t.webkitCompassHeading:t.absolute&&(this.HKt=t.alpha),this.jKt=t.alpha,this.XKt=t.beta,this.YKt=t.gamma}d8t(t){this.HKt=t.alpha}p8t(t){const e=t.acceleration,s=(e&&(this.qKt=e.x,this.KKt=e.y,this.zKt=e.z),t.accelerationIncludingGravity);s&&(this.JKt=s.x,this.ZKt=s.y,this.QKt=s.z)}WJ(){let t=performance.now(),e=0;for(const s of this.WKt.values())s.GG()<=t-50&&s.v8t(t),s.x8t(t)&&(this.t8t=s.y8t(),this.e8t=s.fU(),this.n8t=e,this.P$(m.E7.Touch.T7.G8t),this.i8t=s.Fy(),this.r8t=s.$y(),this.P$(m.E7.Touch.T7.P8t),this.n8t=0),++e}O8t(t){t=Math.floor(t);for(const e of this.WKt.values()){if(0===t)return e;--t}return null}D8t(t,e){return 0<=t&&0<=e&&t<this.gf.pBt()&&e<this.gf.mBt()}wAt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.WKt.values()].map(t=>({name:"$"+t.fU(),value:t.Fy()+", "+t.$y()}))}]}}}{const ra=self.Fe,sa=[];ra.E7.Touch.T7={g8t(){return!0},_8t(){return!0},L8t(){return 0<this.WKt.size},S8t(t,e){return!!t&&e===this.h8t&&!!this.D8t(this.i8t,this.r8t)&&this.gf.eD().EPt(t,[[this.i8t,this.r8t]],!1)},N8t(t){if(!t)return!1;const e=this.gf.t3t(),s=e.ISt(),i=[...this.WKt.values()].filter(t=>this.D8t(t.Fy(),t.$y())).map(t=>[t.Fy(),t.$y()]);return ra.xor(this.gf.eD().EPt(t,i,s),s)},F8t(t,e,s){const i=this.O8t(t);return!!i&&ra.compare(i.eW(),e,s)},k8t(){return!0},B8t(){return!0},$8t(t,e,s){this.gf.b$t();let i;return i=0===t?this.jKt:1===t?this.XKt:this.YKt,ra.compare(i,e,s)},W8t(t,e,s){this.gf.v$t();let i;return i=0===t?this.JKt:1===t?this.ZKt:2===t?this.QKt:3===t?this.qKt:4===t?this.KKt:this.zKt,ra.compare(i,e,s)},C8t(t){return(t=Math.floor(t))===this.t8t},T8t(t){return(t=Math.floor(t))===this.t8t},U8t(t){return t=Math.floor(t),this.WKt.size>=t+1},G8t(){return!0},A8t(){return!0},w8t(){return!0},P8t(t){return!!t&&!!this.D8t(this.i8t,this.r8t)&&this.gf.eD().EPt(t,[[this.i8t,this.r8t]],!1)},I8t(t){return!!t&&!!this.D8t(this.i8t,this.r8t)&&this.gf.eD().EPt(t,[[this.i8t,this.r8t]],!1)},R8t(t){return!!t&&!!this.D8t(this.i8t,this.r8t)&&this.gf.eD().EPt(t,[[this.i8t,this.r8t]],!1)},M8t(t){return this.s8t===t},b8t(t){return this.s8t===t}}}{const Va=self.Fe;Va.E7.Touch.unt={V8t(t){this.$Kt(t)}}}{const Xa=self.Fe;Xa.E7.Touch.fnt={H8t(){return this.WKt.size},R_t(t){const e=this.O8t(this.n8t);return e?e.j8t(this.gf.FL(),t,!0):0},M_t(t){const e=this.O8t(this.n8t);return e?e.j8t(this.gf.FL(),t,!1):0},X8t(t,e){const s=this.O8t(t);return s?s.j8t(this.gf.FL(),e,!0):0},Y8t(t,e){const s=this.O8t(t);return s?s.j8t(this.gf.FL(),e,!1):0},q8t(t,e){const s=this.WKt.get(t);return s?s.j8t(this.gf.FL(),e,!0):0},K8t(t,e){const s=this.WKt.get(t);return s?s.j8t(this.gf.FL(),e,!1):0},z8t(){const t=this.O8t(0);return t?t.Fy():0},J8t(){const t=this.O8t(0);return t?t.$y():0},Z8t(t){const e=this.O8t(t);return e?e.Fy():0},Q8t(t){const e=this.O8t(t);return e?e.$y():0},tzt(t){const e=this.WKt.get(t);return e?e.Fy():0},ezt(t){const e=this.WKt.get(t);return e?e.$y():0},szt(t){const e=this.O8t(t);return e?e.eW():0},izt(t){const e=this.WKt.get(t);return e?e.eW():0},rzt(t){const e=this.O8t(t);return e?Xa.wn(e.yk()):0},nzt(t){const e=this.WKt.get(t);return e?Xa.wn(e.yk()):0},hzt(){return this.gf.b$t(),this.HKt},ozt(){return this.gf.b$t(),this.jKt},azt(){return this.gf.b$t(),this.XKt},lzt(){return this.gf.b$t(),this.YKt},czt(){return this.gf.v$t(),this.JKt},uzt(){return this.gf.v$t(),this.ZKt},fzt(){return this.gf.v$t(),this.QKt},dzt(){return this.gf.v$t(),this.qKt},pzt(){return this.gf.v$t(),this.KKt},mzt(){return this.gf.v$t(),this.zKt},Czt(){return this.t8t},gzt(){return this.e8t},Szt(t){const e=this.WKt.get(t);return e?e.Sm():0},yzt(t){const e=this.WKt.get(t);return e?e.vm():0},Tzt(t){const e=this.WKt.get(t);return e?e._zt():0}}}{let C33=self.Fe,GESTURE_HOLD_THRESHOLD=15,GESTURE_HOLD_TIMEOUT=500,GESTURE_TAP_TIMEOUT=333,GESTURE_DOUBLETAP_THRESHOLD=25,lastTapX=-1e3,lastTapY=-1e3,lastTapTime=-1e4;C33.E7.Touch.m8t=class extends C33.pn{constructor(){super(),this.Ezt=0,this.yI=0,this.FFt=0,this.MP=0,this.Azt=0,this.Izt=0,this.wzt=0,this.al=0,this.ll=0,this.Rzt=0,this.Mzt=0,this.eC=0,this.sC=0,this.bzt=0,this.vzt=!1,this.xzt=!1}gn(){}KMt(t,e,s,i,r){this.Ezt=i,this.yI=r,this.MP=t,this.Azt=t,this.FFt=t,this.Izt=e,this.wzt=s,this.al=e,this.ll=s,this.Rzt=e,this.Mzt=s}p6(t,e,s,i,r,n){this.Azt=this.MP,this.MP=t,this.Rzt=this.al,this.Mzt=this.ll,this.al=e,this.ll=s,this.eC=i,this.sC=r,this.bzt=n,!this.xzt&&C33.Rn(this.Izt,this.wzt,this.al,this.ll)>=GESTURE_HOLD_THRESHOLD&&(this.xzt=!0)}fU(){return this.Ezt}y8t(){return this.yI}GG(){return this.MP}v8t(t){this.Azt=t}Fy(){return this.al}$y(){return this.ll}eW(){const t=C33.Rn(this.al,this.ll,this.Rzt,this.Mzt),e=(this.MP-this.Azt)/1e3;return 0<e?t/e:0}yk(){return C33.bn(this.Rzt,this.Mzt,this.al,this.ll)}Sm(){return this.eC}vm(){return this.sC}_zt(){return this.bzt}x8t(t){return!this.vzt&&t-this.FFt>=GESTURE_HOLD_TIMEOUT&&!this.xzt&&C33.Rn(this.Izt,this.wzt,this.al,this.ll)<GESTURE_HOLD_THRESHOLD&&(this.vzt=!0)}E8t(t){return!this.vzt&&t-this.FFt<=GESTURE_TAP_TIMEOUT&&!this.xzt&&C33.Rn(this.Izt,this.wzt,this.al,this.ll)<GESTURE_HOLD_THRESHOLD?t-lastTapTime<=2*GESTURE_TAP_TIMEOUT&&C33.Rn(lastTapX,lastTapY,this.al,this.ll)<GESTURE_DOUBLETAP_THRESHOLD?(lastTapX=-1e3,lastTapY=-1e3,lastTapTime=-1e4,"double-tap"):(lastTapX=this.al,lastTapY=this.ll,lastTapTime=t,"single-tap"):""}j8t(t,e,s){if(void 0===e){const i=t.UL(0);return i.A8(this.al,this.ll)[s?0:1]}{const r=t.$L(e);return r?r.OB(this.al,this.ll)[s?0:1]:0}}}}{const a=self.Fe;a.E7.Date=class extends a.dEt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.E7.Date.bRt=class extends d.JEt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const g=self.Fe;g.E7.Date.Instance=class extends g.sAt{constructor(t,e){super(t)}}}{const k=self.Fe,l=[],m=(l[0]=[t=>k.E7.Date.fnt.Gzt(t),t=>k.E7.Date.fnt.Pzt(t),t=>k.E7.Date.fnt.Ozt(t),t=>k.E7.Date.fnt.Dzt(t),t=>k.E7.Date.fnt.Lzt(t),t=>k.E7.Date.fnt.Nzt(t),t=>k.E7.Date.fnt.Fzt(t),t=>k.E7.Date.fnt.kzt(t)],l[1]=[t=>k.E7.Date.fnt.Bzt(t),t=>k.E7.Date.fnt.$zt(t),t=>k.E7.Date.fnt.Wzt(t),t=>k.E7.Date.fnt.Uzt(t),t=>k.E7.Date.fnt.Vzt(t),t=>k.E7.Date.fnt.Hzt(t),t=>k.E7.Date.fnt.jzt(t),t=>k.E7.Date.fnt.Xzt(t)],t=>k.E7.Date.fnt.Yzt(t));k.E7.Date.T7={qzt(t,e,s){return k.compare(t,e,s)},Kzt(t,e,s){return k.compare(m(t),e,m(s))},zzt(t,e,s,i){return k.compare(l[1][i](t),e,l[1][i](s))},Jzt(t,e,s,i,r){return k.compare(l[r][i](m(t)),e,l[r][i](m(s)))}}}{const T=self.Fe;T.E7.Date.unt={}}{const U=self.Fe,V=self.Intl,W=new Map,X=(W.set("local",new Map([["year",t=>new Date(t).getFullYear()],["month",t=>new Date(t).getMonth()],["date",t=>new Date(t).getDate()],["day",t=>new Date(t).getDay()],["hours",t=>new Date(t).getHours()],["minutes",t=>new Date(t).getMinutes()],["seconds",t=>new Date(t).getSeconds()],["milliseconds",t=>new Date(t).getMilliseconds()]])),W.set("universal",new Map([["year",t=>new Date(t).getUTCFullYear()],["month",t=>new Date(t).getUTCMonth()],["date",t=>new Date(t).getUTCDate()],["day",t=>new Date(t).getUTCDay()],["hours",t=>new Date(t).getUTCHours()],["minutes",t=>new Date(t).getUTCMinutes()],["seconds",t=>new Date(t).getUTCSeconds()],["milliseconds",t=>new Date(t).getUTCMilliseconds()]])),new Map),Y=(X.set("local",new Map([["year",(t,e)=>new Date(t).setFullYear(e)],["month",(t,e)=>new Date(t).setMonth(e)],["date",(t,e)=>new Date(t).setDate(e)],["hours",(t,e)=>new Date(t).setHours(e)],["minutes",(t,e)=>new Date(t).setMinutes(e)],["seconds",(t,e)=>new Date(t).setSeconds(e)],["milliseconds",(t,e)=>new Date(t).setMilliseconds(e)]])),X.set("universal",new Map([["year",(t,e)=>new Date(t).setUTCFullYear(e)],["month",(t,e)=>new Date(t).setUTCMonth(e)],["date",(t,e)=>new Date(t).setUTCDate(e)],["hours",(t,e)=>new Date(t).setUTCHours(e)],["minutes",(t,e)=>new Date(t).setUTCMinutes(e)],["seconds",(t,e)=>new Date(t).setUTCSeconds(e)],["milliseconds",(t,e)=>new Date(t).setUTCMilliseconds(e)]])),function(t,e,s,i){s.includes(t)&&(i[e]=t)}),Z=function(t,e){t&&("12"===t?e.hour12=!0:"24"===t&&(e.hour12=!1))},$=function(t){try{return V.getCanonicalLocales(t)}catch(t){return self.navigator.language}},_=["full","long","medium","short"],aa=["full","long","medium","short"],ba=["long","short","narrow"],ca=["numeric","2-digit"],da=["numeric","2-digit","long","short","narrow"],ea=["numeric","2-digit"],fa=["numeric","2-digit"],ga=["numeric","2-digit"],ha=["numeric","2-digit"];U.E7.Date.fnt={Zzt(t){return new Date(t).toString()},Qzt(t){return new Date(t).toDateString()},t7t(t){return new Date(t).toTimeString()},e7t(t){return new Date(t).toLocaleString()},s7t(t){return new Date(t).toLocaleDateString()},i7t(t){return new Date(t).toLocaleTimeString()},r7t(t){return new Date(t).toUTCString()},Yzt(t){return Date.parse(t)},rs(t,e,s,i,r,n,h){return Date.UTC(t,e,s,i,r,n,h)},n7t(){return Date.now()},h7t(){return new Date(Date.now()).getTimezoneOffset()},Gzt(t){return W.get("local").get("year")(t)},Bzt(t){return W.get("universal").get("year")(t)},Pzt(t){return W.get("local").get("month")(t)},$zt(t){return W.get("universal").get("month")(t)},Ozt(t){return W.get("local").get("date")(t)},Wzt(t){return W.get("universal").get("date")(t)},Dzt(t){return W.get("local").get("day")(t)},Uzt(t){return W.get("universal").get("day")(t)},Lzt(t){return W.get("local").get("hours")(t)},Vzt(t){return W.get("universal").get("hours")(t)},Nzt(t){return W.get("local").get("minutes")(t)},Hzt(t){return W.get("universal").get("minutes")(t)},Fzt(t){return W.get("local").get("seconds")(t)},jzt(t){return W.get("universal").get("seconds")(t)},kzt(t){return W.get("local").get("milliseconds")(t)},Xzt(t){return W.get("universal").get("milliseconds")(t)},o7t(t,e){return X.get("local").get("year")(t,e)},a7t(t,e){return X.get("universal").get("year")(t,e)},l7t(t,e){return X.get("local").get("month")(t,e)},c7t(t,e){return X.get("universal").get("month")(t,e)},u7t(t,e){return X.get("local").get("date")(t,e)},f7t(t,e){return X.get("universal").get("date")(t,e)},d7t(t,e){const s=U.E7.Date.fnt.Gzt(t),i=U.E7.Date.fnt.Pzt(t),r=U.E7.Date.fnt.Ozt(t),n=U.E7.Date.fnt.Lzt(t),h=U.E7.Date.fnt.Nzt(t),o=U.E7.Date.fnt.Fzt(t),a=U.E7.Date.fnt.kzt(t),l=U.E7.Date.fnt.Dzt(t),c=e-l;return new Date(s,i,r+c,n,h,o,a).getTime()},p7t(t,e){const s=U.E7.Date.fnt.Bzt(t),i=U.E7.Date.fnt.$zt(t),r=U.E7.Date.fnt.Wzt(t),n=U.E7.Date.fnt.Vzt(t),h=U.E7.Date.fnt.Hzt(t),o=U.E7.Date.fnt.jzt(t),a=U.E7.Date.fnt.Xzt(t),l=U.E7.Date.fnt.Uzt(t),c=e-l;return U.E7.Date.fnt.rs(s,i,r+c,n,h,o,a)},m7t(t,e){return X.get("local").get("hours")(t,e)},C7t(t,e){return X.get("universal").get("hours")(t,e)},g7t(t,e){return X.get("local").get("minutes")(t,e)},S7t(t,e){return X.get("universal").get("minutes")(t,e)},y7t(t,e){return X.get("local").get("seconds")(t,e)},T7t(t,e){return X.get("universal").get("seconds")(t,e)},_7t(t,e){return X.get("local").get("milliseconds")(t,e)},E7t(t,e){return X.get("universal").get("milliseconds")(t,e)},A7t(t,e){return e-t},I7t(t){return Math.trunc(U.E7.Date.fnt.w7t(t))},R7t(t){return Math.trunc(U.E7.Date.fnt.M7t(t))%60},b7t(t){return Math.trunc(U.E7.Date.fnt.v7t(t))%60},x7t(t){return t%1e3},w7t(t){return t/36e5},M7t(t){return t/6e4},v7t(t){return t/1e3},G7t(t,e,s,i,r){const n=$(t);if(n){let t={};return Y.call(this,s,"dateStyle",_,t),Y.call(this,i,"timeStyle",aa,t),Z.call(this,r,t),new V.DateTimeFormat(n,t).format(e)}},P7t(t,e,s,i,r,n,h,o,a,l){const c=$(t);if(c){const u={};return Y.call(this,s,"weekday",ba,u),Y.call(this,i,"year",ca,u),Y.call(this,r,"month",da,u),Y.call(this,n,"day",ea,u),Y.call(this,h,"hour",fa,u),Y.call(this,o,"minute",ga,u),Y.call(this,a,"second",ha,u),Z.call(this,l,u),new V.DateTimeFormat(c,u).format(e)}}}}{const a=self.Fe;a.E7.O7t=class extends a.dEt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.E7.O7t.bRt=class extends d.JEt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{let ResizeArray2=function(e,s,i){if(s<e.length)g.Uh(e,s);else if(s>e.length)if("function"==typeof i)for(let t=e.length;t<s;++t)e.push(i());else for(let t=e.length;t<s;++t)e.push(i)};ResizeArray=ResizeArray2;const g=self.Fe,h=self.Ye,i=self.jB,j=(g.E7.O7t.Instance=class extends g.sAt{constructor(t,e){super(t),this.D7t=10,this.L7t=1,this.N7t=1,this.Tu=null,this.F7t=[],this.k7t=[],this.B7t=[],this.$7t=-1,e&&(this.D7t=e[0],this.L7t=e[1],this.N7t=e[2]),this.Tu=g.qo(this.D7t,()=>g.qo(this.L7t,()=>g.qo(this.N7t,0)))}gn(){this.Tu=null,super.gn()}W7t(t,e,s){return t=Math.floor(t),e=Math.floor(e),s=Math.floor(s),0<=t&&t<this.D7t&&0<=e&&e<this.L7t&&0<=s&&s<this.N7t?this.Tu[t][e][s]:0}Set(t,e,s,i){t=Math.floor(t),e=Math.floor(e),s=Math.floor(s),0<=t&&t<this.D7t&&0<=e&&e<this.L7t&&0<=s&&s<this.N7t&&(this.Tu[t][e][s]=i)}uM(t,s,i){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),s<0&&(s=0),i<0&&(i=0),this.D7t!==(t=t<0?0:t)||this.L7t!==s||this.N7t!==i){this.D7t=t,this.L7t=s,this.N7t=i;const r=this.Tu;ResizeArray2(r,t,()=>g.qo(s,()=>g.qo(i,0)));for(let e=0;e<t;++e){ResizeArray2(r[e],s,()=>g.qo(i,0));for(let t=0;t<s;++t)ResizeArray2(r[e][t],i,0)}}}Sm(){return this.D7t}vm(){return this.L7t}o8(){return this.N7t}U7t(t,e,s,i,r){for(;0<e;){const n=Math.floor(this.gf.CL()*e);if(--e,0===t){const h=this.W7t(e,i,r),o=this.W7t(n,i,r);this.Set(e,i,r,o),this.Set(n,i,r,h)}else if(1===t){const a=this.W7t(s,e,r),l=this.W7t(s,n,r);this.Set(s,e,r,l),this.Set(s,n,r,a)}else if(2===t){const c=this.W7t(s,i,e),u=this.W7t(s,i,n);this.Set(s,i,e,u),this.Set(s,i,n,c)}}}wAt(){const t="plugins.arr.debugger",e="plugins.arr.properties",s=[{title:t+".array-properties.title",properties:[{name:e+".width.name",value:this.D7t,eHt:t=>this.uM(t,this.L7t,this.N7t)},{name:e+".height.name",value:this.L7t,eHt:t=>this.uM(this.D7t,t,this.N7t)},{name:e+".depth.name",value:this.N7t,eHt:t=>this.uM(this.D7t,this.L7t,t)},{name:e+".elements.name",value:this.D7t*this.L7t*this.N7t}]}],i=[];if(1===this.L7t&&1===this.N7t)for(let e=0;e<this.D7t;++e)i.push({name:"$"+e,value:this.Tu[e][0][0],eHt:t=>this.Tu[e][0][0]=t});else for(let t=0;t<this.D7t;++t)i.push({name:"$"+t,value:this.Tu[t].toString()});return i.length&&s.push({title:t+".array-data.title",properties:i}),s}IKt(){return JSON.stringify({c2array:!0,size:[this.D7t,this.L7t,this.N7t],data:this.Tu})}zy(){return{size:[this.D7t,this.L7t,this.N7t],data:this.Tu}}Jy(t){const e=t.size;this.D7t=e[0],this.L7t=e[1],this.N7t=e[2],this.Tu=t.data}V7t(){return 0<=this.$7t&&this.$7t<this.F7t.length?this.F7t[this.$7t]:0}H7t(){return 0<=this.$7t&&this.$7t<this.k7t.length?this.k7t[this.$7t]:0}j7t(){return 0<=this.$7t&&this.$7t<this.B7t.length?this.B7t[this.$7t]:0}FEt(){return self.X7t}},new WeakMap);self.X7t=class extends i{constructor(){super(),j.set(this,i.zB().P5())}get width(){return j.get(this).Sm()}get height(){return j.get(this).vm()}get depth(){return j.get(this).o8()}mk(t,e=1,s=1){h.Ei(t),h.Ei(e),h.Ei(s),j.get(this).uM(t,e,s)}Y7t(t,e=0,s=0){return h.Ei(t),h.Ei(e),h.Ei(s),j.get(this).W7t(t,e,s)}q7t(t,e,s=0,i=0){if(h.Ei(e),h.Ei(s),h.Ei(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid type");j.get(this).Set(e,s,i,t)}}}{let DoForEachTrigger2=function(t,e,s,i,r,n){t.hH(s);const h=n.YB().ZF();h.a0t(n.aU()),e.oH(i,r),t.aH(s)};DoForEachTrigger=DoForEachTrigger2;const ma=self.Fe;ma.E7.O7t.T7={Ryt(t,e,s){return ma.compare(this.W7t(t,0,0),e,s)},K7t(t,e,s,i){return ma.compare(this.W7t(t,e,0),s,i)},z7t(t,e,s,i,r){return ma.compare(this.W7t(t,e,s),i,r)},J7t(t){const e=this.gf,i=e.wD(),r=e.GD(),n=r.QV(),s=e.kD(),h=s.tH(),o=s.eH(r),a=++this.$7t,l=this.F7t,c=this.k7t,u=this.B7t,f=this.D7t,d=this.L7t,p=this.N7t;if(a===this.F7t.length?(l.push(0),c.push(0),u.push(0)):(l[a]=0,c[a]=0,u[a]=0),e.rH(!1),0===t)for(let s=0;s<f;++s)for(let e=0;e<d;++e)for(let t=0;t<p;++t)l[a]=s,c[a]=e,u[a]=t,DoForEachTrigger2(i,r,n,h,o,this);else if(1===t)for(let e=0;e<f;++e)for(let t=0;t<d;++t)l[a]=e,c[a]=t,DoForEachTrigger2(i,r,n,h,o,this);else for(let t=0;t<f;++t)l[a]=t,DoForEachTrigger2(i,r,n,h,o,this);return e.rH(!0),this.$7t--,s.fH(),!1},Z7t(t,e){return ma.compare(this.W7t(this.V7t(),this.H7t(),this.j7t()),t,e)},Q7t(i){const t=this.D7t,r=this.L7t,n=this.N7t,h=this.Tu;for(let s=0;s<t;++s)for(let e=0;e<r;++e)for(let t=0;t<n;++t)if(h[s][e][t]===i)return!0;return!1},du(){return 0===this.D7t||0===this.L7t||0===this.N7t},tJt(t,e,s){let i=0;switch(t){case 0:i=this.D7t;break;case 1:i=this.L7t;break;case 2:i=this.N7t}return ma.compare(i,e,s)}}}{let CompareValues2=function(t,e){if("number"==typeof t&&"number"==typeof e)return t-e;{const s=t.toString(),i=e.toString();return s<i?-1:i<s?1:0}};CompareValues=CompareValues2;const n0=self.Fe;n0.E7.O7t.unt={fu(i){const t=this.D7t,r=this.L7t,n=this.N7t,h=this.Tu;for(let s=0;s<t;++s)for(let e=0;e<r;++e)for(let t=0;t<n;++t)h[s][e][t]=i},uM(t,e,s){this.uM(t,e,s)},ky(t,e){this.Set(t,0,0,e)},a4(t,e,s){this.Set(t,e,0,s)},eJt(t,e,s,i){this.Set(t,e,s,i)},eH(s,i,t){const r=this.D7t,n=this.L7t,e=this.N7t,h=this.Tu;if(0===t){const o=n0.qo(n,()=>n0.qo(e,i));0===s?h.push(o):h.unshift(o),this.D7t++}else if(1===t){for(let t=0;t<r;++t){const a=n0.qo(e,i);0===s?h[t].push(a):h[t].unshift(a)}this.L7t++}else{for(let e=0;e<r;++e)for(let t=0;t<n;++t)0===s?h[e][t].push(i):h[e][t].unshift(i);this.N7t++}},fH(s,t){const i=this.D7t,r=this.L7t,e=this.N7t,n=this.Tu;if(0===t)0!==i&&(0===s?n.pop():n.shift(),this.D7t--);else if(1===t){if(0!==r){for(let t=0;t<i;++t)0===s?n[t].pop():n[t].shift();this.L7t--}}else if(0!==e){for(let e=0;e<i;++e)for(let t=0;t<r;++t)0===s?n[e][t].pop():n[e][t].shift();this.N7t--}},sJt(t){const s=this.D7t,i=this.L7t,e=this.N7t,r=this.Tu;if(0!==s&&0!==i&&0!==e)if(0===t)r.reverse();else if(1===t)for(let t=0;t<s;++t)r[t].reverse();else for(let e=0;e<s;++e)for(let t=0;t<i;++t)r[e][t].reverse()},iJt(t){const s=this.D7t,i=this.L7t,e=this.N7t,r=this.Tu;if(0!==s&&0!==i&&0!==e)if(0===t)r.sort((t,e)=>CompareValues2(t[0][0],e[0][0]));else if(1===t)for(let t=0;t<s;++t)r[t].sort((t,e)=>CompareValues2(t[0],e[0]));else for(let e=0;e<s;++e)for(let t=0;t<i;++t)r[e][t].sort(CompareValues2)},rJt(s){const i=this.D7t,r=this.L7t,n=this.N7t;if(0!==i&&0!==r&&0!==n)if(0===s)for(let e=0;e<r;++e)for(let t=0;t<n;++t)this.U7t(s,i,0,e,t);else if(1===s)for(let e=0;e<i;++e)for(let t=0;t<n;++t)this.U7t(s,r,e,0,t);else for(let e=0;e<i;++e)for(let t=0;t<r;++t)this.U7t(s,n,e,t,0)},pu(s,t){if(!((s=Math.floor(s))<0)){const i=this.D7t,r=this.L7t,e=this.N7t,n=this.Tu;if(0===t)i<=s||(n.splice(s,1),this.D7t--);else if(1===t){if(!(r<=s)){for(let t=0;t<i;++t)n[t].splice(s,1);this.L7t--}}else if(!(e<=s)){for(let e=0;e<i;++e)for(let t=0;t<r;++t)n[e][t].splice(s,1);this.N7t--}}},r6(s,i,t){if(!((i=Math.floor(i))<0)){const r=this.D7t,n=this.L7t,e=this.N7t,h=this.Tu;if(0===t)r<i||(h.splice(i,0,n0.qo(n,()=>n0.qo(e,s))),this.D7t++);else if(1===t){if(!(n<i)){for(let t=0;t<r;++t)h[t].splice(i,0,n0.qo(e,s));this.L7t++}}else if(!(i>e)){for(let e=0;e<r;++e)for(let t=0;t<n;++t)h[e][t].splice(i,0,s);this.N7t++}}},nJt(t,e,s){const i=t.split(e);this.uM(i.length,1,1);for(let e=0,t=i.length;e<t;++e){let t=i[e];0===s?String(Number(t))===t&&(t=Number(t)):2===s&&(t=Number(t)),this.Set(e,0,0,t)}},DKt(t){let e=null;try{e=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse JSON: ",t)}if(e.c2array){const s=e.size;this.D7t=s[0],this.L7t=s[1],this.N7t=s[2],this.Tu=e.data}},LKt(t){const e=URL.createObjectURL(new Blob([this.IKt()],{type:"application/json"}));this.gf.PL(e,t)}}}{const n1=self.Fe;n1.E7.O7t.fnt={W7t(t,e,s){return this.W7t(t,e||0,s||0)},b_t(){return this.D7t},v_t(){return this.L7t},hJt(){return this.N7t},oJt(){return this.V7t()},aJt(){return this.H7t()},lJt(){return this.j7t()},cJt(){return this.W7t(this.V7t(),this.H7t(),this.j7t())},yd(){return this.W7t(0,0,0)},uJt(){return this.W7t(this.D7t-1,0,0)},fJt(s){const i=this.Tu;for(let t=0,e=this.D7t;t<e;++t)if(i[t][0][0]===s)return t;return-1},dJt(e){const s=this.Tu;for(let t=this.D7t-1;0<=t;--t)if(s[t][0][0]===e)return t;return-1},pJt(t){let e=[];for(let t=0;t<this.D7t;++t)e.push(this.W7t(t,0,0));return e.join(t)},S_t(){return this.IKt()}}}{const a=self.Fe;a.E7.mJt=class extends a.dEt{constructor(t){super(t)}gn(){super.gn()}}}{let WrapModeToStr2=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};WrapModeToStr=WrapModeToStr2;const d=self.Fe;d.E7.mJt.bRt=class extends d.JEt{constructor(t,e){super(t),this.jT="repeat",this.XT="repeat",e&&(this.jT=WrapModeToStr2(e[0]),this.XT=WrapModeToStr2(e[1]))}gn(){super.gn()}NEt(){this.gW().nN(this.gf)}Vz(t){return this.gW().HH(t,{NT:this.gf.pD(),DT:this.jT,LT:this.XT})}zz(){this.gW().PR()}CJt(){return this.jT}gJt(){return this.XT}}}{const j=self.Fe,k=self.Ye,l=0,m=1,n=4,o=5,p=6,q=7,r=8,s=9,t=10,u=11,v=12,w=13,x=14,y=j.Cn(j.Rect),z=j.Cn(j.ac),A=j.Cn(j.Rect),B=j.Cn(j.ac),C=(j.E7.mJt.Instance=class extends j.xAt{constructor(e,i){super(e),this.SJt=0,this.yJt=0,this.TJt=1,this._Jt=1,this.EJt=0,this.AJt=!1,this.IJt=0,this.wJt=0,this.RJt=0,this.MJt=0,this.bJt=0,this.vJt=null,i&&(this.BL().eB(!!i[l]),this.SJt=i[n],this.yJt=i[o],this.TJt=i[p],this._Jt=i[q],this.EJt=j.In(i[r]),this.AJt=!!i[s],this.IJt=i[t],this.wJt=i[u],this.RJt=i[v],this.MJt=i[w],this.bJt=i[x])}gn(){this.xJt(),super.gn()}xJt(){this.vJt&&(this.vJt.gn(),this.vJt=null)}GJt(t,e,s){const i=this.kAt(),r=i.Sm(),n=i.vm(),h=this.SJt/r,o=this.yJt/n,a=this.EJt;A.set(0,0,t/(r*this.TJt),e/(n*this._Jt)),A.offset(-h,-o),0===a?s.Pc(A):s.Oc(A,-a)}PJt(t,e=!0){if(this.AJt){const s=this.kAt();t.Xg(),t.vx(s.Sm()*this.TJt,s.vm()*this._Jt,this.IJt,this.wJt,this.RJt,this.MJt,this.bJt)}else e&&t.Wg()}wT(t){const e=this.kAt(),s=e.z_();if(null!==s){this.PJt(t),t.zv(s);const i=e.Sm(),r=e.vm(),n=this.SJt/i,h=this.yJt/r,o=this.BL();A.set(0,0,o.Sm()/(i*this.TJt),o.vm()/(r*this._Jt)),A.offset(-n,-h),o.I5()?this.wVt(o,t):this.RVt(o,t)}}RVt(t,e){let s=t.S4();this.gf.CD()&&(s=t.tGt(s)),0===this.EJt?e.F2(s,A):(B.Oc(A,-this.EJt),e.Cx(s,B))}wVt(s,t){const i=s.SGt();if(s.TGt()){s.Jxt(y,z,!1);let t=z,e=(this.gf.CD()&&(t=s.tGt(t)),A);0!==this.EJt&&(B.Oc(A,-this.EJt),e=B),i.IT(s.w5(),t,e),s.yGt(!1)}i.wT(t)}kAt(){return this.vJt||this.Dft.gW()}Dst(){return!0}z_(){return this.kAt().z_()}OJt(){this.BL().yGt(!0)}DJt(t){this.SJt!==t&&(this.SJt=t,this.gf.XL(),this.OJt())}LJt(){return this.SJt}NJt(t){this.yJt!==t&&(this.yJt=t,this.gf.XL(),this.OJt())}FJt(){return this.yJt}kJt(t){this.TJt!==t&&(this.TJt=t,this.gf.XL(),this.OJt())}BJt(){return this.TJt}$Jt(t){this._Jt!==t&&(this._Jt=t,this.gf.XL(),this.OJt())}WJt(){return this._Jt}UJt(t){this.EJt!==t&&(this.EJt=t,this.gf.XL(),this.OJt())}VJt(){return this.EJt}HJt(t){this.AJt!==(t=!!t)&&(this.AJt=t,this.gf.XL())}jJt(){return this.AJt}XJt(t){this.IJt!==t&&(this.IJt=t,this.jJt())&&this.gf.XL()}YJt(){return this.IJt}qJt(t){this.wJt!==t&&(this.wJt=t,this.jJt())&&this.gf.XL()}KJt(){return this.wJt}zJt(t){this.RJt!==t&&(this.RJt=t,this.jJt())&&this.gf.XL()}JJt(){return this.RJt}ZJt(t){this.MJt!==t&&(this.MJt=t,this.jJt())&&this.gf.XL()}QJt(){return this.MJt}t9t(t){this.bJt!==t&&(this.bJt=t,this.jJt())&&this.gf.XL()}e9t(){return this.bJt}zy(){const t={};return 0!==this.SJt&&(t.iox=this.SJt),0!==this.yJt&&(t.ioy=this.yJt),1!==this.TJt&&(t.isx=this.TJt),1!==this._Jt&&(t.isy=this._Jt),0!==this.EJt&&(t.ia=this.EJt),this.AJt&&(t.tr=!0),1!==this.IJt&&(t.trx=this.IJt),1!==this.wJt&&(t.try=this.wJt),1!==this.RJt&&(t.tra=this.RJt),.1!==this.MJt&&(t.trbmx=this.MJt),.1!==this.bJt&&(t.trbmy=this.bJt),t}Jy(t){this.SJt=t.iox||0,this.yJt=t.ioy||0,this.TJt=t.hasOwnProperty("isx")?t.isx:1,this._Jt=t.hasOwnProperty("isy")?t.isy:1,this.EJt=t.ia||0,this.AJt=!!t.tr,this.IJt=t.hasOwnProperty("trx")?t.trx:1,this.wJt=t.hasOwnProperty("try")?t.try:1,this.RJt=t.hasOwnProperty("tra")?t.tra:1,this.MJt=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.bJt=t.hasOwnProperty("trbmy")?t.trbmy:.1}wAt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.LJt(),eHt:t=>this.DJt(t)},{name:t+".image-offset-y.name",value:this.FJt(),eHt:t=>this.NJt(t)},{name:t+".image-scale-x.name",value:100*this.BJt(),eHt:t=>this.kJt(t/100)},{name:t+".image-scale-y.name",value:100*this.WJt(),eHt:t=>this.$Jt(t/100)},{name:t+".image-angle.name",value:j.wn(this.VJt()),eHt:t=>this.UJt(j.In(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.jJt(),eHt:t=>this.HJt(t)},{name:t+".x-random.name",value:100*this.YJt(),eHt:t=>this.XJt(t/100)},{name:t+".y-random.name",value:100*this.KJt(),eHt:t=>this.qJt(t/100)},{name:t+".angle-random.name",value:100*this.JJt(),eHt:t=>this.zJt(t/100)},{name:t+".blend-margin-x.name",value:100*this.QJt(),eHt:t=>this.ZJt(t/100)},{name:t+".blend-margin-y.name",value:100*this.e9t(),eHt:t=>this.t9t(t/100)}]}]}Knt(e){switch(e){case n:return this.LJt();case o:return this.FJt();case p:return this.BJt();case q:return this.WJt();case r:return this.VJt();case s:return this.jJt();case t:return this.YJt();case u:return this.KJt();case v:return this.JJt();case w:return this.QJt();case x:return this.e9t()}}eht(e,i){switch(e){case n:this.DJt(i);break;case o:this.NJt(i);break;case p:this.kJt(i);break;case q:this.$Jt(i);break;case r:this.UJt(i);break;case s:this.HJt(!!i);break;case t:this.XJt(i);break;case u:this.qJt(i);break;case v:this.zJt(i);break;case w:this.ZJt(i);break;case x:this.t9t(i)}}FEt(){return self.s9t}},new WeakMap);self.s9t=class extends self.M5{constructor(){super(),C.set(this,self.jB.zB().P5())}set i9t(t){k.Ei(t),C.get(this).DJt(t)}get i9t(){return C.get(this).LJt()}set r9t(t){k.Ei(t),C.get(this).NJt(t)}get r9t(){return C.get(this).FJt()}n9t(t,e){k.Ei(t),k.Ei(e);const s=C.get(this);s.DJt(t),s.NJt(e)}h9t(){const t=C.get(this);return[t.LJt(),t.FJt()]}set o9t(t){k.Ei(t),C.get(this).kJt(t)}get o9t(){return C.get(this).BJt()}set a9t(t){k.Ei(t),C.get(this).$Jt(t)}get a9t(){return C.get(this).WJt()}l9t(t,e){k.Ei(t),k.Ei(e);const s=C.get(this);s.kJt(t),s.$Jt(e)}c9t(){const t=C.get(this);return[t.BJt(),t.WJt()]}set u9t(t){k.Ei(t),C.get(this).UJt(t)}get u9t(){return C.get(this).VJt()}set f9t(t){k.Ei(t),C.get(this).UJt(j.In(t))}get f9t(){return j.wn(C.get(this).VJt())}get imageWidth(){return C.get(this).kAt().Sm()}get imageHeight(){return C.get(this).kAt().vm()}mHt(){const t=C.get(this).kAt();return[t.Sm(),t.vm()]}set d9t(t){C.get(this).HJt(!!t)}get d9t(){return C.get(this).jJt()}set p9t(t){k.Ei(t),C.get(this).XJt(t)}get p9t(){return C.get(this).YJt()}set m9t(t){k.Ei(t),C.get(this).qJt(t)}get m9t(){return C.get(this).KJt()}C9t(t,e){k.Ei(t),k.Ei(e);const s=C.get(this);s.XJt(t),s.qJt(e)}g9t(){const t=C.get(this);return[t.YJt(),t.KJt()]}set S9t(t){k.Ei(t),C.get(this).zJt(t)}get S9t(){return C.get(this).JJt()}set y9t(t){k.Ei(t),C.get(this).ZJt(t)}get y9t(){return C.get(this).QJt()}set T9t(t){k.Ei(t),C.get(this).t9t(t)}get T9t(){return C.get(this).e9t()}_9t(t,e){k.Ei(t),k.Ei(e);const s=C.get(this);s.ZJt(t),s.t9t(e)}E9t(){const t=C.get(this);return[t.QJt(),t.e9t()]}async A9t(t){k.nr(t,Blob);const e=C.get(this),s=e.hN(),i=j.Cn(j.jIt);i.nwt(s,t),await i.HH(s.JS(),{NT:s.pD(),DT:e.yyt().CJt(),LT:e.yyt().gJt()}),e.Sn()?i.gn():(e.xJt(),e.vJt=i,s.XL())}}}{const o0=self.Fe;o0.E7.mJt.T7={IHt(){return!0},wHt(){return!0},I9t(){return this.jJt()}}}{const p0=self.Fe;p0.E7.mJt.unt={w9t(t){this.DJt(t)},R9t(t){this.NJt(t)},M9t(t){this.kJt(t/100)},b9t(t){this.$Jt(t/100)},v9t(t){this.UJt(p0.In(t))},x9t(t){this.HJt(t)},G9t(t,e){this.XJt(t/100),this.qJt(e/100)},P9t(t){this.zJt(t/100)},O9t(t,e){this.ZJt(t/100),this.t9t(e/100)},DHt(t){this.BL().Ry(t),this.gf.XL()},async PHt(t,e){if(!this.vJt||this.vJt.fX()!==t){const s=this.gf,i=p0.Cn(p0.jIt);try{if(await i.rwt(s,t),!i.kX())throw new Error("image failed to load");if(this.Sn())return i.gn(),null;const r=await i.HH(s.JS(),{NT:s.pD(),DT:this.yyt().CJt(),LT:this.yyt().gJt()});if(!r)return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Sn()||this.P$(p0.E7.mJt.T7.wHt))}this.Sn()?i.gn():(this.xJt(),this.vJt=i,s.XL(),await this.D$(p0.E7.mJt.T7.IHt))}}}}{const I0=self.Fe;I0.E7.mJt.fnt={jHt(){return this.kAt().Sm()},XHt(){return this.kAt().vm()},D9t(){return this.SJt},L9t(){return this.yJt},N9t(){return 100*this.TJt},F9t(){return 100*this._Jt},k9t(){return I0.wn(this.EJt)},B9t(){return 100*this.YJt()},$9t(){return 100*this.KJt()},W9t(){return 100*this.JJt()},U9t(){return 100*this.QJt()},V9t(){return 100*this.e9t()}}}{const a=self.Fe;a.E7.H9t=class extends a.dEt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.E7.H9t.bRt=class extends d.JEt{constructor(t){super(t),this.j9t=d.Cn(self.X9t)}gn(){super.gn()}NEt(){this.gW().nN(this.gf)}Vz(t){return this.gW().HH(t,{NT:this.gf.pD()})}zz(){this.gW().PR()}Y9t(){return this.j9t}q9t(t,e,s,i){const r=this.gW(),n=this.j9t;n.wm(r.Sm()),n.ym(r.vm()),n.K9t(t),n.z9t(e),n.J9t(s),n.Z9t(i),n.Q9t()}}}{const n=self.Fe,o=self.Ye,p=n.Cn(n.ol),q=0,r=1,s=2,t=3,u=4,v=5,w=6,x=7,y=8,z=9,A=10,B=11,C=12,D=13,E=14,F=["left","center","right"],G=["top","center","bottom"],H=["word","cjk","character"],I=(n.E7.H9t.Instance=class extends n.xAt{constructor(t,e){super(t),this.Sf="",this.tZt=!0,this.eZt=16,this.sZt=16,this.iZt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,;:?!-_~#\"'&()[]|`\\/@+=*$<>";let s="";if(this.rZt=1,this.nZt=0,this.qw=0,this.sR=0,this.iR=0,this.hR="word",this.hZt=!0,this.oZt=!1,this.aZt=null,this.lZt=null,this.cZt=-1,this.uZt=-1,this.fZt=0,e){this.Sf=e[0],this.tZt=e[1],this.eZt=e[2],this.sZt=e[3],this.iZt=e[4],s=e[5],this.rZt=e[6],this.nZt=e[7],this.qw=e[8],this.sR=e[9],this.iR=e[10],this.hR=H[e[11]];const r=this.BL();r.eB(e[12]),this.oZt=!!e[E]}this.rAt.q9t(this.eZt,this.sZt,this.iZt,s),this.lZt=n.Cn(self.dZt,this.rAt.Y9t());const i=this.BL();this.lZt.uM(i.Sm(),i.vm()),this.pZt(),this.mZt(),this.vs.obt()}gn(){this.CZt(),this.aZt&&(this.aZt.gn(),this.aZt=null),this.lZt.gn(),this.lZt=null,super.gn()}pZt(){const t=this.lZt;t&&(t.kR(this.tZt),t._f(this.Sf),t.hM(this.hR),t.gZt(F[this.sR]),t.SZt(G[this.iR]),t.yZt(this.nZt),t.HR(this.qw))}TZt(){const t=this.BL();this.lZt.uM(t.Sm(),t.vm()),this.lZt.Ck(this.rZt)}mZt(){if(this.oZt){let t=this.Sf;this.tZt&&(t=n.Br.om(t)),this.aZt?this.aZt._f(t):this.aZt=n.Cn(n.Cf,this.gf,t)}else this.aZt&&(this.aZt.gn(),this.aZt=null)}wT(i){const r=this.Dft.gW(),n=r.z_();if(n){i.zv(n);let t=this.BL(),e=t.S4(),s=this.lZt;s.Ck(this.rZt),s._Zt(t.Cxt()),this.gf.CD()&&(e=t.tGt(e)),s.uM(t.Sm(),t.vm()),s.Y9t().EZt(r.UM()),s.My(t.E4()),s.wT(i,e.hh(),e.oh(),t.yk()),this.hZt=!1}}zy(){const t={t:this.Sf,ebbc:this.tZt,csc:this.rZt,csp:this.nZt,lh:this.qw,ha:this.sR,va:this.iR,w:this.hR,cw:this.rAt.Y9t().AZt(),ch:this.rAt.Y9t().IZt(),cs:this.rAt.Y9t().wZt(),sd:this.rAt.Y9t().RZt()};return-1!==this.uZt&&(t.tw={st:this.cZt,en:this.uZt,l:this.fZt}),t}Jy(t){if(this.CZt(),this.Sf=t.t,this.tZt=t.ebbc,this.rZt=t.csc,this.nZt=t.csp,this.qw=t.lh,this.sR=t.ha,this.iR=t.va,t.hasOwnProperty("w")){const s=t.w;this.hR="boolean"==typeof s?s?"word":"character":s}else this.hR="word";if(t.hasOwnProperty("tw")){const i=t.tw;this.cZt=i.st,this.uZt=i.en,this.fZt=t.l}const e=this.rAt.Y9t();e.K9t(t.cw),e.z9t(t.ch),e.J9t(t.cs),e.Z9t(t.sd),this.pZt(),this.mZt(),-1!==this.uZt&&this._At()}Knt(e){switch(e){case q:return this.cM();case r:return this.tZt;case s:return this.rAt.Y9t().AZt();case t:return this.rAt.Y9t().IZt();case u:return this.rAt.Y9t().wZt();case v:return this.rAt.Y9t().RZt();case w:return this.MZt();case x:return this.bZt();case y:return this.vZt();case z:return this.xZt();case A:return this.GZt();case B:return this.PZt()}}eht(e,i){switch(e){case q:this.OZt(i);break;case r:this.tZt!==!!i&&(this.tZt=!!i,this.pZt());break;case s:this.rAt.Y9t().K9t(i);break;case t:this.rAt.Y9t().z9t(i);break;case u:this.rAt.Y9t().J9t(i);break;case v:this.rAt.Y9t().Z9t(i);break;case w:this.DZt(i);break;case x:this.LZt(i);break;case y:this.NZt(i);break;case z:this.FZt(i);break;case A:this.kZt(i);break;case B:this.BZt(i)}}OZt(t){this.Sf!==t&&(this.Sf=t,this.lZt._f(t),this.mZt(),this.gf.XL())}cM(){return this.Sf}$Zt(t,e){this.OZt(t),this.cZt=this.gf.JD(),this.uZt=this.cZt+e/this.aU().c$(),this.fZt=n.Rp(n.Br.om(t)),this.lZt.JR(0),this._At()}CZt(){this.cZt=-1,this.uZt=-1,this.fZt=0,this.lZt.JR(-1),this.nAt()}WZt(){-1!==this.uZt&&(this.CZt(),this.P$(n.E7.H9t.T7.UZt),this.gf.XL())}DZt(t){this.rZt!==t&&(this.rZt=t,this.lZt.Ck(this.rZt),this.gf.XL())}MZt(){return this.rZt}LZt(t){this.nZt!==t&&(this.nZt=t,this.lZt.yZt(this.nZt),this.gf.XL())}bZt(){return this.nZt}NZt(t){this.qw!==t&&(this.qw=t,this.lZt.HR(this.qw),this.gf.XL())}vZt(){return this.qw}FZt(t){this.sR!==t&&(this.sR=t,this.pZt(),this.gf.XL())}xZt(){return this.sR}kZt(t){this.iR!==t&&(this.iR=t,this.pZt(),this.gf.XL())}GZt(){return this.iR}VZt(t){this.BZt(H[t])}BZt(t){this.hR!==t&&(this.hR=t,this.pZt(),this.gf.XL())}PZt(){return this.hR}HZt(t){this.oZt=!!t,this.mZt()}jZt(){return this.oZt}XZt(){return this.TZt(),this.lZt.dM()}YZt(){return this.TZt(),this.lZt.mM()}qZt(t,e){this.TZt();const s=this.BL(),i=(p.set(t-s.Fy(),e-s.$y()),p.rotate(-s.yk()),p.offset(s.Sm()*s.TW(),s.vm()*s.EW()),this.lZt.SM(p.fl(),p.pl()));if(i){const r=i.CC("tag");if(r)return r.param}return""}KZt(t,e,s){const i=this.qZt(e,s);return i&&n.Ir(t,i)}zZt(t,e){this.TZt(),e=Math.floor(e);const s=this.lZt.TM(t,e);if(!s)return null;const i=this.BL();return p.set(s.uC(),s.dC()),p.offset(-i.Sm()*i.TW(),-i.vm()*i.EW()),p.rotate(i.yk()),p.offset(i.Fy(),i.$y()),{x:p.fl(),y:p.pl(),width:s.Sm(),height:s.vm()}}JZt(t){return this.TZt(),this.lZt._M(t)}q9(){const e=this.gf.JD();if(e>=this.uZt)this.CZt(),this.P$(n.E7.H9t.T7.UZt),this.gf.XL();else{let t=n.Fn(this.cZt,this.uZt,e,0,this.fZt);(t=Math.floor(t))!==this.lZt.ZR()&&(this.lZt.JR(t),this.gf.XL())}}wAt(){const t="plugins.spritefont2";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.cM(),eHt:t=>this.OZt(t)},{name:t+".properties.scale.name",value:this.MZt(),eHt:t=>this.DZt(t)},{name:t+".properties.character-spacing.name",value:this.bZt(),eHt:t=>this.LZt(t)},{name:t+".properties.line-height.name",value:this.vZt(),eHt:t=>this.NZt(t)}]}]}FEt(){return self.ZZt}},new WeakMap),J=new Map([["left",0],["center",1],["right",2]]),K=new Map([["top",0],["center",1],["bottom",2]]);self.ZZt=class extends self.M5{constructor(){super(),I.set(this,self.jB.zB().P5())}get text(){return I.get(this).cM()}set text(t){o.Ri(t);const e=I.get(this);e.CZt(),e.OZt(t)}QZt(t,e){o.Ri(t),o.Ei(e);const s=I.get(this);s.CZt(),s.$Zt(t,e)}tQt(){I.get(this).WZt()}set eQt(t){o.Ei(t),I.get(this).DZt(t)}get eQt(){return I.get(this).MZt()}set sQt(t){o.Ei(t),I.get(this).LZt(t)}get sQt(){return I.get(this).bZt()}set lineHeight(t){o.Ei(t),I.get(this).NZt(t)}get lineHeight(){return I.get(this).vZt()}set lj(t){o.Ri(t);const e=J.get(t);if(void 0===e)throw new Error("invalid mode");I.get(this).FZt(e)}get lj(){return F[I.get(this).xZt()]}set verticalAlign(t){o.Ri(t);const e=K.get(t);if(void 0===e)throw new Error("invalid mode");I.get(this).kZt(e)}get verticalAlign(){return G[I.get(this).GZt()]}set cj(t){if(!H.includes(t))throw new Error("invalid mode");I.get(this).BZt(t)}get cj(){return I.get(this).PZt()}set iQt(t){I.get(this).HZt(!!t)}get iQt(){return I.get(this).jZt()}get pj(){return I.get(this).XZt()}get mj(){return I.get(this).YZt()}rQt(){const t=I.get(this);return[t.XZt(),t.YZt()]}nQt(t,e,s){return o.Ri(t),o.Ei(e),o.Ei(s),I.get(this).KZt(t,e,s)}hQt(t,e){return o.Ei(t),o.Ei(e),I.get(this).qZt(t,e)}oQt(t,e=0){return o.Ri(t),o.Ei(e),I.get(this).zZt(t,e)}aQt(t){return o.Ri(t),I.get(this).JZt(t)}}}{const h0=self.Fe;h0.E7.H9t.T7={lQt(t,e){return e?this.Sf===t:h0.Ir(this.Sf,t)},cQt(){return-1!==this.uZt},UZt(){return!0},uQt(t,e,s){return this.KZt(t,e,s)}}}{const n0=self.Fe;n0.E7.H9t.unt={_f(t){this.CZt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.OZt(t.toString())},fQt(t){this.CZt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.OZt(this.Sf+t)},dQt(t,e){this.CZt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.$Zt(t.toString(),e)},pQt(){this.WZt()},Ck(t){this.DZt(t)},mQt(t){this.LZt(t)},HR(t){this.NZt(t)},K9t(t,e){let s=!1,i=this.rAt.Y9t();for(const r of t)if(" "===r)i.CQt(e),s=!0;else{const n=i.gQt(r);n&&(n.SQt(e),s=!0)}s&&i.yQt(),this.gf.XL()},DHt(t){this.BL().Ry(t),this.gf.XL()},TQt(t){this.FZt(t)},_Qt(t){this.kZt(t)},EQt(t){this.VZt(t)},AQt(t){this.HZt(t)}}}{const G0=self.Fe;G0.E7.H9t.fnt={IQt(t){const e=this.rAt.Y9t().gQt(t);return e?e.wQt():this.rAt.Y9t().AZt()},RQt(){return this.sZt},MQt(){return this.rZt},bQt(){return this.nZt},vQt(){return this.qw},Text(){return this.Sf},xQt(){return this.tZt?G0.Br.om(this.Sf):this.Sf},GQt(){return this.XZt()},PQt(){return this.YZt()},OQt(t,e){return this.qZt(t,e)},DQt(t){return this.JZt(t)},LQt(t,e){const s=this.zZt(t,e);return s?s.x:0},NQt(t,e){const s=this.zZt(t,e);return s?s.y:0},FQt(t,e){const s=this.zZt(t,e);return s?s.width:0},kQt(t,e){const s=this.zZt(t,e);return s?s.height:0}}}{const C33=self.Fe;self.BQt=class{constructor(t,e,s,i){let r=t.AZt(),n=t.IZt();this.j9t=t,this.$Qt=e,this.WQt=new C33.Rect(s,i,s+r,i+n),this.UQt=new C33.Rect,this.VQt=-1,this.HQt()}gn(){this.j9t=null,this.WQt=null,this.UQt=null}HQt(){let t=this.j9t.Sm(),e=this.j9t.vm();this.UQt.I(this.WQt),this.UQt.vt(t,e),this.UQt.oc(this.j9t.UM())}Y9t(){return this.j9t}jQt(){return this.$Qt}UM(){return this.UQt}SQt(t){this.VQt=t}wQt(){return this.VQt<0?this.j9t.AZt():this.VQt}}}{let getOffsetParam2=function(t,e){t=t.trim();const s=parseFloat(t);return isFinite(s)?t.endsWith("%")?e*s/100:s:0},normalizeCssColorString2=function(t){return(canvasColorCtx=canvasColorCtx||C33.Fo(32,32).getContext("2d")).fillStyle="#FFFFFF",canvasColorCtx.fillStyle=t,canvasColorCtx.fillStyle},C33=(getOffsetParam=getOffsetParam2,normalizeCssColorString=normalizeCssColorString2,self.Fe),tmpRect=new C33.Rect,tmpQuad=new C33.ac,tmpColor=new C33.Ko,VALID_HORIZ_ALIGNMENTS=new Set(["left","center","right"]),VALID_VERT_ALIGNMENTS=new Set(["top","center","bottom"]),VALID_WORD_WRAP_MODES=new Set(["word","cjk","character"]),canvasColorCtx=null;self.dZt=class{constructor(t){this.j9t=t,this.dR=0,this.pR=0,this.Sf="",this.Zw=!1,this.rR=null,this.nR=C33.Cn(C33.am),this.hR="word",this.aR=!1,this.lR=!1,this.sR="left",this.iR="top",this.X6=1,this.XQt=1,this.YQt=0,this.qw=0,this.Ay=C33.Cn(C33.Ko),this.uR=-1,this.fR=0,this.MR=t=>this.bR(t),this.j9t.qQt(this)}gn(){this.j9t.KQt(this),this.Ay=null,this.MR=null,this.nR.fu(),this.nR=null,this.j9t=null,this.rR=null}bR(t){if(t.Rm())return{width:0,height:0};const e=t.Vm(),s=t.CC("scale"),i=(s?parseFloat(s.param):this.X6)*this.XQt,r=t.CC("scalex"),n=(r?parseFloat(r.param):1)*i,h=t.CC("scaley"),o=(h?parseFloat(h.param):1)*i,a=this.j9t.IZt()*o+this.qw,l=this.Y9t(),c=l.AZt()*n,u=this.zQt();if(l.JQt()){let s=0,i=0;for(const f of e){let t=c,e=l.gQt(f);e?t=e.wQt()*n:" "===f&&(t=l.ZQt()*n),i+=t,++s}return{width:i+s*u,height:a}}{const d=e.length,p=Math.max(d,0);return{width:c*d+p*u,height:a}}}FR(){this.lR=!0}Hw(){this.FR(),this.aR=!0,this.nR.fu()}uM(t,e){t<=0||e<=0||this.dR===t&&this.pR===e||(this.dR!==t?this.Hw():this.FR(),this.dR=t,this.pR=e)}JR(t){this.uR=Math.floor(t)}ZR(){return this.uR}SM(t,e){this.pM();const s=this.nR.fm();for(const i of s)if(e>i.dC()&&e<i.dC()+i.vm())for(const r of i.Lm())if(t>=r.uC()&&t<r.uC()+r.Sm())return r;return null}*yM(t){this.pM();const e=this.nR.fm();for(const s of e)for(const i of s.Lm()){const r=i.CC("tag");r&&C33.Ir(r.param,t)&&(yield i)}}TM(t,e){for(const s of this.yM(t)){if(0===e)return s;--e}return null}_M(t){let e=0;for(const s of this.yM(t))++e;return e}pM(){this.bM(),this.vM()}bM(){if(this.aR){!this.Zw||this.rR&&this.rR.toString()===this.Sf||(this.rR=new C33.Br(this.Sf,{Wp:!0}));const t=-this.zQt();this.nR.am(this.Zw?this.rR.Zp():this.Sf,this.MR,this.dR,this.hR,t),this.aR=!1}}vM(){this.lR&&(this.xM(),this.lR=!1)}xM(){let s=0,i=this.qw,r=C33.ro(this.nR.fm());for(const e of r){e.cC(NaN),e.fC(NaN);for(const n of e.Lm())n.cC(NaN),n.fC(NaN)}const t=r.reduce((t,e)=>t+e.vm(),0)-i;"center"===this.iR?s=Math.max(Math.floor(this.pR/2-t/2),0):"bottom"===this.iR&&(s=Math.floor(this.pR-t));for(let t=0,e=r.length;t<e;++t){const h=r[t],o=h.vm();if(0<t&&s>this.pR-(o-i))break;0<=s&&this.LM(h,s),s+=o}}LM(t,e){let s=0;"center"===this.sR?s=Math.max(Math.floor((this.dR-t.Sm())/2),0):"right"===this.sR&&(s=Math.max(Math.floor(this.dR-t.Sm()),0)),t.cC(s),t.fC(e);for(const i of t.Lm())i.Rm()||(this.QQt(i,s,e),s+=i.Sm())}QQt(t,e,s){const i=t.CC("offsetx"),r=(e+=i?getOffsetParam2(i.param,t.vm()):0,t.CC("offsety"));s+=r?getOffsetParam2(r.param,t.vm()):0,t.cC(e),t.fC(s)}wT(t,e,s,i){this.pM(),this.fR=0;const r=C33.ro(this.nR.fm()),n=Math.sin(i),h=Math.cos(i);for(const o of r)this.tte(t,o,e,s,n,h)}tte(t,e,s,i,r,n){const h=e.uC(),o=e.dC();if(Number.isFinite(h)&&Number.isFinite(o)){const a=e.vm();for(const l of e.Lm())this.kM(t,l,s,i,r,n,a)}}kM(o,a,l,c,u,f,d){let p=a.uC(),m=a.dC();if(Number.isFinite(p)&&Number.isFinite(m)){let n=a.Vm(),h=a.Sm();if(-1!==this.uR){if(this.fR>=this.uR)return;this.fR+n.length>this.uR&&(n=n.slice(0,this.uR-this.fR),h=this.bR(a).width),this.fR+=n.length}const C=a.CC("background");if(!(C33.J3(n)&&!C||a.gC("hide"))){const g=a.CC("scale"),S=(g?parseFloat(g.param):this.X6)*this.XQt,y=a.CC("scalex"),T=(y?parseFloat(y.param):1)*S,_=a.CC("scaley"),E=(_?parseFloat(_.param):1)*S,A=this.j9t.IZt()*E,I=this.qw;m+=d-I-A;let t=1,e=a.CC("opacity"),s=(e&&(t=parseFloat(e.param)/100),C&&(o.Yg(),tmpColor.Ua(normalizeCssColorString2(C.param)),tmpColor.ua(tmpColor.Sa()*t*this.Ay.Sa()),tmpColor.ba(),o.My(tmpColor),tmpRect.set(p,m,p+h,m+A),tmpRect.Ol()>this.dR&&tmpRect.Ml(this.dR),tmpQuad.Dc(tmpRect,u,f),tmpQuad.offset(l,c),o.ac(tmpQuad),o.Wg()),a.CC("color")),i=(s?(tmpColor.Ua(normalizeCssColorString2(s.param)),tmpColor.ua(this.Ay.Sa())):tmpColor.I(this.Ay),tmpColor.ua(tmpColor.Sa()*t),tmpColor.ba(),o.My(tmpColor),this.j9t.AZt()*T),r=Math.abs(this.zQt());for(const w of n){const R=this.j9t.gQt(w);if(R){const M=R.wQt()*T;if(p+M>this.dR+r+1e-5)return;tmpRect.set(p,m,p+i,m+A),tmpQuad.Dc(tmpRect,u,f),tmpQuad.offset(l,c),o.F2(tmpQuad,R.UM()),p+=M+this.YQt}else p+=this.j9t.ZQt()*T+this.YQt}}}}Y9t(){return this.j9t}kR(t){this.Zw!==(t=!!t)&&(this.Zw=t,this.Hw())}Uw(){return this.Zw}_f(t){this.Sf!==t&&(this.Sf=t,this.Hw())}hM(t){if(!VALID_WORD_WRAP_MODES.has(t))throw new Error("invalid word wrap mode");this.hR!==t&&(this.hR=t,this.Hw())}gZt(t){if(!VALID_HORIZ_ALIGNMENTS.has(t))throw new Error("invalid alignment");this.sR!==t&&(this.sR=t,this.FR())}SZt(t){if(!VALID_VERT_ALIGNMENTS.has(t))throw new Error("invalid alignment");this.iR!==t&&(this.iR=t,this.FR())}Ck(t){this.X6!==t&&(this.X6=t,this.Hw())}gk(){return this.X6}_Zt(t){this.XQt!==t&&(this.XQt=t,this.Hw())}Cxt(){return this.XQt}yZt(t){this.YQt!==t&&(this.YQt=t,this.Hw())}zQt(){return this.YQt}HR(t){this.qw=t,this.Hw()}jR(){return this.qw}Yv(t){t=C33.En(t,0,1),this.Ay.a=t}My(t){this.Ay.equals(t)||this.Ay.I(t)}Kv(){return this.Ay}dM(){return this.pM(),this.nR.Qm()}mM(){this.pM();const t=this.j9t.IZt()*this.X6,e=this.qw,s=t+e;return this.nR.pm()*s-e}}}{const C33=self.Fe,SpriteFontText=self.dZt,DEFAULT_SPRITEFONT_OPTS={width:256,height:256,ete:16,ste:16,characterSet:""};self.X9t=class{constructor(t){if((t=Object.assign({},DEFAULT_SPRITEFONT_OPTS,t)).width<=0||t.height<=0||t.ete<=0||t.ste<=0)throw new Error("invalid size");this.eC=t.width,this.sC=t.height,this.eZt=t.ete,this.sZt=t.ste,this.iZt=t.characterSet,this.ite="",this.rte=null,this.nte=!1,this.hte=-1,this.UQt=new C33.Rect(0,0,1,1),this.ote=new Map,this.ate=!0,this.lte=new Set}gn(){this.UQt=null,this.cte(),this.ote=null,this.lte&&this.lte.clear(),this.lte=null}cte(){for(let t of this.ote.values())t.gn();this.ote.clear()}qQt(t){this.lte.add(t)}KQt(t){this.lte.delete(t)}Q9t(){if(this.ate){this.cte();let e=C33.Ip(this.iZt),r=Math.floor(this.eC/this.eZt),t=Math.floor(this.sC/this.sZt),s=r*t;for(let i=0,t=e.length;i<t&&!(i>=s);++i){let s=e[i];if(!this.ote.has(s)){let t=i%r,e=Math.floor(i/r);this.ote.set(s,C33.Cn(self.BQt,this,s,t*this.eZt,e*this.sZt))}}if(this.nte=!1,this.hte=-1,Array.isArray(this.rte))for(let e of this.rte)if(Array.isArray(e)&&2===e.length){let s=e[0],t=e[1];if("number"==typeof s&&isFinite(s)&&"string"==typeof t&&s!==this.eZt)for(let e of t){let t=this.ote.get(e);t?(t.SQt(s),this.nte=!0):" "===e&&(this.hte=s,this.nte=!0)}}this.ate=!1;for(let t of this.lte)t.Hw()}}yQt(){this.nte=!0;for(const t of this.lte)t.Hw()}gQt(t){return this.Q9t(),this.ote.get(t)||null}JQt(){return this.nte}wm(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.eC!==t&&(this.eC=t,this.ate=!0)}Sm(){return this.eC}ym(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.sC!==t&&(this.sC=t,this.ate=!0)}vm(){return this.sC}EZt(t){if(!this.UQt.equals(t)){this.UQt.I(t);for(const e of this.ote.values())e.HQt()}}UM(){return this.UQt}K9t(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.eZt!==t&&(this.eZt=t,this.ate=!0)}AZt(){return this.eZt}z9t(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.sZt!==t&&(this.sZt=t,this.ate=!0)}IZt(){return this.sZt}J9t(t){this.iZt!==t&&(this.iZt=t,this.ate=!0)}wZt(){return this.iZt}Z9t(t){if(this.ite!==t&&(this.ite=t,this.ate=!0,this.rte=null,this.ite.length))try{this.rte=JSON.parse(this.ite)}catch(t){this.rte=null}}RZt(){return this.ite}CQt(t){this.hte!==(t=t<0?-1:t)&&(this.hte=t,0<=this.hte)&&(this.nte=!0)}ZQt(){return this.hte<0?this.eZt:this.hte}}}{const a=self.Fe;a.E7.ute=class extends a.dEt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.E7.ute.bRt=class extends d.JEt{constructor(t){super(t)}gn(){super.gn()}NEt(){this.gW().nN(this.gf)}Vz(t){return this.gW().HH(t,{NT:this.gf.pD()})}zz(){this.gW().PR()}}}{let GetParticleEngine2=function(t){return H.get(t).fte()};GetParticleEngine=GetParticleEngine2;const h=self.Fe,i=self.Ye,j=0,k=1,l=2,m=3,n=4,o=5,p=6,q=7,r=8,s=9,t=10,u=11,v=12,w=13,x=14,y=15,z=16,A=17,B=18,C=19,D=20,E=0,F=1,G=h.Cn(h.Rect),H=(h.E7.ute.Instance=class extends h.xAt{constructor(e,i){super(e),this.dte=!0;const a=h.Cn(self.pte);(this.Cte=a).mte=()=>this.gte(),this.Ste=null,this.yte=(t,e,s,i,r,n)=>this.Tte(t,e,s,i,r,n),this._te=t=>this.Ete(t);let c=this.Ate=!0;i&&(a.Ite(i[j]),a.wte(h.In(i[k])),a.Rte(i[l]?"one-shot":"continuous-spray"),this.Mte(this.gf.XV(i[m])),c=i[n],a.bte(i[o]),a.vte(i[p]),a.xte(i[q]/100),a.Gte(i[r]),a.Pte(i[s]),a.Ote(i[t]),a.Dte(i[u]),a.Lte(i[v]),a.Nte(i[w]),a.Fte(i[x]),a.kte(i[y]),a.Bte(i[z]),a.$te(i[A]),a.Wte(i[B]),a.Ute(i[C]),a.Vte(i[D])),this.Hte(),this.Ste&&(this.Ate=!1),"one-shot"===a.jte()?a.Xte():a.Yte(!0);const f=this.BL();f.eB(c),f.sGt(!0),this.vs.zf().addEventListener("bboxchange",()=>{f.eGt(this.Cte.C4())}),this.hN().JS().Og()&&f.Xxt(),this.zJ=t=>this.JJ(t),this.hN().zf().addEventListener("afterload",this.zJ),this._At()}gn(){this.hN().zf().removeEventListener("afterload",this.zJ),this.zJ=null,this.Cte.gn(),this.Cte=null,this.yte=null,this._te=null,super.gn()}fte(){return this.Cte}qte(t){this.Cte.Ite(t),"one-shot"===this.Cte.jte()&&this.dte&&this.Cte.Kte(t)}Mte(t){(t=t===this.YB()?null:t)===this.Ste||(this.Ste=t,this.Cte.zte=t?t=>this.Jte(t):null,this.Ste)||(this.Ate=!0)}Hte(){const t=this.Cte,e=this.BL();t.Zte(e.jv()),t.A5t(this.gf.CD()),t.Qte(e.Fy()),t.eee(e.$y()),t.see(e.yk()),t.iee(Math.abs(e.Cxt()))}gte(){this.gf.t$(this.vs)}wT(t){if(this.Ate){const e=this.Dft.gW(),s=e.z_();if(s){const i=this.BL(),r=i.$L(),n=G,h=(this.gf.KN().BLt()?n.set(-1/0,-1/0,1/0,1/0):r.jq()?r._8(i.d4(),n):r.Gq(i.d4(),n),t.zv(s),r.Pq(i.d4()));this.Cte.ree(r.HB()*h),this.Cte.wT(t,e.UAt(),n,r.jq())}}}zy(){const t=this.Cte;return{r:t.nee(),sc:t.hee(),st:t.jte(),isp:t.oee(),isz:t.aee(),io:t.lee(),gr:t.cee(),xr:t.uee(),yr:t.fee(),spr:t.dee(),szr:t.pee(),grnd:t.mee(),acc:t.Cee(),g:t.gee(),lar:t.See(),lsr:t.yee(),lor:t.Tee(),dm:t._ee(),to:t.Eee(),s:t.Aee(),pcc:t.Iee(),ft:this.dte,soc:this.Ste?this.Ste.cq():null,p:t.wee().map(t=>t.toJSON())}}Jy(t,e){const s=this.Cte;if(s.Ite(t.r),s.wte(t.sc),s.Rte(t.st),s.bte(t.isp),s.vte(t.isz),s.xte(t.io),s.Gte(t.gr),s.Pte(t.xr),s.Ote(t.yr),s.Dte(t.spr),s.Lte(t.szr),s.Nte(t.grnd),s.Fte(t.acc),s.kte(t.g),s.Bte(t.lar),s.$te(t.lsr),s.Wte(t.lor),s.Ute(t.dm),s.Vte(t.to),s.Yte(t.s),s.Ree(t.pcc),this.dte=t.ft,t.hasOwnProperty("soc")){const n=this.hN().XV(t.soc);n&&this.Mte(n)}const i=t.p,r=(s.Kte(i.length,!1),s.wee());for(let t=0,e=r.length;t<e;++t)r[t].za(i[t]);"state"===e&&this.Ste&&(s.Mee(),s.bee(this))}JJ(){const t=this.Cte,s=(t.Mee(),t.bee(this),t.wee());for(let t=0,e=s.length;t<e;++t){const i=s[t],r=i.vee();if(r){const n=r.BL();if(n){const h=n.aU();if(h){const o=i.xee(),a=h.o$();if(("number"!=typeof o||"number"!=typeof a||o!==a)&&"number"==typeof o){const l=this.hN(),c=l.DL(o);c&&l.t$(c)}}}}}}q9(){const t=this.gf.XD(this.vs);this.Hte(),this.dte&&"one-shot"===this.Cte.jte()&&this.Cte.Gee(),this.Cte.q9(t),this.Cte.Aee()&&this.gf.XL(),this.BL().o4(),this.dte=!1}Pee(t){for(this.dte&&"one-shot"===this.Cte.jte()&&this.Cte.Gee();0<t;)this.Cte.q9(1/60),t-=1/60;this.Cte.Aee()&&this.gf.XL(),this.BL().o4(),this.dte=!1}Jte(t,e){let s,i=(s=(s=(s="number"==typeof e?this.gf.DL(e):s)&&s.YB()!==this.Ste?null:s)||this.gf.ik(this.Ste,this.BL().$L(),t.Fy(),t.$y())).BL();return i.uM(t.Cu(),t.Cu()),i.Sk(t.yk()),i.Yv(t.jv()),i.A4(this.BL().E4()),i.o4(),i.G4(this.aU(),!0),s.m7(),t.Oee(this.yte),t.Dee(this._te),s}Tte(t,e,s,i,r,n){if(!t.fV()){const h=t.BL();h.u4(e,s),h.uM(h.Sm()+i,h.vm()+i),h.Sk(h.yk()+r),h.Yv(h.jv()+n),h.o4()}}Ete(t){t.fV()||this.gf.t$(t)}Knt(e){const i=this.Cte;switch(e){case j:return i.nee();case k:return h.wn(i.hee());case l:return"one-shot"===i.jte()?F:E;case o:return i.oee();case p:return i.aee();case q:return 100*i.lee();case r:return i.cee();case s:return i.uee();case t:return i.fee();case u:return i.dee();case v:return i.pee();case w:return i.mee();case x:return i.Cee();case y:return i.gee();case z:return i.See();case A:return i.yee();case B:return i.Tee();case C:return i._ee();case D:return i.Eee()}}eht(e,i){const n=this.Cte;switch(e){case j:n.Ite(i);break;case k:n.wte(h.In(i));break;case l:n.Rte(i?"one-shot":"continuous-spray");break;case o:n.bte(i);break;case p:n.vte(i);break;case q:n.xte(i/100);break;case r:n.Gte(i);break;case s:n.Pte(i);break;case t:n.Ote(i);break;case u:n.Dte(i);break;case v:n.Lte(i);break;case w:n.Nte(i);break;case x:n.Fte(i);break;case y:n.kte(i);break;case z:n.Bte(i);break;case A:n.$te(i);break;case B:n.Wte(i);break;case C:n.Ute(i);break;case D:n.Vte(i)}}wAt(){const t="plugins.particles",e=t+".properties",s=t+".debugger",i=this.Cte;return[{title:t+".name",properties:[{name:s+".particle-count",value:i.Lee()},{name:e+".type.name",value:[e+".type.items."+i.jte()]},{name:s+".is-spraying",value:i.Aee(),eHt:t=>i.Yte(t)},{name:e+".rate.name",value:i.nee(),eHt:t=>i.Ite(t)},{name:e+".spray-cone.name",value:h.wn(i.hee()),eHt:t=>i.wte(h.In(t))},{name:e+".speed.name",value:i.oee(),eHt:t=>i.bte(t)},{name:e+".size.name",value:i.aee(),eHt:t=>i.vte(t)},{name:e+".opacity.name",value:i.lee(),eHt:t=>i.xte(t)},{name:e+".grow-rate.name",value:i.cee(),eHt:t=>i.Gte(t)},{name:e+".x-randomiser.name",value:i.uee(),eHt:t=>i.Pte(t)},{name:e+".y-randomiser.name",value:i.fee(),eHt:t=>i.Ote(t)},{name:e+".initial-speed-randomiser.name",value:i.dee(),eHt:t=>i.Dte(t)},{name:e+".size-randomiser.name",value:i.pee(),eHt:t=>i.Lte(t)},{name:e+".grow-rate-randomiser.name",value:i.mee(),eHt:t=>i.Nte(t)},{name:e+".acceleration.name",value:i.Cee(),eHt:t=>i.Fte(t)},{name:e+".gravity.name",value:i.gee(),eHt:t=>i.kte(t)},{name:e+".angle-randomiser.name",value:i.See(),eHt:t=>i.Bte(t)},{name:e+".life-speed-randomiser.name",value:i.yee(),eHt:t=>i.$te(t)},{name:e+".opacity-randomiser.name",value:i.Tee(),eHt:t=>i.Wte(t)},{name:e+".timeout.name",value:i.Eee(),eHt:t=>i.Vte(t)}]}]}FEt(){return self.Nee}},new WeakMap);self.Nee=class extends self.M5{constructor(){super(),H.set(this,self.jB.zB().P5())}set Fee(t){GetParticleEngine2(this).Yte(!!t)}get Fee(){return GetParticleEngine2(this).Aee()}set rate(t){i.Ei(t),H.get(this).qte(t)}get rate(){return GetParticleEngine2(this).nee()}set kee(t){i.Ei(t),GetParticleEngine2(this).wte(t)}get kee(){return GetParticleEngine2(this).hee()}set Bee(t){i.Ei(t),GetParticleEngine2(this).bte(t)}get Bee(){return GetParticleEngine2(this).oee()}set $ee(t){i.Ei(t),GetParticleEngine2(this).vte(t)}get $ee(){return GetParticleEngine2(this).aee()}set Wee(t){i.Ei(t),GetParticleEngine2(this).xte(t)}get Wee(){return GetParticleEngine2(this).lee()}set Uee(t){i.Ei(t),GetParticleEngine2(this).Pte(t)}get Uee(){return GetParticleEngine2(this).uee()}set Vee(t){i.Ei(t),GetParticleEngine2(this).Ote(t)}get Vee(){return GetParticleEngine2(this).fee()}set Hee(t){i.Ei(t),GetParticleEngine2(this).Dte(t)}get Hee(){return GetParticleEngine2(this).dee()}set jee(t){i.Ei(t),GetParticleEngine2(this).Lte(t)}get jee(){return GetParticleEngine2(this).pee()}set Xee(t){i.Ei(t),GetParticleEngine2(this).Gte(t)}get Xee(){return GetParticleEngine2(this).cee()}set Yee(t){i.Ei(t),GetParticleEngine2(this).Nte(t)}get Yee(){return GetParticleEngine2(this).mee()}set acceleration(t){i.Ei(t),GetParticleEngine2(this).Fte(t)}get acceleration(){return GetParticleEngine2(this).Cee()}set qee(t){i.Ei(t),GetParticleEngine2(this).kte(t)}get qee(){return GetParticleEngine2(this).gee()}set Kee(t){i.Ei(t),GetParticleEngine2(this).Bte(t)}get Kee(){return GetParticleEngine2(this).See()}set zee(t){i.Ei(t),GetParticleEngine2(this).$te(t)}get zee(){return GetParticleEngine2(this).yee()}set Jee(t){i.Ei(t),GetParticleEngine2(this).Wte(t)}get Jee(){return GetParticleEngine2(this).Tee()}set timeout(t){i.Ei(t),GetParticleEngine2(this).Vte(t)}get timeout(){return GetParticleEngine2(this).Eee()}Zee(t){i.Ei(t),H.get(this).Pee(t)}Qee(t){const e=H.get(this);t?e.Mte(e.hN().FN(t)):e.Mte(null)}}}{const N0=self.Fe;N0.E7.ute.T7={Aee(){return this.Cte.Aee()}}}{const O0=self.Fe;O0.E7.ute.unt={Yte(t){this.Cte.Yte(0!==t)},Ite(t){this.qte(t)},tse(t){this.Mte(t)},ese(){this.Mte(null)},wte(t){this.Cte.wte(O0.In(t))},bte(t){this.Cte.bte(t)},vte(t){this.Cte.vte(t)},xte(t){this.Cte.xte(t/100)},Gte(t){this.Cte.Gte(t)},sse(t){this.Cte.Pte(t)},ise(t){this.Cte.Ote(t)},rse(t){this.Cte.Dte(t)},nse(t){this.Cte.Lte(t)},hse(t){this.Cte.Nte(t)},ose(t){this.Cte.Fte(t)},kte(t){this.Cte.kte(t)},ase(t){this.Cte.Bte(t)},lse(t){this.Cte.$te(t)},cse(t){this.Cte.Wte(t)},Vte(t){this.Cte.Vte(t)},fse(t){this.Pee(t)},DHt(t){this.BL().Ry(t),this.gf.XL()}}}{const ib=self.Fe;ib.E7.ute.fnt={dse(){return this.Cte.Lee()},pse(){return this.Cte.nee()},mse(){return ib.wn(this.Cte.hee())},Cse(){return this.Cte.oee()},gse(){return this.Cte.aee()},Sse(){return 100*this.Cte.lee()},yse(){return this.Cte.cee()},Tse(){return this.Cte.uee()},_se(){return this.Cte.fee()},Ese(){return this.Cte.pee()},Ase(){return this.Cte.dee()},Ise(){return this.Cte.mee()},wse(){return this.Cte.Cee()},Rse(){return this.Cte.gee()},Mse(){return this.Cte.See()},bse(){return this.Cte.yee()},vse(){return this.Cte.Tee()},xse(){return this.Cte.Eee()}}}{const C33=self.Fe,inactiveParticles=[],MAX_RECYCLE_PARTICLES=1e3,VALID_SPRAY_TYPES=new Set(["continuous-spray","one-shot"]),DESTROY_MODES=["fade-to-invisible","timeout-expired","particle-stopped"],tempRect=C33.Cn(C33.Rect);self.pte=class{constructor(){this.Gse=0,this.Pse=0,this.Ose="continuous-spray",this.Dse=!1,this.Lse=0,this.Nse=!1,this.Fse=0,this.kse=0,this.Bse=0,this.$se=0,this.Wse=0,this.Use=1,this.Vse=0,this.Hse=0,this.jse=0,this.Xse=0,this.Yse=0,this.qse=0,this.Kse=0,this.zse=0,this.Jse=0,this.Zse=0,this.Qse=0,this.tie=0,this.eie=0,this.p0=0,this.sie=0,this.iie=1,this.mte=null,this.zte=null,this.rie=[],this.Bvt=new C33.Rect,this.Ay=new C33.Ko}gn(){this.S0(),C33.Vh(this.rie),this.rie=null,this.mte=null,this.zte=null,this.Bvt=null,this.Ay=null}S0(){const s=this.rie;for(let t=0,e=s.length;t<e;++t)s[t].h_t();C33.sn(inactiveParticles,s),C33.Vh(s),inactiveParticles.length>MAX_RECYCLE_PARTICLES&&C33.Uh(inactiveParticles,MAX_RECYCLE_PARTICLES),this.Dse=!1}Xte(){for(let t=0,e=this.Gse;t<e;++t)this.nie();this.rie.length&&(this.Dse=!0)}nie(t=!0){let e=null;return inactiveParticles.length?(e=inactiveParticles.pop()).hie(this):e=C33.Cn(self.oie,this),this.rie.push(e),t?e.KMt(this.zte):e.KMt(),e}Gee(){const s=this.rie,i=this.zte;for(let t=0,e=s.length;t<e;++t)s[t].KMt(i)}Mee(){const s=this.rie,i=this.zte;for(let t=0,e=s.length;t<e;++t)s[t].aie(i)}bee(s){const i=this.rie;for(let t=0,e=i.length;t<e;++t){const r=i[t],n=r.vee();if(n){const h=n.BL();h.ky(r.Fy()),h.Wy(r.$y()),h.uM(r.Cu(),r.Cu()),h.Yv(r.jv()),h.Sk(r.yk()),h.A4(s.BL().E4()),h.o4()}}}Kte(t,e=!0){const s=this.rie;if(t<s.length){const i=s.length-t;for(let t=0;t<i;++t){const r=s.pop();r.h_t(),inactiveParticles.push(r)}inactiveParticles.length>MAX_RECYCLE_PARTICLES&&C33.Uh(inactiveParticles,MAX_RECYCLE_PARTICLES)}else if(t>s.length){const n=t-s.length;for(let t=0;t<n;++t)this.nie(e)}}wee(){return this.rie}Lee(){return this.rie.length}q9(t){this.lie(t),this.cie(t),this.uie()}lie(t){if("continuous-spray"===this.Ose&&this.Dse){this.sie+=t*this.Gse;const e=Math.floor(this.sie);this.sie-=e;for(let t=0;t<e;++t)this.nie()}}Ree(t){this.sie=t}Iee(){return this.sie}cie(s){let i=this.Bvt,r=(i.set(this.Fse,this.kse,this.Fse,this.kse),this.rie),n=0;for(let t=0,e=r.length;t<e;++t){const h=r[t];(r[n]=h).q9(s),h.Gmt()?(++n,i.hc(h.C4())):(h.h_t(),inactiveParticles.push(h))}C33.Uh(r,n),inactiveParticles.length>MAX_RECYCLE_PARTICLES&&C33.Uh(inactiveParticles,MAX_RECYCLE_PARTICLES)}uie(){"one-shot"===this.Ose&&0===this.rie.length&&this.Dse&&(this.mte&&this.mte(),this.Dse=!1)}wT(s,i,r,n){tempRect.set(i.hh(),i.oh(),i.fh(),i.ph()),s._x(tempRect),this.Ay.I(s.Kv());const h=this.rie;for(let t=0,e=h.length;t<e;++t){const o=h[t];r.ec(o.C4())&&o.wT(s,i,n)}s.Ex()}Kv(){return this.Ay}Ite(t){this.Gse=+t}nee(){return this.Gse}wte(t){this.Pse=+t}hee(){return this.Pse}Rte(t){if(!VALID_SPRAY_TYPES.has(t))throw new Error("invalid spray type");this.Ose=t}jte(){return this.Ose}Yte(t){this.Dse=!!t}Aee(){return this.Dse}Zte(t){this.Lse=+t}fie(){return this.Lse}A5t(t){this.Nse=!!t}die(){return this.Nse}Qte(t){this.Fse=+t}pie(){return this.Fse}eee(t){this.kse=+t}mie(){return this.kse}see(t){this.Bse=+t}Cie(){return this.Bse}bte(t){this.$se=+t}oee(){return this.$se}vte(t){this.Wse=+t}aee(){return this.Wse}iee(t){this.Use=+t}gie(){return this.Use}xte(t){this.Vse=+t}lee(){return this.Vse}Gte(t){this.Hse=+t}cee(){return this.Hse}Pte(t){this.jse=+t}uee(){return this.jse}Ote(t){this.Xse=+t}fee(){return this.Xse}Dte(t){this.Yse=+t}dee(){return this.Yse}Lte(t){this.qse=+t}pee(){return this.qse}Nte(t){this.Kse=+t}mee(){return this.Kse}Fte(t){this.zse=+t}Cee(){return this.zse}kte(t){this.Jse=+t}gee(){return this.Jse}Bte(t){this.Zse=+t}See(){return this.Zse}$te(t){this.Qse=+t}yee(){return this.Qse}Wte(t){this.tie=+t}Tee(){return this.tie}Sie(t){let e=DESTROY_MODES.indexOf(t);if(-1===e)throw new Error("invalid destroy mode");this.eie=e}Ute(t){this.Sie(DESTROY_MODES[t])}yie(){return DESTROY_MODES[this.eie]}_ee(){return this.eie}Vte(t){this.p0=+t}Eee(){return this.p0}ree(t){this.iie=+t}Tie(){return this.iie}C4(){return this.Bvt}}}{let randomOffset2=function(t){return Math.random()*t-t/2},C33=(randomOffset=randomOffset2,self.Fe),ParticleEngine=self.pte,tmpQuad=new C33.ac,tmpColor=new C33.Ko,DPR=self.devicePixelRatio||1,didChangeColor=!1;self.oie=class{constructor(t){this._ie=t,this.C0=!1,this.al=0,this.ll=0,this.mwt=0,this.Y6=0,this.Eie=1,this.Aie=0,this.Iie=0,this.DX=0,this.wie=0,this.Rie=0,this.Mie=0,this.Yc=new C33.Rect,this.bie=null,this.vie=NaN,this.xie=null,this.Gie=null}hie(t){this._ie=t}KMt(t){const e=this._ie;this.C0=!0,this.al=e.pie()+randomOffset2(e.uee()),this.ll=e.mie()+randomOffset2(e.fee()),this.mwt=e.oee()+randomOffset2(e.dee()),this.Y6=e.Cie()+randomOffset2(e.hee()),this.Eie=e.lee(),this.Aie=this.Eie,this.DX=(e.aee()+randomOffset2(e.pee()))*e.gie(),this.wie=this.DX/2,this.Iie=e.cee()+randomOffset2(e.mee()),this.Rie=0,this.Mie=0,this.Pie(),t?this.bie||(this.bie=t(this)):(this.bie=null,this.xie=null,this.Gie=null)}aie(t){t?this.bie&&!this.bie.fV()||(this.bie=t(this,this.vie)):(this.bie=null,this.xie=null,this.Gie=null)}Oee(t){this.xie=t}Dee(t){this.Gie=t}h_t(){const t=this.Gie;t&&t(this.bie),this.bie=null,this.xie=null,this.Gie=null}toJSON(){let t;return this.bie&&this.bie.BL()&&(t=this.bie.BL().aU().o$()),[this.al,this.ll,this.mwt,this.Y6,this.Eie,this.Iie,this.DX,this.Rie,this.Mie,t]}za(t){this.al=t[0],this.ll=t[1],this.mwt=t[2],this.Y6=t[3],this.Eie=t[4],this.Aie=this.Eie,this.Iie=t[5],this.DX=t[6],this.Rie=t[7],this.Mie=t[8],this.vie=t[9],this.wie=this.DX/2,this.Pie()}q9(t){let e=this._ie,s=this.mwt*t,i=this.Y6,r=Math.cos(i)*s,n=Math.sin(i)*s+this.Rie*t,h=(this.al+=r,this.ll+=n,this.Iie*t),o=(this.DX+=h,this.wie=this.DX/2,this.mwt+=e.Cee()*t,this.Rie+=e.gee()*t,this.Mie+=t,this.Pie(),e.See()),a=e.yee(),l=e.Tee(),c=0;0!==o&&(c=randomOffset2(o*t),this.Y6+=c),0!==a&&(this.mwt+=randomOffset2(a*t)),0!==l&&(this.Eie=C33.En(this.Eie+randomOffset2(l*t),0,1));const u=1<=this.DX&&(2===e._ee()?0<this.mwt:this.Mie<e.Eee()),f=this.xie;if(f&&u){let t=e.fie()*this.Eie;0===e._ee()&&(t*=1-this.Mie/e.Eee());const d=t-this.Aie;this.Aie=t,f(this.bie,r,n,h,c,d)}this.C0=u}Gmt(){return this.C0}C4(){return this.Yc}Pie(){const t=this.al,e=this.ll,s=this.wie;this.Yc.set(t-s,e-s,t+s,e+s)}wT(r,n,h){if(!this.bie){let s=this._ie,i=s.fie()*this.Eie;if(0===s._ee()&&(i*=1-this.Mie/s.Eee()),!(i<=0)){const o=this.DX,a=o*s.Tie()*DPR;if(!(a<1)){let t=this.al,e=this.ll;s.die()&&(t=t+.5|0,e=e+.5|0),r.Og()?r.Ax(t,e,o,i):h||a>r.hG()||a<r.nG()?(tmpColor.I(s.Kv()),tmpColor.Ma(i),r.My(tmpColor),didChangeColor=!0,tmpQuad.Pc(this.Yc),r.Cx(tmpQuad,n)):(didChangeColor&&(r.My(s.Kv()),didChangeColor=!1),r.Ax(t,e,a,i))}}}}vee(){return this.bie}xee(){return this.vie}Fy(){return this.al}$y(){return this.ll}Cu(){return this.DX}yk(){return this.Y6}jv(){return this.Eie}}}{const a=self.Fe;a.E7.Oie=class extends a.dEt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.E7.Oie.bRt=class extends d.JEt{constructor(t){super(t),this.Die=null,this.s1=null}gn(){this.zz(),super.gn()}NEt(){this.gW().nN(this.gf)}async Vz(t){const e=this.gW();this.s1=await e.fwt()}Lie(t,e,s,i){!this.Die&&this.s1&&(this.Die=new self.Nie(this),this.Die.Fie(this.s1,t,e,s,i))}zz(){this.Die&&(this.Die.gn(),this.Die=null)}kie(){return this.Die}}}{const m=self.Fe,n=0,o=1,p=2,q=3,r=4,s=5,t=6,u=7,v=8,w=m.Cn(m.Rect),x=m.Cn(m.Rect),y=m.Cn(m.ac);m.E7.Oie.Instance=class extends m.xAt{constructor(e,i){super(e),this.Bie=16,this.$ie=16,this.Wie=16,this.Uie=16,this.Vie=1,this.Hie=1,this.jie=!0,this.Xie=null,i&&(this.Bie=i[n],this.$ie=i[o],this.Wie=i[p],this.Uie=i[q],this.Vie=i[r],this.Hie=i[s],this.jie=!!i[v],this.BL().eB(!!i[t])),this.rAt.Lie(this.Bie,this.$ie,this.Wie,this.Uie)}gn(){super.gn()}Yie(t){this.Xie=t}wT(t){const e=this.BL(),s=e.S4();this.qie(t,s.hh(),s.oh(),e.Sm(),e.vm())}qie(t,e,s,i,r){let n=this.rAt.kie();if(n||(this.rAt.Lie(this.Bie,this.$ie,this.Wie,this.Uie),n=this.rAt.kie())){const h=n.Kie(),o=n.zie(),a=Math.min(this.Bie,h),l=Math.min(this.$ie,h),c=Math.min(this.Wie,o),u=Math.min(this.Uie,o),f=h-l,d=o-u,p=this.jie?1:0,m=this.Vie,C=this.Hie;if(0<a&&0<c&&this.Jie(t,n.z_(),0,0,a+p,c+p,e,s,a+p,c+p),0<l&&0<c&&this.Jie(t,n.z_(),f-p,0,l+p,c+p,e+i-l-p,s,l+p,c+p),0<l&&0<u&&this.Jie(t,n.z_(),f-p,d-p,l+p,u+p,e+i-l-p,s+r-u-p,l+p,u+p),0<a&&0<u&&this.Jie(t,n.z_(),0,d-p,a+p,u+p,e,s+r-u-p,a+p,u+p),0===m){const g=2===C?0:p;0<a&&c<d&&this.Zie(t,n.Qie(),e,s+c,a+g,r-c-u,0,0),0<l&&c<d&&this.Zie(t,n.tre(),e+i-l-g,s+c,l+g,r-c-u,g,0),0<c&&a<f&&this.Zie(t,n.ere(),e+a,s,i-a-l,c+g,0,0),0<u&&a<f&&this.Zie(t,n.sre(),e+a,s+r-u-g,i-a-l,u+g,0,g)}else 1===m&&(0<a&&c<d&&this.Jie(t,n.z_(),0,c,a,d-c,e,s+c,a,r-c-u),0<l&&c<d&&this.Jie(t,n.z_(),f,c,l,d-c,e+i-l,s+c,l,r-c-u),0<c&&a<f&&this.Jie(t,n.z_(),a,0,f-a,c,e+a,s,i-a-l,c),0<u)&&a<f&&this.Jie(t,n.z_(),a,d,f-a,u,e+a,s+r-u,i-a-l,u);c<d&&a<f&&(0===C?this.Zie(t,n.ire(),e+a,s+c,i-a-l,r-c-u,0,0):1===C&&this.Jie(t,n.z_(),a,c,f-a,d-c,e+a,s+c,i-a-l,r-c-u))}}Jie(t,e,s,i,r,n,h,o,a,l){const c=e.Sm(),u=e.vm();if(t.zv(e),w.set(h,o,h+a,o+l),x.set(s/c,i/u,(s+r)/c,(i+n)/u),null===this.Xie){const f=this.BL(),d=f.S4(),p=d.hh(),m=d.oh();w.offset(-p,-m),y.Oc(w,f.yk()),y.offset(p,m),t.F2(y,x)}else this.Xie(w,x)}Zie(t,e,s,i,r,n,h,o){const a=e.Sm(),l=e.vm();if(t.zv(e),w.set(s,i,s+r,i+n),x.set(-h/a,-o/l,(r-h)/a,(n-o)/l),null===this.Xie){const c=this.BL(),u=c.S4(),f=u.hh(),d=u.oh();w.offset(-f,-d),y.Oc(w,c.yk()),y.offset(f,d),t.F2(y,x)}else this.Xie(w,x)}kAt(){this.Dft.gW()}Knt(t){}eht(t,e){}}}{const Da=self.Fe;Da.E7.Oie.T7={}}{const Ea=self.Fe;Ea.E7.Oie.unt={DHt(t){this.BL().Ry(t),this.gf.XL()}}}{const Ga=self.Fe;Ga.E7.Oie.fnt={}}{let CloneDrawable2=function(t){const e=C33.Fo(t.width,t.height),s=e.getContext("2d");return s.drawImage(t,0,0),e};CloneDrawable=CloneDrawable2;const C33=self.Fe;self.Nie=class{constructor(t){this.rAt=t,this.gf=this.rAt.hN(),this.VT=null,this.rre=null,this.nre=null,this.hre=null,this.ore=null,this.are=null,this.UX=0,this.VX=0,this.xS=this.gf.JS(),this.VC=!1,this.LR=!1}gn(){this.xS.$M()||(this.xS.H_(this.VT),this.xS.H_(this.rre),this.xS.H_(this.nre),this.xS.H_(this.hre),this.xS.H_(this.ore),this.xS.H_(this.are)),this.VT=null,this.rre=null,this.nre=null,this.hre=null,this.ore=null,this.are=null,this.rAt=null,this.xS=null,this.LR=!0}Sn(){return this.LR}Fie(t,e,s,i,r){this.lre(t,e,s,i,r)}cre(){return!!this.VT}lre(t,e,s,i,r){if(!this.LR){const n=t.width,h=t.height,o=(this.UX=n,this.VX=h,e=Math.min(Math.floor(e),n),s=Math.min(Math.floor(s),n),i=Math.min(Math.floor(i),h),n-s),a=h-(r=Math.min(Math.floor(r),h)),l=this.gf.pD(),c=this.gf.KN().jX();this.VT=this.xS.Ux(CloneDrawable2(t),{NT:l,FT:c}),e<o&&i<a&&(this.rre=this.xS.Ux(this.ure(CloneDrawable2(t),e,i,o,a),{DT:"repeat",LT:"repeat",NT:l,FT:c})),0<e&&i<a&&(this.nre=this.xS.Ux(this.ure(CloneDrawable2(t),0,i,e,a),{LT:"repeat",NT:l,FT:c})),0<s&&i<a&&(this.hre=this.xS.Ux(this.ure(CloneDrawable2(t),o,i,n,a),{LT:"repeat",NT:l,FT:c})),0<i&&e<o&&(this.ore=this.xS.Ux(this.ure(CloneDrawable2(t),e,0,o,i),{DT:"repeat",NT:l,FT:c})),0<r&&e<o&&(this.are=this.xS.Ux(this.ure(CloneDrawable2(t),e,a,o,h),{DT:"repeat",NT:l,FT:c}))}}ure(t,e,s,i,r){const n=i-e,h=r-s,o=C33.Fo(n,h),a=o.getContext("2d");return a.drawImage(t,e,s,n,h,0,0,n,h),o}Kie(){return this.UX}zie(){return this.VX}z_(){return this.VT}ire(){return this.rre}Qie(){return this.nre}tre(){return this.hre}ere(){return this.ore}sre(){return this.are}}}{const a=self.Fe;a.E7.Text=class extends a.dEt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.E7.Text.bRt=class extends d.JEt{constructor(t){super(t)}gn(){super.gn()}NEt(){}Vz(t){}zz(){}}}{const h=self.Fe,i=self.Ye,j=[0,0,0],k=0,l=1,m=2,n=3,o=4,p=5,q=6,r=7,s=8,t=9,u=10,v=11,w=12,x=13,y=14,z=15,A=["left","center","right"],B=["top","center","bottom"],C=["ltr","rtl"],D=["word","cjk","character"],E=new h.Rect,F=new h.ac,G=new h.Ko,H=h.Cn(h.ol),I=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),J=(h.E7.Text.Instance=class extends h.xAt{constructor(e,i){if(super(e),this.Sf="",this.tZt=!0,this.fre="Arial",this.dre=12,this.pre=0,this.Kw=!1,this.zw=!1,this.Ay=h.Cn(h.Ko),this.sR=0,this.iR=0,this.hR="word",this.oR=0,this.mre="auto",this.Cre=1,this.gre=null,this.Sre="",this.yre=!1,this.oZt=!1,this.aZt=null,this.cZt=-1,this.uZt=-1,this.fZt=0,this.Tre=h.Cn(h.l1.bS,this.gf.JS(),{timeout:5}),this.Tre.DR=()=>this.gf.XL(),this._re=()=>this.Ere(),this.Are=!1,i){this.Sf=i[k],this.tZt=!!i[l],this.fre=i[m],this.dre=i[n],this.pre=i[o],this.Kw=!!i[p],this.zw=!!i[q],this.sR=i[s],this.iR=i[t],this.hR=D[i[u]],this.oR=i[v],this.Ire(this.gf.XV(i[w]));const a=i[r];this.Ay.ea(a[0],a[1],a[2]),this.BL().eB(i[x]),this.oZt=!!i[z]}this.wre(),this.mZt()}gn(){this.Ire(null),this.CZt(),this.aZt&&(this.aZt.gn(),this.aZt=null),this.Tre.gn(),this.Tre=null,super.gn()}wre(){const t=this.Tre;t._f(this.Sf),t.kR(this.tZt),this.Tre.Uw()&&this.gre?this.Tre.Cm(this.hN().s$t(this.gre)):this.Tre.Cm(null),t.BR("nearest"!==this.gf.pD()),t.$R(this.fre),t.HR(this.pre),t.YR(this.Kw),t.KR(this.zw),t.My(this.Ay),t.sM(A[this.sR]),t.rM(B[this.iR]),t.hM(this.hR),t.aM(C[this.oR])}TZt(){let t=this.BL(),e=(this.Tre.WR(this.dre),this.Tre.VR(t.Cxt()),t.$L()),s;"auto"===this.mre?s=e.IK(t.d4()):"fixed"===this.mre&&(s=this.Cre),t.I5()&&s!==this.Tre.fM()&&t.yGt(!0),this.Tre.uM(t.Sm(),t.vm(),s)}Ire(t){t&&(t.sq()||t.$F().constructor!==h.E7.qrt)||t!==this.gre&&(this.gre&&this.gre.zf().removeEventListener("animationframeimagechange",this._re),this.gre=t,this.gre&&this.gre.zf().addEventListener("animationframeimagechange",this._re),this.wre(),this.yre=!1,this.gf.XL())}Ere(){this.gf.i$t(this.gre),this.gf.XL(),this.Are=!0}mZt(){if(this.oZt){let t=this.Sf;this.tZt&&(t=h.Br.om(t)),this.aZt?this.aZt._f(t):this.aZt=h.Cn(h.Cf,this.gf,t)}else this.aZt&&(this.aZt.gn(),this.aZt=null)}wT(t){const e=this.BL(),s=(this.TZt(),this.Are&&(this.Are=!1,this.Tre.Uw())&&this.gre&&this.Tre.Cm(this.hN().s$t(this.gre)),this.Tre.z_());if(s){const i=e.$L();if(0===e.yk()&&0===i.yk()&&0===e.d4()&&!e.I5()&&i.Vq()){const r=e.S4(),[n,h]=i.UB(r.hh(),r.oh()),[o,a]=i.UB(r.fh(),r.ph()),l=n-Math.round(n),c=h-Math.round(h),[u,f]=(E.set(n,h,o,a),E.offset(-l,-c),F.Pc(E),t.Tx(t.Bx()));this.gf.KN().ZH(t,u,f),t.zv(s),t.F2(F,this.Tre.UM()),i.tj(t)}else t.zv(s),e.I5()?this.wVt(e,t):this.RVt(e,t)}}RVt(t,e){let s=t.S4();this.gf.CD()&&(s=this.Rre(s)),e.F2(s,this.Tre.UM())}wVt(e,t){const s=e.SGt();if(e.TGt()){e.Jxt(E,F,!1);let t=F;this.gf.CD()&&(t=this.Rre(t)),s.IT(e.w5(),t,this.Tre.UM()),e.yGt(!1)}s.wT(t)}Rre(t){const e=t.hh()-Math.round(t.hh()),s=t.oh()-Math.round(t.oh());return 0==e&&0==s?t:(F.I(t),F.offset(-e,-s),F)}BAt(){const t=this.Tre.z_();return t?[t.Sm(),t.vm()]:[100,100]}$At(){return this.Tre.UM()}VAt(){return!1}zy(){const t={t:this.Sf,c:this.Ay.toJSON(),fn:this.fre,ps:this.dre};return this.tZt&&(t.bbc=this.tZt),0!==this.sR&&(t.ha=this.sR),0!==this.iR&&(t.va=this.iR),"word"!==this.hR&&(t.wr=this.hR),0!==this.pre&&(t.lho=this.pre),this.Kw&&(t.b=this.Kw),this.zw&&(t.i=this.zw),-1!==this.uZt&&(t.tw={st:this.cZt,en:this.uZt,l:this.fZt}),this.gre&&(t.ioc=this.gre.cq()),"fixed"===this.mre&&(t.fs=this.Cre),t}Jy(t){if(this.CZt(),this.Sf=t.t,this.Ay.za(t.c),this.fre=t.fn,this.dre=t.ps,this.tZt=!!t.hasOwnProperty("bbc")&&t.bbc,this.sR=t.hasOwnProperty("ha")?t.ha:0,this.iR=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const e=t.wr;this.hR="boolean"==typeof e?e?"word":"character":e}else this.hR="word";if(this.pre=t.hasOwnProperty("lho")?t.lho:0,this.Kw=!!t.hasOwnProperty("b")&&t.b,this.zw=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.cZt=s.st,this.uZt=s.en,this.fZt=s.l}if(t.hasOwnProperty("ioc")){const i=this.hN().XV(t.ioc);i&&this.Ire(i)}else this.Ire(null);t.hasOwnProperty("fs")?(this.mre="fixed",this.Cre=t.fs):this.mre="auto",this.wre(),this.mZt(),this.yre=!1,-1!==this.uZt&&this._At()}Knt(e){switch(e){case k:return this.cM();case l:return this.tZt;case m:return this.Mre();case n:return this.bre();case o:return this.vZt();case p:return this.vre();case q:return this.xre();case r:return j[0]=this.Ay.ma(),j[1]=this.Ay.Ca(),j[2]=this.Ay.ga(),j;case s:return this.xZt();case t:return this.GZt();case u:return this.PZt();case z:return this.jZt()}}eht(e,i){switch(e){case k:this.OZt(i);break;case l:this.tZt!==!!i&&(this.tZt=!!i,this.wre());break;case m:this.Gre(i);break;case n:this.Pre(i);break;case o:this.NZt(i);break;case p:this.Ore(i);break;case q:this.Dre(i);break;case r:const h=this.Ay,a=i;h.ma()===a[0]&&h.Ca()===a[1]&&h.ga()===a[2]||(this.Ay.ea(a[0],a[1],a[2]),this.wre());break;case s:this.FZt(i);break;case t:this.kZt(i);break;case u:this.BZt(i)}}RAt(t,e,s,i){0===e&&0===s&&0===i||t===r&&(this.Ay.ra(e,s,i),this.wre())}OZt(t){this.Sf!==t&&(this.Sf=t,this.Tre._f(t),this.mZt(),this.yre=!1,this.gf.XL())}cM(){return this.Sf}$Zt(t,e){this.TZt(),this.OZt(t),this.cZt=this.gf.JD(),this.uZt=this.cZt+e/this.aU().c$(),this.fZt=this.Tre.CM(),this.Tre.JR(0),this._At()}CZt(){this.cZt=-1,this.uZt=-1,this.fZt=0,this.Tre.JR(-1),this.nAt()}WZt(){-1!==this.uZt&&(this.CZt(),this.P$(h.E7.Text.T7.UZt),this.gf.XL())}Gre(t){this.fre!==t&&(this.fre=t,this.Tre.$R(t),this.gf.XL())}Mre(){return this.fre}Ore(t){this.Kw!==(t=!!t)&&(this.Kw=t,this.Tre.YR(t),this.gf.XL())}vre(){return this.Kw}Dre(t){this.zw!==(t=!!t)&&(this.zw=t,this.Tre.KR(t),this.gf.XL())}xre(){return this.zw}Pre(t){this.dre!==t&&(this.dre=t,this.gf.XL())}bre(){return this.dre}Lre(t){this.Ay.Ea(t)||(this.Ay.fa(t),this.Tre.My(this.Ay),this.gf.XL())}Nre(){return this.Ay}NZt(t){this.pre!==t&&(this.pre=t,this.wre(),this.gf.XL())}vZt(){return this.pre}FZt(t){this.sR!==t&&(this.sR=t,this.wre(),this.gf.XL())}xZt(){return this.sR}kZt(t){this.iR!==t&&(this.iR=t,this.wre(),this.gf.XL())}GZt(){return this.iR}VZt(t){this.BZt(D[t])}BZt(t){this.hR!==t&&(this.hR=t,this.wre(),this.gf.XL())}PZt(){return this.hR}Fre(t){this.oR!==t&&(this.oR=t,this.wre(),this.gf.XL())}kre(){return this.oR}HZt(t){this.oZt=!!t,this.mZt()}jZt(){return this.oZt}Bre(t){this.mre!==t&&(this.mre=t,this.gf.XL())}$re(){return this.mre}Wre(t){this.Cre!==t&&(this.Cre=t,"fixed"===this.mre)&&this.gf.XL()}Ure(){return this.Cre}XZt(){return this.TZt(),this.Tre.dM()}YZt(){return this.TZt(),this.Tre.mM()}qZt(t,e){this.TZt();const s=this.BL(),i=(H.set(t-s.Fy(),e-s.$y()),H.rotate(-s.yk()),H.offset(s.Sm()*s.TW(),s.vm()*s.EW()),H.vt(s.Sm(),s.vm()),H.scale(this.Tre.Sm(),this.Tre.vm()),this.Tre.SM(H.fl(),H.pl()));if(i){const r=i.CC("tag");if(r)return r.param}return""}KZt(t,e,s){const i=this.qZt(e,s);return i&&h.Ir(t,i)}zZt(t,e){this.TZt(),e=Math.floor(e);const s=this.Tre.TM(t,e);if(!s)return null;const i=this.BL(),r=this.Tre.tM(),n=s.uC(),h=s.dC()-(s.vm()-s.Gm())*r,o=s.Sm()*r/this.Tre.Sm()*i.Sm(),a=s.vm()*r/this.Tre.vm()*i.vm();return H.set(n,h),H.vt(this.Tre.Sm(),this.Tre.vm()),H.scale(i.Sm(),i.vm()),H.offset(-i.Sm()*i.TW(),-i.vm()*i.EW()),H.rotate(i.yk()),H.offset(i.Fy(),i.$y()),{x:H.fl(),y:H.pl(),width:o,height:a}}JZt(t){return this.TZt(),this.Tre._M(t)}Vre(t){let e=I.get(t);return null===e?"":`</${e||"span"||"span"}>`}Hre(t,e){let s=I.get(t);if(null===s)return"";switch(s=s||"span",t){case"color":return`<${s} style="color: ${e}">`;case"font":return`<${s} style="font-family: '${e}'">`;case"opacity":return`<${s} style="opacity: ${e}%">`;case"size":return`<${s} style="font-size: ${e}pt">`;case"background":return`<${s} style="background-color: ${e}">`;case"hide":return`<${s} style="visibility: hidden">`;case"class":return`<${s} class="${e}">`;case"tag":return`<${s} data-tag="${e}">`;default:return`<${s}>`}}async jre(){if(!this.yre){let t=new h.Br(this.Sf,{Wp:!0}).Zp(),e=new Map,r='<span class="c3-text"',s=[],n=(s.push(`font-family: '${this.Mre()}';`),this.vre()&&s.push("font-weight: bold;"),this.xre()&&s.push("font-style: italic;"),"character"===this.PZt()&&s.push("word-break: break-all;"),r+=` style="${s.join(" ")}">`,this.gre?this.hN().s$t(this.gre):null);if(this.gre){const a=h.Cn(h.Ad),l=[],c=new Map;for(const f of t)if(f.Rm()){const d=f.EC(n);if(d){const p=d.i1(),m=p.gW().uwt();c.has(m)||(c.set(m,null),l.push(a.Eu(async()=>{const t=await m.qX();c.set(m,t)})))}}await Promise.all(l);const u=[];for(const C of t)if(C.Rm()){const g=C.EC(n);if(g){const S=g.i1(),y=S.gW().uwt();u.push(a.Eu(async()=>{const t=await S.gW().dwt(c.get(y));e.set(g,t)}))}}await Promise.all(u);for(const T of c.values())T instanceof ImageBitmap&&T.close&&T.close()}const o=new Map;for(const _ of t){let i=_.SC(),t=[...o.keys()];t.reverse();for(const E of t)i.has(E)&&i.get(E)===o.get(E)||(o.delete(E),r+=this.Vre(E));for(const[A,I]of i)o.has(A)||(o.set(A,I),r+=this.Hre(A,I));if(_.Im()&&(r+=h.op(h.np(_.Vm().join("")),"\n","<br>")),_.Rm()&&n){const w=_.EC(n);if(w){const R=e.get(w);if(R){let t=[],e="0.2em",s=i.get("iconoffsety");if(s){let t=s.trim();e=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+e),"nearest"===this.gf.pD()&&t.push("image-rendering: pixelated"),r+=`<img class="c3-text-icon" data-icon="${_._C()}" width="${w.Sm()}" height="${w.vm()}" style="${t.join(";")}" src="${R}">`}}}}const i=[...o.keys()];i.reverse();for(const M of i)r+=this.Vre(M);r+="</span>",this.Sre=r,this.yre=!0}return this.Sre}q9(){const e=this.gf.JD();if(e>=this.uZt)this.CZt(),this.P$(h.E7.Text.T7.UZt),this.gf.XL();else{let t=h.Fn(this.cZt,this.uZt,e,0,this.fZt);(t=Math.floor(t))!==this.Tre.ZR()&&(this.Tre.JR(t),this.gf.XL())}}wAt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.cM(),eHt:t=>this.OZt(t)},{name:t+".properties.font.name",value:this.Mre(),eHt:t=>this.Gre(t)},{name:t+".properties.size.name",value:this.bre(),eHt:t=>this.Pre(t)},{name:t+".properties.line-height.name",value:this.vZt(),eHt:t=>this.NZt(t)},{name:t+".properties.bold.name",value:this.vre(),eHt:t=>this.Ore(t)},{name:t+".properties.italic.name",value:this.xre(),eHt:t=>this.Dre(t)}]}]}FEt(){return self.Xre}},new WeakMap),K=new Map([["left",0],["center",1],["right",2]]),L=new Map([["top",0],["center",1],["bottom",2]]),M=["ltr","rtl"],N=new Set(["auto","fixed"]);self.Xre=class extends self.M5{constructor(){super(),J.set(this,self.jB.zB().P5())}get text(){return J.get(this).cM()}set text(t){i.Ri(t);const e=J.get(this);e.CZt(),e.OZt(t)}QZt(t,e){i.Ri(t),i.Ei(e);const s=J.get(this);s.CZt(),s.$Zt(t,e)}tQt(){J.get(this).WZt()}set ij(t){i.Ri(t),J.get(this).Gre(t)}get ij(){return J.get(this).Mre()}set nj(t){J.get(this).Ore(t)}get nj(){return J.get(this).vre()}set hj(t){J.get(this).Dre(t)}get hj(){return J.get(this).xre()}set rj(t){i.Ei(t),J.get(this).Pre(t)}get rj(){return J.get(this).bre()}set Yre(t){if(i.Wi(t),t.length<3)throw new Error("expected 3 elements");G.ea(t[0],t[1],t[2]),J.get(this).Lre(G)}get Yre(){const t=J.get(this).Nre();return[t.ma(),t.Ca(),t.ga()]}set lineHeight(t){i.Ei(t),J.get(this).NZt(t)}get lineHeight(){return J.get(this).vZt()}set lj(t){i.Ri(t);const e=K.get(t);if(void 0===e)throw new Error("invalid mode");J.get(this).FZt(e)}get lj(){return A[J.get(this).xZt()]}set verticalAlign(t){i.Ri(t);const e=L.get(t);if(void 0===e)throw new Error("invalid mode");J.get(this).kZt(e)}get verticalAlign(){return B[J.get(this).GZt()]}set cj(t){if(!D.includes(t))throw new Error("invalid mode");J.get(this).BZt(t)}get cj(){return J.get(this).PZt()}set uj(t){i.Ri(t);const e=M.indexOf(t);if(-1===e)throw new Error("invalid text direction");J.get(this).Fre(e)}get uj(){return M[J.get(this).kre()]}set iQt(t){J.get(this).HZt(!!t)}get iQt(){return J.get(this).jZt()}qre(t){i.Ei(t);const e=J.get(this);e.Bre("fixed"),e.Wre(t)}Kre(){J.get(this).Bre("auto")}get pj(){return J.get(this).XZt()}get mj(){return J.get(this).YZt()}rQt(){const t=J.get(this);return[t.XZt(),t.YZt()]}nQt(t,e,s){return i.Ri(t),i.Ei(e),i.Ei(s),J.get(this).KZt(t,e,s)}hQt(t,e){return i.Ei(t),i.Ei(e),J.get(this).qZt(t,e)}oQt(t,e=0){return i.Ri(t),i.Ei(e),J.get(this).zZt(t,e)}aQt(t){return i.Ri(t),J.get(this).JZt(t)}zre(t){const e=J.get(this),s=e.hN().FN(t);e.Ire(s)}Jre(){return J.get(this).jre()}}}{const Tb=self.Fe;Tb.E7.Text.T7={lQt(t,e){return e?this.Sf===t:Tb.Ir(this.Sf,t)},cQt(){return-1!==this.uZt},UZt(){return!0},uQt(t,e,s){return this.KZt(t,e,s)}}}{const Zb=self.Fe,$b=Zb.Cn(Zb.Ko);Zb.E7.Text.unt={_f(t){this.CZt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.OZt(t.toString())},fQt(t){this.CZt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.OZt(this.Sf+t)},dQt(t,e){this.CZt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.$Zt(t.toString(),e)},Zre(t,e){let s=!1,i=!1;switch(e){case 1:s=!0;break;case 2:i=!0;break;case 3:s=!0,i=!0}t===this.fre&&s===this.Kw&&i===this.zw||(this.Gre(t),this.Ore(s),this.Dre(i))},WR(t){this.Pre(t)},Qre(t){$b.Ga(t),$b.En(),this.Lre($b)},tne(t,e){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},DHt(t){this.BL().Ry(t),this.gf.XL()},pQt(){this.WZt()},HR(t){this.NZt(t)},TQt(t){this.FZt(t)},_Qt(t){this.kZt(t)},EQt(t){this.VZt(t)},aM(t){this.Fre(t)},ene(t){this.Ire(t)},sne(){return this.jre()},AQt(t){this.HZt(t)},ine(t,e){this.Bre(["auto","fixed"][t]),this.Wre(e)}}}{const v1=self.Fe;v1.E7.Text.fnt={Text(){return this.Sf},xQt(){return this.tZt?v1.Br.om(this.Sf):this.Sf},rne(){return this.fre},nne(){return this.dre},GQt(){return this.XZt()},PQt(){return this.YZt()},vQt(){return this.pre},OQt(t,e){return this.qZt(t,e)},DQt(t){return this.JZt(t)},LQt(t,e){const s=this.zZt(t,e);return s?s.x:0},NQt(t,e){const s=this.zZt(t,e);return s?s.y:0},FQt(t,e){const s=this.zZt(t,e);return s?s.width:0},kQt(t,e){const s=this.zZt(t,e);return s?s.height:0},hne(){return this.Sre}}}{const a=self.Fe;a.hlt.one=class extends a.dIt{constructor(t){super(t),this.ane=0,this.lne=0,this.cne=0,this.une=0}gn(){super.gn()}fne(t){this.ane=t}dne(){return this.ane}pne(t){this.lne=t}mne(){return this.lne}Cne(t){this.cne=t}gne(){return this.cne}Sne(t){this.une=t}yne(){return this.une}}}{const h=self.Fe;h.hlt.one.bRt=class extends h.SIt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const k=self.Fe,l=0;k.hlt.one.Instance=class extends k.TIt{constructor(t,e){super(t),this.tgt=!0,e&&(this.tgt=e[l]),this.tgt&&this.AAt()}gn(){super.gn()}zy(){const t=this.B5();return{e:this.tgt,smg:t.dne(),ss:t.mne(),se:t.gne(),smd:t.yne()}}Jy(t){const e=this.B5();e.fne(t.smg),e.pne(t.ss),e.Cne(t.se),e.Sne(t.smd),this.tgt=t.e,this.tgt?this.AAt():this.hAt()}YTt(t){this.tgt=!!t,this.tgt?this.AAt():this.hAt()}lu(){return this.tgt}TAt(){if(this.lu()){this.gf.XD(this.vs);let e=this.B5(),t=e.JF(),s=0,i=0,r=0;for(const l of t){const c=l.xbt(k.hlt.one);if(c&&c.P5().lu()){const u=l.BL();s+=u.Fy(),i+=u.$y(),++r}}let n=this.vs.BL()._L(),h=this.gf.KD(),o=0,a=0;if(h>=e.mne()&&h<e.gne()){let t=e.dne()*Math.min(this.gf.ZD(),1);0===e.yne()&&(t*=1-(h-e.mne())/(e.gne()-e.mne()));const f=this.gf.CL()*Math.PI*2,d=this.gf.CL()*t;o=Math.cos(f)*d,a=Math.sin(f)*d}n.Tk(s/r+o),n.Ek(i/r+a)}}Knt(t){if(t===l)return this.tgt}eht(t,e){t===l&&(this.tgt=!!e,this.tgt?this.AAt():this.hAt())}wAt(){return[{title:"$"+this.V5().lf(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this.lu(),eHt:t=>this.YTt(t)}]}]}}}{const O=self.Fe;O.hlt.one.T7={lu(){return this.lu()}}}{const P=self.Fe;P.hlt.one.unt={Tne(t,e,s){const i=this.B5();i.fne(t),i.pne(this.gf.KD()),i.Cne(this.gf.KD()+e),i.Sne(s)},X_t(t){this.YTt(0!==t)}}}{const V=self.Fe;V.hlt.one.fnt={}}{const a=self.Fe;a.hlt._ne=class extends a.dIt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.hlt._ne.bRt=class extends d.SIt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const g=self.Fe,h=self.Ye,i=self.F5,j=0,k=1,l=2,m=3,n=4,o=5,p=6,q=7,r=8,s=0,t=1,u=2,v=3,w=4,x=5,y=6,z=7,A=8,B=9,C=0,D=1,E=2,F=3,G=4,H=2*Math.PI,I=Math.PI/2,J=3*Math.PI/2,K=[0,1,8,3,4,2,5,6,9,7],L=(g.hlt._ne.Instance=class extends g.TIt{constructor(t,e){super(t),this.Ene=0,this.Ane=0,this.Ine=0,this.wne=0,this.Rne=0,this.tgt=!0,this.Mne=0,this.bne=0,this.vne=0,this.xne=0,this.Gne=0,this.Pne=0,this.wgt=0,this.One=0,this.Dne=0,this.Lne=0,this.Nne=0,e&&(this.Ane=K[e[j]],this.Ine=e[k],this.xne=this.gf.CL()*e[m],this.Mne=e[l],this.wne=e[l],this.wne+=this.xne,this.bne=e[n],0!==this.wne&&(this.Gne=this.gf.CL()*e[o],this.Ene=e[n]/this.wne*H,this.Ene+=this.Gne/this.wne*H),this.Pne=this.gf.CL()*e[q],this.vne=e[p],this.Rne=e[p],this.Rne+=this.Pne,this.tgt=!!e[r]),this.Ane===x&&(this.Rne=g.In(this.Rne)),this.KMt(),this.tgt&&this._At()}gn(){super.gn()}zy(){return{i:this.Ene,e:this.tgt,mv:this.Ane,w:this.Ine,p:this.wne,mag:this.Rne,iv:this.wgt,iv2:this.One,r:this.Nne,lkv:this.Dne,lkv2:this.Lne}}Jy(t){this.Ene=t.i,this.YTt(t.e),this.Ane=t.mv,this.Ine=t.w,this.wne=t.p,this.Rne=t.mag,this.wgt=t.iv,this.One=t.iv2,this.Nne=t.r,this.Dne=t.lkv,this.Lne=t.lkv2}KMt(){const e=this.vs.BL();switch(this.Ane){case s:this.wgt=e.Fy();break;case t:this.wgt=e.$y();break;case u:this.wgt=e.Sm(),this.Nne=e.vm()/e.Sm();break;case v:this.wgt=e.Sm();break;case w:this.wgt=e.vm();break;case x:this.wgt=e.yk();break;case y:this.wgt=e.jv();break;case z:this.wgt=0;break;case A:this.wgt=e.Fy(),this.One=e.$y();break;case B:this.wgt=e.Uy()}this.Dne=this.wgt,this.Lne=this.One}Fne(t){switch(t%=H,this.Ine){case C:return Math.sin(t);case D:return t<=I?t/I:t<=J?1-2*(t-I)/Math.PI:(t-J)/I-1;case E:return 2*t/H-1;case F:return-2*t/H+1;case G:return t<Math.PI?-1:1}return 0}q9(){const t=this.gf.XD(this.vs);this.tgt&&0!==t&&(0===this.wne?this.Ene=0:this.Ene=(this.Ene+t/this.wne*H)%H,this.kne())}kne(){const e=this.vs.BL();switch(this.Ane){case s:e.Fy()!==this.Dne&&(this.wgt+=e.Fy()-this.Dne),e.ky(this.wgt+this.Fne(this.Ene)*this.Rne),this.Dne=e.Fy();break;case t:e.$y()!==this.Dne&&(this.wgt+=e.$y()-this.Dne),e.Wy(this.wgt+this.Fne(this.Ene)*this.Rne),this.Dne=e.$y();break;case u:e.wm(this.wgt+this.Fne(this.Ene)*this.Rne),e.ym(e.Sm()*this.Nne);break;case v:e.wm(this.wgt+this.Fne(this.Ene)*this.Rne);break;case w:e.ym(this.wgt+this.Fne(this.Ene)*this.Rne);break;case x:e.yk()!==this.Dne&&(this.wgt=g.An(this.wgt+(e.yk()-this.Dne))),e.Sk(this.wgt+this.Fne(this.Ene)*this.Rne),this.Dne=e.yk();break;case y:e.Yv(this.wgt+this.Fne(this.Ene)*this.Rne/100);break;case A:e.Fy()!==this.Dne&&(this.wgt+=e.Fy()-this.Dne),e.$y()!==this.Lne&&(this.One+=e.$y()-this.Lne),e.ky(this.wgt+Math.cos(e.yk())*this.Fne(this.Ene)*this.Rne),e.Wy(this.One+Math.sin(e.yk())*this.Fne(this.Ene)*this.Rne),this.Dne=e.Fy(),this.Lne=e.$y();break;case B:e.Vy(this.wgt+this.Fne(this.Ene)*this.Rne)}e.o4()}Bne(t,e){}$ne(t){this.wne=t}Wne(){return this.wne}Une(t){this.Rne=t}Vne(t){5===this.Ane&&(t=g.In(t)),this.Une(t)}Hne(){return this.Rne}jne(){let t=this.Hne();return 5===this.Ane?g.wn(t):t}Xne(t){5===this.Ane&&5!==t&&(this.Rne=g.wn(this.Rne)),this.Ane=t,this.KMt()}Yne(){return this.Ane}qne(t){this.Ine=t}Kne(){return this.Ine}zne(t){this.Ene=g.En(t,0,2*Math.PI),this.kne()}Jne(){return this.Ene}YTt(t){this.tgt=!!t,this.tgt?this._At():this.nAt()}KTt(){return this.tgt}Knt(t){switch(t){case j:return this.Ane;case k:return this.Ine;case l:return this.Mne;case p:return this.vne;case r:return this.tgt}}eht(t,e){switch(t){case j:this.Ane=K[e],this.KMt();break;case k:this.Ine=e;break;case l:this.Mne=e,this.wne=this.Mne+this.xne,this.tgt||(0!==this.wne?(this.Ene=this.bne/this.wne*H,this.Ene+=this.Gne/this.wne*H):this.Ene=0);break;case p:this.vne=e,this.Rne=this.vne+this.Pne,this.Ane===x&&(this.Rne=g.In(this.Rne));break;case r:this.tgt=!!e}}wAt(){const t="behaviors.sin";return[{title:"$"+this.V5().lf(),properties:[{name:t+".properties.enabled.name",value:this.KTt(),eHt:t=>this.YTt(t)},{name:t+".properties.period.name",value:this.Wne(),eHt:t=>this.$ne(t)},{name:t+".properties.magnitude.name",value:this.jne(),eHt:t=>this.Vne(t)},{name:t+".debugger.value",value:this.Fne(this.Jne())*this.jne()}]}]}FEt(){return self.Zne}},new WeakMap),M=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],N=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.Zne=class extends i{constructor(){super(),L.set(this,i.zB().P5())}set Qne(t){h.Ei(t),L.get(this).$ne(t)}get Qne(){return L.get(this).Wne()}set the(t){h.Ei(t),L.get(this).Une(t)}get the(){return L.get(this).Hne()}set ehe(t){L.get(this).zne(t)}get ehe(){return L.get(this).Jne()}set she(t){h.Ri(t);const e=M.indexOf(t);if(-1===e)throw new Error("invalid movement");L.get(this).Xne(e)}get she(){return M[L.get(this).Yne()]}set ihe(t){h.Ri(t);const e=N.indexOf(t);if(-1===e)throw new Error("invalid wave");L.get(this).qne(e)}get ihe(){return N[L.get(this).Kne()]}get value(){const t=L.get(this);return t.Fne(t.Jne())*t.Hne()}rhe(){L.get(this).KMt()}set isEnabled(t){L.get(this).YTt(!!t)}get isEnabled(){return L.get(this).KTt()}}}{const va=self.Fe;va.hlt._ne.T7={lu(){return this.KTt()},nhe(t){return this.Yne()===t},hhe(t,e){return va.compare(this.Wne(),t,e)},ohe(t,e){return va.compare(this.jne(),t,e)},ahe(t){return this.Kne()===t}}}{const Ca=self.Fe;Ca.hlt._ne.unt={X_t(t){this.YTt(0!==t)},lhe(t){this.$ne(t)},che(t){this.Vne(t)},uhe(t){this.Xne(t)},fhe(t){this.Ine=t},dhe(t){const e=2*Math.PI;this.zne(t*e%e)},phe(){this.KMt()}}}{const Ka=self.Fe;Ka.hlt._ne.fnt={mhe(){return this.Jne()/(2*Math.PI)},Che(){return this.Wne()},ghe(){return this.jne()},She(){return this.Fne(this.Jne())*this.jne()}}}{const a=self.Fe;a.hlt.yhe=class extends a.dIt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.hlt.yhe.bRt=class extends d.SIt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const g=self.Fe,h=self.Ye,i=self.F5,j=0,k=1,l=2,m=(g.hlt.yhe.Instance=class extends g.TIt{constructor(t,e){super(t),this.mwt=0,this.zse=0,this.tgt=!0,e&&(this.mwt=g.In(e[j]),this.zse=g.In(e[k]),this.tgt=e[l]),this.tgt&&this._At()}gn(){super.gn()}The(t){this.mwt=t}_he(){return this.mwt}Ehe(t){this.zse=t}Ahe(){return this.zse}zy(){return{s:this.mwt,a:this.zse,e:this.tgt}}Jy(t){this.mwt=t.s,this.zse=t.a,this.YTt(t.e)}q9(){if(this.tgt){const t=this.gf.XD(this.vs);if(0!==t&&(0!==this.zse&&(this.mwt+=this.zse*t),0!==this.mwt)){const e=this.vs.BL();e.Sk(e.yk()+this.mwt*t),e.o4()}}}Knt(t){switch(t){case j:return g.wn(this._he());case k:return g.wn(this.Ahe());case l:return this.KTt()}}eht(t,e){switch(t){case j:this.The(g.In(e));break;case k:this.Ehe(g.In(e));break;case l:this.YTt(e)}}YTt(t){this.tgt=!!t,this.tgt?this._At():this.nAt()}KTt(){return this.tgt}wAt(){const t="behaviors.rotate";return[{title:"$"+this.V5().lf(),properties:[{name:t+".properties.speed.name",value:g.wn(this._he()),eHt:t=>this.The(g.In(t))},{name:t+".properties.acceleration.name",value:g.wn(this.Ahe()),eHt:t=>this.Ehe(g.In(t))},{name:t+".properties.enabled.name",value:this.KTt(),eHt:t=>this.YTt(t)}]}]}FEt(){return self.Ihe}},new WeakMap);self.Ihe=class extends i{constructor(){super(),m.set(this,i.zB().P5())}set speed(t){h.Ei(t),m.get(this).The(t)}get speed(){return m.get(this)._he()}set acceleration(t){h.Ei(t),m.get(this).Ehe(t)}get acceleration(){return m.get(this).Ahe()}get isEnabled(){return m.get(this).KTt()}set isEnabled(t){m.get(this).YTt(t)}}}{const H=self.Fe;H.hlt.yhe.T7={lu(){return this.KTt()}}}{const I=self.Fe;I.hlt.yhe.unt={whe(t){this.The(I.In(t))},Fte(t){this.Ehe(I.In(t))},X_t(t){this.YTt(t)}}}{const M=self.Fe;M.hlt.yhe.fnt={Rhe(){return M.wn(this._he())},Mhe(){return M.wn(this.Ahe())}}}{const a=self.Fe;a.hlt.bhe=class extends a.dIt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.hlt.bhe.bRt=class extends d.SIt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const g=self.Fe,h=self.Ye,i=self.F5,j=(g.hlt.bhe.vhe=class{constructor(t,e,s,i){this.Fft=g.Cn(g.G0),this.Fft.Set(t||0),this.xhe=g.Cn(g.G0),this.xhe.Set(e||0),this.Pwt=s||0,this.Ghe=!!i,this.Phe=!1}Ohe(){return this.Fft.rs()}HW(){return this.xhe.rs()}SW(){return this.Pwt}MXt(t){this.Phe=!!t}tU(){return this.Phe}Eu(t){this.Fft.Eu(t),this.xhe.Eu(t)}Dhe(){return this.Fft.rs()>=this.Pwt}p6(){if(this.Dhe()){if(!this.Ghe)return!0;this.Fft.L0(this.Pwt)}return!1}zy(){return{c:this.Fft.rs(),t:this.xhe.rs(),d:this.Pwt,r:this.Ghe,p:this.Phe}}Jy(t){this.Fft.Set(t.c),this.xhe.Set(t.t),this.Pwt=t.d,this.Ghe=!!t.r,this.Phe=!!t.p}},g.hlt.bhe.Instance=class extends g.TIt{constructor(t,e){super(t),this.Lhe=new Map}gn(){this.Lhe.clear(),super.gn()}Nhe(t,e,s){const i=new g.hlt.bhe.vhe(0,0,t,s);this.Lhe.set(e.toLowerCase(),i),this.Fhe()}khe(t){this.Lhe.delete(t.toLowerCase()),this.Fhe()}Bhe(){this.Lhe.clear(),this.Fhe()}$he(t){return this.Lhe.has(t.toLowerCase())}Whe(t){const e=this.Lhe.get(t.toLowerCase());return e?e.Ohe():0}Uhe(t){const e=this.Lhe.get(t.toLowerCase());return e?e.HW():0}Vhe(t){const e=this.Lhe.get(t.toLowerCase());return e?e.SW():0}Hhe(t){const e=this.Lhe.get(t.toLowerCase());return!!e&&e.Dhe()}jhe(t,e){const s=this.Lhe.get(t.toLowerCase());s&&s.MXt(e)}Xhe(t){const e=this.Lhe.get(t.toLowerCase());return!!e&&e.tU()}Yhe(t){for(const e of this.Lhe.values())e.MXt(t)}Fhe(){0<this.Lhe.size?(this._At(),this.AAt()):(this.nAt(),this.hAt())}zy(){const t={};for(const[e,s]of this.Lhe.entries())t[e]=s.zy();return t}Jy(t){this.Lhe.clear();for(const[e,s]of Object.entries(t)){const i=new g.hlt.bhe.vhe;i.Jy(s),this.Lhe.set(e,i)}this.Fhe()}q9(){const t=this.gf.XD(this.vs);for(const[e,s]of this.Lhe)s.tU()||(s.Eu(t),s.Dhe()&&this.tAt("timer",!1,{tag:e}))}TAt(){for(const[t,e]of this.Lhe.entries()){const s=e.p6();s&&this.Lhe.delete(t)}}wAt(){return[{title:"behaviors.timer.debugger.timers",properties:[...this.Lhe.entries()].map(t=>({name:"$"+t[0],value:Math.round(10*t[1].Ohe())/10+" / "+Math.round(10*t[1].SW())/10}))}]}FEt(){return self.qhe}},new WeakMap),k=["once","regular"];self.qhe=class extends i{constructor(){super(),j.set(this,i.zB().P5())}Khe(t,e,s="once"){h.Ei(t),h.Ri(e);const i=k.indexOf(s);if(-1===i)throw new Error("invalid type");j.get(this).Nhe(t,e,1===i)}zhe(t,e){h.Ri(t),j.get(this).jhe(t,!!e)}Jhe(t){j.get(this).Yhe(!!t)}Zhe(t){h.Ri(t),j.get(this).khe(t)}Qhe(){j.get(this).Bhe()}toe(t){return h.Ri(t),j.get(this).$he(t)}eoe(t){return h.Ri(t),j.get(this).Xhe(t)}getCurrentTime(t){return h.Ri(t),j.get(this).Whe(t)}soe(t){return h.Ri(t),j.get(this).Uhe(t)}ioe(t){return h.Ri(t),j.get(this).Vhe(t)}roe(t){return h.Ri(t),j.get(this).Hhe(t)}}}{const sa=self.Fe;sa.hlt.bhe.T7={noe(t){return this.Hhe(t)},hoe(t){return this.$he(t)},ooe(t){return this.Xhe(t)}}}{const wa=self.Fe;wa.hlt.bhe.unt={aoe(t,e,s){this.Nhe(t,s,1===e)},loe(t){this.khe(t)},coe(){this.Bhe()},uoe(t,e){this.jhe(t,0===e)},foe(t){this.Yhe(0===t)}}}{const Ea=self.Fe;Ea.hlt.bhe.fnt={o6t(t){return this.Whe(t)},doe(t){return this.Uhe(t)},QXt(t){return this.Vhe(t)}}}{const a=self.Fe;a.hlt.poe=class extends a.dIt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.hlt.poe.bRt=class extends d.SIt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const g=self.Fe;g.hlt.poe.Instance=class extends g.TIt{constructor(t,e){super(t),this.moe=null,this.Coe=-1,this.goe="",this.Soe=new Set,this.yoe=0,this.Toe=0,this._oe=0,this.Eoe=0,this.Aoe=0,this.Ioe=0,this.woe=0,this.Roe=0,this.Moe=0,this.boe=0,this.voe=!1,e&&(this.voe=e[0]);const s=this.gf.zf();this.b0=new g.w0(g.y0.I0(s,"instancedestroy",t=>this.Wjt(t.H5)),g.y0.I0(s,"afterload",t=>this.JJ()))}gn(){this.moe=null,super.gn()}xoe(t){t?(this.moe=t,this.AAt()):(this.moe=null,this.hAt())}Goe(t,e,s){if(t){const i=t.uTt(this.vs);if(i){this.goe=e,this.xoe(i);const r=this.vs.BL(),n=i.BL();if("properties"===this.goe){const h=this.Soe;h.clear();for(const o of s)h.add(o);this.Eoe=r.Fy()-n.Fy(),this.Aoe=r.$y()-n.$y(),this.Roe=r.yk()-n.yk(),this.boe=r.yk(),this.Moe=r.Uy()-n.Uy(),h.has("x")&&h.has("y")&&(this.Toe=g.bn(n.Fy(),n.$y(),r.Fy(),r.$y())-n.yk(),this.yoe=g.Rn(n.Fy(),n.$y(),r.Fy(),r.$y())),h.has("width-abs")?this.Ioe=r.Sm()-n.Sm():h.has("width-scale")&&(this.Ioe=r.Sm()/n.Sm()),h.has("height-abs")?this.woe=r.vm()-n.vm():h.has("height-scale")&&(this.woe=r.vm()/n.vm())}else this.yoe=g.Rn(n.Fy(),n.$y(),r.Fy(),r.$y())}}}zy(){const t=this.Soe,e=this.goe,s={uid:this.moe&&!this.moe.fV()?this.moe.o$():-1,m:e,d:this.voe};return"rope"===e||"bar"===e?s.pd=this.yoe:"properties"===e&&(s.ps=[...this.Soe],t.has("imagepoint")?s.ip=this._oe:t.has("x")&&t.has("y")?(s.pa=this.Toe,s.pd=this.yoe):(t.has("x")&&(s.dx=this.Eoe),t.has("y")&&(s.dy=this.Aoe)),t.has("angle")&&(s.da=this.Roe,s.lka=this.boe),(t.has("width-abs")||t.has("width-scale"))&&(s.dw=this.Ioe),(t.has("height-abs")||t.has("height-scale"))&&(s.dh=this.woe),t.has("z"))&&(s.dz=this.Moe),s}Jy(t){const e=t.m,s=this.Soe;if(s.clear(),this.Coe=t.uid,"number"==typeof e)this.Poe(t);else if(this.goe=e,t.hasOwnProperty("d")&&(this.voe=!!t.d),"rope"===e||"bar"===e)this.yoe=t.pd;else if("properties"===e){for(const i of t.ps)s.add(i);s.has("imagepoint")?this._oe=t.ip:s.has("x")&&s.has("y")?(this.Toe=t.pa,this.yoe=t.pd):(s.has("x")&&(this.Eoe=t.dx),s.has("y")&&(this.Aoe=t.dy)),s.has("angle")&&(this.Roe=t.da,this.boe=t.lka||0),(s.has("width-abs")||s.has("width-scale"))&&(this.Ioe=t.dw),(s.has("height-abs")||s.has("height-scale"))&&(this.woe=t.dh),s.has("z")&&(this.Moe=t.dz)}}Poe(t){const e=this.Soe,s=t.msa,i=t.tsa,r=t.pa,n=t.pd,h=t.m;switch(h){case 0:this.goe="properties",e.add("x").add("y").add("angle"),this.Toe=r,this.yoe=n,this.Roe=s-i,this.boe=t.lka;break;case 1:this.goe="properties",e.add("x").add("y"),this.Toe=r,this.yoe=n;break;case 2:this.goe="properties",e.add("angle"),this.Roe=s-i,this.boe=t.lka;break;case 3:this.goe="rope",this.yoe=t.pd;break;case 4:this.goe="bar",this.yoe=t.pd}}JJ(){-1===this.Coe?this.xoe(null):(this.xoe(this.gf.DL(this.Coe)),this.Coe=-1)}Wjt(t){this.moe===t&&(this.xoe(null),this.voe)&&this.gf.t$(this.vs)}TAt(){const n=this.moe;if(n&&!n.fV()){let s=n.BL(),t=this.vs,i=t.BL(),e=this.goe,r=!1;if("rope"===e||"bar"===e){const h=g.Rn(i.Fy(),i.$y(),s.Fy(),s.$y());if(h>this.yoe||"bar"===e&&h<this.yoe){const o=g.bn(s.Fy(),s.$y(),i.Fy(),i.$y());i.a4(s.Fy()+Math.cos(o)*this.yoe,s.$y()+Math.sin(o)*this.yoe),r=!0}}else{let t=this.Soe,e=0;if(t.has("imagepoint")){const[a,l]=n.Dyt(this._oe);i.Pyt(a,l)||(i.a4(a,l),r=!0)}else if(t.has("x")&&t.has("y")){const c=s.Fy()+Math.cos(s.yk()+this.Toe)*this.yoe,u=s.$y()+Math.sin(s.yk()+this.Toe)*this.yoe;i.Pyt(c,u)||(i.a4(c,u),r=!0)}else e=s.Fy()+this.Eoe,t.has("x")&&e!==i.Fy()&&(i.ky(e),r=!0),e=s.$y()+this.Aoe,t.has("y")&&e!==i.$y()&&(i.Wy(e),r=!0);t.has("angle")&&(this.boe!==i.yk()&&(this.Roe=g.An(this.Roe+(i.yk()-this.boe))),(e=g.An(s.yk()+this.Roe))!==i.yk()&&(i.Sk(e),r=!0),this.boe=i.yk()),t.has("width-abs")&&(e=s.Sm()+this.Ioe)!==i.Sm()&&(i.wm(e),r=!0),t.has("width-scale")&&(e=s.Sm()*this.Ioe)!==i.Sm()&&(i.wm(e),r=!0),t.has("height-abs")&&(e=s.vm()+this.woe)!==i.vm()&&(i.ym(e),r=!0),t.has("height-scale")&&(e=s.vm()*this.woe)!==i.vm()&&(i.ym(e),r=!0),t.has("z")&&(e=s.Uy()+this.Moe)!==i.Uy()&&(i.Vy(e),this.gf.XL())}r&&i.o4()}}wAt(){const t="behaviors.pin.debugger";return[{title:"$"+this.V5().lf(),properties:[{name:t+".is-pinned",value:!!this.moe},{name:t+".pinned-uid",value:this.moe?this.moe.o$():0}]}]}}}{const $=self.Fe;$.hlt.poe.T7={Ooe(){return!!this.moe},Doe(){return this.voe}}}{const _=self.Fe;_.hlt.poe.unt={Loe(t,e){this.Goe(t,0===e?"rope":"bar")},Noe(t,e,s,i,r,n,h){const o=[];e&&o.push("x"),s&&o.push("y"),i&&o.push("angle"),h&&o.push("z"),1===r?o.push("width-abs"):2===r&&o.push("width-scale"),1===n?o.push("height-abs"):2===n&&o.push("height-scale"),0!==o.length&&this.Goe(t,"properties",o)},Foe(t,e,s,i,r,n){const h=["imagepoint"];s&&h.push("angle"),n&&h.push("z"),1===i?h.push("width-abs"):2===i&&h.push("width-scale"),1===r?h.push("height-abs"):2===r&&h.push("height-scale"),this._oe=e,this.Goe(t,"properties",h)},koe(t){"rope"!==this.goe&&"bar"!==this.goe||(this.yoe=Math.max(t,0))},Boe(t){this.voe=t},$oe(){this.xoe(null),this.goe="",this.Soe.clear(),this._oe=""},poe(t,e){switch(e){case 0:this.Goe(t,"properties",["x","y","angle"]);break;case 1:this.Goe(t,"properties",["x","y"]);break;case 2:this.Goe(t,"properties",["angle"]);break;case 3:this.Goe(t,"rope");break;case 4:this.Goe(t,"bar")}}}}{const va=self.Fe;va.hlt.poe.fnt={Woe(){return this.moe?this.moe.o$():-1}}}{const a=self.Fe;a.hlt.Uoe=class extends a.dIt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.hlt.Uoe.bRt=class extends d.SIt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const g=self.Fe,h=self.Ye,i=self.F5,j=0,k=1,l=2,m=3,n=4,o=5,p=6,q=(g.hlt.Uoe.Instance=class extends g.TIt{constructor(t,e){super(t);const s=this.BL(),i=(this.mwt=0,this.Voe=0,this.Jo=0,this.Hoe=!1,this.joe=!1,this.Xoe=!1,this.tgt=!0,this.Eoe=0,this.Aoe=0,this.Rzt=s.Fy(),this.Mzt=s.$y(),this.boe=s.yk(),this.Yoe=0,this.qoe=Math.min(Math.abs(s.Sm()),Math.abs(s.vm())/2),this.Koe=!1,e&&(this.mwt=e[j],this.Voe=e[k],this.Jo=e[l],this.Hoe=!!e[m],this.joe=!!e[n],this.Xoe=!!e[o],this.tgt=!!e[p]),s.yk());this.Eoe=Math.cos(i)*this.mwt,this.Aoe=Math.sin(i)*this.mwt,this.tgt&&(this._At(),this.Hoe)&&this.RIt()}gn(){super.gn()}zy(){const t={dx:this.Eoe,dy:this.Aoe,lx:this.Rzt,ly:this.Mzt,lka:this.boe,t:this.Yoe};return 0!==this.Voe&&(t.acc=this.Voe),0!==this.Jo&&(t.g=this.Jo),this.Xoe&&(t.st=this.Xoe),this.tgt||(t.e=this.tgt),this.Hoe&&(t.bos=this.Hoe),this.joe&&(t.sa=this.joe),t}Jy(t){this.Eoe=t.dx,this.Aoe=t.dy,this.Rzt=t.lx,this.Mzt=t.ly,this.boe=t.lka,this.Yoe=t.t,this.Voe=t.hasOwnProperty("acc")?t.acc:0,this.Jo=t.hasOwnProperty("g")?t.g:0,this.Xoe=!!t.hasOwnProperty("st")&&t.st,this.Hoe=!!t.hasOwnProperty("bos")&&t.bos,this.joe=!!t.hasOwnProperty("sa")&&t.sa,this.YTt(!t.hasOwnProperty("e")||t.e)}q9(){if(this.tgt){const r=this.gf.XD(this.vs),n=this.vs.BL();if(n.yk()!==this.boe){const t=n.yk();if(this.joe){const e=g.Rn(0,0,this.Eoe,this.Aoe);this.Eoe=Math.cos(t)*e,this.Aoe=Math.sin(t)*e}this.boe=t}let s=0,i=0;if(0!==this.Voe){let t=g.Rn(0,0,this.Eoe,this.Aoe),e;e=0===this.Eoe&&0===this.Aoe?n.yk():g.bn(0,0,this.Eoe,this.Aoe),t+=this.Voe*r,s=Math.cos(e)*this.Voe,i=Math.sin(e)*this.Voe,t<0&&(t=0,s=0,i=0),this.Eoe=Math.cos(e)*t,this.Aoe=Math.sin(e)*t}if(0!==this.Jo&&(this.Aoe+=this.Jo*r,i+=this.Jo),this.Rzt=n.Fy(),this.Mzt=n.$y(),0!==this.Eoe||0!==this.Aoe){const h=this.Eoe*r+.5*s*r*r,o=this.Aoe*r+.5*i*r*r,a=g.Rn(0,0,h,o);if(this.zoe(h,o,a),this.Yoe+=a,this.joe&&(0!=h||0!=o)){const l=g.bn(0,0,h,o);n.Sk(l),this.boe=n.yk()}n.o4()}}}zoe(t,e,s){const i=this.BL();if(!this.Xoe||s<=this.qoe)i.u4(t,e),i.o4(),this.Xoe&&this.P$(g.hlt.Uoe.T7.Joe);else{this.Koe=!1;const r=i.Fy(),n=i.$y(),h=r+t,o=n+e,a=g.bn(0,0,t,e),l=Math.cos(a)*this.qoe,c=Math.sin(a)*this.qoe,u=Math.floor(s/this.qoe);for(let t=1;t<=u;++t)if(i.a4(r+l*t,n+c*t),i.o4(),this.P$(g.hlt.Uoe.T7.Joe),this.vs.fV()||this.Koe)return;i.a4(h,o),i.o4(),this.P$(g.hlt.Uoe.T7.Joe)}}wIt(){if(this.tgt&&this.Hoe&&(0!==this.Eoe||0!==this.Aoe)){const t=this.gf.XD(this.vs),e=this.vs.BL(),s=this.gf.eD(),i=s.GN(this.vs);if(i){s.CPt(this.vs,i);const r=g.Rn(0,0,this.Eoe,this.Aoe),n=s.DPt(this.vs,this.Rzt,this.Mzt);this.Eoe=Math.cos(n)*r,this.Aoe=Math.sin(n)*r,e.u4(this.Eoe*t,this.Aoe*t),e.o4(),this.joe&&(e.Sk(n),this.boe=e.yk(),e.o4()),s.xPt(this.vs,this.Eoe/r,this.Aoe/r,Math.max(2.5*r*t,30))||s.OPt(this.vs,100)}}}Knt(t){switch(t){case j:return this._he();case k:return this.Ahe();case l:return this.Zoe();case n:return this.joe;case o:return this.Xoe;case p:return this.KTt()}}eht(t,e){switch(t){case j:this.The(e);break;case k:this.Voe=e;break;case l:this.Jo=e;break;case n:this.joe=!!e;break;case o:this.Xoe=!!e;break;case p:this.YTt(!!e)}}The(t){const e=g.bn(0,0,this.Eoe,this.Aoe);this.Eoe=Math.cos(e)*t,this.Aoe=Math.sin(e)*t}_he(){return g.jn(g.Rn(0,0,this.Eoe,this.Aoe),6)}Ehe(t){this.Voe=t}Ahe(){return this.Voe}Qoe(t){this.Jo=t}Zoe(){return this.Jo}tae(t){const e=g.Rn(0,0,this.Eoe,this.Aoe);this.Eoe=Math.cos(t)*e,this.Aoe=Math.sin(t)*e}eae(){return g.bn(0,0,this.Eoe,this.Aoe)}sae(t){this.Hoe!==(t=!!t)&&(this.Hoe=t,this.tgt)&&(this.Hoe?this.RIt():this.EIt())}iae(){return this.Hoe}rae(t){this.Yoe=t}nae(){return this.Yoe}YTt(t){this.tgt=!!t,this.tgt?(this._At(),this.Hoe&&this.RIt()):(this.nAt(),this.EIt())}KTt(){return this.tgt}wAt(){const t="behaviors.bullet";return[{title:"$"+this.V5().lf(),properties:[{name:t+".debugger.vector-x",value:this.Eoe,eHt:t=>this.Eoe=t},{name:t+".debugger.vector-y",value:this.Aoe,eHt:t=>this.Aoe=t},{name:t+".properties.speed.name",value:this._he(),eHt:t=>this.The(t)},{name:t+".debugger.angle-of-motion",value:g.wn(this.eae())},{name:t+".properties.gravity.name",value:this.Zoe(),eHt:t=>this.Qoe(t)},{name:t+".properties.acceleration.name",value:this.Ahe(),eHt:t=>this.Ehe(t)},{name:t+".debugger.distance-travelled",value:this.nae()},{name:t+".properties.enabled.name",value:this.KTt(),eHt:t=>this.YTt(t)}]}]}FEt(){return self.hae}},new WeakMap);self.hae=class extends i{constructor(){super(),q.set(this,i.zB().P5())}get speed(){return q.get(this)._he()}set speed(t){h.Ei(t),q.get(this).The(t)}get acceleration(){return q.get(this).Ahe()}set acceleration(t){h.Ei(t),q.get(this).Ehe(t)}get qee(){return q.get(this).Zoe()}set qee(t){h.Ei(t),q.get(this).Qoe(t)}get oae(){return q.get(this).eae()}set oae(t){h.Ei(t),q.get(this).tae(t)}get aae(){return q.get(this).iae()}set aae(t){q.get(this).sae(!!t)}get lae(){return q.get(this).nae()}set lae(t){h.Ei(t),q.get(this).rae(t)}get isEnabled(){return q.get(this).KTt()}set isEnabled(t){q.get(this).YTt(t)}}}{const Ca=self.Fe;Ca.hlt.Uoe.T7={cae(t,e){const s=Math.hypot(this.Eoe,this.Aoe);return Ca.compare(s,t,e)},uae(t,e){return Ca.compare(this.nae(),t,e)},Joe(){return!0},lu(){return this.KTt()}}}{const Ia=self.Fe;Ia.hlt.Uoe.unt={whe(t){this.The(t)},Fte(t){this.Ehe(t)},kte(t){this.Qoe(t)},fae(t){this.tae(Ia.In(t))},WP(t){if(t){const e=t.uTt(this.vs);if(e){const s=this.vs.BL(),i=this.gf.eD(),r=this.gf.XD(this.vs),n=Ia.Rn(0,0,this.Eoe,this.Aoe),h=i.DPt(this.vs,this.Rzt,this.Mzt,e);this.Eoe=Math.cos(h)*n,this.Aoe=Math.sin(h)*n,s.u4(this.Eoe*r,this.Aoe*r),s.o4(),this.joe&&(s.Sk(h),this.boe=s.yk(),s.o4()),0!==n&&(this.Hoe?i.xPt(this.vs,this.Eoe/n,this.Aoe/n,Math.max(2.5*n*r,30))||i.OPt(this.vs,100):i.vPt(this.vs,this.Eoe/n,this.Aoe/n,Math.max(2.5*n*r,30),e))}}},dae(t){this.sae(t)},pae(t){this.rae(t)},X_t(t){this.YTt(t)},mae(){this.Koe=!0}}}{const Xa=self.Fe;Xa.hlt.Uoe.fnt={Rhe(){return this._he()},Mhe(){return this.Ahe()},Cae(){return Xa.wn(this.eae())},gae(){return this.nae()},Rse(){return this.Zoe()}}}{const a=self.Fe;a.hlt.QB=class extends a.dIt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.hlt.QB.bRt=class extends d.SIt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const g=self.Fe;g.hlt.QB.Instance=class extends g.TIt{constructor(t,e){super(t),this._At()}gn(){super.gn()}q9(){const t=this.vs.BL(),e=t.C4(),s=t._L();(e.Ol()<0||e.Dl()<0||e.Gl()>s.Sm()||e.Pl()>s.vm())&&this.gf.t$(this.vs)}}}{const n=self.Fe;n.hlt.QB.T7={}}{const o=self.Fe;o.hlt.QB.unt={}}{const p=self.Fe;p.hlt.QB.fnt={}}{const a=self.Fe;a.hlt.nlt=class extends a.dIt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.hlt.nlt.bRt=class extends d.SIt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const g=self.Fe,h=g.hlt.nlt,i=0;h.Instance=class extends g.TIt{constructor(t,e){super(t),this.Sae=!1,this.Kc=!0,e&&(this.Sae=!1,this.Kc=!!e[i]),this.yae=new Map,this.Tae=[],this._ae=new Map,this.Eae=null,this.Aae=null,this.Iae=null,this.wae=null,this.Rae="",this.Mae=[],this.zJ=t=>this.JJ(),this.hN().zf().addEventListener("afterload",this.zJ)}gn(){this.hN().zf().removeEventListener("afterload",this.zJ),this.zJ=null,this.Eae&&(this.bae(this.Eae),this.Eae=null),this.vae(),this.xae=null,this.Gae(),this.Tae=null,this.Pae(),this._ae=null,this.Mae=null,super.gn()}flt(t){this.Mae.push(t)}dlt(){this.Mae.pop()}Oae(){return this.Mae[this.Mae.length-1]}X_t(t){this.Kc=!!t,t?this._ae&&this._ae.size&&this.AAt():this.hAt();for(const e of this.Dae())t?this.Lae(e)&&e.$W():((e.IsPlaying()||e.Htt())&&this.Nae(e),e.BW());t&&this.Gae()}lu(){return this.Kc}Nae(t){this.Tae.push(t)}Lae(t){return this.Tae.includes(t)}Gae(){g.Vh(this.Tae)}Fae(){return this.Eae}ast(){const t=this.j5();return!!t&&!t.fV()}kae(t,e,s=!1){const i=e?this.Bae(e,s):this.Dae(s);if(i&&i.length)for(const r of i)if(r.WW(t))return r}$ae(t,e){for(const s of this.yae.values())for(const i of s)if(!i.FW()&&i.WW(t)&&e(i))return!0;for(const r of this._ae.values())for(const n of r)if(!n.FW()&&n.WW(t)&&e(n))return!0;return!1}Wae(t){for(const e of this.yae.values())for(const s of e)if(!s.FW()&&t(s))return!0;for(const i of this._ae.values())for(const r of i)if(!r.FW()&&t(r))return!0;return!1}Uae(t,e){return this.kae(t,e,!0)}*Vae(t,e,s=!1){const i=e?this.Bae(e,s):this.Dae(s);if(i&&i.length)for(const r of i)r.WW(t)&&(yield r)}*Hae(t,e){yield*this.Vae(t,e,!0)}Bae(s,t){if(t){let t=this.yae.get(s),e=this._ae.get(s);return(t=t||[]).concat(e||[]).filter(t=>t).filter(t=>!t.FW())}{let t=this.yae.get(s);return(t=t||[]).filter(t=>t).filter(t=>!t.FW())}}Dae(t){if(t){const e=[...this.yae.values()].flat(),s=[...this._ae.values()].flat();return e.concat(s).filter(t=>t).filter(t=>!t.FW())}{const i=[...this.yae.values()].flat();return i.filter(t=>t).filter(t=>!t.FW())}}jae(){return this.Dae(!0)}zy(t=0){return{s:!1,e:!!this.Kc,at:this.Xae(),dt:this.Yae(),wt:this.qae(),ft:this.Kae()}}Jy(t,e="full"){t&&(this.Aae=t.at,this.Iae=t.dt,this.wae=t.wt,this.Rae=t.ft,this.Sae=!1,this.Kc=!!t.e,"state"===e)&&this.JJ()}JJ(){const t=this.hN().Ttt();if(this.zae(this.Aae,this.yae,t),this.Iae){g.Vh(this.Tae);for(const e of this.Iae)this.Jae(this.Tae,e,t)}this.zae(this.wae,this._ae,t),this.Eae=this.Zae(this.Rae,t),this.Kc?this._ae&&this._ae.size&&this.AAt():this.hAt()}zae(e,s,i){if(e)for(const r in e){let t=s.get(r);t?g.Vh(t):t=[];const n=e[r];for(const h of n){const o=this.Jae(t,h.name,i);if(o)this.Qae(h.name,h,i);else{const a=g.Hht.Clt({runtime:this.hN(),json:h});g.Hht.Rst(a,this.j5().o$()),a.Xat(t=>this.tle(t)),i.b9(a),this.Jae(t,a,i)}}s.set(r,t)}}Zae(t,e){return e.w9(t)}Jae(t,e,s){if("string"!=typeof e)return!!t.push(e);{const i=this.Zae(e,s);if(i)return!!t.push(i)}return!1}Qae(t,e,s){if("string"==typeof t){const i=this.Zae(t,s);i&&(i.x8(e),g.Hht.Rst(i,this.j5().o$()))}else t.x8(e),g.Hht.Rst(t,this.j5().o$())}Xae(){const t={};for(const[e,s]of this.yae)t[e]=s.filter(t=>!t.FW()).map(t=>t.v8());return t}Yae(){return this.Tae.filter(t=>!t.FW()).map(t=>t.lf())}qae(){const t={};for(const[e,s]of this._ae)t[e]=s.map(t=>t.v8());return t}Kae(){return this.Eae?this.Eae.lf():""}TAt(){this.Pae()}ele(t){const e=h.ile.sle(t.property,t._lt,t.Elt,t.ease,t.resultMode,this.j5()),s=h.nle.rle(t.property),i=(h.nle.hle(s)||this.ole(t.property),g.Hht.Clt({runtime:this.hN(),id:s,tags:t.tags,time:t.time,H5:this.j5(),Slt:!!t.Slt,loop:!!t.loop,pingPong:!!t.pingPong,repeatCount:t.repeatCount,initialValueMode:t.initialValueMode,glt:e}));return i.Xat(t=>this.tle(t)),this.ale(i,t.property),i}lle(t){const e=t.fU();if(this.yae.has(e)){const s=this.yae.get(e);if(s){const i=s.indexOf(t);-1!==i&&s.splice(i,1)}}}nU(t,e=!1){this.lle(t),t.FW()||this.cle(t)||(t.BW(e),this.ule(t))}ole(t,e=!1){if(g.Ci(t)){const s=h.nle.rle(t);if(this.yae.has(s)){const i=this.yae.get(s),r=this.Fae();for(const n of i)n===r||n.FW()||this.cle(n)||(n.BW(e),n.gn());g.Vh(i)}}else{const o=this.Fae();for(const a of this.Dae())a===o||a.FW()||this.cle(a)||(a.BW(e),a.gn());for(const l of this.yae.keys())g.Vh(this.yae.get(l)),this.yae.delete(l);this.yae.clear()}}bae(t){this.nU(t,!0)}vae(){this.ole(NaN,!0)}Knt(t){if(t===i)return this.Kc}eht(t,e){t===i&&(this.Kc=!!e)}fle(t){const e=t.aU(),s=e.Urt();for(const i of s){const r=i.V5();if(r.zRt()===this.constructor)return r}}P$(t,e,s,i){return this.gf?super.P$(t):e.P$(t,s,i)}tle(t){this.Eae=t,h.T7.dle(t);let e,s;if(this.hN())e=this.vs,s=this.gf,this.P$(h.T7.ple),this.P$(h.T7.mle),this.nU(t);else{if(!(e=t.aU()))return;if(e&&e.fV())return;s=e.hN();const i=this.fle(t);this.P$(h.T7.ple,s,e,i),this.P$(h.T7.mle,s,e,i),t.BW()}this.Eae=null,h.T7.dle(null),t.cU()&&s.t$(e)}ale(t,e){const s=h.nle.rle(e),i=(this.yae.has(s)||this.yae.set(s,[]),this.yae.get(s));i.push(t)}ule(t){const e=t.fU();this._ae.has(e)||this._ae.set(e,[]),this._ae.get(e).push(t),this.IAt()||this.AAt()}cle(t){const e=t.fU();return!!this._ae.has(e)&&this._ae.get(e).includes(t)}Pae(){if(this._ae.size){for(const t of this._ae.values()){for(const e of t)e.FW()||e.gn();g.Vh(t)}this._ae.clear(),this.IAt()&&this.hAt()}}wAt(){return[{title:"$"+this.V5().lf(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this.lu(),eHt:t=>this.X_t(t)}]}]}FEt(){return self.Cle}}}{let M0=self.Fe,s=null;M0.hlt.nlt.T7={rlt(){return!0},olt(t){const e=this.Oae();return!!e&&e.WW(t)},llt(t){const e=this.Oae();return!!e&&(e.Dtt()===t||2===t)},clt(t,e){const s=this.Oae();return!!s&&(s.Dtt()===e||2===e)&&s.WW(t)},dle(t){s=t},ple(t){return s.WW(t)},mle(){return!0},IsPlaying(t){return this.$ae(t,M0.Hht.IsPlaying)},fXt(){return this.Wae(M0.Hht.IsPlaying)},tU(t){return this.$ae(t,M0.Hht.tU)},gle(){return this.Wae(M0.Hht.tU)},oW(t,e){return 0===e?this.$ae(t,M0.Hht.plt):1===e&&this.$ae(t,M0.Hht.mlt)},Sle(t){return 0===t?this.Wae(M0.Hht.plt):1===t&&this.Wae(M0.Hht.mlt)}}}{const ab=self.Fe,bb=self.wu,cb=ab.hlt.nlt;cb.unt={X_t(t){this.X_t(!!t)},async yle(...t){if(this.lu()&&this.ast()){const e=this.ele(cb._le.Tle(this,...t));e.Play()&&await e.ZW()}},async Ele(...t){if(this.lu()&&this.ast()){const e=this.ele(cb._le.Ale(this,...t));e.Play()&&await e.ZW()}},async Ile(...t){if(this.lu()&&this.ast()){const e=this.ele(cb._le.wle(this,...t));e.Play()&&await e.ZW()}},Rle(t){if(this.lu()&&this.ast())for(const e of this.Vae(t))e.BW()},Mle(){if(this.lu()&&this.ast())for(const t of this.Dae())t.BW()},ble(t){if(this.lu()&&this.ast())for(const e of this.Vae(t))e.$W()},vle(){if(this.lu()&&this.ast())for(const t of this.Dae())t.$W()},xle(t){if(this.lu()&&this.ast())for(const e of this.Vae(t))this.nU(e)},Gle(){if(this.lu()&&this.ast())for(const t of this.Dae())this.nU(t)},Ple(t,e,s){if(this.lu()&&this.ast()){const i=ab.hlt.nlt.nle.Ole(e);for(const r of this.Vae(t))r.Jat([i]),r.Zat(s,i)}},Dle(t,e,s,i){if(this.lu()&&this.ast()){const r=ab.hlt.nlt.nle.Lle(e);for(const n of this.Vae(t))n.Jat(r),n.Zat(s,r[0]),n.Zat(i,r[1])}},Nle(t,e){if(this.lu()&&this.ast())for(const s of this.Vae(t,"value"))s.Kat(e,"value")},Fle(t,e){if(this.lu()&&this.ast())for(const s of this.Vae(t,"value"))s.Jat(["value"]),s.Zat(e,"value")},kle(t,e){if(this.lu()&&this.ast()){const s=bb.Uu(e);for(const i of this.Vae(t))i.oU(s)}},Ble(t){if(this.lu()&&this.ast()){const e=bb.Uu(t);for(const s of this.Dae())s.oU(e)}},$le(t,e){if(this.lu()&&this.ast())for(const s of this.Vae(t))s.UW(e)},Wle(t){if(this.lu()&&this.ast())for(const e of this.Dae())e.UW(t)},Ule(t,e){if(this.lu()&&this.ast())for(const s of this.Vae(t))s.KW(e)},Vle(t){if(this.lu()&&this.ast())for(const e of this.Dae())e.KW(t)},Hle(t,e){if(this.lu()&&this.ast())for(const s of this.Vae(t))s.uU(!!e)},jle(t){if(this.lu()&&this.ast())for(const e of this.Dae())e.uU(!!t)}}}{const e1=self.Fe;e1.hlt.nlt.fnt={Xle(t){const e=this.Uae(t);return e?e.GG():0},Yle(t){const e=this.Uae(t);return e?e.GG()/e.HW():0},Tnt(t){const e=this.Uae(t);return e?e.zW():0},She(t){const e=this.Uae(t,"value");return e?e.pU("value").dU():0},t_t(){let t=this.Fae();return(t=t||this.Oae())?t.ktt():""}}}{const C33=self.Fe,Ease=self.wu,PAIR_PROPERTIES=["position","size","scale"],SINGLE_PROPERTIES=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],VALUE_PROPERTIES=["value"],PROPERTY_INDEX_TO_NAME=[].concat(PAIR_PROPERTIES).concat(SINGLE_PROPERTIES).concat(VALUE_PROPERTIES),PROPERTY_PAIR_TO_REAL_PROPERTIES={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},ALL_REAL_PROPERTIES=Object.assign({},PROPERTY_INDEX_TO_NAME.reduce((t,e)=>Object.assign({},t,{[e]:[e]}),{}),PROPERTY_PAIR_TO_REAL_PROPERTIES);C33.hlt.nlt.nle=class{constructor(){}static qle(){return[...Ease.Pu()]}static Uu(t){return[...Ease.Pu()][t]}static rle(t){return PROPERTY_INDEX_TO_NAME[t]}static Kle(t){return PROPERTY_INDEX_TO_NAME.indexOf(t)}static zle(t){return PAIR_PROPERTIES[t]}static Ole(t){return SINGLE_PROPERTIES[t]}static Jle(t){return VALUE_PROPERTIES[t]}static Zle(t){return PROPERTY_PAIR_TO_REAL_PROPERTIES[t]}static Lle(t){return C33.wi(t)?ALL_REAL_PROPERTIES[t]:ALL_REAL_PROPERTIES[PROPERTY_INDEX_TO_NAME[t]]}static Qle(t){return!!PROPERTY_PAIR_TO_REAL_PROPERTIES[t]}static tce(t){return"offsetColor"===t}static ece(t){return"offsetAngle"===t}static sce(t){return"offsetOpacity"===t}static hle(t){return"value"===t}}}{const C33=self.Fe,NAMESPACE=C33.hlt.nlt,TWEEN_CONFIGURATIONS=new Map;NAMESPACE.ile=class{constructor(){}static sle(t,e,s,i,r,n){0===TWEEN_CONFIGURATIONS.size&&this.ice();let h=NAMESPACE.nce.rce(t),o=TWEEN_CONFIGURATIONS.get(h);return C33.Ci(t)&&(t=NAMESPACE.nle.rle(t)),this.hce(o,t,e,s,i,r,n)}static oce(t,e){const s=C33.hlt.nlt.sle(t);return s.ace(e)}static ice(){const t=NAMESPACE.nce,e=NAMESPACE.lce;this.cce(t.uce,this.fce,e.dce),this.cce(t.COLOR,this.pce,e.mce),this.cce(t.Cce,this.gce,e.Sce),this.cce(t.yce,this.Tce,e.dce),this.cce(t._ce,this.Ece,e.dce)}static cce(t,e,s){TWEEN_CONFIGURATIONS.set(t,this.Ace(t,e,s))}static Ace(t,e,s){return{name:t,Ice:e,ace:s}}static hce(t,e,s,i,r,n,h){return t.Ice(e,t.ace(s),t.ace(i),r,n,h)}static fce(t,s,i,r,n,e){const h=NAMESPACE.nle.Zle(t);return h.map((t,e)=>({ylt:"world-instance",property:t,type:"float",valueType:"numeric",_lt:s[e],Elt:i[e],ease:NAMESPACE.nle.Uu(r),resultMode:n}))}static pce(t,e,s,i,r,n){return C33.E7.Text&&n.$F()instanceof C33.E7.Text?{ylt:"plugin",Tlt:[7],property:"color",type:"color",valueType:"color",_lt:e,Elt:s,ease:NAMESPACE.nle.Uu(i),resultMode:r}:{ylt:"world-instance",property:t,type:"color",valueType:"color",_lt:e,Elt:s,ease:NAMESPACE.nle.Uu(i),resultMode:r}}static gce(t,e,s,i,r,n){return{ylt:"world-instance",property:t,type:"angle",valueType:"angle",_lt:e,Elt:s,ease:NAMESPACE.nle.Uu(i),resultMode:r}}static Ece(t,e,s,i,r,n){return{ylt:"world-instance",property:t,type:"float",valueType:"numeric",_lt:e,Elt:s,ease:NAMESPACE.nle.Uu(i),resultMode:r}}static Tce(t,e,s,i,r,n){return{ylt:"value",property:t,type:"float",valueType:"numeric",_lt:e,Elt:s,ease:NAMESPACE.nle.Uu(i),resultMode:r}}}}{const C33=self.Fe,NAMESPACE=C33.hlt.nlt,COMMON_FIXED_ARGS={resultMode:"absolute"},COMMON_VARIABLE_ARGS=Object.assign({},COMMON_FIXED_ARGS,{tags:"",property:"",time:0,ease:0,Slt:0,loop:!1,pingPong:!1,repeatCount:1}),ONE_PROPERTY_ARGS=Object.assign({},COMMON_VARIABLE_ARGS,{initialValueMode:"current-state",_lt:0,Elt:0}),TWO_PROPERTIES_ARGS=Object.assign({},COMMON_VARIABLE_ARGS,{initialValueMode:"current-state",_lt:[0,0],Elt:[0,0]}),COLOR_PROPERTY_ARGS=Object.assign({},COMMON_VARIABLE_ARGS,{initialValueMode:"current-state",_lt:[0,0,0],Elt:[0,0,0]}),VALUE_PROPERTY_ARGS=Object.assign({},ONE_PROPERTY_ARGS,{initialValueMode:"start-value"}),X=0,Y=1,R=0,G=1,B=2;NAMESPACE._le=class{constructor(){}static wce(t,e,s,i,r,n,h,o){t.tags=e,t.time=s,t.ease=i,t.Slt=r,t.loop=n,t.pingPong=h,t.repeatCount=o}static Tle(t,e,s,i,r,n,h,o,a,l){const c="string"==typeof s?s:NAMESPACE.nle.Ole(s),u=NAMESPACE.nle.tce(c)?COLOR_PROPERTY_ARGS:ONE_PROPERTY_ARGS;return this.wce(u,e,r,n,h,o,a,l),NAMESPACE.nle.tce(c)?(COLOR_PROPERTY_ARGS.Elt[R]=C33.zn(i),COLOR_PROPERTY_ARGS.Elt[G]=C33.Jn(i),COLOR_PROPERTY_ARGS.Elt[B]=C33.Zn(i),COLOR_PROPERTY_ARGS.property=NAMESPACE.nle.Kle(c)):NAMESPACE.nle.sce(c)?ONE_PROPERTY_ARGS.Elt=i/100:ONE_PROPERTY_ARGS.Elt=i,u.property=NAMESPACE.nle.Kle(c),u}static Ale(t,e,s,i,r,n,h,o,a,l,c){this.wce(TWO_PROPERTIES_ARGS,e,n,h,o,a,l,c);const u="string"==typeof s?s:NAMESPACE.nle.zle(s);return TWO_PROPERTIES_ARGS.Elt[X]=i,TWO_PROPERTIES_ARGS.Elt[Y]=r,TWO_PROPERTIES_ARGS.property=NAMESPACE.nle.Kle(u),TWO_PROPERTIES_ARGS}static wle(t,e,s,i,r,n,h,o,a,l){return this.wce(VALUE_PROPERTY_ARGS,e,r,n,h,o,a,l),VALUE_PROPERTY_ARGS._lt=s,VALUE_PROPERTY_ARGS.Elt=i,VALUE_PROPERTY_ARGS.property=NAMESPACE.nle.Kle("value"),VALUE_PROPERTY_ARGS}}}{const C33=self.Fe,NAMESPACE=C33.hlt.nlt,TYPE_CHECK_OBJECTS=[];NAMESPACE.nce=class{constructor(){}static rce(t){if(0===TYPE_CHECK_OBJECTS.length){const e=TYPE_CHECK_OBJECTS;e.push({yb:NAMESPACE.nle.Qle,result:this.uce}),e.push({yb:NAMESPACE.nle.tce,result:this.COLOR}),e.push({yb:NAMESPACE.nle.ece,result:this.Cce}),e.push({yb:NAMESPACE.nle.hle,result:this.yce}),e.push({yb:()=>!0,result:this._ce})}C33.Ci(t)&&(t=C33.hlt.nlt.nle.rle(t));for(const s of TYPE_CHECK_OBJECTS)if(s.yb(t))return s.result}static get uce(){return"pair"}static get COLOR(){return"color"}static get Cce(){return"angle"}static get yce(){return"value"}static get _ce(){return"other"}}}{const C33=self.Fe,NAMESPACE=C33.hlt.nlt;NAMESPACE.lce=class{constructor(){}static Sce(t){const e=C33.In(parseFloat(t));return C33.An(e)}static mce(t){return t.slice(0)}static dce(t){return t}}}{let getIndexForEase2=function(t){C3X.Ri(t);let e=Ease.bu(t),s;if(-1===(s=e?Ease.Vu(e,null):Ease.Vu(t,null)))throw new Error(`invalid ease name '${t}'`);return s},ValidateTags2=function(t,e=!1){if(!(e&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};getIndexForEase=getIndexForEase2,ValidateTags=ValidateTags2;const C33=self.Fe,C3X=self.Ye,IBehaviorInstance=self.F5,Ease=self.wu,NAMESPACE=C33.hlt.nlt,map=new WeakMap,TWEEN_PROPERTIES=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),TWEEN_OPTS={tags:"",Rce:!1,loop:!1,pingPong:!1,repeatCount:1,_lt:0},I_TWEEN_OPTS={rU:getIndexForEase2};self.Cle=class extends IBehaviorInstance{constructor(){super(),map.set(this,IBehaviorInstance.zB().P5())}Mce(t,e,s,i,r){const n=map.get(this);if(!n.lu()||!n.ast())return null;const h=TWEEN_PROPERTIES.get(t);if(!h)throw new Error("invalid tween property");"one"===h.type||"value"===h.type?C3X.gi(e):(C3X.Wi(e),"two"===h.type?(C3X.gi(e[0]),C3X.gi(e[1])):"color"===h.type&&(C3X.gi(e[0]),C3X.gi(e[1]),C3X.gi(e[2]))),"angle"===t?e=C33.wn(e):"opacity"===t?e*=100:"color"===t&&(e=C33.Kn(e[0],e[1],e[2]));const o=getIndexForEase2(i);C3X.Ei(s),r=Object.assign({},TWEEN_OPTS,r),"value"===h.type&&C3X.gi(r._lt),ValidateTags2(r.tags,!0);let a;if("one"===h.type||"color"===h.type?a=n.ele(NAMESPACE._le.Tle(n,r.tags,h.name,e,s,o,!!r.Rce,!!r.loop,!!r.pingPong,r.repeatCount)):"two"===h.type?a=n.ele(NAMESPACE._le.Ale(n,r.tags,h.name,e[0],e[1],s,o,!!r.Rce,!!r.loop,!!r.pingPong,r.repeatCount)):"value"===h.type&&(a=n.ele(NAMESPACE._le.wle(n,r.tags,r._lt,e,s,o,!!r.Rce,!!r.loop,!!r.pingPong,r.repeatCount))),a.Play())return a.Alt(n,I_TWEEN_OPTS);throw new Error("failed to start tween")}*bce(){const t=map.get(this);for(const e of t.Dae())yield e.Alt(t,I_TWEEN_OPTS)}*vce(t){ValidateTags2(t);const e=map.get(this);for(const s of e.Vae(t))yield s.Alt(e,I_TWEEN_OPTS)}get isEnabled(){return map.get(this).lu()}set isEnabled(t){map.get(this).X_t(t)}}}{const a=self.Fe;a.hlt.xce=class extends a.dIt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.hlt.xce.bRt=class extends d.SIt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const g=self.Fe,h=self.Ye,i=self.F5,j=0,k=1,l=2,m=3,n=4,o=5,p=6,q=(g.hlt.xce.Instance=class extends g.TIt{constructor(t,e){super(t),this.mwt=0,this.zse=0,this.tgt=!0,this.Gce=0,this.Pce=0,this.Oce=0,this.Dce=!1,this.OQ=0,this.DQ=0,this.Lce=null,this.Nce=-1,this.Fce=0,this.kce=0,this.Bce=0,e&&(this.mwt=g.In(e[j]),this.zse=g.In(e[k]),this.tgt=e[p],this.Gce=e[l],this.Pce=e[m],this.Oce=g.In(e[n]),this.Dce=e[o]);const s=this.gf.zf(),i=(this.b0=new g.w0(g.y0.I0(s,"instancedestroy",t=>this.Wjt(t.H5)),g.y0.I0(s,"afterload",t=>this.JJ())),this.YTt(this.tgt),this.vs.BL());this.OQ=i.Fy(),this.DQ=i.$y(),this.Fce=i.yk()}gn(){this.Lce=null,super.gn()}The(t){this.mwt=t}_he(){return this.mwt}Ehe(t){this.zse=t}Ahe(){return this.zse}$ce(t,e){this.Lce=null,this.OQ=t,this.DQ=e}Wce(){return this.OQ}Uce(){return this.DQ}Vce(){const t=this.Gce*Math.cos(this.Fce),e=this.Pce*Math.sin(this.Fce);return Math.hypot(t,e)}Hce(t){this.Fce=t}jce(){return this.Fce}Xce(t){this.Oce=t}Yce(){return this.Oce}qce(t){this.Gce=t}Kce(){return this.Gce}zce(t){this.Pce=t}Jce(){return this.Pce}Zce(t){this.Dce=!!t}Qce(){return this.Dce}tue(t){this.kce=t}eue(){return this.kce}sue(t){this.Bce=t}iue(){return this.Bce}rue(t){if(!t||t.BL()){const e=this.tgt;e&&this.YTt(!1),this.Lce=t,e&&this.YTt(!0)}}YTt(t){this.tgt=!!t,this.nue()?this.tgt?this.AAt():this.hAt():this.tgt?this._At():this.nAt()}KTt(){return this.tgt}zy(){return{s:this.mwt,a:this.zse,r:this.Fce,e:this.tgt,a1:this.Pce,a2:this.Gce,oa:this.Oce,mr:this.Dce,tx:this.OQ,ty:this.DQ,tuid:this.Lce?this.Lce.o$():-1}}Jy(t){this.mwt=t.s,this.zse=t.a,this.Fce=t.r,this.Pce=t.a1,this.Gce=t.a2,this.Oce=t.oa,this.Dce=t.mr,this.OQ=t.tx,this.DQ=t.ty,this.Nce=t.tuid,this.YTt(t.e)}JJ(){-1===this.Nce?this.Lce=null:(this.Lce=this.gf.DL(this.Nce),this.Nce=-1)}Wjt(t){this.Lce===t&&(this.Lce=null)}hue(){if(this.oue){const t=this.vs.BL();this.OQ=t.Fy(),this.DQ=t.$y(),this.Fce=t.yk(),this.oue=!1}}aue(){if(this.Lce){const t=this.Lce.BL();this.OQ=t.Fy(),this.DQ=t.$y()}}nue(){return!!this.Lce}q9(){this.lue()}TAt(){this.lue()}lue(){if(this.tgt){const t=this.gf.XD(this.vs);if(0!==t){0!==this.zse&&(this.mwt+=this.zse*t);const e=this.vs.BL(),s=this.mwt*t,i=(this.Fce=g.An(this.Fce+s),this.kce+=s,this.Bce+=Math.abs(s),this.Gce*Math.cos(this.Fce)),r=this.Pce*Math.sin(this.Fce),n=Math.cos(this.Oce),h=Math.sin(this.Oce);this.aue(),e.a4(this.OQ+(i*n-r*h),this.DQ+(i*h+r*n)),this.Dce&&e.Sk(this.Fce+this.Oce+.5*Math.PI),e.o4()}}}Knt(t){switch(t){case j:return g.wn(this._he());case k:return g.wn(this.Ahe());case p:return this.KTt();case l:return this.Kce();case m:return this.Jce();case n:return g.wn(this.Yce());case o:return this.Qce()}}eht(t,e){switch(t){case j:this.The(g.In(e));break;case k:this.Ehe(g.In(e));break;case p:this.YTt(e);break;case l:this.qce(e);break;case m:this.zce(e);break;case n:this.Xce(g.In(e));break;case o:this.Zce(e)}}wAt(){const t="behaviors.orbit";return[{title:"$"+this.V5().lf(),properties:[{name:t+".debugger.rotation",value:g.wn(this.jce())},{name:t+".debugger.total-rotation",value:g.wn(this.eue())},{name:t+".debugger.total-absolute-rotation",value:g.wn(this.iue())},{name:t+".properties.speed.name",value:g.wn(this._he()),eHt:t=>this.The(g.In(t))},{name:t+".properties.acceleration.name",value:g.wn(this.Ahe()),eHt:t=>this.Ehe(g.In(t))},{name:t+".properties.primary-axis.name",value:this.Kce(),eHt:t=>this.qce(t)},{name:t+".properties.secondary-axis.name",value:this.Jce(),eHt:t=>this.zce(t)},{name:t+".properties.offset-angle.name",value:g.wn(this.Yce()),eHt:t=>this.Xce(g.In(t))},{name:t+".properties.match-rotation.name",value:this.Qce(),eHt:t=>this.Zce(!!t)},{name:t+".properties.enabled.name",value:this.KTt(),eHt:t=>this.YTt(t)}]}]}FEt(){return self.uue}},new WeakMap);self.uue=class extends i{constructor(){super(),q.set(this,i.zB().P5())}fue(t,e){h.Ei(t),h.Ei(e),q.get(this).$ce(t,e)}due(){const t=q.get(this);return[t.Wce(),t.Uce()]}pue(t){const e=q.get(this),s=t?e.hN().kL(t):null;e.rue(s)}set speed(t){h.Ei(t),q.get(this).The(t)}get speed(){return q.get(this)._he()}set acceleration(t){h.Ei(t),q.get(this).Ehe(t)}get acceleration(){return q.get(this).Ahe()}set rotation(t){h.Ei(t),q.get(this).Hce(t)}get rotation(){return q.get(this).jce()}set mue(t){h.Ei(t),q.get(this).Xce(t)}get mue(){return q.get(this).Yce()}set Cue(t){h.Ei(t),q.get(this).qce(t)}get Cue(){return q.get(this).Kce()}set gue(t){h.Ei(t),q.get(this).zce(t)}get gue(){return q.get(this).Jce()}set Sue(t){q.get(this).Zce(!!t)}get Sue(){return q.get(this).Qce()}set yue(t){h.Ei(t),q.get(this).tue(t)}get yue(){return q.get(this).eue()}set Tue(t){h.Ei(t),q.get(this).sue(t)}get Tue(){return q.get(this).iue()}_ue(){return q.get(this).Vce()}set isEnabled(t){q.get(this).YTt(t)}get isEnabled(){return q.get(this).KTt()}}}{const za=self.Fe;za.hlt.xce.T7={lu(){return this.KTt()}}}{const Aa=self.Fe;Aa.hlt.xce.unt={whe(t){this.The(Aa.In(t))},Fte(t){this.Ehe(Aa.In(t))},Eue(t,e){this.$ce(t,e)},Aue(t){this.Hce(Aa.In(t))},Iue(t){this.Xce(Aa.In(t))},wue(t,e){this.qce(t),this.zce(e)},Rue(t){this.Zce(!!t)},poe(t){if(t){const e=t.uTt(this.vs);e&&this.rue(e)}},$oe(){this.rue(null)},X_t(t){this.YTt(t)},Mue(){this.tue(0),this.sue(0)}}}{const Na=self.Fe;Na.hlt.xce.fnt={Rhe(){return Na.wn(this._he())},Mhe(){return Na.wn(this.Ahe())},bue(){return this.Kce()},vue(){return this.Jce()},Tht(){return Na.wn(this.Yce())},xue(){return Na.wn(this.jce())},Gue(){return Na.wn(this.eue())},Pue(){return Na.wn(this.iue())},Oue(){return this.Wce()},Due(){return this.Uce()},Lue(){return this.Vce()}}}{const a=self.Fe;a.hlt.Nue=class extends a.dIt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.hlt.Nue.bRt=class extends d.SIt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const g=self.Fe,h=self.Ye,i=self.F5,j=0,k=1,l=2,m=3,n=4,o=(g.hlt.Nue.Instance=class extends g.TIt{constructor(t,e){super(t),this.Fue=0,this.kue=0,this.Bue=0,this.voe=!0,this.$ue=!0,this.Wue=!1,this.Uue=0,this.Vue=g.Cn(g.G0),this.Hue=this.vs.BL().jv()||1,e&&(this.Fue=e[j],this.kue=e[k],this.Bue=e[l],this.voe=!!e[m],this.$ue=!!e[n],this.Uue=this.$ue?0:3),this.$ue&&(0===this.Fue?(this.Uue=1,0===this.kue&&(this.Uue=2)):(this.vs.BL().Yv(0),this.gf.XL())),this._At()}gn(){super.gn()}zy(){return{fit:this.Fue,wt:this.kue,fot:this.Bue,d:this.voe,s:this.Uue,st:this.Vue.rs(),mo:this.Hue}}Jy(t){this.Fue=t.fit,this.kue=t.wt,this.Bue=t.fot,this.voe=t.d,this.Uue=t.s,this.Vue.Set(t.st),this.Hue=t.mo,3===this.Uue?this.nAt():this._At()}q9(){const t=this.gf.XD(this.vs),e=(this.Vue.Eu(t),this.vs.BL());0===this.Uue&&(e.Yv(this.Vue.rs()/this.Fue*this.Hue),this.gf.XL(),e.jv()>=this.Hue)&&(e.Yv(this.Hue),this.Uue=1,this.Vue.g0(),this.tAt("fadeinend"),this.P$(g.hlt.Nue.T7.jue)),1===this.Uue&&this.Vue.rs()>=this.kue&&(this.Uue=2,this.Vue.g0(),this.tAt("waitend"),this.P$(g.hlt.Nue.T7.Xue)),2===this.Uue&&(0!==this.Bue?(e.Yv(this.Hue-this.Vue.rs()/this.Bue*this.Hue),this.gf.XL(),e.jv()<=0&&(this.Uue=3,this.Vue.g0(),this.tAt("fadeoutend"),this.P$(g.hlt.Nue.T7.Yue),this.voe)&&this.gf.t$(this.vs)):(this.Uue=3,this.Vue.g0())),3===this.Uue&&this.nAt()}que(){this.$ue||this.Wue||(this.Hue=this.vs.BL().jv()||1,this.Wue=!0),3===this.Uue&&this.Ox()}Kue(){this.Ox()}Ox(){this.Uue=0,this.Vue.g0(),0===this.Fue?(this.Uue=1,0===this.kue&&(this.Uue=2)):(this.vs.BL().Yv(0),this.gf.XL()),this._At()}zue(t){this.Fue=Math.max(t,0)}Jue(){return this.Fue}Zue(t){this.kue=Math.max(t,0)}Que(){return this.kue}tfe(t){this.Bue=Math.max(t,0)}efe(){return this.Bue}Knt(t){switch(t){case j:return this.Jue();case k:return this.Que();case l:return this.efe();case m:return this.voe}}eht(t,e){switch(t){case j:this.zue(e);break;case k:this.Zue(e);break;case l:this.tfe(e);break;case m:this.voe=!!e}}wAt(){const t="behaviors.fade";return[{title:"$"+this.V5().lf(),properties:[{name:t+".properties.fade-in-time.name",value:this.Jue(),eHt:t=>this.zue(t)},{name:t+".properties.wait-time.name",value:this.Que(),eHt:t=>this.Zue(t)},{name:t+".properties.fade-out-time.name",value:this.efe(),eHt:t=>this.tfe(t)},{name:t+".debugger.stage",value:[t+".debugger."+["fade-in","wait","fade-out","done"][this.Uue]]}]}]}FEt(){return self.sfe}},new WeakMap);self.sfe=class extends i{constructor(){super(),o.set(this,i.zB().P5())}rfe(){o.get(this).que()}nfe(){o.get(this).Kue()}set hfe(t){h.Ei(t),o.get(this).zue(t)}get hfe(){return o.get(this).Jue()}set ofe(t){h.Ei(t),o.get(this).Zue(t)}get ofe(){return o.get(this).Que()}set afe(t){h.Ei(t),o.get(this).tfe(t)}get afe(){return o.get(this).efe()}}}{const J=self.Fe;J.hlt.Nue.T7={Yue(){return!0},jue(){return!0},Xue(){return!0}}}{const K=self.Fe;K.hlt.Nue.unt={lfe(){this.que()},cfe(){this.Kue()},ufe(t){this.zue(t)},ffe(t){this.Zue(t)},dfe(t){this.tfe(t)}}}{const O=self.Fe;O.hlt.Nue.fnt={pfe(){return this.Jue()},mfe(){return this.Que()},Cfe(){return this.efe()}}}{const a=self.Fe;a.hlt.gfe=class extends a.dIt{constructor(t){super(t);const e=this.gf.zf();this.b0=new a.w0(a.y0.I0(e,"pointerdown",t=>this.l8t(t.data)),a.y0.I0(e,"pointermove",t=>this.c8t(t.data)),a.y0.I0(e,"pointerup",t=>this.u8t(t.data,!1)),a.y0.I0(e,"pointercancel",t=>this.u8t(t.data,!0)))}gn(){this.b0.gn(),this.b0=null,super.gn()}l8t(t){"mouse"===t.pointerType&&0!==t.button||this.Sfe(t.pointerId.toString(),t.pageX-this.gf.DB(),t.pageY-this.gf.LB())}c8t(t){0!=(1&t.lastButtons)&&0==(1&t.buttons)?this.yfe(t.pointerId.toString()):this.Tfe(t.pointerId.toString(),t.pageX-this.gf.DB(),t.pageY-this.gf.LB())}u8t(t,e){"mouse"===t.pointerType&&0!==t.button||this.yfe(t.pointerId.toString())}async Sfe(t,e,s){let i=this.JF(),r=null,n=null,h=0,o=0;for(const l of i){const c=l.ult(a.hlt.gfe);if(c.lu()&&!c._fe()&&!l.fV()){const u=l.BL(),f=u.$L(),[d,p]=f.OB(e,s,u.d4());if(f.cB()&&u.L4(d,p))if(r){const m=r.BL();(f.qO()>m.$L().qO()||f.qO()===m.$L().qO()&&u.WL()>m.WL())&&(r=l,n=c,h=d,o=p)}else r=l,n=c,h=d,o=p}}r&&await n.Efe(t,h,o)}Tfe(t,e,s){const i=this.JF();for(const r of i){const n=r.ult(a.hlt.gfe);if(n.lu()&&n._fe()&&(!n._fe()||n.Afe()===t)){const h=r.BL(),o=h.$L(),[l,c]=o.OB(e,s,h.d4());n.Ife(l,c)}}}async yfe(t){const e=this.JF();for(const s of e){const i=s.ult(a.hlt.gfe);i._fe()&&i.Afe()===t&&await i.wfe()}}}}{const P=self.Fe;P.hlt.gfe.bRt=class extends P.SIt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const S=self.Fe,T=self.Ye,U=self.F5,V=0,W=1,X=(S.hlt.gfe.Instance=class extends S.TIt{constructor(t,e){super(t),this.Rfe=!1,this.Eoe=0,this.Aoe=0,this.Mfe="<none>",this.bfe=0,this.tgt=!0,e&&(this.bfe=e[V],this.tgt=e[W])}gn(){super.gn()}zy(){return{a:this.bfe,e:this.tgt}}Jy(t){this.bfe=t.a,this.tgt=t.e,this.Rfe=!1}YTt(t){this.tgt=!!t,this.tgt||(this.Rfe=!1)}lu(){return this.tgt}vfe(t){this.bfe=t}xfe(){return this.bfe}Gfe(){this.Rfe&&this.wfe()}_fe(){return this.Rfe}Afe(){return this.Mfe}async Efe(t,e,s){const i=this.BL();this.Eoe=e-i.Fy(),this.Aoe=s-i.$y(),this.Rfe=!0,this.Mfe=t,this.tAt("dragstart"),await this.D$(S.hlt.gfe.T7.Pfe)}Ife(t,e){const s=this.BL(),i=t-this.Eoe,r=e-this.Aoe;0===this.bfe?s.Fy()===i&&s.$y()===r||(s.a4(i,r),s.o4()):1===this.bfe?s.Fy()!==i&&(s.ky(i),s.o4()):2===this.bfe&&s.$y()!==r&&(s.Wy(r),s.o4())}async wfe(){this.Rfe=!1,this.tAt("drop"),await this.D$(S.hlt.gfe.T7.Ofe)}Knt(t){switch(t){case V:return this.xfe();case W:return this.lu()}}eht(t,e){switch(t){case V:this.vfe(e);break;case W:this.YTt(!!e)}}wAt(){let t="behaviors.dragndrop",e=t+".properties.axes",s="";return 0===this.bfe?s=e+".items.both":1===this.bfe?s=e+".items.horizontal-only":2===this.bfe&&(s=e+".items.vertical-only"),[{title:"$"+this.V5().lf(),properties:[{name:t+".debugger.is-dragging",value:this._fe()},{name:e+".name",value:[s]},{name:t+".properties.enabled.name",value:this.lu(),eHt:t=>this.YTt(t)}]}]}FEt(){return self.Dfe}},new WeakMap),Y=["both","horizontal","vertical"];self.Dfe=class extends U{constructor(){super(),X.set(this,U.zB().P5())}set axes(t){const e=Y.indexOf(t);if(-1===e)throw new Error("invalid axes");X.get(this).vfe(e)}get axes(){return Y[X.get(this).xfe()]}Lfe(){X.get(this).Gfe()}get Nfe(){return X.get(this)._fe()}get isEnabled(){return X.get(this).lu()}set isEnabled(t){X.get(this).YTt(t)}}}{const xa=self.Fe;xa.hlt.gfe.T7={_fe(){return this._fe()},Pfe(){return!0},Ofe(){return!0},lu(){return this.lu()}}}{const ya=self.Fe;ya.hlt.gfe.unt={X_t(t){this.YTt(!!t)},Ffe(t){this.vfe(t)},kfe(){this.Gfe()}}}{const Ba=self.Fe;Ba.hlt.gfe.fnt={}}{const a=self.Fe;a.hlt.Bfe=class extends a.dIt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.hlt.Bfe.bRt=class extends d.SIt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const g=self.Fe,h=self.Ye,i=self.F5,j=(g.hlt.Bfe.Instance=class extends g.TIt{constructor(t,e){super(t),this.$fe=0,this.Wfe=0,this.Uue=0,this.Ufe=0,this.Vfe=0,this._At()}gn(){super.gn()}Hfe(t,e,s){this.$fe=t,this.Wfe=e,this.Uue=1,this.Ufe=e,this.Vfe=s,this.vs.BL().eB(!1),this.gf.XL()}jfe(){this.Vfe=0,this.vs.BL().eB(!0),this.gf.XL()}Xfe(){return 0<this.Vfe}zy(){return{on:this.$fe,off:this.Wfe,s:this.Uue,stl:this.Ufe,tl:this.Vfe}}Jy(t){this.$fe=t.on,this.Wfe=t.off,this.Uue=t.s,this.Ufe=t.stl,this.Vfe=null===t.tl?1/0:t.tl}q9(){if(!(this.Vfe<=0)){const t=this.gf.XD(this.vs);if(this.Vfe-=t,this.Vfe<=0)return this.Vfe=0,this.vs.BL().eB(!0),this.gf.XL(),this.tAt("flashend"),this.aAt(g.hlt.Bfe.T7.Yfe);this.Ufe-=t,this.Ufe<=0&&(0===this.Uue?(this.vs.BL().eB(!1),this.Uue=1,this.Ufe+=this.Wfe):(this.vs.BL().eB(!0),this.Uue=0,this.Ufe+=this.$fe),this.gf.XL())}}wAt(){const t="behaviors.flash.debugger";return[{title:"$"+this.V5().lf(),properties:[{name:t+".on-time",value:this.$fe,eHt:t=>this.$fe=t},{name:t+".off-time",value:this.Wfe,eHt:t=>this.Wfe=t},{name:t+".is-flashing",value:0<this.Vfe},{name:t+".time-left",value:this.Vfe}]}]}FEt(){return self.qfe}},new WeakMap);self.qfe=class extends i{constructor(){super(),j.set(this,i.zB().P5())}Kfe(t,e,s){h.Ei(t),h.Ei(e),h.Ei(s),j.get(this).Hfe(t,e,s)}stop(){j.get(this).jfe()}get zfe(){return j.get(this).Xfe()}}}{const z=self.Fe;z.hlt.Bfe.T7={Jfe(){return this.Xfe()},Yfe(){return!0}}}{const A=self.Fe;A.hlt.Bfe.unt={Bfe(t,e,s){this.Hfe(t,e,s)},Zfe(){this.jfe()}}}{const E=self.Fe;E.hlt.Bfe.fnt={}}{const a=self.Fe;a.hlt.wrap=class extends a.dIt{constructor(t){super(t)}gn(){super.gn()}}}{const d=self.Fe;d.hlt.wrap.bRt=class extends d.SIt{constructor(t){super(t)}gn(){super.gn()}NEt(){}}}{const g=self.Fe,h=0,i=new g.Rect;g.hlt.wrap.Instance=class extends g.TIt{constructor(t,e){super(t),this.goe=0,e&&(this.goe=e[h]),this._At()}gn(){super.gn()}zy(){return{m:this.goe}}Jy(t){this.goe=t.m}q9(){const t=this.vs.BL(),e=t.$L(),s=e._L(),r=t.C4();0===this.goe?i.set(0,0,s.Sm(),s.vm()):i.I(e.GB()),r.Ol()<i.Gl()?(t.ky(i.Ol()-1+(t.Fy()-r.Gl())),t.o4()):r.Gl()>i.Ol()?(t.ky(i.Gl()+1-(r.Ol()-t.Fy())),t.o4()):r.Dl()<i.Pl()?(t.Wy(i.Dl()-1+(t.$y()-r.Pl())),t.o4()):r.Pl()>i.Dl()&&(t.Wy(i.Pl()+1-(r.Dl()-t.$y())),t.o4())}Knt(t){if(t===h)return this.goe}eht(t,e){t===h&&(this.goe=e)}}}{const u=self.Fe;u.hlt.wrap.T7={}}{const v=self.Fe;v.hlt.wrap.unt={}}{const w=self.Fe;w.hlt.wrap.fnt={}}{let unaryminus2=function(t){return"number"==typeof t?-t:t},bothNumbers2=function(t,e){return"number"==typeof t&&"number"==typeof e},add2=function(t,e){return bothNumbers2(t,e)?t+e:t},subtract2=function(t,e){return bothNumbers2(t,e)?t-e:t},multiply2=function(t,e){return bothNumbers2(t,e)?t*e:t},divide2=function(t,e){return bothNumbers2(t,e)?t/e:t},mod2=function(t,e){return bothNumbers2(t,e)?t%e:t},pow2=function(t,e){return bothNumbers2(t,e)?Math.pow(t,e):t},and2=function(s,i){if("string"!=typeof s&&"string"!=typeof i)return s&&i?1:0;{let t,e;return t="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,e="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,t+e}},or2=function(t,e){return bothNumbers2(t,e)?t||e?1:0:t};unaryminus=unaryminus2,bothNumbers=bothNumbers2,add=add2,subtract=subtract2,multiply=multiply2,divide=divide2,mod=mod2,pow=pow2,and=and2,or=or2;const C33=self.Fe;self.m2t=[()=>"continue",()=>"grayMask",t=>{const e=t.w2t(0).p2t();return()=>e.Fit()},()=>1,()=>2,()=>"hand",t=>{const e=t.w2t(0).jgt();return()=>e("player")/2-20},()=>5,()=>11,()=>8,()=>10,()=>18,()=>3,()=>21,()=>25,()=>20,()=>4,()=>0,()=>"ambient",()=>.01,t=>{const e=t.w2t(0).jgt();return()=>e("ui")-40},()=>"",()=>6,t=>{const e=t.w2t(0).jgt();return()=>e()},()=>"top",()=>319,()=>586,()=>321,()=>316,()=>585,t=>{const e=t.w2t(0);return()=>e.Jgt()},()=>"bored",()=>65,t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()-120*s()},()=>100,t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+120*s()},()=>"pause",()=>13,()=>.3,()=>"flash",()=>"sand",t=>{const e=t.w2t(0).jgt();return()=>e(.8,1.7)},t=>{const e=t.w2t(0).jgt();return()=>e(.8,1.2)},t=>{const e=t.w2t(0);return()=>e.e2t()+1},()=>300,()=>9,t=>{const e=t.w2t(0).jgt();return()=>e(300,700)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-30,30)},()=>30,t=>{const e=t.w2t(0),s=t.w2t(1),i=t.w2t(2),r=t.w2t(3);return()=>C33.wn(C33.bn(e.Jgt(),s.Jgt(),i.Jgt(),r.Jgt()))},()=>"fly",()=>-3,()=>1.5,()=>1.7,()=>.1,t=>{const e=t.w2t(0).jgt();return()=>e(1,1.5)},()=>"player",t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt("smoke")+s(-3,3)},()=>270,t=>{const e=t.w2t(0).jgt();return()=>e(1,3)},t=>{const e=t.w2t(0).jgt();return()=>e(10,30)},()=>"smoke",()=>.7,()=>"cool",()=>7,()=>.2,()=>"heat",t=>{const e=t.w2t(0);return()=>e.e2t()-40},()=>-5,t=>{const e=t.w2t(0).jgt();return()=>e(1,1.3)},t=>{const e=t.w2t(0).p2t();return()=>6-e.Fit()},t=>{const e=t.w2t(0).p2t();return()=>e.Fit()+60},()=>360,()=>.05,()=>15,t=>{const e=t.w2t(0).jgt(),s=t.w2t(1),i=t.w2t(2);return()=>e(255,s.e2t(),i.e2t())},()=>255,t=>{const e=t.w2t(0).jgt();return()=>50*e()},t=>{const e=t.w2t(0),s=t.w2t(1);return()=>e.l2t("cool")/s.l2t("cool")*255},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt(4)+s(-4,4)},t=>{const e=t.w2t(0).jgt();return()=>e(5,15)},()=>"steam",()=>1.1,t=>{const e=t.w2t(0);return()=>6+e.e2t()},t=>{const e=t.w2t(0);return()=>e.Jgt()-1},t=>{const e=t.w2t(0);return()=>e.Jgt()+1},t=>{const e=t.w2t(0).p2t();return()=>.9+e.Fit()/20},t=>{const e=t.w2t(0).jgt();return()=>e(-4,4)},t=>{const e=t.w2t(0);return()=>e.Jgt()-360},t=>{const e=t.w2t(0).jgt();return()=>e(3,3.1)},()=>"ui",t=>{const e=t.w2t(0).jgt();return()=>e(20,40)},()=>"enemySpawn",()=>"enemySpawnBase",t=>{const e=t.w2t(0).jgt();return()=>e("track1","track2")},()=>-100,()=>"gameMusic",()=>-15,t=>{const e=t.w2t(0).jgt();return()=>e(.1,.2)},t=>{const e=t.w2t(0).jgt();return()=>e(270,520)},t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt(),i=t.w2t(2).jgt();return()=>e(s("player")-15,i("player")+40)},t=>{const e=t.w2t(0).jgt();return()=>900*e()},()=>"blur",()=>"pos",()=>"scale",t=>{const e=t.w2t(0).jgt();return()=>e("casing1","casing2","casing3")},()=>-22,t=>{const e=t.w2t(0).jgt();return()=>e(.9,1)},t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt(),i=t.w2t(2).jgt();return()=>e(s(600,800),i(-800,-600))},t=>{const e=t.w2t(0).jgt();return()=>e(360)},t=>{const e=t.w2t(0).jgt();return()=>e("player")},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt("parts")+s(-10,10)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-11,11)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt("parts")+s(-15,15)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-22,22)},t=>{const e=t.w2t(0).jgt();return()=>e(5,20)},t=>{const e=t.w2t(0).jgt();return()=>e(10,20)},()=>2.4,()=>"grave",()=>"destroy",()=>"SaveData",t=>{const e=t.w2t(0);return()=>-1*e.l2t()},t=>{const e=t.w2t(0);return()=>e.l2t()},()=>70,t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>C33.Ft(e.l2t(),-70,3*s())},()=>-70,t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>C33.Ft(e.l2t(),70,3*s())},()=>280,t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.l2t()+300*s()},()=>-280,t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.l2t()-300*s()},t=>{const e=t.w2t(0).jgt();return()=>e(.03,.1)},t=>{const e=t.w2t(0).jgt();return()=>e(0,1)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-18,18)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-8,25)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-20,8)},t=>{const e=t.w2t(0).jgt();return()=>e(15,25)},t=>{const e=t.w2t(0).jgt();return()=>e(8,12)},()=>"Animation 2",t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>C33.Ft(e.Jgt(),100,7*s())},()=>.4,()=>"pistols",()=>.06,()=>"ultRed",()=>"ult",()=>60,t=>{const e=t.w2t(0).jgt();return()=>e(.8,1)},()=>.25,()=>"shotgun",t=>{const e=t.w2t(0).jgt();return()=>e(.01,.02)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-3,3)},()=>.005,t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-6,6)},t=>{const e=t.w2t(0).jgt();return()=>e(4,14)},t=>{const e=t.w2t(0).jgt();return()=>e(0,1,2)},t=>{const e=t.w2t(0);return()=>e.Jgt("coins")},t=>{const e=t.w2t(0);return()=>e.Jgt("bestScore")},t=>{const e=t.w2t(0);return()=>e.Jgt("pickedCharacterID")},t=>{const e=t.w2t(0);return()=>e.Jgt("pickedWeaponID")},t=>{const e=t.w2t(0);return()=>e.Jgt("kills")},t=>{const e=t.w2t(0);return()=>e.Jgt("pet")},t=>{const e=t.w2t(0);return()=>e.Jgt("characters")},t=>{const e=t.w2t(0);return()=>e.Jgt("weapons")},t=>{const e=t.w2t(0);return()=>e.Jgt("achivements")},t=>{const e=t.w2t(0);return()=>e.Jgt("iaps")},()=>"coins",t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.l2t()-5*s()},t=>{const e=t.w2t(0).jgt(),s=t.w2t(1),i=t.w2t(2),r=t.w2t(3),n=t.w2t(4),h=t.w2t(5),o=t.w2t(6).jgt();return()=>e(s.l2t(),C33.wn(C33.bn(i.Jgt(),r.Jgt(),n.Jgt(),h.Jgt())),20*o())},t=>{const e=t.w2t(0).jgt();return()=>e(1,1.1)},()=>"gold",()=>"green",t=>{const e=t.w2t(0);return()=>2*e.Jgt()},()=>"1",t=>{const e=t.w2t(0).jgt();return()=>e(30,50)},()=>-20,()=>"double",()=>2.5,()=>2e3,()=>"barrels",t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt(),i=t.w2t(2).jgt();return()=>e(s("player")+20,i("player")-20)},t=>{const e=t.w2t(0).jgt();return()=>e(25,40)},()=>90,t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt(),i=t.w2t(2).jgt(),r=t.w2t(3).jgt(),n=t.w2t(4).jgt();return()=>e(s(i("player"),540),r(680,n("player")-60))},t=>{const e=t.w2t(0);return()=>e.e2t()+39},t=>{const e=t.w2t(0);return()=>e.e2t()},t=>{const e=t.w2t(0).jgt();return()=>8*e()},()=>"Animation 1",t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(1,6))},t=>{const e=t.w2t(0);return()=>e.Jgt()-10},()=>1.8,t=>{const e=t.w2t(0).jgt(),s=t.w2t(1),i=t.w2t(2),r=t.w2t(3),n=t.w2t(4),h=t.w2t(5),o=t.w2t(6).jgt();return()=>e(s.l2t(),C33.wn(C33.bn(i.Jgt(),r.Jgt(),n.Jgt(),h.Jgt())),30*o())},()=>.15,()=>"clock",t=>{const e=t.w2t(0);return()=>e.Jgt(1)},t=>{const e=t.w2t(0).jgt();return()=>e("ui")-20},t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt();return()=>e("ui")-2-14*s()},t=>{const e=t.w2t(0).jgt();return()=>e(.05,.1)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-20,20)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-15,30)},t=>{const e=t.w2t(0).jgt();return()=>e(10,12)},t=>{const e=t.w2t(0).jgt();return()=>e(8,10)},t=>{const e=t.w2t(0).jgt();return()=>e(6,8)},t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(2))},t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(1,3))},t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt(),i=t.w2t(2).jgt();return()=>e(s("player")-80,i("player")+110)},t=>{const e=t.w2t(0).jgt();return()=>e("enemySniper","enemyArmor")},t=>{const e=t.w2t(0).jgt();return()=>e("enemySniper","enemyArmor","enemyKnife")},t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(3))},t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(2,4))},t=>{const e=t.w2t(0).jgt();return()=>e("enemySniper","enemyArmor","enemyKnife","enemyCart")},t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(3,5))},t=>{const e=t.w2t(0).jgt();return()=>e("enemySniper","enemyArmor","enemyKnife","enemyCart","enemyBoom")},t=>{const e=t.w2t(0).jgt();return()=>e("enemySniper","enemyArmor","enemyKnife","enemyCart","enemyBoom","enemyBuilder")},t=>{const e=t.w2t(0).jgt();return()=>e("enemySniper","enemyArmor","enemyKnife","enemyCart","enemyBoom","enemyBuilder","enemyRage")},t=>{const e=t.w2t(0).jgt();return()=>e("enemySniper","enemyArmor","enemyKnife","enemyCart","enemyBoom","enemyBuilder","enemyRage","enemyTrumpet")},t=>{const e=t.w2t(0).jgt();return()=>e("enemySniper","enemyArmor","enemyKnife","enemyCart","enemyBoom","enemyBuilder","enemyRage","enemyTrumpet","enemyCart2")},t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(4,6))},t=>{const e=t.w2t(0).jgt();return()=>e("enemySniper","enemyArmor","enemyKnife","enemyCart","enemyBoom","enemyBuilder","enemyRage","enemyTrumpet","enemyCart2","enemyVulture")},t=>{const e=t.w2t(0).jgt();return()=>e("enemySniper","enemyArmor","enemyKnife","enemyCart","enemyBoom","enemyBuilder","enemyRage","enemyTrumpet","enemyCart2","enemyVulture","enemyGuitar")},t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).p2t();return()=>Math.floor(e(1,3+s.Fit()-10))},t=>{const e=t.w2t(0).jgt();return()=>e("enemySniper","enemyArmor","enemyBoom","enemyBuilder","enemyRage","enemyTrumpet","enemyGuitar")},()=>12,()=>40,()=>340,t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(0,24))},()=>"enemyAction",()=>"shoot",()=>320,()=>.5,t=>{const e=t.w2t(0).jgt();return()=>e(.9,1.1)},()=>"build",t=>{const e=t.w2t(0),s=t.w2t(1),i=t.w2t(2),r=t.w2t(3);return()=>C33.Rn(e.Jgt(),s.Jgt(),i.Jgt(),r.Jgt())},()=>200,t=>{const e=t.w2t(0).jgt();return()=>e(2,4)},()=>3.5,t=>{const e=t.w2t(0),s=t.w2t(1),i=t.w2t(2),r=t.w2t(3);return()=>C33.Rn(e.Jgt(),s.Jgt(),i.Jgt(),r.Jgt()+25)},()=>150,()=>160,()=>2.3,t=>{const e=t.w2t(0).jgt();return()=>.08*e()},t=>{const e=t.w2t(0),s=t.w2t(1),i=t.w2t(2),r=t.w2t(3),n=t.w2t(4).jgt();return()=>C33.wn(C33.bn(e.Jgt(),s.Jgt(),i.Jgt(),r.Jgt()))+n(-15,15)},()=>80,()=>.8,()=>.9,t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt(),i=t.w2t(2).jgt();return()=>e(-s(10,20),i(10,20))},t=>{const e=t.w2t(0).jgt();return()=>e(30,100)},()=>-10,()=>1.6,t=>{const e=t.w2t(0);return()=>e.Jgt()+20},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-90,90)},t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt();return()=>e("player")-s(40,110)},()=>24,t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt();return()=>e("player")+s(40,110)},()=>14,()=>50,()=>"startSpeed",t=>{const e=t.w2t(0);return()=>e.i2t()},()=>1.3,t=>{const e=t.w2t(0);return()=>e.l2t("startSpeed")},t=>{const e=t.w2t(0);return()=>2.1*e.i2t()},()=>"alert",()=>"enemyDamage",t=>{const e=t.w2t(0).jgt();return()=>e(.8,.9)},()=>"helmet",t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.l2t()+s(-40,40)},()=>1.2,()=>.35,()=>"Brightness",t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(1,4))},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-5,5)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-10,10)},t=>{const e=t.w2t(0).jgt();return()=>e(15,35)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.l2t()-180+s(-50,50)},t=>{const e=t.w2t(0).jgt();return()=>e(15,30)},()=>-2,()=>26,()=>28,t=>{const e=t.w2t(0).p2t();return()=>.8+.1*e.Fit()},t=>{const e=t.w2t(0).jgt();return()=>347+e(-6,6)},()=>36,t=>{const e=t.w2t(0);return()=>1===e.e2t()?1:0},t=>{const e=t.w2t(0);return()=>e.l2t("bright")},()=>9999,()=>1e4,t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-20,30)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-5,30)},t=>{const e=t.w2t(0).jgt();return()=>e(.7,.8)},t=>{const e=t.w2t(0);return()=>e.l2t("")},t=>{const e=t.w2t(0);return()=>-3*e.l2t("")},t=>{const e=t.w2t(0),s=t.w2t(1).p2t();return()=>e.i2t()*s.Fit()},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-8,8)},t=>{const e=t.w2t(0),s=t.w2t(1),i=t.w2t(2).jgt();return()=>e.Jgt()-s.Jgt()/2+i(-8,8)},t=>{const e=t.w2t(0),s=t.w2t(1).p2t();return()=>2+e.i2t()*(s.Fit()/30)},()=>.45,()=>"bright",t=>{const e=t.w2t(0);return()=>e.i2t()+100},()=>.099,t=>{const e=t.w2t(0).jgt();return()=>e(-500,500)},t=>{const e=t.w2t(0).jgt();return()=>e("enemyDeath1","enemydeath2","enemyDeath3")},t=>{const e=t.w2t(0).jgt();return()=>e(1.3,1.4)},t=>{const e=t.w2t(0).jgt();return()=>e(1.2,1.3)},t=>{const e=t.w2t(0).jgt();return()=>e(1.6,1.7)},()=>16,t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(101))},t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(0,5))},t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(4,7))},t=>{const e=t.w2t(0).jgt();return()=>e(5,7)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-15,15)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-15,0)},t=>{const e=t.w2t(0).jgt();return()=>e(240,300)},t=>{const e=t.w2t(0).jgt();return()=>e(4,15)},t=>{const e=t.w2t(0).jgt();return()=>e(40,80)},()=>"enemyMovement",t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>.3*e.e2t()*s()},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.e2t()*s()},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.e2t()*s()*.3},()=>159,t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>8*e.e2t()*s()*.3},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>8*e.e2t()*s()},t=>{const e=t.w2t(0).jgt();return()=>24*e()*.3},t=>{const e=t.w2t(0).jgt();return()=>24*e()},t=>{const e=t.w2t(0).jgt();return()=>16*e()*.3},t=>{const e=t.w2t(0).jgt();return()=>16*e()},t=>{const e=t.w2t(0).jgt();return()=>e(30,35)},()=>-400,()=>400,t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.l2t()+20*s()},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.l2t()-20*s()},t=>{const e=t.w2t(0).jgt();return()=>e()+.03},()=>"sMainMenu",()=>.001,t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(2,6))},t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt(),i=t.w2t(2).jgt();return()=>e(s("player"),i("player"))},t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(4,10))},t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt(),i=t.w2t(2).jgt();return()=>e(s(0),i(0))},t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(0,4))},t=>{const e=t.w2t(0).jgt();return()=>e(-80,200)},t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(2,5))},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-80,-200)},t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(0,2))},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-90,-180)},()=>"sGame",t=>{const e=t.w2t(0).jgt();return()=>e("ui")-26},t=>{const e=t.w2t(0).jgt();return()=>e("ui")+28},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(100,180)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(100,220)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(110,200)},t=>{const e=t.w2t(0).jgt();return()=>e(3,15)},t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt(),i=t.w2t(2).jgt();return()=>e(s("player")-20,i("player")+20)},t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt(),i=t.w2t(2).jgt();return()=>e(s("player")+10,i("player")-10)},t=>{const e=t.w2t(0).jgt();return()=>e(25,70)},t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt(),i=t.w2t(2).jgt(),r=t.w2t(3),n=t.w2t(4).jgt(),h=t.w2t(5).jgt(),o=t.w2t(6);return()=>e(s(i("player")+10,r.Jgt()-70),n(h("player")-10,o.Jgt()+70))},t=>{const e=t.w2t(0).jgt();return()=>e("player")+20},t=>{const e=t.w2t(0).jgt();return()=>e("player")-20},()=>-260,()=>180,t=>{const e=t.w2t(0).p2t();return()=>30*e.Fit()},t=>{const e=t.w2t(0).p2t();return()=>2+e.Fit()/60*30},t=>{const e=t.w2t(0).jgt();return()=>e(3,4)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-13,13)},()=>"tumble",t=>{const e=t.w2t(0).jgt();return()=>e(10,15)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt("parts")+s(-6,6)},t=>{const e=t.w2t(0).jgt();return()=>e(1,2)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-80,-160)},t=>{const e=t.w2t(0),s=t.w2t(1);return()=>e.Jgt()+s.Jgt()/2+2},()=>600,t=>{const e=t.w2t(0);return()=>e.Jgt(3)},t=>{const e=t.w2t(0);return()=>e.Jgt(2)},()=>"sEndMenu",()=>"sWeapon",()=>"sCharacter",()=>"sOptions",t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(5,7))},t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(5))},t=>{const e=t.w2t(0).jgt();return()=>e(10)},t=>{const e=t.w2t(0).jgt();return()=>e("player")+10},t=>{const e=t.w2t(0).jgt();return()=>e("player")-10},()=>"buttons",()=>"layerTransfer",t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt(),i=t.w2t(2).jgt();return()=>e(s("layerTransfer"),i("layerTransfer"))},t=>{const e=t.w2t(0).jgt();return()=>e(0,360)},()=>"SizeGrow",t=>{const e=t.w2t(0).jgt();return()=>e(.31,.4)},()=>"menuMusic",()=>"endMusic",()=>"randomCharacter",()=>.09,t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(26))},()=>"randomCharacterImage",()=>.11,t=>{const e=t.w2t(0).p2t();return()=>e.Fit()+1},()=>"randomWeapon",t=>{const e=t.w2t(0).jgt();return()=>Math.floor(e(20))},()=>"randomWeaponImage",()=>"Grayscale",t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()-s("player")+20},()=>"decor",t=>{const e=t.w2t(0),s=t.w2t(1);return()=>e.Jgt()-s.Jgt()/2},()=>"character",t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-50,50)},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-80,5)},t=>{const e=t.w2t(0).p2t();return()=>.6-(5-e.Fit())/10},()=>-1,()=>"timestamp",()=>"bestScore",()=>182,()=>93,t=>{const e=t.w2t(0);return()=>2.9*e.Jgt()},t=>{const e=t.w2t(0).jgt();return()=>e(.1,.3)},()=>"kills",()=>"achivements",()=>"soundsOn",()=>"musicOn",()=>22,()=>44,()=>"remove ads that appear randomly in the game",()=>"remove ads",()=>"gain permanent double coin bonus without watching ads",()=>"double coins",()=>"grants 2500 coins. can be obtained only once",()=>"starter bag",()=>"unlock new companion the duck",()=>"the duck",()=>"unlock new companion the pig",()=>"the pig",()=>"pet",()=>"thank you!",()=>2500,()=>"thank you! tap check mark to return to the crow",()=>"overlay",()=>"sold  ",()=>"purchase failed",()=>"iaps",()=>500,()=>1e3,()=>2999,()=>3e3,()=>4e3,()=>5e3,()=>17,()=>19,()=>2e4,t=>{const e=t.w2t(0).jgt();return()=>e("ui")+42},t=>{const e=t.w2t(0).jgt();return()=>e("ui")-38},t=>{const e=t.w2t(0).jgt();return()=>e("ui")-12},t=>{const e=t.w2t(0).jgt();return()=>e("ui")-21},t=>{const e=t.w2t(0);return()=>e.Jgt()-24},()=>"button",t=>{const e=t.w2t(0),s=t.w2t(1),i=t.w2t(2);return()=>e.Jgt()-24+(s.Jgt()-i.Jgt("fix"))},t=>{const e=t.w2t(0);return()=>e.Jgt()+12},t=>{const e=t.w2t(0),s=t.w2t(1);return()=>and2(e.Jgt(1,s.e2t())," ")},()=>"price",t=>{const e=t.w2t(0),s=t.w2t(1);return()=>e.Jgt()+s.Jgt()/2-4},t=>{const e=t.w2t(0),s=t.w2t(1);return()=>e.Jgt(1,s.e2t())},()=>"weapons",()=>"summary",t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt(0,s())},()=>"totalWeapon",t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-21,21)+20},t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-21,21)},t=>{const e=t.w2t(0).jgt();return()=>e(4,16)},()=>-717711365951487,()=>-717750023016447,()=>16777215,()=>.08,()=>1.4,()=>"pickedWeaponRandom",()=>"pickedWeaponID",t=>{const e=t.w2t(0),s=t.w2t(1);return()=>Math.round(Math.abs(e.e2t()-s.e2t()))},t=>{const e=t.w2t(0).jgt();return()=>60*e()},()=>1137,t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>20*e.e2t()*s()},()=>960,()=>1135,()=>23,()=>25e3,()=>"characters",()=>"totalCharacters",()=>"pickedCharacterRandom",()=>"pickedCharacterID",()=>840,()=>"credits",()=>"tutorial",t=>{const e=t.w2t(0),s=t.w2t(1).jgt();return()=>e.Jgt()+s(-70,-170)},t=>{const e=t.w2t(0).jgt();return()=>e("ui")+50},t=>{const e=t.w2t(0).jgt();return()=>e("player")+120},t=>{const e=t.w2t(0).jgt();return()=>e("player")-50},t=>{const e=t.w2t(0).jgt();return()=>e("ui")+120},t=>{const e=t.w2t(0).jgt();return()=>e("player")-30},t=>{const e=t.w2t(0);return()=>e.Jgt()-40},t=>{const e=t.w2t(0);return()=>e.Jgt()-30},t=>{const e=t.w2t(0);return()=>e.Jgt()+60},t=>{const e=t.w2t(0).jgt();return()=>e("player")-100},()=>"howdy! ",()=>"bandits will come soon! let me remind you of a couple of things.",()=>"swipe through holes in the cylinder to load bullets.",()=>"excellent!",()=>"now, wait until your gun points to a bottle, then tap.",()=>"you can see that your weapon now moves in a different direction.",()=>"don't be afraid to shoot space if the enemy is on the other side!",()=>"tap the cylinder if you need to reload your gun earlier.",()=>"shoot some more of those bottles!",()=>"marvelous!",()=>"if you hit 10 enemies without missing, you will have the opportunity to use your special ability!",t=>{const e=t.w2t(0);return()=>e.Jgt()+6},()=>"lines on the rock show how many enemies you hit in a row. i will help you a bit.",()=>"shoot 2 missing bottles in a row to unlock the special ability.",()=>"your special ability is ready. i have added more bottles. tap your character or the rock to use it!",t=>{const e=t.w2t(0).jgt(),s=t.w2t(1).jgt(),i=t.w2t(2).jgt();return()=>e(s("player")+50,i("player")-50)},t=>{const e=t.w2t(0).jgt(),s=t.w2t(1),i=t.w2t(2).jgt(),r=t.w2t(3),n=t.w2t(4).jgt();return()=>e(s.Jgt()+i(100,120),r.Jgt()+n(-80,-200))},()=>"one more thing.",()=>"you may encounter stronger enemies. hold the screen to shoot multiple bullets at one point and get rid of them.",()=>"be careful! using this technique too many times in a row might overheat your gun.",()=>"try to destroy that fence by holding the screen.",t=>{const e=t.w2t(0);return()=>e.Jgt()-80},()=>"bandits are coming. i think you are ready. good luck!",t=>{const e=t.w2t(0).jgt();return()=>e(-5,5)},t=>{const e=t.w2t(0).jgt();return()=>100*e()},()=>"OnlyLocalSaveData",()=>"moreGames",()=>"cactus",()=>"chili",()=>"privacyAccepted",()=>1/0]}}}),import_c3runtime=__toESM(require_c3runtime()),C32=self.Fe;self.Hkt=function(){return[C32.E7.qrt,C32.hlt.one,C32.hlt._ne,C32.E7.Audio,C32.E7.Ss,C32.E7.Keyboard,C32.E7.Gqt,C32.E7.EKt,C32.E7.Touch,C32.E7.Date,C32.E7.O7t,C32.hlt.yhe,C32.hlt.bhe,C32.hlt.poe,C32.hlt.Uoe,C32.hlt.QB,C32.hlt.nlt,C32.E7.mJt,C32.E7.H9t,C32.hlt.xce,C32.hlt.Nue,C32.hlt.gfe,C32.E7.ute,C32.E7.Oie,C32.hlt.Bfe,C32.E7.Text,C32.hlt.wrap,C32.E7._7.T7.y7,C32.E7._7.unt.n5t,C32.E7._7.unt.P5t,C32.E7.qrt.unt.iHt,C32.hlt.poe.unt.Foe,C32.hlt.bhe.unt.aoe,C32.E7.qrt.unt.wm,C32.E7._7.fnt.cUt,C32.E7.qrt.T7.yHt,C32.E7._7.T7.G4t,C32.E7.Audio.unt.Play,C32.E7._7.unt.Fh,C32.E7.qrt.unt.Gyt,C32.E7._7.fnt.oUt,C32.E7._7.fnt.aUt,C32.E7._7.T7.X4t,C32.E7.qrt.T7.zTt,C32.E7._7.fnt.xUt,C32.E7._7.T7.x4t,C32.E7._7.unt.l5t,C32.E7.mJt.unt.Yv,C32.E7._7.unt.f5t,C32.E7.qrt.unt.f_t,C32.E7.qrt.T7.iB,C32.E7.qrt.unt.Sk,C32.E7.qrt.fnt.k_t,C32.E7.qrt.T7.o_t,C32.hlt.bhe.T7.noe,C32.E7.qrt.unt.eB,C32.E7.qrt.unt.sHt,C32.E7.qrt.T7.ITt,C32.E7.qrt.T7.eTt,C32.E7.qrt.unt.Yv,C32.E7.qrt.fnt.Opacity,C32.E7._7.fnt.dt,C32.E7.Touch.T7.L8t,C32.E7.Touch.T7.N8t,C32.E7._7.T7.q4t,C32.E7.qrt.T7.JTt,C32.E7.qrt.unt.u_t,C32.hlt.one.unt.Tne,C32.hlt.yhe.unt.X_t,C32.E7.qrt.unt.RHt,C32.E7.qrt.fnt.R_t,C32.E7.qrt.fnt.M_t,C32.hlt.Nue.unt.ffe,C32.E7._7.fnt.random,C32.E7.Audio.unt.KW,C32.hlt.Uoe.unt.X_t,C32.hlt.Uoe.unt.fae,C32.E7._7.T7.H4t,C32.E7.qrt.unt.l_t,C32.hlt.Uoe.unt.whe,C32.E7.qrt.T7.N_t,C32.hlt.bhe.unt.loe,C32.hlt.nlt.unt.Ele,C32.E7.qrt.T7.kVt,C32.E7.qrt.unt.h_t,C32.E7._7.T7.E4t,C32.E7.qrt.fnt.WHt,C32.E7.qrt.fnt.UHt,C32.E7.qrt.unt.hHt,C32.hlt.bhe.T7.hoe,C32.E7.qrt.unt.c_t,C32.E7._7.unt.r5t,C32.E7._7.unt.s5t,C32.E7._7.T7._4t,C32.E7._7.T7.T4t,C32.E7.qrt.unt.iTt,C32.E7._7.fnt.$Ut,C32.E7.qrt.fnt.B_t,C32.E7._7.T7.ICt,C32.hlt.bhe.fnt.o6t,C32.hlt.bhe.fnt.QXt,C32.E7.Touch.T7._8t,C32.E7.Touch.T7.I8t,C32.E7._7.T7.Ed,C32.E7._7.T7.W4t,C32.E7._7.T7.b4t,C32.E7.Touch.fnt.Czt,C32.E7._7.T7.v4t,C32.E7._7.unt.i5t,C32.hlt._ne.unt.che,C32.hlt._ne.unt.X_t,C32.hlt.Nue.unt.dfe,C32.hlt.Nue.unt.ufe,C32.hlt.Nue.unt.lfe,C32.E7._7.unt.O5t,C32.E7.Audio.unt.BW,C32.E7.Audio.unt.gXt,C32.E7._7.fnt.Vgt,C32.E7.Audio.unt.EXt,C32.E7.Audio.unt.MXt,C32.E7._7.fnt.hUt,C32.hlt.yhe.T7.lu,C32.E7.qrt.unt.Zyt,C32.hlt.yhe.unt.whe,C32.hlt.Uoe.unt.Fte,C32.E7.qrt.T7.Ryt,C32.E7._7.fnt.nUt,C32.E7.qrt.T7.Myt,C32.E7.H9t.unt.eB,C32.E7.qrt.T7.ETt,C32.E7.Gqt.T7.jqt,C32.E7._7.unt.b5t,C32.E7.qrt.T7.BVt,C32.E7.qrt.unt.GHt,C32.E7.qrt.unt.d_t,C32.hlt.yhe.fnt.Rhe,C32.E7.qrt.T7.AHt,C32.E7.qrt.unt.cTt,C32.E7.mJt.fnt.Opacity,C32.E7._7.fnt.timescale,C32.E7.qrt.fnt.T_t,C32.E7._7.T7.$4t,C32.E7.qrt.unt.lTt,C32.hlt.nlt.unt.yle,C32.E7.qrt.unt.aTt,C32.E7.EKt.fnt.rs,C32.E7.O7t.unt.DKt,C32.E7.O7t.unt.a4,C32.E7._7.T7.$pt,C32.hlt._ne.fnt.ghe,C32.hlt._ne.T7.ohe,C32.E7._7.fnt.TWt,C32.hlt.Uoe.fnt.Cae,C32.hlt._ne.T7.lu,C32.E7.qrt.unt.oTt,C32.E7.qrt.T7.SHt,C32.E7.O7t.T7.K7t,C32.E7.H9t.unt._f,C32.E7.H9t.fnt.GQt,C32.hlt.Nue.unt.cfe,C32.hlt.Uoe.T7.cae,C32.hlt.poe.unt.Noe,C32.E7.qrt.unt.Ck,C32.E7.qrt.T7.wTt,C32.E7._7.unt.d5t,C32.E7._7.unt.c5t,C32.E7.qrt.unt.xHt,C32.E7._7.T7.N4t,C32.E7.qrt.fnt.K_t,C32.hlt.poe.fnt.Woe,C32.hlt.nlt.unt.X_t,C32.E7.qrt.T7.byt,C32.hlt.nlt.T7.IsPlaying,C32.hlt.nlt.unt.Ile,C32.hlt.nlt.fnt.She,C32.hlt.nlt.T7.ple,C32.hlt._ne.unt.lhe,C32.E7.qrt.unt.yTt,C32.E7.qrt.unt.ky,C32.E7._7.T7.F4t,C32.E7.qrt.unt.uM,C32.E7.qrt.T7.a_t,C32.E7.H9t.T7.byt,C32.E7.H9t.unt.Ck,C32.E7.H9t.unt.mQt,C32.E7.qrt.fnt.v_t,C32.E7.qrt.unt.kyt,C32.E7.qrt.unt.tTt,C32.E7.qrt.T7.EHt,C32.hlt.xce.unt.whe,C32.hlt.xce.unt.Eue,C32.hlt.xce.unt.wue,C32.hlt.xce.fnt.bue,C32.hlt.xce.fnt.vue,C32.hlt.poe.unt.$oe,C32.E7._7.fnt.BWt,C32.E7._7.fnt.ZWt,C32.E7.qrt.fnt.LHt,C32.E7.qrt.fnt.XHt,C32.E7._7.unt.M5t,C32.E7.Audio.T7.dXt,C32.E7._7.T7.j4t,C32.E7.Touch.T7.S8t,C32.E7.Touch.T7.g8t,C32.E7._7.unt.h5t,C32.E7.Audio.unt.ynt,C32.E7.qrt.unt.STt,C32.E7.qrt.unt.ym,C32.E7.ute.unt.ise,C32.E7.qrt.T7.gTt,C32.E7.EKt.unt.GKt,C32.E7.Date.fnt.n7t,C32.E7.Gqt.unt.aKt,C32.E7.EKt.fnt.S_t,C32.E7.H9t.T7.QTt,C32.E7.qrt.fnt.dTt,C32.E7.qrt.fnt.jHt,C32.E7.O7t.fnt.S_t,C32.E7.Gqt.T7.iKt,C32.E7.H9t.unt.dQt,C32.E7.H9t.T7.UZt,C32.E7.H9t.unt.Gyt,C32.E7.qrt.unt.Oyt,C32.E7.H9t.unt.l_t,C32.E7.O7t.fnt.W7t,C32.E7.H9t.fnt.R_t,C32.E7.H9t.fnt.M_t,C32.E7.H9t.T7.o_t,C32.E7.mJt.unt.oTt,C32.E7.H9t.T7.zTt,C32.E7.H9t.unt.h_t,C32.E7.H9t.unt.iTt,C32.hlt.gfe.T7._fe,C32.E7.Touch.fnt.M_t,C32.E7.qrt.unt.Wy,C32.hlt.one.unt.X_t,C32.E7.H9t.T7.cQt,C32.E7._7.fnt.OUt,C32.E7.Gqt.unt.fKt,C32.E7.Gqt.T7.Qqt,C32.E7.Gqt.unt.cKt,C32.E7.Gqt.T7.Yqt,C32.E7.EKt.unt.DKt,C32.E7.Gqt.fnt.gKt,C32.E7.Gqt.T7.tKt,C32.E7.EKt.T7.sKt,C32.hlt.Bfe.unt.Bfe]},self.oBt=[{Qfe:0},{t0e:0},{e0e:0},{s0e:0},{i0e:0},{aDt:0},{r0e:0},{n0e:0},{h0e:0},{o0e:0},{Audio:0},{Ss:0},{Keyboard:0},{Gqt:0},{a0e:0},{Touch:0},{Date:0},{l0e:0},{c0e:0},{u0e:0},{f0e:0},{d0e:0},{p0e:0},{g:0},{b:0},{m0e:0},{index:0},{C0e:0},{yhe:0},{bhe:0},{poe:0},{g0e:0},{S0e:0},{y0e:0},{T0e:0},{_0e:0},{E0e:0},{A0e:0},{Uoe:0},{I0e:0},{w0e:0},{R0e:0},{M0e:0},{b0e:0},{v0e:0},{x0e:0},{speed:0},{G0e:0},{points:0},{P0e:0},{O0e:0},{D0e:0},{L0e:0},{lock:0},{N0e:0},{F0e:0},{k0e:0},{nlt:0},{B0e:0},{$0e:0},{W0e:0},{U0e:0},{V0e:0},{H0e:0},{j0e:0},{X0e:0},{Y0e:0},{scale:0},{q0e:0},{K0e:0},{z0e:0},{J0e:0},{Z0e:0},{X9t:0},{Q0e:0},{tde:0},{lines:0},{ede:0},{sde:0},{ide:0},{rde:0},{nde:0},{collect:0},{hde:0},{ode:0},{ade:0},{lde:0},{cde:0},{ude:0},{fde:0},{dde:0},{pde:0},{mde:0},{Cde:0},{gde:0},{Sde:0},{yde:0},{Tde:0},{_de:0},{Ede:0},{Ade:0},{Ide:0},{wde:0},{Rde:0},{left:0},{xce:0},{Mde:0},{bde:0},{vde:0},{xde:0},{Gde:0},{Pde:0},{Ode:0},{Dde:0},{Lde:0},{Nde:0},{Fde:0},{kde:0},{Bde:0},{$de:0},{Wde:0},{Ude:0},{Vde:0},{Hde:0},{jde:0},{Xde:0},{Yde:0},{qde:0},{Kde:0},{zde:0},{Jde:0},{Zde:0},{Qde:0},{t3e:0},{e3e:0},{s3e:0},{i3e:0},{r3e:0},{n3e:0},{h3e:0},{o3e:0},{a3e:0},{l3e:0},{c3e:0},{u3e:0},{f3e:0},{Nue:0},{d3e:0},{p3e:0},{destination:0},{m3e:0},{C3e:0},{g3e:0},{S3e:0},{y3e:0},{T3e:0},{_3e:0},{E3e:0},{A3e:0},{I3e:0},{w3e:0},{R3e:0},{M3e:0},{hand:0},{b3e:0},{v3e:0},{x3e:0},{G3e:0},{P3e:0},{O3e:0},{D3e:0},{L3e:0},{N3e:0},{F3e:0},{k3e:0},{B3e:0},{$3e:0},{W3e:0},{U3e:0},{V3e:0},{H3e:0},{j3e:0},{X3e:0},{Y3e:0},{q3e:0},{K3e:0},{z3e:0},{J3e:0},{note:0},{Z3e:0},{Q3e:0},{active:0},{tpe:0},{epe:0},{spe:0},{"10kRock":0},{"100kRock":0},{grow:0},{hide:0},{ipe:0},{rpe:0},{npe:0},{hpe:0},{ope:0},{ape:0},{lpe:0},{cpe:0},{upe:0},{fpe:0},{dpe:0},{ppe:0},{mpe:0},{Cpe:0},{gpe:0},{Spe:0},{ype:0},{Tpe:0},{separator:0},{qrt:0},{notification:0},{_pe:0},{Epe:0},{Ape:0},{Ipe:0},{wpe:0},{Rpe:0},{Mpe:0},{bpe:0},{vpe:0},{xpe:0},{Gpe:0},{Ppe:0},{Ope:0},{Dpe:0},{Lpe:0},{Bfe:0},{Npe:0},{Fpe:0},{kpe:0},{Bpe:0},{$pe:0},{Wpe:0},{Upe:0},{Vpe:0},{Hpe:0},{jpe:0},{Xpe:0},{Ype:0},{qpe:0},{Kpe:0},{zpe:0},{Jpe:0},{Zpe:0},{Qpe:0},{tme:0},{eme:0},{sme:0},{ime:0},{rme:0},{nme:0},{hme:0},{ome:0},{ame:0},{lme:0},{cme:0},{ume:0},{fme:0},{dme:0},{pme:0},{mme:0},{Cme:0},{depth:0},{gme:0},{Sme:0},{buttons:0},{yme:0},{Tme:0},{_me:0},{Eme:0},{Ame:0},{Ime:0},{wme:0},{Rme:0},{Mme:0},{bme:0},{start:0},{vme:0},{xme:0},{Gme:0},{Pme:0},{reload:0},{volume:0},{Ome:0},{Dme:0},{Lme:0},{Nme:0},{Fme:0},{kme:0},{Bme:0},{$me:0},{Wme:0},{Ume:0},{Vme:0},{Hme:0},{jme:0},{ehe:0},{scheme:0},{Xme:0},{Yme:0},{qme:0},{Lfe:0},{Kme:0},{pauseTime:0},{Wc:0},{zme:0},{Jme:0},{Zme:0},{Qme:0},{tCe:0},{eCe:0},{sCe:0},{iCe:0},{rCe:0},{nCe:0},{hCe:0},{oCe:0},{aCe:0},{lCe:0},{cCe:0},{uCe:0},{fCe:0},{dCe:0},{pCe:0},{mCe:0},{CCe:0},{gCe:0},{SCe:0},{yCe:0},{TCe:0},{_Ce:0},{ECe:0},{ACe:0},{ICe:0},{wCe:0},{RCe:0},{MCe:0},{bCe:0}],self.vCe={t0e:class extends self.oHt{},e0e:class extends self.oHt{},aDt:class extends self.oHt{},h0e:class extends self.oHt{},o0e:class extends self.oHt{},Audio:class extends self.jB{},Ss:class extends self.jB{},Keyboard:class extends self.jB{},Gqt:class extends self.jB{},a0e:class extends self.RKt{},Touch:class extends self.jB{},Date:class extends self.jB{},l0e:class extends self.X7t{},c0e:class extends self.X7t{},u0e:class extends self.X7t{},f0e:class extends self.X7t{},g0e:class extends self.oHt{},E0e:class extends self.oHt{},w0e:class extends self.oHt{},k0e:class extends self.oHt{},B0e:class extends self.oHt{},$0e:class extends self.oHt{},W0e:class extends self.oHt{},U0e:class extends self.oHt{},V0e:class extends self.oHt{},H0e:class extends self.s9t{},j0e:class extends self.oHt{},X0e:class extends self.oHt{},q0e:class extends self.oHt{},z0e:class extends self.oHt{},J0e:class extends self.oHt{},Z0e:class extends self.oHt{},X9t:class extends self.ZZt{},Q0e:class extends self.s9t{},tde:class extends self.oHt{},lines:class extends self.oHt{},ede:class extends self.oHt{},sde:class extends self.s9t{},ide:class extends self.oHt{},rde:class extends self.oHt{},nde:class extends self.oHt{},hde:class extends self.oHt{},ade:class extends self.oHt{},lde:class extends self.oHt{},cde:class extends self.oHt{},ude:class extends self.oHt{},fde:class extends self.oHt{},dde:class extends self.oHt{},pde:class extends self.oHt{},mde:class extends self.oHt{},Cde:class extends self.oHt{},gde:class extends self.oHt{},Sde:class extends self.oHt{},yde:class extends self.oHt{},Tde:class extends self.oHt{},_de:class extends self.oHt{},Ede:class extends self.oHt{},Ade:class extends self.oHt{},wde:class extends self.oHt{},Rde:class extends self.oHt{},Mde:class extends self.oHt{},bde:class extends self.oHt{},vde:class extends self.oHt{},xde:class extends self.oHt{},Gde:class extends self.oHt{},Pde:class extends self.oHt{},Ode:class extends self.oHt{},Dde:class extends self.oHt{},Lde:class extends self.oHt{},Nde:class extends self.oHt{},Fde:class extends self.oHt{},kde:class extends self.oHt{},Bde:class extends self.oHt{},$de:class extends self.oHt{},Wde:class extends self.oHt{},Ude:class extends self.oHt{},Vde:class extends self.oHt{},Hde:class extends self.oHt{},jde:class extends self.oHt{},Xde:class extends self.oHt{},Yde:class extends self.oHt{},qde:class extends self.oHt{},Kde:class extends self.ZZt{},zde:class extends self.ZZt{},Jde:class extends self.ZZt{},Zde:class extends self.oHt{},Qde:class extends self.oHt{},t3e:class extends self.oHt{},e3e:class extends self.s9t{},s3e:class extends self.oHt{},i3e:class extends self.oHt{},r3e:class extends self.oHt{},n3e:class extends self.oHt{},h3e:class extends self.oHt{},o3e:class extends self.oHt{},a3e:class extends self.oHt{},l3e:class extends self.s9t{},c3e:class extends self.oHt{},u3e:class extends self.oHt{},f3e:class extends self.oHt{},d3e:class extends self.ZZt{},p3e:class extends self.oHt{},C3e:class extends self.oHt{},S3e:class extends self.oHt{},y3e:class extends self.oHt{},T3e:class extends self.oHt{},T0e:class extends self.oHt{},_0e:class extends self.oHt{},_3e:class extends self.oHt{},E3e:class extends self.oHt{},A3e:class extends self.oHt{},I3e:class extends self.oHt{},w3e:class extends self.oHt{},R3e:class extends self.s9t{},M3e:class extends self.oHt{},hand:class extends self.oHt{},O3e:class extends self.oHt{},D3e:class extends self.s9t{},L3e:class extends self.ZZt{},N3e:class extends self.oHt{},F3e:class extends self.ZZt{},k3e:class extends self.oHt{},B3e:class extends self.oHt{},$3e:class extends self.oHt{},W3e:class extends self.oHt{},U3e:class extends self.oHt{},V3e:class extends self.oHt{},H3e:class extends self.oHt{},j3e:class extends self.oHt{},X3e:class extends self.oHt{},Y3e:class extends self.oHt{},q3e:class extends self.oHt{},z3e:class extends self.oHt{},J3e:class extends self.oHt{},note:class extends self.oHt{},G0e:class extends self.oHt{},Z3e:class extends self.oHt{},Q3e:class extends self.oHt{},tpe:class extends self.oHt{},epe:class extends self.oHt{},spe:class extends self.oHt{},xCe:class extends self.oHt{},GCe:class extends self.oHt{},ipe:class extends self.oHt{},rpe:class extends self.oHt{},npe:class extends self.ZZt{},hpe:class extends self.oHt{},ope:class extends self.oHt{},ape:class extends self.oHt{},lpe:class extends self.oHt{},cpe:class extends self.oHt{},upe:class extends self.oHt{},fpe:class extends self.oHt{},dpe:class extends self.Nee{},ppe:class extends self.oHt{},mpe:class extends self.oHt{},Cpe:class extends self.oHt{},gpe:class extends self.oHt{},Spe:class extends self.oHt{},ype:class extends self.oHt{},Tpe:class extends self.oHt{},separator:class extends self.oHt{},qrt:class extends self.oHt{},notification:class extends self.oHt{},_pe:class extends self.oHt{},Epe:class extends self.oHt{},Ape:class extends self.oHt{},Ipe:class extends self.ZZt{},wpe:class extends self.oHt{},Rpe:class extends self.oHt{},Mpe:class extends self.oHt{},bpe:class extends self.oHt{},vpe:class extends self.oHt{},xpe:class extends self.oHt{},Gpe:class extends self.ZZt{},Ppe:class extends self.s9t{},Ope:class extends self.oHt{},Dpe:class extends self.M5{},Lpe:class extends self.oHt{},Npe:class extends self.ZZt{},Fpe:class extends self.oHt{},kpe:class extends self.oHt{},Bpe:class extends self.ZZt{},$pe:class extends self.oHt{},Wpe:class extends self.oHt{},Upe:class extends self.oHt{},Vpe:class extends self.ZZt{},Hpe:class extends self.ZZt{},jpe:class extends self.oHt{},Xpe:class extends self.oHt{},Ype:class extends self.oHt{},qpe:class extends self.oHt{},Kpe:class extends self.oHt{},zpe:class extends self.oHt{},Jpe:class extends self.ZZt{},Zpe:class extends self.oHt{},Qpe:class extends self.oHt{},tme:class extends self.ZZt{},eme:class extends self.RKt{},sme:class extends self.RKt{},ime:class extends self.oHt{},rme:class extends self.oHt{},nme:class extends self.oHt{},hme:class extends self.oHt{},ome:class extends self.oHt{},ame:class extends self.Xre{},lme:class extends self.Xre{},cme:class extends self.RKt{},ume:class extends self.oHt{},fme:class extends self.oHt{},dme:class extends self.oHt{},pme:class extends self.ZZt{},mme:class extends self.oHt{},Cme:class extends self.oHt{},depth:class extends self.oHt{},Sme:class extends self.oHt{},buttons:class extends self.oHt{},yme:class extends self.oHt{},Tme:class extends self.oHt{},_me:class extends self.oHt{}};